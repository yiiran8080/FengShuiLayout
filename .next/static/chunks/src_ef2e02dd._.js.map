{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/i18n/routing.ts"],"sourcesContent":["import { defineRouting } from \"next-intl/routing\";\n\nexport const routing = defineRouting({\n  // A list of all locales that are supported\n  locales: [\"zh-CN\", \"zh-TW\"],\n\n  // Used when no locale matches\n  defaultLocale: \"zh-TW\",\n});\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,UAAU,CAAA,GAAA,qOAAA,CAAA,gBAAa,AAAD,EAAE;IACnC,2CAA2C;IAC3C,SAAS;QAAC;QAAS;KAAQ;IAE3B,8BAA8B;IAC9B,eAAe;AACjB","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/i18n/navigation.ts"],"sourcesContent":["import { createNavigation } from \"next-intl/navigation\";\nimport { routing } from \"./routing\";\n\n// Lightweight wrappers around Next.js' navigation\n// APIs that consider the routing configuration\nexport const { Link, redirect, usePathname, useRouter, getPathname } =\n  createNavigation(routing);\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;AAIO,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,GAClE,CAAA,GAAA,iQAAA,CAAA,mBAAgB,AAAD,EAAE,yHAAA,CAAA,UAAO","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/BirthdayModal.jsx"],"sourcesContent":["import React, { useState } from \"react\";\n\nconst BirthdayModal = ({\n\tisOpen,\n\tonClose,\n\tonSubmit,\n\tconcern,\n\tisCoupleAnalysis = false,\n}) => {\n\t// 單人資料\n\tconst [birthday, setBirthday] = useState(\"\");\n\tconst [gender, setGender] = useState(\"\");\n\n\t// 雙人資料（合婚分析用）\n\tconst [userBirthday, setUserBirthday] = useState(\"\");\n\tconst [userGender, setUserGender] = useState(\"\");\n\tconst [partnerBirthday, setPartnerBirthday] = useState(\"\");\n\tconst [partnerGender, setPartnerGender] = useState(\"\");\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\n\t\tconsole.log(\"🔍 Form submission attempt:\");\n\t\tconsole.log(\"isCoupleAnalysis:\", isCoupleAnalysis);\n\t\tconsole.log(\"userBirthday:\", userBirthday);\n\t\tconsole.log(\"userGender:\", userGender);\n\t\tconsole.log(\"partnerBirthday:\", partnerBirthday);\n\t\tconsole.log(\"partnerGender:\", partnerGender);\n\n\t\tif (isCoupleAnalysis) {\n\t\t\t// 合婚分析：需要雙方資料\n\t\t\tif (\n\t\t\t\tuserBirthday &&\n\t\t\t\tuserGender &&\n\t\t\t\tpartnerBirthday &&\n\t\t\t\tpartnerGender\n\t\t\t) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"✅ All couple analysis fields filled, submitting...\"\n\t\t\t\t);\n\t\t\t\tonSubmit({\n\t\t\t\t\tuserBirthday,\n\t\t\t\t\tuserGender,\n\t\t\t\t\tpartnerBirthday,\n\t\t\t\t\tpartnerGender,\n\t\t\t\t\tisCoupleAnalysis: true,\n\t\t\t\t});\n\t\t\t\t// 清空表單\n\t\t\t\tsetUserBirthday(\"\");\n\t\t\t\tsetUserGender(\"\");\n\t\t\t\tsetPartnerBirthday(\"\");\n\t\t\t\tsetPartnerGender(\"\");\n\t\t\t} else {\n\t\t\t\tconsole.log(\"❌ Missing required fields for couple analysis:\");\n\t\t\t\tconsole.log(\"- userBirthday:\", userBirthday ? \"✓\" : \"✗\");\n\t\t\t\tconsole.log(\"- userGender:\", userGender ? \"✓\" : \"✗\");\n\t\t\t\tconsole.log(\"- partnerBirthday:\", partnerBirthday ? \"✓\" : \"✗\");\n\t\t\t\tconsole.log(\"- partnerGender:\", partnerGender ? \"✓\" : \"✗\");\n\t\t\t}\n\t\t} else {\n\t\t\t// 個人分析：只需要個人資料\n\t\t\tif (birthday && gender) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"✅ All individual analysis fields filled, submitting...\"\n\t\t\t\t);\n\t\t\t\tonSubmit({ birthday, gender, isCoupleAnalysis: false });\n\t\t\t\tsetBirthday(\"\");\n\t\t\t\tsetGender(\"\");\n\t\t\t} else {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"❌ Missing required fields for individual analysis:\"\n\t\t\t\t);\n\t\t\t\tconsole.log(\"- birthday:\", birthday ? \"✓\" : \"✗\");\n\t\t\t\tconsole.log(\"- gender:\", gender ? \"✓\" : \"✗\");\n\t\t\t}\n\t\t}\n\t};\n\n\tif (!isOpen) return null;\n\n\treturn (\n\t\t<div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n\t\t\t<div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n\t\t\t\t<h3 className=\"text-xl font-bold mb-4 text-center\">\n\t\t\t\t\t📅 {isCoupleAnalysis ? \"合婚分析資料收集\" : \"生辰資料收集\"}\n\t\t\t\t</h3>\n\n\t\t\t\t<p className=\"text-gray-600 mb-6 text-center\">\n\t\t\t\t\t為了為你{isCoupleAnalysis ? \"們\" : \"\"}提供更精準嘅{concern}\n\t\t\t\t\t分析，需要{isCoupleAnalysis ? \"雙方\" : \"你\"}嘅基本資料：\n\t\t\t\t</p>\n\n\t\t\t\t<form onSubmit={handleSubmit} className=\"space-y-4\">\n\t\t\t\t\t{isCoupleAnalysis ? (\n\t\t\t\t\t\t// 合婚分析：雙人表單\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* 用戶資料 */}\n\t\t\t\t\t\t\t<div className=\"border-l-4 border-blue-500 pl-4\">\n\t\t\t\t\t\t\t\t<h4 className=\"font-semibold text-gray-800 mb-3\">\n\t\t\t\t\t\t\t\t\t👤 你的資料\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t出生日期 *\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={userBirthday}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserBirthday(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t性別 *\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-4\">\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"male\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserGender === \"male\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetUserGender(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t男性\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"female\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserGender === \"female\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetUserGender(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t女性\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* 伴侶資料 */}\n\t\t\t\t\t\t\t<div className=\"border-l-4 border-pink-500 pl-4\">\n\t\t\t\t\t\t\t\t<h4 className=\"font-semibold text-gray-800 mb-3\">\n\t\t\t\t\t\t\t\t\t💕 對方資料\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t出生日期 *\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={partnerBirthday}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetPartnerBirthday(\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t性別 *\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-4\">\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"male\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpartnerGender === \"male\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPartnerGender(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t男性\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"female\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpartnerGender ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"female\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPartnerGender(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t女性\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t// 個人分析：單人表單\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\t出生日期 *\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\tvalue={birthday}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetBirthday(e.target.value)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\t性別 *\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<div className=\"flex space-x-4\">\n\t\t\t\t\t\t\t\t\t<label className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"male\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={gender === \"male\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetGender(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t男性\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"female\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={gender === \"female\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetGender(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t女性\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<div className=\"bg-blue-50 p-3 rounded-md\">\n\t\t\t\t\t\t<p className=\"text-sm text-blue-800\">\n\t\t\t\t\t\t\t📋 我們會根據你嘅八字五行提供：\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t• 個人性格分析\n\t\t\t\t\t\t\t<br />• {concern}運勢評估\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t• 具體改善建議\n\t\t\t\t\t\t\t<br />• 風水方案\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex space-x-3 pt-4\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t\tclassName=\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t稍後再說\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t提交資料\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\n\t\t\t\t<p className=\"text-xs text-gray-500 mt-4 text-center\">\n\t\t\t\t\t🔒 你嘅個人資料會被安全保護\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default BirthdayModal;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/types/room.js"],"sourcesContent":["export const ITEM_TYPES = {\n  ROOM: 'room',\n  FURNITURE: 'furniture'\n}\n\nexport const ROOM_TYPES = {\n  LIVING_ROOM: 'living_room',\n  DINING_ROOM: 'dining_room',\n  STORAGE_ROOM: 'storage_room',\n  STUDY_ROOM: 'study_room',\n  BEDROOM: 'bedroom',\n  BATHROOM: 'bathroom',\n  KITCHEN: 'kitchen',\n  BALCONY: 'balcony',\n  GARDEN: 'garden',\n  GARAGE: 'garage',\n  CORRIDOR: 'corridor',\n}\n\nexport const FURNITURE_TYPES = {\n  BED: 'bed',\n  SOFA: 'sofa',\n  TABLE: 'table',\n  CHAIR: 'chair',\n  CABINET: 'cabinet',\n  TV: 'tv',\n  LAMP: 'lamp',\n  DOOR: 'door',\n  WINDOW: 'window',\n  BOOKSHELF: 'bookshelf',\n  WARDROBE: 'wardrobe',\n  PLANT: 'plant',\n  FRIDGE: 'fridge',\n  STOVE: 'stove',\n  SINK: 'sink',\n  WASHBASIN: 'washbasin',\n  TOILET: 'toilet',\n  SHOWER: 'shower',\n  BATHTUB: 'bathtub'\n};\nexport const FURNITURE_TYPES_LABEL_CN = {\n  [FURNITURE_TYPES.DOOR]: '门',\n  [FURNITURE_TYPES.WINDOW]: '窗',\n  [FURNITURE_TYPES.TABLE]: '枱',\n  [FURNITURE_TYPES.CHAIR]: '椅子',\n  [FURNITURE_TYPES.SOFA]: '沙发',\n  [FURNITURE_TYPES.BED]: '床',\n  [FURNITURE_TYPES.LAMP]: '儿童床',\n  [FURNITURE_TYPES.TV]: '电视',\n  [FURNITURE_TYPES.BOOKSHELF]: '茶几',\n  [FURNITURE_TYPES.WARDROBE]: '柜',\n  [FURNITURE_TYPES.PLANT]: '植物',\n  [FURNITURE_TYPES.FRIDGE]: '冰箱',\n  [FURNITURE_TYPES.STOVE]: '炉具',\n  [FURNITURE_TYPES.SINK]: '锌盘',\n  [FURNITURE_TYPES.WASHBASIN]: '洗手盘',\n  [FURNITURE_TYPES.TOILET]: '马桶',\n  [FURNITURE_TYPES.SHOWER]: '淋浴',\n  [FURNITURE_TYPES.BATHTUB]: '浸浴'\n};\nexport const FURNITURE_TYPES_LABEL_TW = {\n  [FURNITURE_TYPES.DOOR]: '門',\n  [FURNITURE_TYPES.WINDOW]: '窗',\n  [FURNITURE_TYPES.TABLE]: '枱',\n  [FURNITURE_TYPES.CHAIR]: '椅子',\n  [FURNITURE_TYPES.SOFA]: '沙發',\n  [FURNITURE_TYPES.BED]: '床',\n  [FURNITURE_TYPES.LAMP]: '兒童床',\n  [FURNITURE_TYPES.TV]: '電視',\n  [FURNITURE_TYPES.BOOKSHELF]: '茶几',\n  [FURNITURE_TYPES.WARDROBE]: '櫃',\n  [FURNITURE_TYPES.PLANT]: '植物',\n  [FURNITURE_TYPES.FRIDGE]: '冰箱',\n  [FURNITURE_TYPES.STOVE]: '爐具',\n  [FURNITURE_TYPES.SINK]: '锌盘',\n  [FURNITURE_TYPES.WASHBASIN]: '洗手盤',\n  [FURNITURE_TYPES.TOILET]: '馬桶',\n  [FURNITURE_TYPES.SHOWER]: '淋浴',\n  [FURNITURE_TYPES.BATHTUB]: '浸浴'\n};\nexport const ROOM_TYPES_LABEL_CN = {\n  [ROOM_TYPES.LIVING_ROOM]: \"客厅\", // 客厅\n  [ROOM_TYPES.DINING_ROOM]: \"饭厅\", // 饭厅\n  [ROOM_TYPES.STORAGE_ROOM]: \"杂物房\", // 储物室\n  [ROOM_TYPES.STUDY_ROOM]: \"书房\", // 书房\n  [ROOM_TYPES.BEDROOM]: \"睡房\", // 睡房\n  [ROOM_TYPES.BATHROOM]: \"浴室\", // 浴室\n  [ROOM_TYPES.KITCHEN]: \"厨房\", // 厨房\n  [ROOM_TYPES.BALCONY]: \"阳台\", // 阳台\n  [ROOM_TYPES.GARDEN]: \"花园\", // 花园\n  [ROOM_TYPES.GARAGE]: \"车库\", // 车库\n  [ROOM_TYPES.CORRIDOR]: \"走廊\", // 走廊\n};\nexport const ROOM_TYPES_LABEL_TW = {\n  [ROOM_TYPES.LIVING_ROOM]: \"客廳\",\n  [ROOM_TYPES.DINING_ROOM]: \"飯廳\", // 或 \"餐廳\"\n  [ROOM_TYPES.STORAGE_ROOM]: \"雜物房\",\n  [ROOM_TYPES.STUDY_ROOM]: \"書房\",\n  [ROOM_TYPES.BEDROOM]: \"睡房\", // 或 \"臥室\"\n  [ROOM_TYPES.BATHROOM]: \"浴室\",\n  [ROOM_TYPES.KITCHEN]: \"廚房\",\n  [ROOM_TYPES.BALCONY]: \"陽台\",\n  [ROOM_TYPES.GARDEN]: \"花園\",\n  [ROOM_TYPES.GARAGE]: \"車庫\",\n  [ROOM_TYPES.CORRIDOR]: \"走廊\",\n};\nexport const ROOM_COLORS = {\n  [ROOM_TYPES.LIVING_ROOM]: \"#F0DF9C\", // 客厅\n  [ROOM_TYPES.DINING_ROOM]: \"#F5D4BC\", // 饭厅\n  [ROOM_TYPES.STORAGE_ROOM]: \"#ADC0BC\", // 储物室\n  [ROOM_TYPES.STUDY_ROOM]: \"#B0B8C9\", // 书房\n  [ROOM_TYPES.BEDROOM]: \"#F5B8B8\", // 睡房\n  [ROOM_TYPES.BATHROOM]: \"#C1D7E2\", // 浴室\n  [ROOM_TYPES.KITCHEN]: \"#EDE0C6\", // 厨房\n  [ROOM_TYPES.BALCONY]: \"#D0DCAA\", // 阳台\n  [ROOM_TYPES.GARDEN]: \"#AACDBC\", // 花园\n  [ROOM_TYPES.GARAGE]: \"#C7C7DD\", // 车库\n  [ROOM_TYPES.CORRIDOR]: \"#CDCDCD\", // 走廊\n\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\nimport { ROOM_TYPES_LABEL_CN, ROOM_TYPES_LABEL_TW } from \"@/types/room\";\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function getBirthDate(birthDateTime: string) {\n  const date = new Date(birthDateTime);\n  return {\n    year: date.getFullYear().toString(),\n    month: (date.getMonth() + 1).toString().padStart(2, \"0\"),\n    day: date.getDate().toString().padStart(2, \"0\"),\n    hour: date.getHours().toString().padStart(2, \"0\"),\n  };\n}export function splitLongString(longString: string, maxLength: number) {\n  const result = [];\n  let startIndex = 0;\n\n  while (startIndex < longString.length) {\n    let endIndex = startIndex + maxLength;\n    if (endIndex > longString.length) {\n      endIndex = longString.length;\n    }\n    result.push(longString.substring(startIndex, endIndex));\n    startIndex = endIndex;\n  }\n\n  return result;\n}\n\nexport function getRoomLabel(roomId: string, locale: string) {\n  const roomType = roomId.split(\"-\")[0];\n  const no = roomId.split(\"-\")[1];\n  if (locale === \"zh-CN\") {\n    return ROOM_TYPES_LABEL_CN[roomType] + \"-\" + no;\n  }\n  return ROOM_TYPES_LABEL_TW[roomType] + \"-\" + no;\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AACO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB;AAEO,SAAS,aAAa,aAAqB;IAChD,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO;QACL,MAAM,KAAK,WAAW,GAAG,QAAQ;QACjC,OAAO,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;QACpD,KAAK,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;QAC3C,MAAM,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC/C;AACF;AAAQ,SAAS,gBAAgB,UAAkB,EAAE,SAAiB;IACpE,MAAM,SAAS,EAAE;IACjB,IAAI,aAAa;IAEjB,MAAO,aAAa,WAAW,MAAM,CAAE;QACrC,IAAI,WAAW,aAAa;QAC5B,IAAI,WAAW,WAAW,MAAM,EAAE;YAChC,WAAW,WAAW,MAAM;QAC9B;QACA,OAAO,IAAI,CAAC,WAAW,SAAS,CAAC,YAAY;QAC7C,aAAa;IACf;IAEA,OAAO;AACT;AAEO,SAAS,aAAa,MAAc,EAAE,MAAc;IACzD,MAAM,WAAW,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE;IACrC,MAAM,KAAK,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE;IAC/B,IAAI,WAAW,SAAS;QACtB,OAAO,uHAAA,CAAA,sBAAmB,CAAC,SAAS,GAAG,MAAM;IAC/C;IACA,OAAO,uHAAA,CAAA,sBAAmB,CAAC,SAAS,GAAG,MAAM;AAC/C","debugId":null}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n          className\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: \"default\" | \"destructive\"\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1101, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/lib/emitter.ts"],"sourcesContent":["import mitt from \"mitt\";\n\nconst emitter = mitt();\n\nexport default emitter;\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,UAAU,CAAA,GAAA,wIAAA,CAAA,UAAI,AAAD;uCAEJ","debugId":null}},
    {"offset": {"line": 1117, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/types/constants.js"],"sourcesContent":["export const EVENT_TRANSLATE_STATUS = \"E_K_TRANSLATE\";"],"names":[],"mappings":";;;AAAO,MAAM,yBAAyB","debugId":null}},
    {"offset": {"line": 1130, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/LanguageToggle.jsx"],"sourcesContent":["'use client';\nimport { Link } from '@/i18n/navigation';\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { ChevronDownIcon } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport emitter from '@/lib/emitter';\nimport { EVENT_TRANSLATE_STATUS } from '@/types/constants'\nimport { useTranslations } from \"next-intl\";\nimport { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\nexport default function LanguageToggle({ className, trigger }) {\n  const pathname = usePathname();\n  let href = `/${pathname.split('/').slice(2).join('/')}`;\n  // const [transStatus, setTransStatus] = useState(false)\n  const t = useTranslations('toast');\n  // useEffect(() => {\n  //   function load(transStatus) {  //     setTransStatus(transStatus)\n  //   }\n  //   emitter.on(EVENT_TRANSLATE_STATUS, load)\n  //   return () => {\n  //     emitter.off(EVENT_TRANSLATE_STATUS, load)\n  //   }\n  // }, [])\n  // const onToggle = e => {\n  //   if (pathname.indexOf('report') > -1 && transStatus) {\n  //     e.preventDefault();\n  //     toast.info(t('translating'));\n  //   }\n  // }\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild className={cn(\"cursor-pointer flex items-center space-x-1 text-white hover:opacity-80\", className)}>\n        <div>{\n          trigger ? trigger : pathname.startsWith('/zh-CN') ? '简体中文' : '繁體中文'\n        } <ChevronDownIcon className=\"w-4 h-4\" /></div>\n\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"bg-white rounded-lg shadow-lg p-1 min-w-[120px]\">\n        <DropdownMenuItem className=\"focus:bg-inherit\">\n          <Link\n            // onClick={onToggle}\n            href={href}\n            locale=\"zh-CN\"\n            className=\"px-4 py-2 text-sm  hover:text-primary rounded text-foreground\"\n          >\n            简体中文\n          </Link>\n        </DropdownMenuItem>\n        <DropdownMenuItem className=\"focus:bg-inherit\">\n          <Link\n\n            // onClick={onToggle}\n            href={href}\n            locale=\"zh-TW\"\n            className=\"px-4 py-2 text-sm hover:text-primary rounded text-foreground\"\n          >\n            繁體中文\n          </Link>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n\n    </DropdownMenu>\n  )\n\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAhBA;;;;;;;;;;;AAiBe,SAAS,eAAe,EAAE,SAAS,EAAE,OAAO,EAAE;;IAC3D,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,IAAI,OAAO,CAAC,CAAC,EAAE,SAAS,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM;IACvD,wDAAwD;IACxD,MAAM,IAAI,CAAA,GAAA,yMAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,oBAAoB;IACpB,qEAAqE;IACrE,MAAM;IACN,6CAA6C;IAC7C,mBAAmB;IACnB,gDAAgD;IAChD,MAAM;IACN,SAAS;IACT,0BAA0B;IAC1B,0DAA0D;IAC1D,0BAA0B;IAC1B,oCAAoC;IACpC,MAAM;IACN,IAAI;IACJ,qBACE,6LAAC,+IAAA,CAAA,eAAY;;0BACX,6LAAC,+IAAA,CAAA,sBAAmB;gBAAC,OAAO;gBAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,0EAA0E;0BACnH,cAAA,6LAAC;;wBACC,UAAU,UAAU,SAAS,UAAU,CAAC,YAAY,SAAS;wBAC9D;sCAAC,6LAAC,2NAAA,CAAA,kBAAe;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAG/B,6LAAC,+IAAA,CAAA,sBAAmB;gBAAC,WAAU;;kCAC7B,6LAAC,+IAAA,CAAA,mBAAgB;wBAAC,WAAU;kCAC1B,cAAA,6LAAC,4HAAA,CAAA,OAAI;4BACH,qBAAqB;4BACrB,MAAM;4BACN,QAAO;4BACP,WAAU;sCACX;;;;;;;;;;;kCAIH,6LAAC,+IAAA,CAAA,mBAAgB;wBAAC,WAAU;kCAC1B,cAAA,6LAAC,4HAAA,CAAA,OAAI;4BAEH,qBAAqB;4BACrB,MAAM;4BACN,QAAO;4BACP,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AASX;GAtDwB;;QACL,qIAAA,CAAA,cAAW;QAGlB,yMAAA,CAAA,kBAAe;;;KAJH","debugId":null}},
    {"offset": {"line": 1274, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/utils/regionDetection.js"],"sourcesContent":["/**\n * Region Detection Utility\n * Detects user's region (China, Hong Kong, Taiwan) for currency and locale selection\n */\n\n/**\n * Detect user's region based on IP geolocation\n * @returns {Promise<string>} - 'china', 'hongkong', or 'taiwan' (default)\n */\nexport const detectUserRegion = async () => {\n\ttry {\n\t\tconsole.log(\"🌍 Detecting user region...\");\n\n\t\t// Use ipapi.co for IP-based geolocation (free tier: 1000 requests/day)\n\t\tconst response = await fetch(\"https://ipapi.co/json/\", {\n\t\t\ttimeout: 5000, // 5 second timeout\n\t\t});\n\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`HTTP error! status: ${response.status}`);\n\t\t}\n\n\t\tconst data = await response.json();\n\t\tconsole.log(\"🌍 Geolocation data:\", data);\n\n\t\tconst countryCode = data.country_code;\n\n\t\t// Map country codes to our regions\n\t\tif (countryCode === \"CN\") {\n\t\t\tconsole.log(\"🇨🇳 Detected: China\");\n\t\t\treturn \"china\";\n\t\t} else if (countryCode === \"HK\") {\n\t\t\tconsole.log(\"🇭🇰 Detected: Hong Kong\");\n\t\t\treturn \"hongkong\";\n\t\t} else {\n\t\t\tconsole.log(\n\t\t\t\t\"� Detected: Other region - using Hong Kong as default\"\n\t\t\t);\n\t\t\treturn \"hongkong\";\n\t\t}\n\t} catch (error) {\n\t\tconsole.warn(\"⚠️ Region detection failed:\", error.message);\n\t\tconsole.log(\"🇹🇼 Falling back to Taiwan as default region\");\n\t\treturn \"taiwan\"; // Default fallback\n\t}\n};\n\n/**\n * Detect region based on browser language as fallback\n * @returns {string} - 'china', 'hongkong', or 'taiwan'\n */\nexport const detectRegionFromLanguage = () => {\n\ttry {\n\t\tconst languages = navigator.languages || [\n\t\t\tnavigator.language || navigator.userLanguage,\n\t\t];\n\n\t\tfor (let lang of languages) {\n\t\t\tconst langLower = lang.toLowerCase();\n\n\t\t\tif (langLower.includes(\"zh-cn\") || langLower.includes(\"zh-hans\")) {\n\t\t\t\tconsole.log(\"🈸 Language detected: Simplified Chinese (China)\");\n\t\t\t\treturn \"china\";\n\t\t\t}\n\t\t\tif (langLower.includes(\"zh-hk\")) {\n\t\t\t\tconsole.log(\"🈳 Language detected: Hong Kong Chinese\");\n\t\t\t\treturn \"hongkong\";\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(\n\t\t\t\"🌐 No specific Chinese locale detected, defaulting to Hong Kong\"\n\t\t);\n\t\treturn \"hongkong\";\n\t} catch (error) {\n\t\tconsole.warn(\"⚠️ Language detection failed:\", error.message);\n\t\treturn \"taiwan\";\n\t}\n};\n\n/**\n * Get user's region with multiple fallback methods\n * Priority: IP geolocation > Browser language > Default (Taiwan)\n * @returns {Promise<string>} - 'china', 'hongkong', or 'taiwan'\n */\nexport const getUserRegion = async () => {\n\tconsole.log(\"🚀 Starting region detection...\");\n\n\t// Check if user has manually selected a region (stored in localStorage)\n\tconst storedRegion =\n\t\ttypeof window !== \"undefined\"\n\t\t\t? localStorage.getItem(\"userRegion\")\n\t\t\t: null;\n\tif (storedRegion && [\"china\", \"hongkong\"].includes(storedRegion)) {\n\t\tconsole.log(\"💾 Using stored region preference:\", storedRegion);\n\t\treturn storedRegion;\n\t}\n\n\t// Try IP-based detection first\n\tconst ipRegion = await detectUserRegion();\n\n\t// If IP detection fails, try language detection\n\tif (ipRegion === \"hongkong\") {\n\t\tconst langRegion = detectRegionFromLanguage();\n\t\tconsole.log(\"📍 Final region selection:\", langRegion);\n\t\treturn langRegion;\n\t}\n\n\tconsole.log(\"📍 Final region selection:\", ipRegion);\n\treturn ipRegion;\n};\n\n/**\n * Save user's region preference to localStorage\n * @param {string} region - 'china', 'hongkong', or 'taiwan'\n */\nexport const saveRegionPreference = (region) => {\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t[\"china\", \"hongkong\"].includes(region)\n\t) {\n\t\tlocalStorage.setItem(\"userRegion\", region);\n\t\tconsole.log(\"💾 Saved region preference:\", region);\n\t}\n};\n\n/**\n * Clear stored region preference (for testing or reset)\n */\nexport const clearRegionPreference = () => {\n\tif (typeof window !== \"undefined\") {\n\t\tlocalStorage.removeItem(\"userRegion\");\n\t\tconsole.log(\"🗑️ Cleared region preference\");\n\t}\n};\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;;CAGC;;;;;;;AACM,MAAM,mBAAmB;IAC/B,IAAI;QACH,QAAQ,GAAG,CAAC;QAEZ,uEAAuE;QACvE,MAAM,WAAW,MAAM,MAAM,0BAA0B;YACtD,SAAS;QACV;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACjB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;QACzD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC,wBAAwB;QAEpC,MAAM,cAAc,KAAK,YAAY;QAErC,mCAAmC;QACnC,IAAI,gBAAgB,MAAM;YACzB,QAAQ,GAAG,CAAC;YACZ,OAAO;QACR,OAAO,IAAI,gBAAgB,MAAM;YAChC,QAAQ,GAAG,CAAC;YACZ,OAAO;QACR,OAAO;YACN,QAAQ,GAAG,CACV;YAED,OAAO;QACR;IACD,EAAE,OAAO,OAAO;QACf,QAAQ,IAAI,CAAC,+BAA+B,MAAM,OAAO;QACzD,QAAQ,GAAG,CAAC;QACZ,OAAO,UAAU,mBAAmB;IACrC;AACD;AAMO,MAAM,2BAA2B;IACvC,IAAI;QACH,MAAM,YAAY,UAAU,SAAS,IAAI;YACxC,UAAU,QAAQ,IAAI,UAAU,YAAY;SAC5C;QAED,KAAK,IAAI,QAAQ,UAAW;YAC3B,MAAM,YAAY,KAAK,WAAW;YAElC,IAAI,UAAU,QAAQ,CAAC,YAAY,UAAU,QAAQ,CAAC,YAAY;gBACjE,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACR;YACA,IAAI,UAAU,QAAQ,CAAC,UAAU;gBAChC,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACR;QACD;QAEA,QAAQ,GAAG,CACV;QAED,OAAO;IACR,EAAE,OAAO,OAAO;QACf,QAAQ,IAAI,CAAC,iCAAiC,MAAM,OAAO;QAC3D,OAAO;IACR;AACD;AAOO,MAAM,gBAAgB;IAC5B,QAAQ,GAAG,CAAC;IAEZ,wEAAwE;IACxE,MAAM,eACL,uCACG,aAAa,OAAO,CAAC;IAEzB,IAAI,gBAAgB;QAAC;QAAS;KAAW,CAAC,QAAQ,CAAC,eAAe;QACjE,QAAQ,GAAG,CAAC,sCAAsC;QAClD,OAAO;IACR;IAEA,+BAA+B;IAC/B,MAAM,WAAW,MAAM;IAEvB,gDAAgD;IAChD,IAAI,aAAa,YAAY;QAC5B,MAAM,aAAa;QACnB,QAAQ,GAAG,CAAC,8BAA8B;QAC1C,OAAO;IACR;IAEA,QAAQ,GAAG,CAAC,8BAA8B;IAC1C,OAAO;AACR;AAMO,MAAM,uBAAuB,CAAC;IACpC,IACC,aAAkB,eAClB;QAAC;QAAS;KAAW,CAAC,QAAQ,CAAC,SAC9B;QACD,aAAa,OAAO,CAAC,cAAc;QACnC,QAAQ,GAAG,CAAC,+BAA+B;IAC5C;AACD;AAKO,MAAM,wBAAwB;IACpC,wCAAmC;QAClC,aAAa,UAAU,CAAC;QACxB,QAAQ,GAAG,CAAC;IACb;AACD","debugId":null}},
    {"offset": {"line": 1386, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/config/regions.js"],"sourcesContent":["/**\n * Region Configuration\n * Defines currency, locale, and payment settings for each supported region\n */\n\nexport const regionConfig = {\n\tchina: {\n\t\t// Basic info\n\t\tname: \"China\",\n\t\tcode: \"CN\",\n\t\tcurrency: \"CNY\",\n\t\tsymbol: \"¥\",\n\t\tlocale: \"zh-CN\",\n\n\t\t// Pricing (you can adjust these values)\n\t\tprices: {\n\t\t\tbasic: 688, // ¥688 CNY\n\t\t\tpremium: 1288, // ¥1288 CNY\n\t\t},\n\n\t\t// Stripe Price IDs (you'll create these in Stripe dashboard)\n\t\tstripePriceIds: {\n\t\t\tbasic: \"price_china_basic_cny\", // Replace with actual Stripe price ID\n\t\t\tpremium: \"price_china_premium_cny\", // Replace with actual Stripe price ID\n\t\t},\n\n\t\t// Display settings\n\t\tcurrencyPosition: \"before\", // ¥688\n\t\tflag: \"🇨🇳\",\n\n\t\t// Payment methods available in China\n\t\tpaymentMethods: [\"card\", \"alipay\", \"wechat_pay\"],\n\t},\n\n\thongkong: {\n\t\t// Basic info\n\t\tname: \"Hong Kong\",\n\t\tcode: \"HK\",\n\t\tcurrency: \"HKD\",\n\t\tsymbol: \"HK$\",\n\t\tlocale: \"zh-TW\", // Using Taiwan locale for Traditional Chinese\n\n\t\t// Pricing (you can adjust these values)\n\t\tprices: {\n\t\t\tbasic: 888, // HK$888\n\t\t\tpremium: 1588, // HK$1588\n\t\t},\n\n\t\t// Stripe Price IDs (you'll create these in Stripe dashboard)\n\t\tstripePriceIds: {\n\t\t\tbasic: \"price_hk_basic_hkd\", // Replace with actual Stripe price ID\n\t\t\tpremium: \"price_hk_premium_hkd\", // Replace with actual Stripe price ID\n\t\t},\n\n\t\t// Display settings\n\t\tcurrencyPosition: \"before\", // HK$888\n\t\tflag: \"🇭🇰\",\n\n\t\t// Payment methods available in Hong Kong\n\t\tpaymentMethods: [\"card\", \"alipay_hk\", \"octopus\"],\n\t},\n};\n\n/**\n * Get region configuration by region key\n * @param {string} region - 'china', 'hongkong', or 'taiwan'\n * @returns {object} - Region configuration object\n */\nexport const getRegionConfig = (region) => {\n\treturn regionConfig[region] || regionConfig.hongkong; // Default to Hong Kong\n};\n\n/**\n * Format price according to region's currency settings\n * @param {number} amount - Price amount\n * @param {string} region - Region key\n * @returns {string} - Formatted price string\n */\nexport const formatPrice = (amount, region) => {\n\tconst config = getRegionConfig(region);\n\n\t// Add thousand separators\n\tconst formattedAmount = amount.toLocaleString();\n\n\tif (config.currencyPosition === \"before\") {\n\t\treturn `${config.symbol}${formattedAmount}`;\n\t} else {\n\t\treturn `${formattedAmount}${config.symbol}`;\n\t}\n};\n\n/**\n * Get all supported regions as array\n * @returns {array} - Array of region objects with key and config\n */\nexport const getAllRegions = () => {\n\treturn Object.keys(regionConfig).map((key) => ({\n\t\tkey,\n\t\t...regionConfig[key],\n\t}));\n};\n\n/**\n * Check if a region is supported\n * @param {string} region - Region key to check\n * @returns {boolean} - True if region is supported\n */\nexport const isSupportedRegion = (region) => {\n\treturn Object.keys(regionConfig).includes(region);\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;AAEM,MAAM,eAAe;IAC3B,OAAO;QACN,aAAa;QACb,MAAM;QACN,MAAM;QACN,UAAU;QACV,QAAQ;QACR,QAAQ;QAER,wCAAwC;QACxC,QAAQ;YACP,OAAO;YACP,SAAS;QACV;QAEA,6DAA6D;QAC7D,gBAAgB;YACf,OAAO;YACP,SAAS;QACV;QAEA,mBAAmB;QACnB,kBAAkB;QAClB,MAAM;QAEN,qCAAqC;QACrC,gBAAgB;YAAC;YAAQ;YAAU;SAAa;IACjD;IAEA,UAAU;QACT,aAAa;QACb,MAAM;QACN,MAAM;QACN,UAAU;QACV,QAAQ;QACR,QAAQ;QAER,wCAAwC;QACxC,QAAQ;YACP,OAAO;YACP,SAAS;QACV;QAEA,6DAA6D;QAC7D,gBAAgB;YACf,OAAO;YACP,SAAS;QACV;QAEA,mBAAmB;QACnB,kBAAkB;QAClB,MAAM;QAEN,yCAAyC;QACzC,gBAAgB;YAAC;YAAQ;YAAa;SAAU;IACjD;AACD;AAOO,MAAM,kBAAkB,CAAC;IAC/B,OAAO,YAAY,CAAC,OAAO,IAAI,aAAa,QAAQ,EAAE,uBAAuB;AAC9E;AAQO,MAAM,cAAc,CAAC,QAAQ;IACnC,MAAM,SAAS,gBAAgB;IAE/B,0BAA0B;IAC1B,MAAM,kBAAkB,OAAO,cAAc;IAE7C,IAAI,OAAO,gBAAgB,KAAK,UAAU;QACzC,OAAO,GAAG,OAAO,MAAM,GAAG,iBAAiB;IAC5C,OAAO;QACN,OAAO,GAAG,kBAAkB,OAAO,MAAM,EAAE;IAC5C;AACD;AAMO,MAAM,gBAAgB;IAC5B,OAAO,OAAO,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,MAAQ,CAAC;YAC9C;YACA,GAAG,YAAY,CAAC,IAAI;QACrB,CAAC;AACF;AAOO,MAAM,oBAAoB,CAAC;IACjC,OAAO,OAAO,IAAI,CAAC,cAAc,QAAQ,CAAC;AAC3C","debugId":null}},
    {"offset": {"line": 1483, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/hooks/useRegionDetectionEnhanced.js"],"sourcesContent":["/**\n * Enhanced Region Detection Hook with Auto-Redirect\n * Handles both region detection and automatic locale redirection\n */\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"@/i18n/navigation\";\nimport { getUserRegion, saveRegionPreference } from \"../utils/regionDetection\";\nimport { getRegionConfig, formatPrice } from \"../config/regions\";\n\n/**\n * Enhanced custom hook for region detection with auto-redirect\n * @param {object} options - Configuration options\n * @returns {object} - Region state and methods\n */\nexport const useRegionDetectionWithRedirect = (options = {}) => {\n\tconst { autoRedirect = false, skipFirstRedirect = true } = options;\n\tconst router = useRouter();\n\tconst pathname = usePathname();\n\n\tconst [region, setRegion] = useState(\"hongkong\");\n\tconst [regionConfig, setRegionConfig] = useState(null);\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [error, setError] = useState(null);\n\tconst [hasAutoRedirected, setHasAutoRedirected] = useState(false);\n\n\t// Get current locale from pathname\n\tconst currentLocale = pathname.startsWith(\"/zh-CN\") ? \"zh-CN\" : \"zh-TW\";\n\n\t// Region to locale mapping\n\tconst regionLocaleMap = {\n\t\tchina: \"zh-CN\",\n\t\thongkong: \"zh-TW\",\n\t};\n\n\t// Initialize region detection\n\tuseEffect(() => {\n\t\tconst initRegion = async () => {\n\t\t\ttry {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\tconsole.log(\"🚀 Initializing enhanced region detection...\");\n\n\t\t\t\tconst detectedRegion = await getUserRegion();\n\t\t\t\tconst config = getRegionConfig(detectedRegion);\n\n\t\t\t\tsetRegion(detectedRegion);\n\t\t\t\tsetRegionConfig(config);\n\t\t\t\tsetError(null);\n\n\t\t\t\tconsole.log(\"✅ Region initialized:\", detectedRegion);\n\n\t\t\t\t// Auto-redirect to appropriate locale if enabled\n\t\t\t\tif (autoRedirect && !hasAutoRedirected && !skipFirstRedirect) {\n\t\t\t\t\tconst expectedLocale = regionLocaleMap[detectedRegion];\n\t\t\t\t\tif (expectedLocale && expectedLocale !== currentLocale) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t`🔄 Auto-redirecting from ${currentLocale} to ${expectedLocale}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst newPathname = `/${pathname.split(\"/\").slice(2).join(\"/\")}`;\n\t\t\t\t\t\trouter.push(newPathname, { locale: expectedLocale });\n\t\t\t\t\t\tsetHasAutoRedirected(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"❌ Region detection failed:\", err);\n\t\t\t\tsetError(err.message);\n\n\t\t\t\t// Fallback to Hong Kong\n\t\t\t\tconst fallbackConfig = getRegionConfig(\"hongkong\");\n\t\t\t\tsetRegion(\"hongkong\");\n\t\t\t\tsetRegionConfig(fallbackConfig);\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t};\n\n\t\tinitRegion();\n\t}, [\n\t\tautoRedirect,\n\t\thasAutoRedirected,\n\t\tskipFirstRedirect,\n\t\tcurrentLocale,\n\t\tpathname,\n\t\trouter,\n\t]);\n\n\t// Method to manually change region (also changes locale)\n\tconst changeRegion = (newRegion) => {\n\t\tif ([\"china\", \"hongkong\"].includes(newRegion)) {\n\t\t\tconst config = getRegionConfig(newRegion);\n\t\t\tconst targetLocale = regionLocaleMap[newRegion];\n\n\t\t\tsetRegion(newRegion);\n\t\t\tsetRegionConfig(config);\n\t\t\tsaveRegionPreference(newRegion);\n\n\t\t\tconsole.log(\"🔄 Region changed to:\", newRegion);\n\n\t\t\t// Redirect to appropriate locale\n\t\t\tif (targetLocale && targetLocale !== currentLocale) {\n\t\t\t\tconst newPathname = `/${pathname.split(\"/\").slice(2).join(\"/\")}`;\n\t\t\t\trouter.push(newPathname, { locale: targetLocale });\n\t\t\t}\n\t\t}\n\t};\n\n\t// Method to format price for current region\n\tconst formatPriceForRegion = (amount) => {\n\t\treturn formatPrice(amount, region);\n\t};\n\n\t// Method to get Stripe price ID for current region\n\tconst getStripePriceId = (plan = \"basic\") => {\n\t\treturn regionConfig?.stripePriceIds?.[plan] || null;\n\t};\n\n\treturn {\n\t\t// State\n\t\tregion,\n\t\tregionConfig,\n\t\tisLoading,\n\t\terror,\n\t\tcurrentLocale,\n\t\thasAutoRedirected,\n\n\t\t// Methods\n\t\tchangeRegion,\n\t\tformatPriceForRegion,\n\t\tgetStripePriceId,\n\n\t\t// Computed values\n\t\tcurrency: regionConfig?.currency || \"HKD\",\n\t\tsymbol: regionConfig?.symbol || \"HK$\",\n\t\tlocale: regionConfig?.locale || \"zh-TW\",\n\t\tflag: regionConfig?.flag || \"🇭🇰\",\n\t};\n};\n\n// Keep the original hook for backward compatibility\nexport const useRegionDetection = () => {\n\treturn useRegionDetectionWithRedirect({ autoRedirect: false });\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1638, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/RegionLanguageSelector.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"@/i18n/navigation\";\nimport { usePathname } from \"next/navigation\";\nimport { useRouter } from \"@/i18n/navigation\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { ChevronDownIcon } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useRegionDetectionWithRedirect } from \"@/hooks/useRegionDetectionEnhanced\";\n\nexport default function RegionLanguageSelector({\n\tclassName,\n\tnavTextColor = \"#fff\",\n}) {\n\tconst pathname = usePathname();\n\tconst router = useRouter();\n\tconst {\n\t\tregion,\n\t\tchangeRegion,\n\t\tisLoading,\n\t\tcurrentLocale: detectedLocale,\n\t} = useRegionDetectionWithRedirect({\n\t\tautoRedirect: true,\n\t\tskipFirstRedirect: true,\n\t});\n\tconst [mounted, setMounted] = useState(false);\n\n\t// Prevent hydration mismatch\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t}, []);\n\n\t// Get current locale from pathname\n\tconst currentLocale = pathname.startsWith(\"/zh-CN\") ? \"zh-CN\" : \"zh-TW\";\n\n\t// Region configurations with language mapping\n\tconst regions = [\n\t\t{\n\t\t\tkey: \"china\",\n\t\t\tname: \"中国大陆\",\n\t\t\tflag: \"🇨🇳\",\n\t\t\tlocale: \"zh-CN\",\n\t\t\tcurrency: \"CNY\",\n\t\t\tsymbol: \"¥\",\n\t\t\tdisplayText: \"🇨🇳 简体中文\",\n\t\t},\n\t\t{\n\t\t\tkey: \"hongkong\",\n\t\t\tname: \"香港\",\n\t\t\tflag: \"🇭🇰\",\n\t\t\tlocale: \"zh-TW\",\n\t\t\tcurrency: \"HKD\",\n\t\t\tsymbol: \"HK$\",\n\t\t\tdisplayText: \"🇭🇰 繁體中文\",\n\t\t},\n\t];\n\n\t// Get current region config\n\tconst currentRegionConfig =\n\t\tregions.find((r) => r.key === region) || regions[1];\n\n\t// Get display text based on current state\n\tconst getDisplayText = () => {\n\t\tif (!mounted) return \"🌍 Loading...\";\n\t\tif (isLoading) return \"🌍 Detecting...\";\n\n\t\t// Find region that matches current locale\n\t\tconst matchingRegion = regions.find((r) => r.locale === currentLocale);\n\t\treturn matchingRegion\n\t\t\t? matchingRegion.displayText\n\t\t\t: currentRegionConfig.displayText;\n\t};\n\n\t// Handle region change - this will change both language and pricing\n\tconst handleRegionChange = (selectedRegion) => {\n\t\tconst regionConfig = regions.find((r) => r.key === selectedRegion);\n\t\tif (!regionConfig) return;\n\n\t\t// Update region (for pricing)\n\t\tchangeRegion(selectedRegion);\n\n\t\t// Update language (for locale) by navigating to new locale\n\t\tconst newPathname = `/${pathname.split(\"/\").slice(2).join(\"/\")}`;\n\n\t\t// Use Next.js navigation to change locale\n\t\trouter.push(newPathname, { locale: regionConfig.locale });\n\t};\n\n\tif (!mounted) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"cursor-pointer flex items-center space-x-1 opacity-50\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<span style={{ color: navTextColor }}>🌍 Loading...</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<DropdownMenu>\n\t\t\t<DropdownMenuTrigger\n\t\t\t\tasChild\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"cursor-pointer flex items-center space-x-1 hover:opacity-80\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div style={{ color: navTextColor }}>\n\t\t\t\t\t{getDisplayText()}\n\t\t\t\t\t<ChevronDownIcon className=\"w-4 h-4 ml-1 inline\" />\n\t\t\t\t</div>\n\t\t\t</DropdownMenuTrigger>\n\n\t\t\t<DropdownMenuContent className=\"bg-white rounded-lg shadow-lg p-1 min-w-[160px]\">\n\t\t\t\t{regions.map((regionConfig) => (\n\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\tkey={regionConfig.key}\n\t\t\t\t\t\tclassName=\"focus:bg-inherit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => handleRegionChange(regionConfig.key)}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"w-full text-left px-4 py-2 text-sm hover:text-primary rounded text-foreground flex items-center justify-between\",\n\t\t\t\t\t\t\t\tregion === regionConfig.key &&\n\t\t\t\t\t\t\t\t\tcurrentLocale === regionConfig.locale\n\t\t\t\t\t\t\t\t\t? \"bg-green-50 text-green-600 font-medium\"\n\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{regionConfig.displayText}</span>\n\t\t\t\t\t\t\t<span className=\"text-xs text-gray-500 ml-2\">\n\t\t\t\t\t\t\t\t{regionConfig.symbol}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t))}\n\n\t\t\t\t{/* Debug info in development */}\n\t\t\t\t{process.env.NODE_ENV === \"development\" && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"border-t border-gray-100 my-1\"></div>\n\t\t\t\t\t\t<div className=\"px-4 py-2 text-xs text-gray-400\">\n\t\t\t\t\t\t\t<div>Region: {region}</div>\n\t\t\t\t\t\t\t<div>Locale: {currentLocale}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1877, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/hooks/useMobile.js"],"sourcesContent":["'use client'\nimport { useState, useEffect } from 'react';\nexport default function useMobile() {\n    const [isMobile, setIsMobile] = useState(false);\n    // 添加useEffect监听窗口大小\n    useEffect(() => {\n        const checkMobile = () => {\n            setIsMobile(window.matchMedia('(max-width: 768px)').matches);\n        };\n\n        checkMobile();\n        window.addEventListener('resize', checkMobile);\n\n        return () => {\n            window.removeEventListener('resize', checkMobile);\n        };\n    }, []);\n    return isMobile;\n}\n"],"names":[],"mappings":";;;AACA;;AADA;;AAEe,SAAS;;IACpB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,oBAAoB;IACpB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACN,MAAM;mDAAc;oBAChB,YAAY,OAAO,UAAU,CAAC,sBAAsB,OAAO;gBAC/D;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAElC;uCAAO;oBACH,OAAO,mBAAmB,CAAC,UAAU;gBACzC;;QACJ;8BAAG,EAAE;IACL,OAAO;AACX;GAhBwB","debugId":null}},
    {"offset": {"line": 1916, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD;IACrD,qBACE,6LAAC,wKAAA,CAAA,OAAuB;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kKACA;QAED,GAAG,KAAK;;;;;;AAGf;KAlBS","debugId":null}},
    {"offset": {"line": 1952, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/UnlockButton.jsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"@/i18n/navigation\";\nimport { useTranslations } from \"next-intl\";\nimport { cn } from \"@/lib/utils\";\n\nimport { get, post, patch } from \"@/lib/ajax\";\nimport { toast } from \"react-toastify\";\nimport { useSession } from \"next-auth/react\";\n\nexport default function ({ className }) {\n\tconst t = useTranslations(\"Navigation\");\n\tconst [isLock, setIsLock] = useState(true);\n\tconst { data: session } = useSession();\n\tconst [quantity, setQuantity] = useState(1);\n\n\tuseEffect(() => {\n\t\tconst userId = session?.user?.userId;\n\t\tif (userId) {\n\t\t\tconst loadData = async () => {\n\t\t\t\tconst {\n\t\t\t\t\tstatus,\n\t\t\t\t\tmessage,\n\t\t\t\t\tdata: userInfo,\n\t\t\t\t} = await get(`/api/users/${userId}`);\n\t\t\t\tif (status == 0) {\n\t\t\t\t\tsetIsLock(userInfo.isLock);\n\t\t\t\t}\n\t\t\t};\n\t\t\tloadData();\n\t\t}\n\t}, [session?.user?.userId]);\n\tconst onClick = async () => {\n\t\t// 這裡可以用 prompt 或自訂 modal 讓用戶輸入尺數\n\t\tconst input = window.prompt(\"請輸入家居尺數\", quantity);\n\t\tconst qty = Number(input) || 1;\n\n\t\tconst { status, data, message } = await post(`/api/checkoutSessions`, {\n\t\t\tquantity: qty,\n\t\t});\n\t\tif (status == 0) {\n\t\t\tconst { url } = data;\n\t\t\twindow.open(url, \"_self\");\n\t\t} else {\n\t\t\ttoast.error(message);\n\t\t}\n\t};\n\treturn (\n\t\tisLock && (\n\t\t\t<button\n\t\t\t\tonClick={onClick}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"cursor-pointer font-bold text-[#066952] rounded-[20px] bg-[#A7F7D3] md:px-4 px-1.5 py-1 mr-1 md:mr-6\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t\tstyle={{ fontFamily: '\"Noto Serif TC\", serif' }}\n\t\t\t>\n\t\t\t\t{t(\"unlock\")}\n\t\t\t</button>\n\t\t)\n\t);\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AARA;;;;;;;;;AAUe,wCAAU,EAAE,SAAS,EAAE;IACrC,MAAM,IAAI,CAAA,GAAA,yMAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,aAAU,AAAD;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qBAAE;YACT,MAAM,SAAS,SAAS,MAAM;YAC9B,IAAI,QAAQ;gBACX,MAAM;0CAAW;wBAChB,MAAM,EACL,MAAM,EACN,OAAO,EACP,MAAM,QAAQ,EACd,GAAG,MAAM,CAAA,GAAA,qHAAA,CAAA,MAAG,AAAD,EAAE,CAAC,WAAW,EAAE,QAAQ;wBACpC,IAAI,UAAU,GAAG;4BAChB,UAAU,SAAS,MAAM;wBAC1B;oBACD;;gBACA;YACD;QACD;oBAAG;QAAC,SAAS,MAAM;KAAO;IAC1B,MAAM,UAAU;QACf,iCAAiC;QACjC,MAAM,QAAQ,OAAO,MAAM,CAAC,WAAW;QACvC,MAAM,MAAM,OAAO,UAAU;QAE7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,CAAA,GAAA,qHAAA,CAAA,OAAI,AAAD,EAAE,CAAC,qBAAqB,CAAC,EAAE;YACrE,UAAU;QACX;QACA,IAAI,UAAU,GAAG;YAChB,MAAM,EAAE,GAAG,EAAE,GAAG;YAChB,OAAO,IAAI,CAAC,KAAK;QAClB,OAAO;YACN,sJAAA,CAAA,QAAK,CAAC,KAAK,CAAC;QACb;IACD;IACA,OACC,wBACC,6LAAC;QACA,SAAS;QACT,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACX,wGACA;QAED,OAAO;YAAE,YAAY;QAAyB;kBAE7C,EAAE;;;;;;AAIP","debugId":null}},
    {"offset": {"line": 2031, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/ui/select.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Select({\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n\treturn <SelectPrimitive.Root data-slot=\"select\" {...props} />;\n}\n\nfunction SelectGroup({\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n\treturn <SelectPrimitive.Group data-slot=\"select-group\" {...props} />;\n}\n\nfunction SelectValue({\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n\treturn <SelectPrimitive.Value data-slot=\"select-value\" {...props} />;\n}\n\nfunction SelectTrigger({\n\tclassName,\n\tsize = \"default\",\n\tchildren,\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n\tsize?: \"sm\" | \"default\";\n}) {\n\treturn (\n\t\t<SelectPrimitive.Trigger\n\t\t\tdata-slot=\"select-trigger\"\n\t\t\tdata-size={size}\n\t\t\tclassName={cn(\n\t\t\t\t\"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t{children}\n\t\t\t<SelectPrimitive.Icon asChild>\n\t\t\t\t<ChevronDownIcon className=\"size-4 opacity-50\" />\n\t\t\t</SelectPrimitive.Icon>\n\t\t</SelectPrimitive.Trigger>\n\t);\n}\n\nfunction SelectContent({\n\tclassName,\n\tchildren,\n\tposition = \"popper\",\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n\treturn (\n\t\t<SelectPrimitive.Portal>\n\t\t\t<SelectPrimitive.Content\n\t\t\t\tdata-slot=\"select-content\"\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[10000] max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n\t\t\t\t\tposition === \"popper\" &&\n\t\t\t\t\t\t\"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t\tposition={position}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t<SelectScrollUpButton />\n\t\t\t\t<SelectPrimitive.Viewport\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"p-1\",\n\t\t\t\t\t\tposition === \"popper\" &&\n\t\t\t\t\t\t\t\"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</SelectPrimitive.Viewport>\n\t\t\t\t<SelectScrollDownButton />\n\t\t\t</SelectPrimitive.Content>\n\t\t</SelectPrimitive.Portal>\n\t);\n}\n\nfunction SelectLabel({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n\treturn (\n\t\t<SelectPrimitive.Label\n\t\t\tdata-slot=\"select-label\"\n\t\t\tclassName={cn(\n\t\t\t\t\"text-muted-foreground px-2 py-1.5 text-xs\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction SelectItem({\n\tclassName,\n\tchildren,\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n\treturn (\n\t\t<SelectPrimitive.Item\n\t\t\tdata-slot=\"select-item\"\n\t\t\tclassName={cn(\n\t\t\t\t\"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n\t\t\t\t<SelectPrimitive.ItemIndicator>\n\t\t\t\t\t<CheckIcon className=\"size-4\" />\n\t\t\t\t</SelectPrimitive.ItemIndicator>\n\t\t\t</span>\n\t\t\t<SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n\t\t</SelectPrimitive.Item>\n\t);\n}\n\nfunction SelectSeparator({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n\treturn (\n\t\t<SelectPrimitive.Separator\n\t\t\tdata-slot=\"select-separator\"\n\t\t\tclassName={cn(\n\t\t\t\t\"bg-border pointer-events-none -mx-1 my-1 h-px\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction SelectScrollUpButton({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n\treturn (\n\t\t<SelectPrimitive.ScrollUpButton\n\t\t\tdata-slot=\"select-scroll-up-button\"\n\t\t\tclassName={cn(\n\t\t\t\t\"flex cursor-default items-center justify-center py-1\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<ChevronUpIcon className=\"size-4\" />\n\t\t</SelectPrimitive.ScrollUpButton>\n\t);\n}\n\nfunction SelectScrollDownButton({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n\treturn (\n\t\t<SelectPrimitive.ScrollDownButton\n\t\t\tdata-slot=\"select-scroll-down-button\"\n\t\t\tclassName={cn(\n\t\t\t\t\"flex cursor-default items-center justify-center py-1\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<ChevronDownIcon className=\"size-4\" />\n\t\t</SelectPrimitive.ScrollDownButton>\n\t);\n}\n\nexport {\n\tSelect,\n\tSelectContent,\n\tSelectGroup,\n\tSelectItem,\n\tSelectLabel,\n\tSelectScrollDownButton,\n\tSelectScrollUpButton,\n\tSelectSeparator,\n\tSelectTrigger,\n\tSelectValue,\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2280, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/MenuContent.jsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport emitter from \"@/lib/emitter\";\nimport { EVENT_TRANSLATE_STATUS } from \"@/types/constants\";\nimport { X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useTranslations } from \"next-intl\";\nimport { Link } from \"@/i18n/navigation\";\nimport { usePathname } from \"next/navigation\";\nimport { useSession, signOut } from \"next-auth/react\"; // Add signOut import\nimport { useRouter } from \"@/i18n/navigation\"; // Add router for navigation\n// Remove this import: import { handleSignOut } from \"../app/actions\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { toast } from \"react-toastify\";\n\nexport default function MenuBar({ className, isOpen, setIsOpen, from }) {\n\tconst t = useTranslations(\"home.hero\");\n\tconst t2 = useTranslations(\"toast\");\n\tconst pathname = usePathname();\n\tconst router = useRouter(); // Add router\n\n\tconst { data: session } = useSession();\n\tconst isLogined = session?.user?.userId;\n\n\tconst onLoginClick = async () => {\n\t\tsetIsOpen(false);\n\n\t\tif (isLogined) {\n\t\t\ttoast.info(t2(\"loading\"), { autoClose: 2000 });\n\t\t\ttry {\n\t\t\t\t// Use client-side signOut instead of server action\n\t\t\t\tawait signOut({\n\t\t\t\t\tredirect: false, // Don't redirect automatically\n\t\t\t\t});\n\n\t\t\t\t// Manually redirect after logout\n\t\t\t\trouter.push(\"/auth/login\");\n\n\t\t\t\t// Optional: Show success toast\n\t\t\t\ttoast.success(\"Logged out successfully\", { autoClose: 1000 });\n\t\t\t} catch (error) {\n\t\t\t\ttoast.error(\"Logout failed\", { autoClose: 2000 });\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tonMouseLeave={() => {\n\t\t\t\tsetIsOpen(false);\n\t\t\t}}\n\t\t\tclassName={cn(\n\t\t\t\t\"hidden-on-print absolute top-0 right-0 w-full md:w-80 md:shadow-lg bg-white z-20 transition-transform duration-300 ease-in-out\",\n\t\t\t\tisOpen ? \"translate-y-0\" : \"-translate-y-100\"\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"flex justify-between items-center py-4.5 px-4 \">\n\t\t\t\t<span className=\"text-[#066952] text-xl font-bold\">\n\t\t\t\t\tHarmoniQ\n\t\t\t\t</span>\n\t\t\t\t<X\n\t\t\t\t\tclassName=\"w-4 h-4 cursor-pointer\"\n\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{from === \"home\" ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"cursor-pointer block text-base focus:bg-secondary focus:text-primary py-3.5 px-4\"\n\t\t\t\t\tonClick={onLoginClick}\n\t\t\t\t>\n\t\t\t\t\t{t(\"logout\")}\n\t\t\t\t</button>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"block text-base focus:bg-secondary focus:text-primary py-3.5 px-4\"\n\t\t\t\t\t\thref=\"/home\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(\"home\")}\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"block text-base focus:bg-secondary focus:text-primary py-3.5 px-4\"\n\t\t\t\t\t\thref=\"/price\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(\"pricing\")}\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"block text-base focus:bg-secondary focus:text-primary py-3.5 px-4\"\n\t\t\t\t\t\thref=\"/free\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(\"cta\")}\n\t\t\t\t\t</Link>\n\t\t\t\t\t{isLogined && pathname.indexOf(\"/report\") < 0 && (\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"block text-base focus:bg-secondary focus:text-primary py-3.5 px-4\"\n\t\t\t\t\t\t\thref=\"/report\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t(\"readReport\")}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<Select>\n\t\t\t\t\t\t<SelectTrigger className=\"w-full text-base border-none py-4 mt-1 data-[state=open]:mb-22 px-4 shadow-none data-[state=open]:bg-secondary data-[state=open]:text-primary\">\n\t\t\t\t\t\t\t{t(\"locale\")}\n\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t<SelectContent className=\"border-none shadow-none\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\thref={`/${pathname.split(\"/\").slice(2).join(\"/\")}`}\n\t\t\t\t\t\t\t\tlocale=\"zh-CN\"\n\t\t\t\t\t\t\t\tclassName={`block px-4 py-2 text-sm  rounded ${pathname.startsWith(\"/zh-CN\") ? \"bg-[#13AB87] text-white\" : \"text-[#888]\"}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t简体中文\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\thref={`/${pathname.split(\"/\").slice(2).join(\"/\")}`}\n\t\t\t\t\t\t\t\tlocale=\"zh-TW\"\n\t\t\t\t\t\t\t\tclassName={`block px-4 py-2 text-sm  rounded ${pathname.startsWith(\"/zh-TW\") ? \"bg-[#13AB87] text-white\" : \"text-[#888]\"}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t繁體中文\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t</Select>\n\t\t\t\t\t{pathname.indexOf(\"/login\") < 0 && (\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"block text-base focus:bg-secondary focus:text-primary py-3.5 px-4\"\n\t\t\t\t\t\t\thref={\"/auth/login\"}\n\t\t\t\t\t\t\tonClick={onLoginClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isLogined ? t(\"logout\") : t(\"login\")}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2505, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/Avatar.jsx"],"sourcesContent":["import { useSession } from 'next-auth/react'\nimport { useState } from 'react'\nimport MenuContent from './MenuContent'\nexport default function ({ from }) {\n    const { data: session } = useSession();\n    const [isOpen, setIsOpen] = useState(false);\n    const onMenuClick = () => {\n        setIsOpen(true)\n    }\n    // session?.user?.name \n    return session?.user?.name && <div>\n        <div\n            className=\"w-8 h-8 p-0.5 bg-[#6a84f8] rounded-full text-center cursor-pointer\"\n            onClick={onMenuClick}\n        >\n            <span className='text-white font-bold text-xl'>{session?.user?.name.slice(0, 1).toUpperCase()}</span>\n        </div>\n        <MenuContent isOpen={isOpen} setIsOpen={setIsOpen} from={from} />\n    </div>\n\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AACe,wCAAU,EAAE,IAAI,EAAE;IAC7B,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,aAAU,AAAD;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,cAAc;QAChB,UAAU;IACd;IACA,uBAAuB;IACvB,OAAO,SAAS,MAAM,sBAAQ,6LAAC;;0BAC3B,6LAAC;gBACG,WAAU;gBACV,SAAS;0BAET,cAAA,6LAAC;oBAAK,WAAU;8BAAgC,SAAS,MAAM,KAAK,MAAM,GAAG,GAAG;;;;;;;;;;;0BAEpF,6LAAC,oIAAA,CAAA,UAAW;gBAAC,QAAQ;gBAAQ,WAAW;gBAAW,MAAM;;;;;;;;;;;;AAGjE","debugId":null}},
    {"offset": {"line": 2566, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/components/Navbar.jsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"@/i18n/navigation\";\nimport { useRouter, usePathname } from \"@/i18n/navigation\";\nimport Image from \"next/image\";\nimport LanguageToggle from \"./LanguageToggle\";\nimport RegionLanguageSelector from \"./RegionLanguageSelector\";\nimport useMobile from \"../app/hooks/useMobile\";\nimport { useSession } from \"next-auth/react\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useTranslations } from \"next-intl\";\nimport UnlockButton from \"./UnlockButton\";\nimport Avatar from \"./Avatar\";\n\nexport default function Navbar({ from, backgroundColor = \"transparent\" }) {\n\tconst t = useTranslations(\"Navigation\");\n\tconst t2 = useTranslations(\"home.hero\");\n\tconst router = useRouter();\n\tconst pathname = usePathname();\n\n\tconst isMobile = useMobile();\n\tconst { data: session, status } = useSession();\n\tconst [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n\tconst isLogined = status === \"authenticated\" && session?.user?.userId;\n\tconst isLoading = status === \"loading\";\n\n\tconst isHome = pathname === \"/home\";\n\tconst navTextColor = isHome ? \"#fff\" : \"#000\";\n\n\tconst scrollToSection = (sectionId) => {\n\t\tconst element = document.getElementById(sectionId);\n\t\tif (element) {\n\t\t\telement.scrollIntoView({ behavior: \"smooth\" });\n\t\t}\n\t};\n\n\tconst navigateToSection = (sectionId) => {\n\t\t// If we're on the home page, just scroll\n\t\tif (pathname === \"/home\") {\n\t\t\tscrollToSection(sectionId);\n\t\t} else {\n\t\t\t// If we're on another page, navigate to home page with hash\n\t\t\trouter.push(`/home#${sectionId}`);\n\t\t}\n\t};\n\n\t// Handle scrolling when coming from another page with hash\n\tuseEffect(() => {\n\t\tif (typeof window !== \"undefined\") {\n\t\t\tconst hash = window.location.hash.replace(\"#\", \"\");\n\t\t\tif (hash) {\n\t\t\t\t// Small delay to ensure the page has loaded\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tscrollToSection(hash);\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\t}, [pathname]);\n\n\treturn (\n\t\t<nav\n\t\t\tclassName={`absolute top-0 left-0 right-0 z-[70] h-16 ${\n\t\t\t\t!isHome ? \"bg-white shadow-sm\" : \"\"\n\t\t\t}`}\n\t\t\tstyle={{\n\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\tbackgroundColor:\n\t\t\t\t\tbackgroundColor === \"transparent\"\n\t\t\t\t\t\t? \"transparent\"\n\t\t\t\t\t\t: `#${backgroundColor.replace(\"#\", \"\")}`,\n\t\t\t}}\n\t\t>\n\t\t\t<div className=\"h-full px-4\">\n\t\t\t\t<div className=\"max-w-7xl mx-auto flex items-center justify-between h-full\">\n\t\t\t\t\t<div className=\"flex items-center gap-6\">\n\t\t\t\t\t\t<Link href=\"/home\" className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tisHome\n\t\t\t\t\t\t\t\t\t\t? \"/images/logo/logo-white.png\"\n\t\t\t\t\t\t\t\t\t\t: \"/images/logo/logo-black.png\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\talt=\"HarmoniQ Logo\"\n\t\t\t\t\t\t\t\twidth={32}\n\t\t\t\t\t\t\t\theight={32}\n\t\t\t\t\t\t\t\tclassName=\"w-8 h-8 mx-2\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName=\"text-2xl font-bold mr-15\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tHarmoniQ\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t{/* Navigation Links */}\n\t\t\t\t\t\t{!isMobile && (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-10 ml-6\">\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\thref=\"/home\"\n\t\t\t\t\t\t\t\t\tclassName=\"transition-colors hover:opacity-80\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"home\")}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t\t\t\t\tclassName=\"transition-colors hover:opacity-80\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"smartChat\")}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{/* <button\n\t\t\t\t\t\t\t\t\tonClick={() => navigateToSection(\"theory\")}\n\t\t\t\t\t\t\t\t\tclassName=\"transition-colors cursor-pointer hover:opacity-80\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"theory\")}\n\t\t\t\t\t\t\t\t</button> */}\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\thref=\"/price\"\n\t\t\t\t\t\t\t\t\tclassName=\"transition-colors hover:opacity-80\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"pricing\")}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={() => navigateToSection(\"faq\")}\n\t\t\t\t\t\t\t\t\tclassName=\"transition-colors cursor-pointer hover:opacity-80\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"faq\")}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-center md:space-x-6\">\n\t\t\t\t\t\t{/* Mobile Menu Button */}\n\t\t\t\t\t\t{isMobile && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetIsMobileMenuOpen(!isMobileMenuOpen)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"p-2 rounded-md hover:bg-gray-100 mr-2\"\n\t\t\t\t\t\t\t\tstyle={{ color: navTextColor }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isMobileMenuOpen ? (\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-6 h-6\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\n\t\t\t\t\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-6 h-6\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\n\t\t\t\t\t\t\t\t\t\t\td=\"M4 6h16M4 12h16M4 18h16\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!isMobile && (\n\t\t\t\t\t\t\t<div className=\"flex items-center space-x-4\">\n\t\t\t\t\t\t\t\t<RegionLanguageSelector\n\t\t\t\t\t\t\t\t\tnavTextColor={navTextColor}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{isLoading ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"w-6 h-6 border-2 rounded-full border-t-transparent animate-spin\"\n\t\t\t\t\t\t\t\tstyle={{ borderColor: navTextColor }}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t) : isLogined && from !== \"login\" ? (\n\t\t\t\t\t\t\t<Avatar />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName=\"block text-base focus:text-primary\"\n\t\t\t\t\t\t\t\thref={\"/auth/login\"}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tfontFamily: \"Noto Serif TC, serif\",\n\t\t\t\t\t\t\t\t\tcolor: navTextColor,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t2(\"login\")}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Mobile Menu Dropdown */}\n\t\t\t{isMobile && isMobileMenuOpen && (\n\t\t\t\t<div className=\"absolute top-16 left-0 right-0 bg-white border-b shadow-lg z-[80]\">\n\t\t\t\t\t<div className=\"px-4 py-2 space-y-2\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\thref=\"/home\"\n\t\t\t\t\t\t\tclassName=\"block py-2 px-4 text-gray-800 hover:bg-gray-100 rounded transition-colors\"\n\t\t\t\t\t\t\tonClick={() => setIsMobileMenuOpen(false)}\n\t\t\t\t\t\t\tstyle={{ fontFamily: \"Noto Serif TC, serif\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t(\"home\")}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t\t\tclassName=\"block py-2 px-4 text-gray-800 hover:bg-gray-100 rounded transition-colors\"\n\t\t\t\t\t\t\tonClick={() => setIsMobileMenuOpen(false)}\n\t\t\t\t\t\t\tstyle={{ fontFamily: \"Noto Serif TC, serif\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t(\"smartChat\")}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\thref=\"/price\"\n\t\t\t\t\t\t\tclassName=\"block py-2 px-4 text-gray-800 hover:bg-gray-100 rounded transition-colors\"\n\t\t\t\t\t\t\tonClick={() => setIsMobileMenuOpen(false)}\n\t\t\t\t\t\t\tstyle={{ fontFamily: \"Noto Serif TC, serif\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t(\"pricing\")}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tnavigateToSection(\"faq\");\n\t\t\t\t\t\t\t\tsetIsMobileMenuOpen(false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"block w-full text-left py-2 px-4 text-gray-800 hover:bg-gray-100 rounded transition-colors\"\n\t\t\t\t\t\t\tstyle={{ fontFamily: \"Noto Serif TC, serif\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t(\"faq\")}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div className=\"border-t pt-2 mt-2\">\n\t\t\t\t\t\t\t<RegionLanguageSelector navTextColor=\"#000\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Mobile Menu Overlay */}\n\t\t\t{isMobile && isMobileMenuOpen && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"fixed inset-0 bg-black bg-opacity-25 z-[75]\"\n\t\t\t\t\tonClick={() => setIsMobileMenuOpen(false)}\n\t\t\t\t></div>\n\t\t\t)}\n\t\t</nav>\n\t);\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAZA;;;;;;;;;;;;;AAce,SAAS,OAAO,EAAE,IAAI,EAAE,kBAAkB,aAAa,EAAE;;IACvE,MAAM,IAAI,CAAA,GAAA,yMAAA,CAAA,kBAAe,AAAD,EAAE;IAC1B,MAAM,KAAK,CAAA,GAAA,yMAAA,CAAA,kBAAe,AAAD,EAAE;IAC3B,MAAM,SAAS,CAAA,GAAA,4HAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,CAAA,GAAA,4HAAA,CAAA,cAAW,AAAD;IAE3B,MAAM,WAAW,CAAA,GAAA,mIAAA,CAAA,UAAS,AAAD;IACzB,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,aAAU,AAAD;IAC3C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,MAAM,YAAY,WAAW,mBAAmB,SAAS,MAAM;IAC/D,MAAM,YAAY,WAAW;IAE7B,MAAM,SAAS,aAAa;IAC5B,MAAM,eAAe,SAAS,SAAS;IAEvC,MAAM,kBAAkB,CAAC;QACxB,MAAM,UAAU,SAAS,cAAc,CAAC;QACxC,IAAI,SAAS;YACZ,QAAQ,cAAc,CAAC;gBAAE,UAAU;YAAS;QAC7C;IACD;IAEA,MAAM,oBAAoB,CAAC;QAC1B,yCAAyC;QACzC,IAAI,aAAa,SAAS;YACzB,gBAAgB;QACjB,OAAO;YACN,4DAA4D;YAC5D,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,WAAW;QACjC;IACD;IAEA,2DAA2D;IAC3D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4BAAE;YACT,wCAAmC;gBAClC,MAAM,OAAO,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK;gBAC/C,IAAI,MAAM;oBACT,4CAA4C;oBAC5C;4CAAW;4BACV,gBAAgB;wBACjB;2CAAG;gBACJ;YACD;QACD;2BAAG;QAAC;KAAS;IAEb,qBACC,6LAAC;QACA,WAAW,CAAC,0CAA0C,EACrD,CAAC,SAAS,uBAAuB,IAChC;QACF,OAAO;YACN,YAAY;YACZ,iBACC,oBAAoB,gBACjB,gBACA,CAAC,CAAC,EAAE,gBAAgB,OAAO,CAAC,KAAK,KAAK;QAC3C;;0BAEA,6LAAC;gBAAI,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACd,6LAAC;4BAAI,WAAU;;8CACd,6LAAC,4HAAA,CAAA,OAAI;oCAAC,MAAK;oCAAQ,WAAU;;sDAC5B,6LAAC,gIAAA,CAAA,UAAK;4CACL,KACC,SACG,gCACA;4CAEJ,KAAI;4CACJ,OAAO;4CACP,QAAQ;4CACR,WAAU;;;;;;sDAEX,6LAAC;4CACA,WAAU;4CACV,OAAO;gDACN,YAAY;gDACZ,OAAO;4CACR;sDACA;;;;;;;;;;;;gCAMD,CAAC,0BACD,6LAAC;oCAAI,WAAU;;sDACd,6LAAC,4HAAA,CAAA,OAAI;4CACJ,MAAK;4CACL,WAAU;4CACV,OAAO;gDACN,YAAY;gDACZ,OAAO;4CACR;sDAEC,EAAE;;;;;;sDAEJ,6LAAC,4HAAA,CAAA,OAAI;4CACJ,MAAK;4CACL,WAAU;4CACV,OAAO;gDACN,YAAY;gDACZ,OAAO;4CACR;sDAEC,EAAE;;;;;;sDAYJ,6LAAC,4HAAA,CAAA,OAAI;4CACJ,MAAK;4CACL,WAAU;4CACV,OAAO;gDACN,YAAY;gDACZ,OAAO;4CACR;sDAEC,EAAE;;;;;;sDAEJ,6LAAC;4CACA,SAAS,IAAM,kBAAkB;4CACjC,WAAU;4CACV,OAAO;gDACN,YAAY;gDACZ,OAAO;4CACR;sDAEC,EAAE;;;;;;;;;;;;;;;;;;sCAMP,6LAAC;4BAAI,WAAU;;gCAEb,0BACA,6LAAC;oCACA,SAAS,IACR,oBAAoB,CAAC;oCAEtB,WAAU;oCACV,OAAO;wCAAE,OAAO;oCAAa;8CAE5B,iCACA,6LAAC;wCACA,WAAU;wCACV,MAAK;wCACL,QAAO;wCACP,SAAQ;kDAER,cAAA,6LAAC;4CACA,eAAc;4CACd,gBAAe;4CACf,aAAa;4CACb,GAAE;;;;;;;;;;6DAIJ,6LAAC;wCACA,WAAU;wCACV,MAAK;wCACL,QAAO;wCACP,SAAQ;kDAER,cAAA,6LAAC;4CACA,eAAc;4CACd,gBAAe;4CACf,aAAa;4CACb,GAAE;;;;;;;;;;;;;;;;gCAON,CAAC,0BACD,6LAAC;oCAAI,WAAU;8CACd,cAAA,6LAAC,+IAAA,CAAA,UAAsB;wCACtB,cAAc;;;;;;;;;;;gCAIhB,0BACA,6LAAC;oCACA,WAAU;oCACV,OAAO;wCAAE,aAAa;oCAAa;;;;;2CAEjC,aAAa,SAAS,wBACzB,6LAAC,+HAAA,CAAA,UAAM;;;;yDAEP,6LAAC,4HAAA,CAAA,OAAI;oCACJ,WAAU;oCACV,MAAM;oCACN,OAAO;wCACN,YAAY;wCACZ,OAAO;oCACR;8CAEC,GAAG;;;;;;;;;;;;;;;;;;;;;;;YAQR,YAAY,kCACZ,6LAAC;gBAAI,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACd,6LAAC,4HAAA,CAAA,OAAI;4BACJ,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,oBAAoB;4BACnC,OAAO;gCAAE,YAAY;4BAAuB;sCAE3C,EAAE;;;;;;sCAEJ,6LAAC,4HAAA,CAAA,OAAI;4BACJ,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,oBAAoB;4BACnC,OAAO;gCAAE,YAAY;4BAAuB;sCAE3C,EAAE;;;;;;sCAEJ,6LAAC,4HAAA,CAAA,OAAI;4BACJ,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,oBAAoB;4BACnC,OAAO;gCAAE,YAAY;4BAAuB;sCAE3C,EAAE;;;;;;sCAEJ,6LAAC;4BACA,SAAS;gCACR,kBAAkB;gCAClB,oBAAoB;4BACrB;4BACA,WAAU;4BACV,OAAO;gCAAE,YAAY;4BAAuB;sCAE3C,EAAE;;;;;;sCAEJ,6LAAC;4BAAI,WAAU;sCACd,cAAA,6LAAC,+IAAA,CAAA,UAAsB;gCAAC,cAAa;;;;;;;;;;;;;;;;;;;;;;YAOxC,YAAY,kCACZ,6LAAC;gBACA,WAAU;gBACV,SAAS,IAAM,oBAAoB;;;;;;;;;;;;AAKxC;GA5QwB;;QACb,yMAAA,CAAA,kBAAe;QACd,yMAAA,CAAA,kBAAe;QACX,4HAAA,CAAA,YAAS;QACP,4HAAA,CAAA,cAAW;QAEX,mIAAA,CAAA,UAAS;QACQ,wIAAA,CAAA,aAAU;;;KAPrB","debugId":null}},
    {"offset": {"line": 2990, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/%5Blocale%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport { usePathname } from \"next/navigation\";\nimport { Link } from \"@/i18n/navigation\";\nimport {\n\tSend,\n\tUser,\n\tMessageCircle,\n\tClock,\n\tSparkles,\n\tBrain,\n\tMic,\n\tMenu,\n\tX,\n} from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport BirthdayModal from \"@/components/BirthdayModal\";\nimport Navbar from \"@/components/Navbar\";\n\nexport default function Home() {\n\tconst { data: session } = useSession();\n\tconst pathname = usePathname();\n\tconst currentLocale = pathname?.split(\"/\")[1] || \"zh-TW\"; // Extract locale from URL\n\t// 定義消息類型\n\tinterface Message {\n\t\trole: string;\n\t\tcontent: string;\n\t\ttimestamp: Date;\n\t\taiAnalysis?: any;\n\t\tsystemType?: any;\n\t\tisError?: boolean;\n\t}\n\n\tconst [messages, setMessages] = useState<Message[]>([]);\n\tconst [inputMessage, setInputMessage] = useState(\"\");\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [sessionId, setSessionId] = useState(\"\");\n\tconst [isClient, setIsClient] = useState(false);\n\tconst messagesEndRef = useRef<HTMLDivElement>(null);\n\n\t// Modal 相關狀態\n\tconst [showBirthdayModal, setShowBirthdayModal] = useState(false);\n\tconst [needsBirthdayInfo, setNeedsBirthdayInfo] = useState(false);\n\tconst [concern, setConcern] = useState(\"\");\n\tconst [isCoupleAnalysis, setIsCoupleAnalysis] = useState(false);\n\tconst [reportType, setReportType] = useState(\"\");\n\tconst [originalUserQuestion, setOriginalUserQuestion] = useState(\"\"); // Track original question\n\tconst [latestSpecificProblem, setLatestSpecificProblem] = useState(\"\"); // Track the most recent specific problem\n\n\t// 對話歷史相關狀態\n\tinterface ConversationHistory {\n\t\tconversationId: string;\n\t\ttitle?: string;\n\t\tlastUpdated: string;\n\t\tmessageCount: number;\n\t\ttopics?: any[];\n\t}\n\tconst [conversationHistory, setConversationHistory] = useState<\n\t\tConversationHistory[]\n\t>([]);\n\tconst [currentUserId, setCurrentUserId] = useState(\"\");\n\tconst [isLoadingHistory, setIsLoadingHistory] = useState(false);\n\tconst [isInitialized, setIsInitialized] = useState(false);\n\tconst [showLandingPage, setShowLandingPage] = useState(true);\n\tconst [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n\t// 打字機效果狀態\n\tconst [isTyping, setIsTyping] = useState(false);\n\tconst [typingMessageIndex, setTypingMessageIndex] = useState(-1);\n\tconst [displayedContent, setDisplayedContent] = useState(\"\");\n\tconst [loadingDuration, setLoadingDuration] = useState(15); // 動態載入時間\n\tconst typingIntervalRef = useRef<ReturnType<typeof setTimeout> | null>(\n\t\tnull\n\t);\n\n\t// Keep page position when component mounts - only scroll to top on visibility change\n\tuseEffect(() => {\n\t\t// Function to scroll to top\n\t\tconst scrollToTop = () => {\n\t\t\twindow.scrollTo({ top: 0, behavior: \"smooth\" });\n\t\t\tdocument.documentElement.scrollTop = 0;\n\t\t\tdocument.body.scrollTop = 0;\n\t\t};\n\n\t\t// Only scroll to top when user comes back to the page (e.g., browser back button)\n\t\t// Remove automatic scroll on mount to preserve navbar visibility\n\t\tconst handleVisibilityChange = () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tscrollToTop();\n\t\t\t}\n\t\t};\n\n\t\t// Add event listener for visibility change\n\t\tdocument.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n\t\t// Cleanup\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\n\t\t\t\t\"visibilitychange\",\n\t\t\t\thandleVisibilityChange\n\t\t\t);\n\t\t};\n\t}, []);\n\n\t// Ensure proper page position on initial load - show navbar and chatbox\n\tuseEffect(() => {\n\t\t// Small delay to ensure DOM is fully rendered\n\t\tconst timer = setTimeout(() => {\n\t\t\t// Ensure we can see both navbar and content\n\t\t\twindow.scrollTo({ top: 0, behavior: \"auto\" });\n\t\t}, 100);\n\n\t\treturn () => clearTimeout(timer);\n\t}, [showLandingPage]);\n\n\t// 客戶端初始化 - 添加防重複初始化邏輯\n\tuseEffect(() => {\n\t\t// 防止重複初始化\n\t\tif (isInitialized) {\n\t\t\tconsole.log(\"⏭️ Smart-Chat2 已初始化，跳過重複初始化\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsClient(true);\n\n\t\t// 使用session中的email作為用戶ID，fallback到本地存儲的ID\n\t\tlet userId: string;\n\t\tlet shouldTransferConversations = false;\n\t\tlet oldAnonymousId: string | null = null;\n\n\t\tif (session?.user?.email) {\n\t\t\tuserId = session.user.email;\n\n\t\t\t// 檢查是否有舊的匿名ID需要轉移\n\t\t\tconst storedAnonymousId = localStorage.getItem(\"feng-shui-user-id\");\n\t\t\tif (\n\t\t\t\tstoredAnonymousId &&\n\t\t\t\tstoredAnonymousId.startsWith(\"user-\") &&\n\t\t\t\tstoredAnonymousId !== userId\n\t\t\t) {\n\t\t\t\tshouldTransferConversations = true;\n\t\t\t\toldAnonymousId = storedAnonymousId;\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"🔄 檢測到需要轉移對話記錄:\",\n\t\t\t\t\toldAnonymousId,\n\t\t\t\t\t\"→\",\n\t\t\t\t\tuserId\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tconst storedUserId = localStorage.getItem(\"feng-shui-user-id\");\n\t\t\tif (!storedUserId) {\n\t\t\t\tuserId = `user-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\t\t\t\tlocalStorage.setItem(\"feng-shui-user-id\", userId);\n\t\t\t} else {\n\t\t\t\tuserId = storedUserId;\n\t\t\t}\n\t\t}\n\n\t\t// 如果用戶ID沒有變化，不需要重新初始化\n\t\tif (currentUserId === userId && messages.length > 1) {\n\t\t\tconsole.log(\"👤 用戶未變化，跳過重新初始化\");\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\"🔄 初始化 Smart-Chat2，用戶:\", userId);\n\n\t\tsetCurrentUserId(userId);\n\n\t\tconst newSessionId = `smart-chat2-${Date.now()}`;\n\t\tsetSessionId(newSessionId);\n\n\t\t// 初始狀態顯示落地頁，不設置歡迎消息\n\t\tsetMessages([]);\n\t\tsetShowLandingPage(true);\n\n\t\t// 如果需要轉移對話，先執行轉移再加載歷史\n\t\tif (shouldTransferConversations && oldAnonymousId) {\n\t\t\ttransferAnonymousConversations(oldAnonymousId, userId).then(() => {\n\t\t\t\t// 轉移完成後更新localStorage並加載對話歷史\n\t\t\t\tlocalStorage.setItem(\"feng-shui-user-id\", userId);\n\t\t\t\tloadConversationHistory(userId);\n\t\t\t});\n\t\t} else {\n\t\t\t// 正常加載對話歷史\n\t\t\tloadConversationHistory(userId);\n\t\t}\n\n\t\tsetIsInitialized(true);\n\t}, [session?.user?.email, isInitialized, currentUserId, messages.length]); // 只在用戶email變化時重新初始化，而不是整個session對象\n\n\t// Auto-scroll to bottom only for new user messages or completed AI responses\n\tuseEffect(() => {\n\t\tif (messages.length > 0 && !isTyping) {\n\t\t\t// Only scroll if the last message is complete (not during typing animation)\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tmessagesEndRef.current?.scrollIntoView({\n\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\tblock: \"end\",\n\t\t\t\t});\n\t\t\t}, 100); // Small delay to ensure content is rendered\n\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t}, [messages.length, isTyping]); // Remove displayedContent dependency to avoid constant scrolling\n\n\t// 檢測新的助手消息並觸發打字機效果\n\tuseEffect(() => {\n\t\tif (messages.length > 0) {\n\t\t\tconst lastMessage = messages[messages.length - 1];\n\t\t\tif (\n\t\t\t\tlastMessage.role === \"assistant\" &&\n\t\t\t\tlastMessage.content === \"\" &&\n\t\t\t\t!isTyping\n\t\t\t) {\n\t\t\t\tconsole.log(\"🔍 檢測到空的助手消息，準備觸發打字機效果\");\n\t\t\t\t// 從sessionStorage獲取待顯示的內容\n\t\t\t\tconst pendingContent = sessionStorage.getItem(\n\t\t\t\t\t\"pending_typewriter_content\"\n\t\t\t\t);\n\t\t\t\tif (pendingContent) {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"📝 找到待顯示內容，啟動打字機:\",\n\t\t\t\t\t\tpendingContent.substring(0, 50) + \"...\"\n\t\t\t\t\t);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstartTypewriterEffect(\n\t\t\t\t\t\t\tmessages.length - 1,\n\t\t\t\t\t\t\tpendingContent\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsessionStorage.removeItem(\"pending_typewriter_content\");\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [messages, isTyping]);\n\n\t// 打字機效果函數\n\tconst startTypewriterEffect = (\n\t\tmessageIndex: number,\n\t\tfullContent: string\n\t) => {\n\t\tconsole.log(\n\t\t\t\"⚡ 開始打字機效果，索引:\",\n\t\t\tmessageIndex,\n\t\t\t\"內容長度:\",\n\t\t\tfullContent.length\n\t\t);\n\t\tsetIsTyping(true);\n\t\tsetTypingMessageIndex(messageIndex);\n\t\tsetDisplayedContent(\"\");\n\n\t\tconst words = fullContent.split(\"\");\n\t\tlet currentIndex = 0;\n\n\t\tconst typeNextCharacter = () => {\n\t\t\tif (currentIndex < words.length) {\n\t\t\t\tconst currentContent = words\n\t\t\t\t\t.slice(0, currentIndex + 1)\n\t\t\t\t\t.join(\"\");\n\t\t\t\tsetDisplayedContent(currentContent);\n\n\t\t\t\t// 更新消息數組中的實際內容\n\t\t\t\tsetMessages((prev) => {\n\t\t\t\t\tconst updated = [...prev];\n\t\t\t\t\tif (updated[messageIndex]) {\n\t\t\t\t\t\tupdated[messageIndex].content = currentContent;\n\t\t\t\t\t}\n\t\t\t\t\treturn updated;\n\t\t\t\t});\n\n\t\t\t\tcurrentIndex++;\n\t\t\t\ttypingIntervalRef.current = setTimeout(typeNextCharacter, 30); // 30ms per character\n\t\t\t} else {\n\t\t\t\t// 完成打字效果\n\t\t\t\tsetIsTyping(false);\n\t\t\t\tsetTypingMessageIndex(-1);\n\t\t\t\tsetDisplayedContent(\"\");\n\n\t\t\t\t// 確保最終內容完整\n\t\t\t\tsetMessages((prev) => {\n\t\t\t\t\tconst updated = [...prev];\n\t\t\t\t\tif (updated[messageIndex]) {\n\t\t\t\t\t\tupdated[messageIndex].content = fullContent;\n\t\t\t\t\t}\n\t\t\t\t\treturn updated;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\ttypeNextCharacter();\n\t};\n\n\t// 清理打字機效果\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (typingIntervalRef.current) {\n\t\t\t\tclearTimeout(typingIntervalRef.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\n\t// 根據問題長度計算載入時間\n\tconst calculateLoadingDuration = (message: string) => {\n\t\tconst length = message.length;\n\t\tif (length <= 10) {\n\t\t\treturn 21; // 短問題 21秒\n\t\t} else if (length <= 30) {\n\t\t\treturn 30; // 中等問題 30秒\n\t\t} else {\n\t\t\treturn 35; // 長問題 35秒\n\t\t}\n\t};\n\n\tconst handleSendMessage = async () => {\n\t\tif (!inputMessage.trim() || isLoading) return;\n\n\t\t// 隱藏落地頁，顯示正常聊天界面\n\t\tif (showLandingPage) {\n\t\t\tsetShowLandingPage(false);\n\t\t}\n\n\t\t// 🔥 Special handling for couple analysis report selection\n\t\tconsole.log(\n\t\t\t\"🔍 Before checking couple analysis - isCoupleAnalysis:\",\n\t\t\tisCoupleAnalysis,\n\t\t\t\"inputMessage:\",\n\t\t\tinputMessage.trim()\n\t\t);\n\t\tif (isCoupleAnalysis && inputMessage.trim() === \"1\") {\n\t\t\tconsole.log(\n\t\t\t\t\"🎯 Couple analysis option 1 selected - redirecting directly to couple payment\"\n\t\t\t);\n\n\t\t\tconst userMessage = {\n\t\t\t\trole: \"user\",\n\t\t\t\tcontent: inputMessage.trim(),\n\t\t\t\ttimestamp: new Date(),\n\t\t\t};\n\n\t\t\tsetMessages((prev) => [...prev, userMessage]);\n\t\t\tsetInputMessage(\"\");\n\n\t\t\t// Add response message about payment\n\t\t\tconst responseMessage = {\n\t\t\t\trole: \"assistant\",\n\t\t\t\tcontent: \"太好了！正在為您處理情侶合盤分析付款...\",\n\t\t\t\ttimestamp: new Date(),\n\t\t\t};\n\n\t\t\tsetMessages((prev) => [...prev, responseMessage]);\n\n\t\t\t// 優先使用最新的具體問題，然後是原始問題，最後是 concern\n\t\t\tconst problemToUse =\n\t\t\t\tlatestSpecificProblem ||\n\t\t\t\toriginalUserQuestion ||\n\t\t\t\tconcern ||\n\t\t\t\t\"感情關係和諧改善建議\";\n\n\t\t\t// Call couple payment API directly\n\t\t\ttry {\n\t\t\t\tsetIsLoading(true);\n\n\t\t\t\tconst paymentResponse = await fetch(\"/api/payment-couple\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tlocale: currentLocale,\n\t\t\t\t\t\tspecificProblem: problemToUse,\n\t\t\t\t\t\tconcern: concern,\n\t\t\t\t\t\tfromChat: true,\n\t\t\t\t\t\tsessionId: sessionId,\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\tif (paymentResponse.ok) {\n\t\t\t\t\tconst paymentData = await paymentResponse.json();\n\t\t\t\t\tconsole.log(\"💳 Couple Payment Response:\", paymentData);\n\n\t\t\t\t\tif (paymentData.sessionId) {\n\t\t\t\t\t\t// Import Stripe and redirect to checkout\n\t\t\t\t\t\tconst stripePublicKey =\n\t\t\t\t\t\t\tprocess.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY;\n\t\t\t\t\t\tif (!stripePublicKey) {\n\t\t\t\t\t\t\tthrow new Error(\"Stripe public key not configured\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst stripe = await import(\"@stripe/stripe-js\").then(\n\t\t\t\t\t\t\t(mod) => mod.loadStripe(stripePublicKey)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (stripe) {\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"🚀 Redirecting to Stripe checkout for couple payment\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tawait stripe.redirectToCheckout({\n\t\t\t\t\t\t\t\tsessionId: paymentData.sessionId,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error(\"Failed to load Stripe\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\"No session ID received from couple payment\"\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Payment API error: ${paymentResponse.status}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"💳 Couple payment error:\", error);\n\t\t\t\tsetIsLoading(false);\n\n\t\t\t\t// Show error message\n\t\t\t\tconst errorMessage = {\n\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\tcontent: \"抱歉，付款處理時發生錯誤，請稍後再試。\",\n\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t};\n\t\t\t\tsetMessages((prev) => [...prev, errorMessage]);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst userMessage = {\n\t\t\trole: \"user\",\n\t\t\tcontent: inputMessage.trim(),\n\t\t\ttimestamp: new Date(),\n\t\t};\n\n\t\tsetMessages((prev) => [...prev, userMessage]);\n\t\tsetInputMessage(\"\");\n\n\t\t// 根據問題長度設定載入時間\n\t\tconst duration = calculateLoadingDuration(userMessage.content);\n\t\tconsole.log(\n\t\t\t`🕒 Question: \"${userMessage.content}\" (${userMessage.content.length} chars) → Duration: ${duration}s`\n\t\t);\n\t\tsetLoadingDuration(duration);\n\n\t\tsetIsLoading(true);\n\n\t\ttry {\n\t\t\tconst response = await fetch(\"/api/smart-chat2\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tmessage: userMessage.content,\n\t\t\t\t\tsessionId: sessionId,\n\t\t\t\t\tuserId: currentUserId,\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tconst data = await response.json();\n\n\t\t\tconsole.log(\"🔍 完整 API 回應:\", data);\n\t\t\tconsole.log(\"🔍 data.specificProblem:\", data.specificProblem);\n\t\t\tconsole.log(\"🔍 data.concern:\", data.concern);\n\n\t\t\tif (response.ok) {\n\t\t\t\tconst assistantMessage = {\n\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\tcontent: data.response,\n\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t\taiAnalysis: data.aiAnalysis,\n\t\t\t\t\tsystemType: data.systemType,\n\t\t\t\t};\n\n\t\t\t\t// 儲存內容到sessionStorage供useEffect使用\n\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t\"pending_typewriter_content\",\n\t\t\t\t\tassistantMessage.content\n\t\t\t\t);\n\n\t\t\t\t// 添加空內容的消息先顯示，然後觸發打字機效果\n\t\t\t\tconst emptyAssistantMessage = {\n\t\t\t\t\t...assistantMessage,\n\t\t\t\t\tcontent: \"\",\n\t\t\t\t};\n\n\t\t\t\tconsole.log(\"🎬 準備添加空消息並觸發打字機效果\");\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"📝 打字機內容長度:\",\n\t\t\t\t\tassistantMessage.content.length\n\t\t\t\t);\n\n\t\t\t\tsetMessages((prev) => [...prev, emptyAssistantMessage]);\n\n\t\t\t\t// 注意：移除不必要的對話歷史重新載入，這會造成過多的API呼叫\n\t\t\t\t// 只有在創建新對話時才需要更新歷史列表\n\n\t\t\t\t// Payment 觸發邏輯 - Check for couple analysis from API response\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"🔍 檢查 Payment 觸發條件:\",\n\t\t\t\t\tdata.needsBirthdayInfo,\n\t\t\t\t\tdata.shouldTriggerModal,\n\t\t\t\t\t\"isCoupleAnalysis:\",\n\t\t\t\t\tdata.isCoupleAnalysis\n\t\t\t\t);\n\n\t\t\t\t// 🎯 Set couple analysis flag if couple birthdays detected\n\t\t\t\tif (data.hasCouplesBirthdays || data.isCoupleAnalysis) {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"🎯 Setting couple analysis to true due to couple birthdays detected\"\n\t\t\t\t\t);\n\t\t\t\t\tsetIsCoupleAnalysis(true);\n\t\t\t\t}\n\n\t\t\t\tif (data.needsBirthdayInfo || data.shouldTriggerModal) {\n\t\t\t\t\tsetNeedsBirthdayInfo(true);\n\t\t\t\t\tsetConcern(data.concern || \"\");\n\t\t\t\t\tsetReportType(data.reportType || \"\");\n\n\t\t\t\t\t// 🔥 保存原始用戶問題 - 每次都更新最新的具體問題\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"🔔 檢查 API 回應中的 specificProblem:\",\n\t\t\t\t\t\tdata.specificProblem\n\t\t\t\t\t);\n\t\t\t\t\tlet problemToUse = \"\";\n\t\t\t\t\tif (data.specificProblem) {\n\t\t\t\t\t\tsetLatestSpecificProblem(data.specificProblem);\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\"💾 更新最新具體問題:\",\n\t\t\t\t\t\t\tdata.specificProblem\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// 只在第一次時設置原始問題\n\t\t\t\t\t\tif (!originalUserQuestion) {\n\t\t\t\t\t\t\tsetOriginalUserQuestion(data.specificProblem);\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"📝 設置原始問題:\",\n\t\t\t\t\t\t\t\tdata.specificProblem\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tproblemToUse = data.specificProblem;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 🚀 直接觸發付款，跳過價格頁面\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"💳 直接觸發付款 - concern:\",\n\t\t\t\t\t\tdata.concern,\n\t\t\t\t\t\t\"problem:\",\n\t\t\t\t\t\tproblemToUse\n\t\t\t\t\t);\n\n\t\t\t\t\t// 🔥 檢查付款類型，決定使用哪個 API\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"💳 檢查付款類型 - paymentType:\",\n\t\t\t\t\t\tdata.paymentType,\n\t\t\t\t\t\t\"concern:\",\n\t\t\t\t\t\tdata.concern,\n\t\t\t\t\t\t\"problem:\",\n\t\t\t\t\t\tproblemToUse\n\t\t\t\t\t);\n\n\t\t\t\t\t// 決定使用哪個付款 API\n\t\t\t\t\tconst useComprehensivePayment =\n\t\t\t\t\t\tdata.paymentType === \"comprehensive\";\n\t\t\t\t\tconst usePremiumPayment = data.paymentType === \"premium\";\n\n\t\t\t\t\tlet paymentEndpoint;\n\t\t\t\t\tif (useComprehensivePayment) {\n\t\t\t\t\t\tpaymentEndpoint = \"/api/checkoutSessions/payment4\"; // Expert88 ($88)\n\t\t\t\t\t} else if (usePremiumPayment) {\n\t\t\t\t\t\tpaymentEndpoint = \"/api/checkoutSessions/payment2\"; // Premium ($188)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpaymentEndpoint = \"/api/payment-fortune\"; // Fortune ($38)\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`💳 使用付款端點: ${paymentEndpoint} (comprehensive: ${useComprehensivePayment}, premium: ${usePremiumPayment})`\n\t\t\t\t\t);\n\n\t\t\t\t\t// 直接觸發付款 API\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetIsLoading(true);\n\n\t\t\t\t\t\tlet paymentResponse;\n\n\t\t\t\t\t\tif (useComprehensivePayment || usePremiumPayment) {\n\t\t\t\t\t\t\t// Get fresh locale for comprehensive/premium payments too\n\t\t\t\t\t\t\tconst storedRegion =\n\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userRegion\");\n\t\t\t\t\t\t\tconst regionToLocaleMap = {\n\t\t\t\t\t\t\t\tchina: \"zh-CN\",\n\t\t\t\t\t\t\t\thongkong: \"zh-TW\",\n\t\t\t\t\t\t\t\ttaiwan: \"zh-TW\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst freshLocale =\n\t\t\t\t\t\t\t\tregionToLocaleMap[storedRegion || \"hongkong\"] ||\n\t\t\t\t\t\t\t\tcurrentLocale;\n\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t`💰 Main page ${useComprehensivePayment ? \"comprehensive\" : \"premium\"} payment - Using fresh locale:`,\n\t\t\t\t\t\t\t\tfreshLocale,\n\t\t\t\t\t\t\t\t\"from stored region:\",\n\t\t\t\t\t\t\t\tstoredRegion\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// 使用 Stripe Checkout Session APIs (payment4 或 payment2)\n\t\t\t\t\t\t\tpaymentResponse = await fetch(paymentEndpoint, {\n\t\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\t\tquantity: 1, // 固定數量\n\t\t\t\t\t\t\t\t\tdirectPayment: true, // 標記為直接付款\n\t\t\t\t\t\t\t\t\tlocale: freshLocale, // 🔥 Fix: Add locale parameter for comprehensive/premium too\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 將 concern 從中文轉換為英文以符合 FortuneDataModal 期望\n\t\t\t\t\t\t\tconst concernMapping = {\n\t\t\t\t\t\t\t\t財運: \"financial\",\n\t\t\t\t\t\t\t\t健康: \"health\",\n\t\t\t\t\t\t\t\t事業: \"career\",\n\t\t\t\t\t\t\t\t工作: \"career\",\n\t\t\t\t\t\t\t\t感情: \"love\",\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tconst englishConcern =\n\t\t\t\t\t\t\t\tconcernMapping[data.concern] || \"financial\";\n\n\t\t\t\t\t\t\t// Get fresh locale from localStorage to ensure consistency\n\t\t\t\t\t\t\tconst storedRegion =\n\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userRegion\");\n\t\t\t\t\t\t\tconst regionToLocaleMap = {\n\t\t\t\t\t\t\t\tchina: \"zh-CN\",\n\t\t\t\t\t\t\t\thongkong: \"zh-TW\",\n\t\t\t\t\t\t\t\ttaiwan: \"zh-TW\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst freshLocale =\n\t\t\t\t\t\t\t\tregionToLocaleMap[storedRegion || \"hongkong\"] ||\n\t\t\t\t\t\t\t\tcurrentLocale;\n\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"💰 Main page individual payment - Using fresh locale:\",\n\t\t\t\t\t\t\t\tfreshLocale,\n\t\t\t\t\t\t\t\t\"from stored region:\",\n\t\t\t\t\t\t\t\tstoredRegion\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// 使用原本的 fortune payment API\n\t\t\t\t\t\t\tpaymentResponse = await fetch(paymentEndpoint, {\n\t\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\t\tconcern: englishConcern,\n\t\t\t\t\t\t\t\t\tspecificProblem: problemToUse,\n\t\t\t\t\t\t\t\t\tfromChat: true,\n\t\t\t\t\t\t\t\t\tlocale: freshLocale, // 🔥 Fix: Add locale parameter\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (paymentResponse.ok) {\n\t\t\t\t\t\t\tconst paymentData = await paymentResponse.json();\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t`💳 ${useComprehensivePayment ? \"Expert88 ($88)\" : usePremiumPayment ? \"Premium ($188)\" : \"Fortune ($38)\"} Payment Response:`,\n\t\t\t\t\t\t\t\tpaymentData\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (useComprehensivePayment || usePremiumPayment) {\n\t\t\t\t\t\t\t\t// 處理 Expert88/Premium 回應 - 直接重定向到 Stripe URL\n\t\t\t\t\t\t\t\tif (paymentData.data?.url) {\n\t\t\t\t\t\t\t\t\twindow.location.href = paymentData.data.url;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t`No checkout URL received from ${usePremiumPayment ? \"Premium\" : \"Expert88\"} payment`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 處理 Fortune payment 回應 - 使用 Stripe.js\n\t\t\t\t\t\t\t\tif (paymentData.sessionId) {\n\t\t\t\t\t\t\t\t\t// Import Stripe and redirect to checkout\n\t\t\t\t\t\t\t\t\tconst stripePublicKey =\n\t\t\t\t\t\t\t\t\t\tprocess.env\n\t\t\t\t\t\t\t\t\t\t\t.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY;\n\t\t\t\t\t\t\t\t\tif (!stripePublicKey) {\n\t\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\t\"Stripe public key not configured\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst stripe = await import(\n\t\t\t\t\t\t\t\t\t\t\"@stripe/stripe-js\"\n\t\t\t\t\t\t\t\t\t).then((mod) =>\n\t\t\t\t\t\t\t\t\t\tmod.loadStripe(stripePublicKey)\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tif (stripe) {\n\t\t\t\t\t\t\t\t\t\tawait stripe.redirectToCheckout({\n\t\t\t\t\t\t\t\t\t\t\tsessionId: paymentData.sessionId,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\t\"Failed to load Stripe\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\"No session ID received from Fortune payment\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst errorData = await paymentResponse.json();\n\t\t\t\t\t\t\tthrow new Error(errorData.error || \"Payment error\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (paymentError) {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t`💳 ${useComprehensivePayment ? \"Comprehensive ($88)\" : usePremiumPayment ? \"Premium ($188)\" : \"Fortune ($38)\"} payment error:`,\n\t\t\t\t\t\t\tpaymentError\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t// Show error message to user\n\t\t\t\t\t\tsetMessages((prev) => [\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\t\"抱歉，付款過程中出現錯誤。請稍後再試。\",\n\t\t\t\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t\t\t\t\tisError: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(data.error || \"請求失敗\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"發送訊息失敗:\", error);\n\t\t\tconst errorMessage = {\n\t\t\t\trole: \"assistant\",\n\t\t\t\tcontent: \"抱歉，發送訊息時出現錯誤。請稍後再試。\",\n\t\t\t\ttimestamp: new Date(),\n\t\t\t\tisError: true,\n\t\t\t};\n\t\t\tsetMessages((prev) => [...prev, errorMessage]);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\tconst handleKeyPress = (e) => {\n\t\tif (e.key === \"Enter\" && !e.shiftKey) {\n\t\t\te.preventDefault();\n\t\t\thandleSendMessage();\n\t\t}\n\t};\n\n\t// 處理快捷標籤點擊\n\tconst handleShortcutClick = (shortcutText) => {\n\t\tsetInputMessage(shortcutText);\n\t\t// 自動聚焦到輸入框\n\t\tsetTimeout(() => {\n\t\t\tconst textarea = document.querySelector(\"textarea\");\n\t\t\tif (textarea) {\n\t\t\t\ttextarea.focus();\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\t// 生日表單提交處理\n\tconst handleBirthdaySubmit = async (birthdayData) => {\n\t\tsetShowBirthdayModal(false);\n\t\tsetIsLoading(true);\n\n\t\tconsole.log(\"🔥 Birthday submit received:\", birthdayData);\n\n\t\t// For couple analysis, generate URL and redirect directly (payment already completed)\n\t\tif (birthdayData.isCoupleAnalysis || isCoupleAnalysis) {\n\t\t\tconsole.log(\n\t\t\t\t\"📊 Couple analysis detected, generating report URL...\"\n\t\t\t);\n\n\t\t\t// 優先使用最新的具體問題，然後是原始問題，最後是 concern\n\t\t\tconst problemToUse =\n\t\t\t\tlatestSpecificProblem ||\n\t\t\t\toriginalUserQuestion ||\n\t\t\t\tconcern ||\n\t\t\t\t\"感情關係和諧改善建議\";\n\n\t\t\tconsole.log(\"🔍 DEBUG - URL生成時的狀態檢查:\");\n\t\t\tconsole.log(\"   latestSpecificProblem:\", latestSpecificProblem);\n\t\t\tconsole.log(\"   originalUserQuestion:\", originalUserQuestion);\n\t\t\tconsole.log(\"   concern:\", concern);\n\t\t\tconsole.log(\"   problemToUse:\", problemToUse);\n\n\t\t\tconst reportUrl =\n\t\t\t\t`/couple-report?` +\n\t\t\t\t`birthday=${encodeURIComponent(birthdayData.userBirthday)}&` +\n\t\t\t\t`birthday2=${encodeURIComponent(birthdayData.partnerBirthday)}&` +\n\t\t\t\t`gender=${encodeURIComponent(birthdayData.userGender)}&` +\n\t\t\t\t`gender2=${encodeURIComponent(birthdayData.partnerGender)}&` +\n\t\t\t\t`concern=${encodeURIComponent(concern)}&` +\n\t\t\t\t`originalProblem=${encodeURIComponent(problemToUse)}&` +\n\t\t\t\t`reportType=${encodeURIComponent(reportType)}`;\n\n\t\t\tconsole.log(\"🚀 Opening couple report:\", reportUrl);\n\t\t\twindow.open(reportUrl, \"_blank\");\n\t\t\tsetIsLoading(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// For individual analysis, continue with API call\n\t\ttry {\n\t\t\tconst response = await fetch(\"/api/smart-chat2\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tuserBirthday: birthdayData.birthday,\n\t\t\t\t\tgender: birthdayData.gender,\n\t\t\t\t\tpartnerBirthday: birthdayData.partnerBirthday,\n\t\t\t\t\tpartnerGender: birthdayData.partnerGender,\n\t\t\t\t\tconcern: concern,\n\t\t\t\t\tisCoupleAnalysis:\n\t\t\t\t\t\tisCoupleAnalysis || birthdayData.isCoupleAnalysis,\n\t\t\t\t\treportType: reportType,\n\t\t\t\t\tmessageType: \"birthday_submission\",\n\t\t\t\t\tsessionId: sessionId,\n\t\t\t\t\tuserId: currentUserId,\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`HTTP error! status: ${response.status}`);\n\t\t\t}\n\n\t\t\tconst data = await response.json();\n\n\t\t\tconst assistantMessage = {\n\t\t\t\trole: \"assistant\",\n\t\t\t\tcontent: data.response || data.message,\n\t\t\t\ttimestamp: new Date(),\n\t\t\t\taiAnalysis: data.aiAnalysis,\n\t\t\t\tsystemType: data.systemType,\n\t\t\t};\n\n\t\t\tsetMessages((prev) => [...prev, assistantMessage]);\n\n\t\t\t// 注意：移除不必要的對話歷史重新載入，減少API呼叫\n\t\t\t// 對話歷史會在頁面初始化時載入，之後不需要重複載入\n\n\t\t\t// Open report in new window if URL is provided\n\t\t\tif (data.reportUrl) {\n\t\t\t\tconsole.log(\"Opening report:\", data.reportUrl);\n\t\t\t\twindow.open(data.reportUrl, \"_blank\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"生日提交錯誤:\", error);\n\t\t\tsetMessages((prev) => [\n\t\t\t\t...prev,\n\t\t\t\t{\n\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\tcontent: \"抱歉，處理生日資料時發生錯誤。請稍後再試。\",\n\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t},\n\t\t\t]);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\t// 加載對話歷史\n\tconst loadConversationHistory = async (userId) => {\n\t\ttry {\n\t\t\tsetIsLoadingHistory(true);\n\n\t\t\t// 如果userId看起來像email，使用userEmail參數，否則使用userId參數\n\t\t\tconst isEmail = userId.includes(\"@\");\n\t\t\tconst queryParam = isEmail\n\t\t\t\t? `userEmail=${encodeURIComponent(userId)}`\n\t\t\t\t: `userId=${encodeURIComponent(userId)}`;\n\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/conversation-history?${queryParam}`\n\t\t\t);\n\n\t\t\tif (response.ok) {\n\t\t\t\tconst data = await response.json();\n\t\t\t\tsetConversationHistory(data.conversations || []);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"加載對話歷史失敗:\", response.statusText);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"加載對話歷史錯誤:\", error);\n\t\t} finally {\n\t\t\tsetIsLoadingHistory(false);\n\t\t}\n\t};\n\n\t// 轉移匿名對話記錄到註冊用戶\n\tconst transferAnonymousConversations = async (\n\t\toldAnonymousId: string,\n\t\tnewUserEmail: string\n\t) => {\n\t\ttry {\n\t\t\tconsole.log(\n\t\t\t\t\"🔄 開始轉移對話記錄:\",\n\t\t\t\toldAnonymousId,\n\t\t\t\t\"→\",\n\t\t\t\tnewUserEmail\n\t\t\t);\n\n\t\t\t// 🔒 檢查是否已設置轉移完成標記，避免重複轉移\n\t\t\tconst transferKey = `transfer-completed-${oldAnonymousId}-${newUserEmail}`;\n\t\t\tif (localStorage.getItem(transferKey)) {\n\t\t\t\tconsole.log(\"⚠️ 對話記錄已轉移過，跳過重複轉移\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst response = await fetch(\"/api/transfer-conversations\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\toldUserId: oldAnonymousId,\n\t\t\t\t\tnewUserId: newUserEmail,\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (response.ok) {\n\t\t\t\tconst data = await response.json();\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"✅ 對話記錄轉移成功:\",\n\t\t\t\t\tdata.transferredCount,\n\t\t\t\t\t\"個對話\"\n\t\t\t\t);\n\n\t\t\t\t// 🔒 設置轉移完成標記，防止重複轉移\n\t\t\t\tlocalStorage.setItem(transferKey, \"completed\");\n\t\t\t} else {\n\t\t\t\tconsole.error(\"❌ 對話記錄轉移失敗:\", response.statusText);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"❌ 轉移對話記錄時發生錯誤:\", error);\n\t\t}\n\t};\n\n\t// 加載特定對話\n\tconst loadSpecificConversation = async (conversationId) => {\n\t\ttry {\n\t\t\tsetIsLoading(true);\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/load-conversation?conversationId=${encodeURIComponent(conversationId)}`\n\t\t\t);\n\n\t\t\tif (response.ok) {\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\t// 設置對話訊息 - 修正數據格式轉換\n\t\t\t\tif (\n\t\t\t\t\tdata.conversation &&\n\t\t\t\t\tArray.isArray(data.conversation) &&\n\t\t\t\t\tdata.conversation.length > 0\n\t\t\t\t) {\n\t\t\t\t\t// 轉換消息格式以匹配前端期望的格式\n\t\t\t\t\tconst formattedMessages = data.conversation.map(\n\t\t\t\t\t\t(msg, index) => ({\n\t\t\t\t\t\t\trole: msg.role,\n\t\t\t\t\t\t\tcontent: msg.content || \"\",\n\t\t\t\t\t\t\ttimestamp: new Date(msg.timestamp),\n\t\t\t\t\t\t\taiAnalysis: msg.aiAnalysis || null,\n\t\t\t\t\t\t\tsystemType: msg.systemType || \"smart-chat2\",\n\t\t\t\t\t\t\tid: msg.id || `loaded-${index}`,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\t// 添加初始歡迎消息（如果還沒有）\n\t\t\t\t\tconst hasWelcomeMessage = formattedMessages.some(\n\t\t\t\t\t\t(msg) =>\n\t\t\t\t\t\t\tmsg.role === \"assistant\" &&\n\t\t\t\t\t\t\tmsg.content.includes(\"歡迎來到智能風水顧問\")\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!hasWelcomeMessage) {\n\t\t\t\t\t\tformattedMessages.unshift({\n\t\t\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\"你好呀～我是風鈴！✨ 歡迎回到智能風水顧問 Smart-Chat2 (AI版)！\\n\\n繼續您之前的對話...\",\n\t\t\t\t\t\t\ttimestamp: new Date(\n\t\t\t\t\t\t\t\tdata.metadata?.createdAt || Date.now()\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\taiAnalysis: null,\n\t\t\t\t\t\t\tsystemType: \"smart-chat2\",\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tsetMessages(formattedMessages);\n\t\t\t\t\tsetShowLandingPage(false); // 載入對話時隱藏落地頁\n\t\t\t\t} else {\n\t\t\t\t\t// 如果沒有消息，設置默認歡迎消息\n\t\t\t\t\tsetMessages([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\"你好呀～我是風鈴！✨ 歡迎來到智能風水顧問 Smart-Chat2 (AI版)！\\n\\n這是您之前的對話，請繼續...\",\n\t\t\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t\t\t\taiAnalysis: null,\n\t\t\t\t\t\t\tsystemType: \"smart-chat2\",\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t\tsetShowLandingPage(false); // 載入對話時隱藏落地頁\n\t\t\t\t}\n\n\t\t\t\t// 設置對話相關狀態\n\t\t\t\tif (data.metadata) {\n\t\t\t\t\tconst metadata = data.metadata;\n\t\t\t\t\tsetSessionId(\n\t\t\t\t\t\tmetadata.sessionId || `smart-chat2-${Date.now()}`\n\t\t\t\t\t);\n\t\t\t\t\tsetConcern(metadata.primaryConcern || \"\");\n\t\t\t\t\tsetIsCoupleAnalysis(\n\t\t\t\t\t\tmetadata.userData?.relationshipType === \"couple\" ||\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\tsetReportType(\"\");\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"對話加載成功:\",\n\t\t\t\t\tdata.metadata?.title || conversationId\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"加載對話失敗:\", response.statusText);\n\t\t\t\t// 加載失敗時顯示錯誤消息\n\t\t\t\tsetMessages([\n\t\t\t\t\t{\n\t\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\t\tcontent: \"抱歉，無法加載該對話記錄。請嘗試創建新對話。\",\n\t\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t\t\tisError: true,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"加載對話錯誤:\", error);\n\t\t\tsetMessages([\n\t\t\t\t{\n\t\t\t\t\trole: \"assistant\",\n\t\t\t\t\tcontent: \"載入對話時發生錯誤，請稍後再試。\",\n\t\t\t\t\ttimestamp: new Date(),\n\t\t\t\t\tisError: true,\n\t\t\t\t},\n\t\t\t]);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\t// 創建新對話\n\tconst createNewConversation = () => {\n\t\tsetMessages([]);\n\t\tsetInputMessage(\"\");\n\t\tsetConcern(\"\");\n\t\tsetIsCoupleAnalysis(false);\n\t\tsetReportType(\"\");\n\t\tsetSessionId(`smart-chat2-${Date.now()}`);\n\t\tsetShowLandingPage(true);\n\t\t// Close mobile menu after creating new conversation\n\t\tsetIsMobileMenuOpen(false);\n\t};\n\n\t// Helper function to close mobile menu when navigating\n\tconst handleMobileNavigation = () => {\n\t\t// Add a small delay for visual feedback\n\t\tsetTimeout(() => {\n\t\t\tsetIsMobileMenuOpen(false);\n\t\t}, 150);\n\t};\n\n\t// 格式化時間顯示\n\tconst formatConversationTime = (timestamp) => {\n\t\tif (!timestamp) return \"\";\n\n\t\tconst date = new Date(timestamp);\n\t\tconst now = new Date();\n\t\tconst diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n\n\t\tif (diffInHours < 24) {\n\t\t\treturn date.toLocaleTimeString(\"zh-TW\", {\n\t\t\t\thour: \"2-digit\",\n\t\t\t\tminute: \"2-digit\",\n\t\t\t});\n\t\t} else if (diffInHours < 24 * 7) {\n\t\t\tconst days = Math.floor(diffInHours / 24);\n\t\t\treturn `${days}天前`;\n\t\t} else {\n\t\t\treturn date.toLocaleDateString(\"zh-TW\", {\n\t\t\t\tmonth: \"short\",\n\t\t\t\tday: \"numeric\",\n\t\t\t});\n\t\t}\n\t};\n\n\tconst getTopicBadgeColor = (topic) => {\n\t\tconst colors = {\n\t\t\t感情: \"bg-pink-100 text-pink-800\",\n\t\t\t財運: \"bg-yellow-100 text-yellow-800\",\n\t\t\t工作: \"bg-blue-100 text-blue-800\",\n\t\t\t健康: \"bg-green-100 text-green-800\",\n\t\t\t人際關係: \"bg-purple-100 text-purple-800\",\n\t\t\t子女: \"bg-orange-100 text-orange-800\",\n\t\t\t因緣: \"bg-indigo-100 text-indigo-800\",\n\t\t\t其他: \"bg-gray-100 text-gray-800\",\n\t\t};\n\t\treturn colors[topic] || colors[\"其他\"];\n\t};\n\n\treturn (\n\t\t<div className=\"bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50\">\n\t\t\t{/* Navigation Bar */}\n\t\t\t<Navbar from=\"smart-chat\" backgroundColor=\"EFEFEF\" />\n\t\t\t<div className=\"relative flex h-[calc(100vh-4rem)] mt-16 overflow-hidden\">\n\t\t\t\t{/* 移動端菜單按鈕 */}\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"fixed z-50 p-2 bg-white rounded-lg shadow-lg md:hidden top-20 left-2\"\n\t\t\t\t\tonClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n\t\t\t\t>\n\t\t\t\t\t{isMobileMenuOpen ? (\n\t\t\t\t\t\t<X className=\"w-5 h-5 text-gray-600\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Menu className=\"w-5 h-5 text-gray-600\" />\n\t\t\t\t\t)}\n\t\t\t\t</button>\n\n\t\t\t\t{/* 左側邊欄 - 響應式設計 */}\n\t\t\t\t<div\n\t\t\t\t\tclassName={`\n\t\t\t\t\t${isMobileMenuOpen ? \"translate-x-0\" : \"-translate-x-full\"}\n\t\t\t\t\tmd:translate-x-0 transition-transform duration-300 ease-in-out\n\t\t\t\t\tfixed md:relative z-40 w-72 sm:w-80 md:w-80 bg-[#EFEFEF] flex flex-col h-full\n\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{/* 建立新的對話 */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"bg-[#E0E0E0] rounded-lg m-4 p-4 cursor-pointer hover:bg-[#d0d0d0] transition-colors\"\n\t\t\t\t\t\tonClick={createNewConversation}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"/images/風水妹/風水妹2.png\"\n\t\t\t\t\t\t\t\talt=\"風鈴\"\n\t\t\t\t\t\t\t\tclassName=\"w-10 h-10 rounded-full\"\n\t\t\t\t\t\t\t\tonError={(e) => {\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\te.target as HTMLImageElement\n\t\t\t\t\t\t\t\t\t).style.display = \"none\";\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<span className=\"font-medium text-gray-800\">\n\t\t\t\t\t\t\t\t\t建立新的對話\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"text-xl text-gray-800\">+</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* 歷史對話 */}\n\t\t\t\t\t<div className=\"bg-[#E0E0E0] rounded-lg mx-4 mb-4\">\n\t\t\t\t\t\t<div className=\"p-4 border-b border-[#d0d0d0]\">\n\t\t\t\t\t\t\t<h3 className=\"flex items-center justify-between font-medium text-gray-800\">\n\t\t\t\t\t\t\t\t歷史對話\n\t\t\t\t\t\t\t\t{isLoadingHistory && (\n\t\t\t\t\t\t\t\t\t<div className=\"w-4 h-4 border-b-2 border-gray-800 rounded-full animate-spin\"></div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"p-2 overflow-y-auto max-h-48\">\n\t\t\t\t\t\t\t{conversationHistory.length === 0 ? (\n\t\t\t\t\t\t\t\t<div className=\"p-3 text-sm text-center text-gray-600\">\n\t\t\t\t\t\t\t\t\t{isLoadingHistory\n\t\t\t\t\t\t\t\t\t\t? \"載入中...\"\n\t\t\t\t\t\t\t\t\t\t: \"尚無歷史對話\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tconversationHistory.map((conversation) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={conversation.conversationId}\n\t\t\t\t\t\t\t\t\t\tclassName=\"p-3 hover:bg-[#d0d0d0] rounded cursor-pointer transition-colors mb-1\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tloadSpecificConversation(\n\t\t\t\t\t\t\t\t\t\t\t\tconversation.conversationId\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\thandleMobileNavigation();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-800 truncate\">\n\t\t\t\t\t\t\t\t\t\t\t{conversation.title || \"未命名對話\"}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between mt-1 text-xs text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t{formatConversationTime(\n\t\t\t\t\t\t\t\t\t\t\t\t\tconversation.lastUpdated\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"bg-[#d0d0d0] text-gray-800 px-2 py-0.5 rounded-full text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{conversation.messageCount || 0}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{conversation.topics &&\n\t\t\t\t\t\t\t\t\t\t\tconversation.topics.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-1 mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{conversation.topics\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((topic, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs bg-[#c0c0c0] text-gray-800 px-2 py-0.5 rounded\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{topic}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{conversation.topics\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length > 2 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{conversation.topics\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length - 2}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* 付費報告預覽 */}\n\t\t\t\t\t<div className=\"px-4 mb-4\">\n\t\t\t\t\t\t<div className=\"p-2 transition-colors \">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-2\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-lg text-[#606060] font-bold\">\n\t\t\t\t\t\t\t\t\t\t付費報告預覽\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"text-xl\">👇</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* 功能區域 */}\n\t\t\t\t\t<div className=\"flex-1 px-4 pb-4 space-y-3 overflow-y-auto\">\n\t\t\t\t\t\t{/* 其他功能 */}\n\t\t\t\t\t\t<Link href=\"/demo?category=fengshui\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bg-[#768976] rounded-lg py-7 mb-3 cursor-pointer hover:bg-[#6b7d6b] transition-colors relative overflow-hidden\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\"url(/images/chatbox/house.png)\",\n\t\t\t\t\t\t\t\t\tbackgroundSize: \"cover\",\n\t\t\t\t\t\t\t\t\tbackgroundPosition: \"center\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={handleMobileNavigation}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t<Link href=\"/demo?category=life\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bg-[#768976] rounded-lg py-7 mb-3 cursor-pointer hover:bg-[#6b7d6b] transition-colors relative overflow-hidden\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\"url(/images/chatbox/life.png)\",\n\t\t\t\t\t\t\t\t\tbackgroundSize: \"cover\",\n\t\t\t\t\t\t\t\t\tbackgroundPosition: \"center\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={handleMobileNavigation}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t<Link href=\"/demo?category=relationship\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bg-[#768976] rounded-lg py-7 mb-3 cursor-pointer hover:bg-[#6b7d6b] transition-colors relative overflow-hidden\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\"url(/images/chatbox/relationship.png)\",\n\t\t\t\t\t\t\t\t\tbackgroundSize: \"cover\",\n\t\t\t\t\t\t\t\t\tbackgroundPosition: \"center\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={handleMobileNavigation}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t<Link href=\"/demo?category=career\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bg-[#768976] rounded-lg py-7 mb-3 cursor-pointer hover:bg-[#6b7d6b] transition-colors relative overflow-hidden\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\"url(/images/chatbox/career.png)\",\n\t\t\t\t\t\t\t\t\tbackgroundSize: \"cover\",\n\t\t\t\t\t\t\t\t\tbackgroundPosition: \"center\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={handleMobileNavigation}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t<Link href=\"/demo?category=wealth\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bg-[#768976] rounded-lg py-7 mb-3 cursor-pointer hover:bg-[#6b7d6b] transition-colors relative overflow-hidden\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\"url(/images/chatbox/wealth.png)\",\n\t\t\t\t\t\t\t\t\tbackgroundSize: \"cover\",\n\t\t\t\t\t\t\t\t\tbackgroundPosition: \"center\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={handleMobileNavigation}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t<Link href=\"/demo?category=health\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bg-[#768976] rounded-lg py-7 mb-3 cursor-pointer hover:bg-[#6b7d6b] transition-colors relative overflow-hidden\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\"url(/images/chatbox/health.png)\",\n\t\t\t\t\t\t\t\t\tbackgroundSize: \"cover\",\n\t\t\t\t\t\t\t\t\tbackgroundPosition: \"center\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={handleMobileNavigation}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* 移動端遮罩層 */}\n\t\t\t\t{isMobileMenuOpen && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"fixed inset-0 z-30 bg-black bg-opacity-50 md:hidden\"\n\t\t\t\t\t\tonClick={() => setIsMobileMenuOpen(false)}\n\t\t\t\t\t\tstyle={{ width: \"100vw\", height: \"100vh\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t{/* 右側聊天區域 - 更新背景樣式和響應式設計 */}\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"flex flex-col flex-1 w-full min-h-0 md:ml-0\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: \"#EFEFEF\",\n\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\"url(/images/report/housing-report-bg.png)\",\n\t\t\t\t\t\tbackgroundSize: \"60%\", // Try: \"contain\", \"cover\", \"50%\", \"200px 150px\"\n\t\t\t\t\t\tbackgroundPosition: \"bottom right\", // Try: \"top left\", \"bottom right\", \"50% 25%\"\n\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\n\t\t\t\t\t\tboxShadow: \"4px 4px 4px rgba(0, 0, 0, 0.25)\",\n\t\t\t\t\t\tborder: \"3px solid #E0E0E0\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{/* 聊天界面 */}\n\t\t\t\t\t<div className=\"flex flex-col h-full min-h-0\">\n\t\t\t\t\t\t{/* 消息區域 */}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"flex-1 min-h-0 p-2 pt-2 space-y-4 overflow-y-auto sm:p-4 sm:pt-4 md:p-6 md:pt-6\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: showLandingPage\n\t\t\t\t\t\t\t\t\t? \"calc(100vh - 8rem)\"\n\t\t\t\t\t\t\t\t\t: \"calc(100vh - 12rem)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{showLandingPage ? (\n\t\t\t\t\t\t\t\t/* 落地頁 */\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center h-full px-2 sm:px-4\">\n\t\t\t\t\t\t\t\t\t{/* HarmoniQ Logo和風鈴 - 響應式設計 */}\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-row items-center gap-3 mt-20 sm:flex-row sm:gap-6 md:gap-8 sm:mt-0\">\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"/images/風水妹/風水妹.png\"\n\t\t\t\t\t\t\t\t\t\t\talt=\"風鈴\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 w-20 h-20 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-50 lg:h-50\"\n\t\t\t\t\t\t\t\t\t\t\tonError={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target as HTMLImageElement\n\t\t\t\t\t\t\t\t\t\t\t\t).style.display = \"none\";\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-3xl text-left sm:text-4xl md:text-4xl lg:text-5xl xl:text-6xl responsive-title-margin\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth: \"auto\",\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth: \"120px\",\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: \"350px\",\n\t\t\t\t\t\t\t\t\t\t\t\theight: \"auto\",\n\t\t\t\t\t\t\t\t\t\t\t\tminHeight: \"40px\",\n\t\t\t\t\t\t\t\t\t\t\t\tbackground:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"linear-gradient(45deg, #A3B116, #374A37)\",\n\t\t\t\t\t\t\t\t\t\t\t\tWebkitBackgroundClip: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\tWebkitTextFillColor:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"transparent\",\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundClip: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: \"flex-start\",\n\t\t\t\t\t\t\t\t\t\t\t\tfontFamily: \"'UoqMunThenKhung'\",\n\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: \"1.2\",\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: \"4px\",\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t風鈴聊天室\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{/* 輸入框 - 響應式設計 */}\n\t\t\t\t\t\t\t\t\t<div className=\"w-full max-w-2xl px-1 sm:px-2 md:px-4 lg:px-0\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center transition-shadow bg-white border border-gray-300 rounded-full shadow-lg hover:shadow-xl\">\n\t\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={inputMessage}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetInputMessage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"有任何疑問嗎？請隨時與我分享～\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1 px-3 py-2.5 text-sm text-black placeholder-gray-500 bg-transparent resize-none focus:outline-none sm:px-4 sm:py-3 md:px-6 md:py-4 md:text-base\"\n\t\t\t\t\t\t\t\t\t\t\t\trows={1}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ minHeight: \"40px\" }}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center px-2 space-x-1 sm:px-3 sm:space-x-1 md:px-4 md:space-x-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Mic button - hidden on very small screens */}\n\t\t\t\t\t\t\t\t\t\t\t\t{/* <button className=\"hidden p-1.5 text-gray-400 transition-colors hover:text-gray-600 active:text-gray-700 sm:block md:p-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Mic className=\"w-4 h-4 md:w-5 md:h-5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</button> */}\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Send button - larger touch target on mobile */}\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleSendMessage}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!inputMessage.trim() ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"p-2 text-purple-600 transition-all duration-200 rounded-full hover:text-purple-700 hover:bg-purple-50 active:bg-purple-100 disabled:text-gray-300 disabled:cursor-not-allowed disabled:hover:bg-transparent md:p-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminWidth: \"40px\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminHeight: \"40px\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Send className=\"w-4 h-4 md:w-5 md:h-5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{/* 快捷標籤 - 自動滾動 */}\n\t\t\t\t\t\t\t\t\t<div className=\"w-full max-w-4xl mx-auto mt-3 overflow-hidden sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2 sm:gap-3 animate-scroll-left\">\n\t\t\t\t\t\t\t\t\t\t\t{/* 第一組標籤 */}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想增強財運\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-2 py-1.5 space-x-1 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap sm:px-3 sm:py-2 sm:space-x-2 md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-yellow-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-yellow-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t💰\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想增多財運</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"如何更健康\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-green-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-green-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🍃\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>如何更健康</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想中六合彩\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-red-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-red-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🎰\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想中六合彩</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想加人工\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-blue-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t💼\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想加人工</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"如何可以升職\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-purple-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-purple-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t📈\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>如何可以升職</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想拍拖\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-pink-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-pink-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t💕\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想拍拖</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想增強桃花運\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-pink-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-pink-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🌸\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想增強桃花運</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我身體會有隱患嗎\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-orange-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-orange-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t⚕️\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我身體會有隱患嗎</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* 重複第一組標籤以實現無縫循環 */}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想增多財運\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-yellow-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-yellow-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t💰\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想增多財運</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"如何更健康\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-green-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-green-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🍃\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>如何更健康</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想中六合彩\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-red-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-red-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🎰\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想中六合彩</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想加人工\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-blue-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t💼\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想加人工</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"如何可以升職\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-purple-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-purple-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t📈\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>如何可以升職</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想拍拖\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-pink-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-pink-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t💕\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想拍拖</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我想增強桃花運\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-pink-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-pink-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🌸\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我想增強桃花運</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleShortcutClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"我身體會有隱患嗎\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 space-x-2 text-xs font-medium text-gray-700 transition-shadow bg-white border border-gray-200 rounded-lg shadow-md whitespace-nowrap md:px-6 md:py-3 md:text-sm hover:shadow-lg hover:text-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center w-6 h-6 bg-orange-100 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-orange-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t⚕️\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>我身體會有隱患嗎</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t/* 正常聊天消息 */\n\t\t\t\t\t\t\t\tmessages.map((message, index) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tclassName={`flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{message.role === \"user\" ? (\n\t\t\t\t\t\t\t\t\t\t\t/* 用戶消息樣式 - 黃色背景黑色文字 */\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"max-w-[80%] sm:max-w-[85%] md:max-w-[70%] p-2 sm:p-3 md:p-4 rounded-2xl shadow-md\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: \"#CFE117\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs font-medium text-black sm:text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{message.content || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t/* AI助手消息樣式 - 白色背景配風鈴頭像 */\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"max-w-[90%] sm:max-w-[95%] md:max-w-[90%] bg-white rounded-2xl shadow-md border border-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t{/* 助手頭像和標題 */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center p-3 md:p-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/images/風水妹/風水妹2.png\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"風鈴\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-10 h-10 mr-2 rounded-full shadow-lg md:w-12 md:h-12 md:mr-3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonError={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target as HTMLImageElement\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).style.display =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"none\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-black md:text-base\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t風鈴\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* 消息內容 */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"px-3 pb-2 md:px-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm leading-relaxed text-black whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.content || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* AI 分析結果顯示 */}\n\t\t\t\t\t\t\t\t\t\t\t\t{/* {message.aiAnalysis && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 mx-3 mb-3 text-xs border rounded-lg md:p-3 md:mx-4 md:mb-4 bg-gray-50\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Sparkles\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={14}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-purple-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium text-gray-700\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAI 分析結果\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t話題:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={getTopicBadgeColor(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.detectedTopic\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.detectedTopic\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t範圍內:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isWithinScope\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"default\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isWithinScope\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"✅ 是\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"❌ 否\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t信心度:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-mono text-sm text-purple-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.confidence *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toFixed(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t%\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{message.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.specificProblem && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t具體問題:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-xs text-gray-800\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aiAnalysis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.specificProblem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)} */}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* 時間戳 */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"px-3 pb-2 md:px-4 md:pb-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isClient\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst date =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnew Date(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.timestamp\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst hours =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getHours()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.padStart(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst minutes =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getMinutes()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.padStart(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst seconds =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getSeconds()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.padStart(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn `${hours}:${minutes}:${seconds}`;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"--:--:--\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {message.systemType && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-2 text-purple-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t•{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.systemType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)} */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div className=\"flex justify-start\">\n\t\t\t\t\t\t\t\t\t<div className=\"bg-white border border-gray-200 shadow-md rounded-2xl\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center p-3 md:p-4\">\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/images/風水妹/風水妹2.png\"\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"風鈴\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-10 h-10 mr-2 rounded-full shadow:lg md:w-12 md:h-12 md:mr-3\"\n\t\t\t\t\t\t\t\t\t\t\t\tonError={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target as HTMLImageElement\n\t\t\t\t\t\t\t\t\t\t\t\t\t).style.display = \"none\";\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"font-medium text-black\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t風鈴\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"px-3 pb-3 md:px-4 md:pb-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-black\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t風鈴費神運算中\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<Brain className=\"w-4 h-4 text-purple-600 animate-pulse\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-32 h-2 overflow-hidden bg-gray-200 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-full rounded-full bg-gradient-to-r from-purple-400 via-blue-400 to-pink-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: `progress-bar ${loadingDuration}s linear infinite`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonAnimationStart={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`🎬 Progress bar started with ${loadingDuration}s duration`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Scroll anchor */}\n\t\t\t\t\t\t\t<div ref={messagesEndRef} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* 輸入區域 - 只在非落地頁時顯示，響應式設計 */}\n\t\t\t\t\t\t{!showLandingPage && (\n\t\t\t\t\t\t\t<div className=\"flex-shrink-0 p-1 border-t border-gray-200 sm:p-2 md:p-4\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center mx-1 transition-shadow bg-white border border-gray-200 rounded-full shadow-lg sm:mx-0 hover:shadow-xl\">\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tvalue={inputMessage}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetInputMessage(e.target.value)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"輸入任何問題，風鈴會分析並引導你...\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1 px-2 py-2 text-xs text-black placeholder-gray-500 bg-transparent resize-none focus:outline-none sm:px-3 sm:py-2.5 sm:text-sm md:px-6 md:py-3 md:text-base\"\n\t\t\t\t\t\t\t\t\t\trows={1}\n\t\t\t\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t\t\t\t\tstyle={{ minHeight: \"32px\" }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center px-1 space-x-1 sm:px-2 md:px-4 md:space-x-2\">\n\t\t\t\t\t\t\t\t\t\t{/* Send button with larger touch target on mobile */}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleSendMessage}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t!inputMessage.trim() ||\n\t\t\t\t\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"p-1.5 text-purple-600 transition-all duration-200 rounded-full hover:text-purple-700 hover:bg-purple-50 active:bg-purple-100 disabled:text-gray-300 disabled:cursor-not-allowed disabled:hover:bg-transparent sm:p-2\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth: \"32px\",\n\t\t\t\t\t\t\t\t\t\t\t\tminHeight: \"32px\",\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Send className=\"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5\" />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* 生日信息收集模態框 */}\n\t\t\t{showBirthdayModal && (\n\t\t\t\t<BirthdayModal\n\t\t\t\t\tisOpen={showBirthdayModal}\n\t\t\t\t\tonClose={() => setShowBirthdayModal(false)}\n\t\t\t\t\tonSubmit={handleBirthdaySubmit}\n\t\t\t\t\tconcern={concern}\n\t\t\t\t\tisCoupleAnalysis={isCoupleAnalysis}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Custom Font Definition */}\n\t\t\t<style jsx global>{`\n\t\t\t\t@font-face {\n\t\t\t\t\tfont-family: \"UoqMunThenKhung\";\n\t\t\t\t\tsrc: url(\"/fonts/UoqMunThenKhung.ttf\") format(\"truetype\");\n\t\t\t\t\tfont-weight: normal;\n\t\t\t\t\tfont-style: normal;\n\t\t\t\t\tfont-display: swap;\n\t\t\t\t}\n\n\t\t\t\t@keyframes progress-bar {\n\t\t\t\t\t0% {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\twidth: 0%;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@keyframes scroll-left {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: translateX(50%);\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: translateX(-50%);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.animate-progress-bar {\n\t\t\t\t\tanimation: progress-bar 15s linear infinite;\n\t\t\t\t}\n\n\t\t\t\t.animate-scroll-left {\n\t\t\t\t\tanimation: scroll-left 20s linear infinite;\n\t\t\t\t\twidth: max-content;\n\t\t\t\t\tmax-width: 800px;\n\t\t\t\t}\n\n\t\t\t\t.animate-scroll-left:hover {\n\t\t\t\t\tanimation-play-state: paused;\n\t\t\t\t}\n\t\t\t`}</style>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}