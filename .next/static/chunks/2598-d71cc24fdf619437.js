"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2598],{17313:(e,t,n)=>{n.d(t,{Xi:()=>c,av:()=>d,j7:()=>o,tU:()=>r});var a=n(95155);n(12115);var s=n(60704),i=n(66474),l=n(59434);function r(e){let{className:t,...n}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(s.bL,{"data-slot":"tabs",className:(0,l.cn)("flex flex-col gap-2",t),...n}),n.setShowTab&&(0,a.jsx)(i.A,{className:"w-4 h-4 absolute top-2.5 right-5",onClick:()=>n.setShowTab(!1)})]})}function o(e){let{className:t,...n}=e;return(0,a.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,l.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...n})}function c(e){let{className:t,...n}=e;return(0,a.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,l.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function d(e){let{className:t,...n}=e;return(0,a.jsx)(s.UC,{"data-slot":"tabs-content",className:(0,l.cn)("flex-1 outline-none",t),...n})}},26126:(e,t,n)=>{n(95155),n(12115);var a=n(74466);n(59434),(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200"}},defaultVariants:{variant:"default"}})},40003:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(95155),s=n(60388),i=n(66766),l=n(22346),r=n(17652);function o(){let e=(0,r.c3)("home.footer"),t={contact:[{name:e("contact"),href:"/customer/contact"}],law:[{name:e("privacy"),href:"/customer/privacy"},{name:e("terms"),href:"/customer/terms"}],social:[{icon:"/images/footer/Facebook.png",href:"https://www.facebook.com/profile.php?id=61578389876952"},{icon:"/images/footer/Instagram.png",href:"https://www.instagram.com/harmoniq_fengshui/"}]};return(0,a.jsx)("footer",{className:"px-5 text-gray-300 md:px-0",style:{background:"#374A37",fontFamily:"Noto Serif TC, serif"},children:(0,a.jsxs)("div",{className:"container px-4 mx-auto py-30",children:[(0,a.jsxs)("div",{className:"justify-center item-center text-[50px] font-bold text-white text-center mt-20 mb-20",children:[(0,a.jsx)("h1",{className:"text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"46px"},children:e("title")}),(0,a.jsx)("p",{className:"mt-2 text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"24px"},children:e("subtitle")})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-5",children:[(0,a.jsxs)("div",{className:"flex gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("consult")}),(0,a.jsx)("ul",{className:"space-y-2",children:t.contact.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(s.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("law")}),(0,a.jsx)("ul",{className:"space-y-2",children:t.law.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(s.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white min-w-30",style:{fontFamily:"Noto Serif TC, serif"},children:e("focus")}),(0,a.jsx)("div",{className:"flex space-x-4",children:t.social.map(e=>e.href?(0,a.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80",children:(0,a.jsx)(i.default,{src:e.icon,alt:"",width:30,height:30})},e.icon):(0,a.jsx)(i.default,{src:e.icon,alt:"",width:30,height:30},e.icon))})]})]}),(0,a.jsx)(l.Separator,{className:"mt-7.5"}),(0,a.jsx)("div",{className:"mt-5 font-semibold text-center border-t border-[#004F44] md:mt-10",style:{fontFamily:"Noto Serif TC, serif"},children:(0,a.jsxs)("p",{children:["\xa9 2025 HarmoniQ. ",e("copyright")]})})]})})}},60470:(e,t,n)=>{n.d(t,{Ay:()=>b});var a=n(25932),s=n(34831),i=n(27726),l=n(7419),r=n.n(l),o=n(82940),c=n.n(o),d=n(99836);r().extend(a.t).extend(s.sM).extend(i.z0);let m=r()(c()().format("YYYY-MM-DD")).char8.year.toString(),{LYGanzhiMap:x,LYzhiMap:h,LYStarMap:f,LYSihuaMap:u,spouseStarMap:g,spouseSihuaMap:p}=function(){let e=c()().format("YYYY"),t={},n={},a={},s={},i={},l={};for(let r=1;r<=12;r++){let o=e+"-"+(r<10?"0"+r:""+r)+"-15",c=d.astro.bySolar(o,0,"男",!0,"zh-CN").horoscope(o);n[r]=c.monthly.earthlyBranch,t[r]=c.monthly.heavenlyStem+c.monthly.earthlyBranch,a[r]=c.palace("命宫","monthly").majorStars.map(e=>e.name).toString(),i[r]=c.palace("夫妻","monthly").majorStars.map(e=>e.name).toString(),s[r]=c.palace("命宫","monthly").mutagedPlaces().map(e=>e.name).toString(),l[r]=c.palace("夫妻","monthly").mutagedPlaces().map(e=>e.name).toString()}return{LYGanzhiMap:t,LYzhiMap:n,LYStarMap:a,LYSihuaMap:s,spouseStarMap:i,spouseSihuaMap:l}}();(function(){let e=c()().format("YYYY-MM-DD");r()(e).char8.month.toString()})(),function(){let e=c()().format("YYYY-MM-DD");d.astro.bySolar(e,0,"男",!0,"zh-CN").horoscope(e,0).palace("夫妻","yearly").majorStars.map(e=>e.name).toString()}();let y={};function b(e,t){var n;let a=c()(e).format("YYYY-MM-DD HH:mm:ss");if(console.log("birthStr",a),y[a+"-"+t])return y[a+"-"+t];let s=Math.floor(c()(e).hour()/2),i=c()(e).format("YYYY-MM-DD"),l=d.astro.bySolar(i,s,"female"==t?"女":"男",!0,"zh-CN"),o=l.palace("命宫"),x=l.palace("身宫"),h=l.palace("迁移").majorStars.map(e=>e.name).toString(),f=l.horoscope(i,s),u=r()(a),g=function(e,t,n,a,s,i,l,r){let o={金:0,木:0,水:0,火:0,土:0},c=[e,t,n,a,s,i,l,r];c.forEach(e=>{["金","木","水","火","土"].includes(e)&&o[e]++});let d=c.length;return"金:".concat((o.金/d*100).toFixed(2),"%，木:").concat((o.木/d*100).toFixed(2),"%，水:").concat((o.水/d*100).toFixed(2),"%，火:").concat((o.火/d*100).toFixed(2),"%，土:").concat((o.土/d*100).toFixed(2),"%")}(u.char8.year.stem.e5.name,u.char8.year.branch.e5.name,u.char8.month.stem.e5.name,u.char8.month.branch.e5.name,u.char8.day.stem.e5.name,u.char8.day.branch.e5.name,u.char8.hour.stem.e5.name,u.char8.hour.branch.e5.name),p=u.char8.day.branch.hiddenStems.map(e=>e.name).toString(),b=u.char8.year.branch.hiddenStems,j=u.char8.month.branch.hiddenStems,S=u.char8.day.branch.hiddenStems,v=u.char8.hour.branch.hiddenStems,w=u.char8ex(+("female"!==t)),F=w.year,A=w.month,C=w.day,T=w.hour,D={nayin:u.char8.year.takeSound,wuxingJu:(n=u.char8.year.takeSoundE5.toString(),"".concat(n).concat(N[n],"局")),year:u.char8.year.toString(),month:u.char8.month.toString(),day:u.char8.day.toString(),hour:u.char8.hour.toString(),wuxingScale:g,rizhiCanggan:p,mingPalace:"{主星：".concat(o.majorStars.map(e=>e.name).toString(),",主星亮度：").concat(o.majorStars.map(e=>e.brightness||"").toString(),", 辅星： ").concat(o.minorStars.map(e=>e.name).toString(),", 四化：").concat(o.mutagedPlaces().map(e=>e.name).toString(),"}"),bodyPalace:"{主星：".concat(x.majorStars.map(e=>e.name).toString(),",主星亮度：").concat(x.majorStars.map(e=>e.brightness||"").toString(),", 辅星： ").concat(x.minorStars.map(e=>e.name).toString(),", 四化：").concat(x.mutagedPlaces().map(e=>e.name).toString(),"}"),qianyiPalace:h,dayunGanzhi:f.decadal.heavenlyStem+f.decadal.earthlyBranch,liunianGanzhi:m,yearStemTenGod:F.stemTenGod.name,yearBranchTenGod:F.branchTenGod.map(e=>e.name).toString(),monthStemTenGod:A.stemTenGod.name,monthBranchTenGod:A.branchTenGod.map(e=>e.name).toString(),dayStemTenGod:C.stemTenGod.name,dayBranchTenGod:C.branchTenGod.map(e=>e.name).toString(),hourStemTenGod:T.stemTenGod.name,hourBranchTenGod:T.branchTenGod.map(e=>e.name).toString(),yearGods:F.gods.map(e=>e.name).toString(),monthGods:A.gods.map(e=>e.name).toString(),dayGods:C.gods.map(e=>e.name).toString(),yearStem:u.char8.year.stem.name,yearStemWuxing:u.char8.year.stem.e5.name,yearBranch:u.char8.year.branch.name,yearBranchWuxing:u.char8.year.branch.e5.name,monthStem:u.char8.month.stem.name,monthStemWuxing:u.char8.month.stem.e5.name,monthBranch:u.char8.month.branch.name,monthBranchWuxing:u.char8.month.branch.e5.name,dayStem:u.char8.day.stem.name,dayStemWuxing:u.char8.day.stem.e5.name,dayBranch:u.char8.day.branch.name,dayBranchWuxing:u.char8.day.branch.e5.name,hourStem:u.char8.hour.stem.name,hourStemWuxing:u.char8.hour.stem.e5.name,hourBranch:u.char8.hour.branch.name,hourBranchWuxing:u.char8.hour.branch.e5.name,yearNayin:u.char8.year.takeSound,monthNayin:u.char8.month.takeSound,dayNayin:u.char8.day.takeSound,hourNayin:u.char8.hour.takeSound,yearNayinWuxing:u.char8.year.takeSoundE5.toString(),monthNayinWuxing:u.char8.month.takeSoundE5.toString(),dayNayinWuxing:u.char8.day.takeSoundE5.toString(),hourNayinWuxing:u.char8.hour.takeSoundE5.toString(),yearBranchHiddenStems:b.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),monthBranchHiddenStems:j.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),dayBranchHiddenStems:S.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),hourBranchHiddenStems:v.map(e=>({stem:e.name,element:e.e5.name,strength:e.value}))};return y[a+"-"+t]=D,console.log("result",D),D}let N={水:"二",木:"三",金:"四",土:"五",火:"六"}},62598:(e,t,n)=>{n.d(t,{default:()=>v});var a=n(95155),s=n(12115),i=n(35695),l=n(46453),r=n(17652),o=n(66766),c=n(35226),d=n(40003),m=n(60470);let x=(e,t)=>{let{birthDateTime:n,gender:a}=e,s=new Date(n),i=new Date().getFullYear()-s.getFullYear(),l=t.dayStem,r=t.dayBranch,o=t.monthStem,c=t.monthBranch,d=t.yearStem,m=t.yearBranch,x=t.hourStem,h=t.hourBranch,f=t.dayStemWuxing,u=t.monthStemWuxing;return"請根據以下八字資料進行個人化健康運勢分析，並以JSON格式輸出：\n\n八字資料：\n- 日主：".concat(l).concat(f,"（生於").concat(c,"月").concat(o).concat(u,"）\n- 四柱：").concat(d).concat(m,"年柱、").concat(o).concat(c,"月柱、").concat(l).concat(r,"日柱、").concat(x).concat(h,"時柱\n- 性別：").concat("male"===a?"男":"女","性\n- 現年：").concat(i,"歲\n- 出生年份：").concat(s.getFullYear(),'年\n\n請嚴格按照以下JSON格式輸出分析結果：\n\n```json\n{\n  "summary": {\n    "title": "核心健康特質總結（例：水土交戰，養腎固本為要）",\n    "description": "基於八字五行生剋關係的整體健康評述，包含核心矛盾和調和重點"\n  },\n  "systems": {\n    "腎骨系統核心": {\n      "title": "腎骨系統核心",\n      "content": {\n        "description": "基於日主').concat(f,'和時柱分析腎骨系統特質",\n        "advantages": "先天優勢：骨骼密度、修復能力等具體表現",\n        "risks": [\n          {\n            "period": "').concat("male"===a?"男性":"女性",'青年期 (20-35歲)",\n            "description": "具體健康風險和症狀表現"\n          },\n          {\n            "period": "未來大運期間（具體年份）",\n            "description": "長期健康隱患和預防重點"\n          }\n        ],\n        "keyYears": "關鍵年份提醒：').concat(s.getFullYear()+35,"年、").concat(s.getFullYear()+45,'年等具體年份的注意事項"\n      }\n    },\n    "代謝循環特質": {\n      "title": "代謝循環特質",\n      "content": {\n        "description": "基於火土水關係分析代謝循環系統",\n        "bloodCharacteristics": "血液特質：粘稠度、循環狀況及檢測建議",\n        "digestiveFeatures": "消化特徵：脾胃功能強弱、飲食宜忌",\n        "skinConcerns": "皮膚狀況：屏障功能、季節性問題預防"\n      }\n    },\n    "神經免疫平衡": {\n      "title": "神經免疫平衡",\n      "content": {\n        "description": "基於木火關係分析神經免疫系統",\n        "advantages": "優勢特質：應激反應、免疫力強度",\n        "weaknesses": "潛在弱點：睡眠品質、神經調節問題",\n        "periodicPattern": "週期性規律：生肖年份對健康的影響模式"\n      }\n    }\n  },\n  "careRegimen": {\n    "diet": "個人化飲食方案：具體的晨起養生、午間調養、季節性飲食建議，包含具體分量和時間",\n    "acupoints": "經絡調養：具體穴位名稱、按摩時間（如每晚7-9點按摩湧泉穴3分鐘）、最佳時段",\n    "exercise": "運動建議：最適合的運動類型、頻率（如游泳週2-3次每次30分鐘）、需避免的時段",\n    "lifeStageReminder": "大運提醒：下個大運起始年份').concat(s.getFullYear()+10*Math.floor(i/10)+10,'年的健康重點和調養強化"\n  }\n}\n```\n\n分析要求：\n1. 深度結合八字五行生剋關係\n2. 考慮').concat("male"===a?"男性":"女性","生理特點\n3. 提供具體可操作的建議（時間、頻率、劑量）\n4. 預測具體年份的健康變化\n5. 語言專業但易懂，使用傳統中文\n6. 必須輸出標準JSON格式，不要添加任何額外說明\n\n請開始分析：")};function h(){return{currentDayun:"丙寅",currentAge:25,birthYear:2e3,periods:f()}}function f(){return[{dayun:"甲子",ageRange:"15-24歲",yearRange:"2015-2024",status:"past",startYear:2015,endYear:2024,startAge:15,endAge:24},{dayun:"丙寅",ageRange:"25-34歲",yearRange:"2025-2034",status:"current",startYear:2025,endYear:2034,startAge:25,endAge:34},{dayun:"丁卯",ageRange:"35-44歲",yearRange:"2035-2044",status:"future",startYear:2035,endYear:2044,startAge:35,endAge:44},{dayun:"壬戌",ageRange:"45-54歲",yearRange:"2045-2054",status:"future",startYear:2045,endYear:2054,startAge:45,endAge:54}]}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2025,a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2025;if(!e||!t)return console.error("Birth date and gender are required for fortune period calculation"),h();try{let a=(0,m.Ay)(e,t);if(!a||!a.dayunGanzhi)return console.error("Unable to calculate wuxing data"),h();let s=new Date(e),i=s.getFullYear(),l=n-i,r=function(e,t){let n=e.getMonth()+1;return"male"===t?n%2==1?7:5:n%2==0?6:4}(s,t),o=function(e,t,n,a,s){let i=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],l=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],r=e[0],o=e[1],c=i.indexOf(r),d=l.indexOf(o);if(-1===c||-1===d)return console.error("Invalid dayun format:",e),f();let m=[],x=10*Math.floor((s-n)/10)+n;for(let e=-2;e<=3;e++){let n=x+10*e,s=t+n,r=s+9,o=(c+e+10)%10,h=(d+e+12)%12,f=i[o]+l[h],u="future";a>=s&&a<=r?u="current":a>r&&(u="past"),m.push({dayun:f,ageRange:"".concat(n,"-").concat(n+9,"歲"),yearRange:"".concat(s,"-").concat(r),status:u,startYear:s,endYear:r,startAge:n,endAge:n+9})}return m.sort((e,t)=>e.startYear-t.startYear)}(a.dayunGanzhi,i,r,n,l);return{currentDayun:a.dayunGanzhi,currentAge:l,birthYear:i,periods:o}}catch(e){return console.error("Error calculating fortune periods:",e),h()}}(e,t,n),s=a.periods.filter(e=>"current"===e.status||"future"===e.status).slice(0,3);return{current:a.currentDayun,periods:s,birthYear:a.birthYear,currentAge:a.currentAge}}let g=e=>{let{userInfo:t,wuxingData:n,sessionId:i,onDataUpdate:l}=e,[r,o]=(0,s.useState)("腎骨系統核心"),[c,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),[f,g]=(0,s.useState)(!1),p=(null==t?void 0:t.birthDateTime)?u(t.birthDateTime,t.gender):null;(0,s.useEffect)(()=>{t&&n&&y()},[t,n]);let y=async()=>{try{h(!0);let e=x(t,n),a=await fetch("/api/health-fortune-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,userInfo:t,wuxingData:n})}),s=await a.json();if(s.success)d(s.analysis),g(s.isAIGenerated||!1),console.log("\uD83C\uDFAF Using ".concat(s.isAIGenerated?"DeepSeek AI":"Structured Mock"," data")),l&&s.analysis&&(console.log("\uD83D\uDCBE Saving health fortune analysis data"),l({analysis:s.analysis,isAIGenerated:s.isAIGenerated||!1,generatedAt:new Date().toISOString(),sessionId:i,userInfo:t,wuxingData:n}));else{console.warn("API failed, using mock data:",s.error);let e=b(t,n);d(e),g(!1),l&&e&&(console.log("\uD83D\uDCBE Saving mock health fortune analysis data"),l({analysis:e,isAIGenerated:!1,generatedAt:new Date().toISOString(),sessionId:i,userInfo:t,wuxingData:n}))}}catch(a){console.error("Error generating health analysis:",a);let e=b(t,n);d(e),l&&e&&(console.log("\uD83D\uDCBE Saving error fallback health fortune analysis data"),l({analysis:e,isAIGenerated:!1,generatedAt:new Date().toISOString(),sessionId:i,userInfo:t,wuxingData:n,isErrorFallback:!0}))}finally{h(!1)}},b=(e,t)=>{var n,a,s,i,l,r,o,c,d,m,x,h,f;let u=new Date(e.birthDateTime);new Date().getFullYear(),u.getFullYear();let g=t.dayStem||"癸",y=t.dayStemWuxing||"水";return{summary:{title:"".concat(y).concat(g,"交戰，養腎固本為要"),description:"日主".concat(g).concat(y,"坐").concat(t.dayBranch||"丑","土七殺，生於").concat(t.monthBranch||"巳","月火旺之時，時柱").concat(t.hourStem||"壬").concat(t.hourBranch||"子","劫財助身。月支").concat(t.monthBranch||"巳","火生旺己土七殺，形成「火生土→土剋水」的攻身格局，健康需重點調和").concat(y,"土矛盾。")},systems:{腎骨系統核心:{title:"腎骨系統核心",content:{description:"".concat(g).concat(y,"通腎，日支").concat(t.dayBranch||"丑","土為濕土晦火存水，雖有調和作用，但月柱己巳火土熾烈。"),advantages:"時柱壬子強根護持，骨骼密度佳，傷口癒合能力強",risks:[{period:"青年期 (".concat((null==p?void 0:null===(a=p.periods)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.ageRange)||"20-35歲",")"),description:"火土運旺易耗腎陰，可能出現經期不準、腰肌勞損"},{period:"".concat((null==p?void 0:null===(i=p.periods)||void 0===i?void 0:null===(s=i[2])||void 0===s?void 0:s.yearRange)||"2040年後").concat((null==p?void 0:null===(r=p.periods)||void 0===r?void 0:null===(l=r[2])||void 0===l?void 0:l.dayun)||"丙寅","運"),description:"".concat((null==p?void 0:null===(d=p.periods)||void 0===d?void 0:null===(c=d[2])||void 0===c?void 0:null===(o=c.dayun)||void 0===o?void 0:o[1])||"寅","巳申三刑，需防關節退行性病變")}],keyYears:"2026丙午（火極）、2038戊午（三合火局）避免高溫曝曬"}},代謝循環特質:{title:"代謝循環特質",content:{description:"巳火當令透己土，火土旺而水受制：",bloodCharacteristics:"血粘稠度易偏高（火煉金→金生水不足），2031辛亥年後需定期檢測血脂",digestiveFeatures:"丑土為濕土，常現脾胃濕熱（食慾好但消化滯緩），忌冰飲加重濕氣",skinConcerns:"己土七殺主皮膚屏障弱，換季易發蕁麻疹（2024甲辰年辰丑破尤甚）"}},神經免疫平衡:{title:"神經免疫平衡",content:{description:"年柱甲木傷官制殺，時柱劫財幫身：",advantages:"應激反應敏捷，疫苗抗體生成力強",weaknesses:"子水為「夜神」，熬夜易致植物神經紊亂（頭皮出油、入睡困難）",periodicPattern:"每逢鼠年（子）、馬年（午）睡眠質量波動明顯"}}},careRegimen:{diet:"晨起飲淡鹽水（50ml，鹽1g）固腎，補癸水鹹味需求；午後小米粥健脾養胃；秋季每日食用銀耳蓮子湯，滋陰潤肺，養心安神。",acupoints:"每晚5點到7點，按摩腳底湧泉穴（每腳3分鐘）和三陰交（每邊5分鐘），幫忙調氣血、穩陰陽。",exercise:"游泳最合適（一周2-3次，每次30-45分鐘），補水又降火，增強體力；中午11點到1點別劇烈運動，免得傷心氣。",lifeStageReminder:"".concat((null==p?void 0:null===(x=p.periods)||void 0===x?void 0:null===(m=x[1])||void 0===m?void 0:m.startYear)||"2029","年開始走").concat((null==p?void 0:null===(f=p.periods)||void 0===f?void 0:null===(h=f[1])||void 0===h?void 0:h.dayun)||"丙寅","運，春天（3-5月）要做肝膽排毒（像喝蒲公英茶或找專業調理），幫肝臟順氣，順應節氣變化。")}}};return m?(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成健康運勢分析..."})]}):c?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-4",children:(0,a.jsx)("h2",{className:"text-4xl font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:"健康運勢分析"})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#389D7D] to-[#567156] rounded-full px-6 py-3 mb-6 inline-block",children:(0,a.jsxs)("h3",{className:"text-xl font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:["總結：",c.summary.title]})}),(0,a.jsx)("p",{className:"text-lg text-[#374A37] leading-relaxed mb-8",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.summary.description})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-xl p-6 mb-6",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#567156] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"三大系統深度解析"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:["腎骨系統核心","代謝循環特質","神經免疫平衡"].map(e=>(0,a.jsx)("button",{onClick:()=>o(e),className:"px-8 py-4 rounded-full font-semibold text-lg transition-all duration-200 ".concat(r===e?"bg-[#389D7D] text-white":"bg-white text-[#757575] hover:bg-gray-50"),style:{fontFamily:"Noto Serif TC, serif",boxShadow:"0 4px 4px rgba(0, 0, 0, 0.25)"},children:e},e))}),(0,a.jsx)("div",{className:"mb-8",children:c.systems[r]&&(0,a.jsx)("div",{className:"bg-[#389D7D] rounded-xl p-6 text-white mb-6",children:((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{className:"mb-4 text-2xl font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:(e=>{switch(e){case"腎骨系統核心":return"優勢";case"代謝循環特質":return"弱點";case"神經免疫平衡":return"週期規律";default:return"分析"}})(e)}),(0,a.jsx)("p",{className:"mb-6 text-lg",style:{fontFamily:"Noto Sans HK, sans-serif"},children:((e,t)=>"腎骨系統核心"===e?t.advantages:t.description)(e,t.content)}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:((e,t)=>{switch(e){case"腎骨系統核心":return[{title:"先天優勢",text:t.advantages},{title:"潛在風險",text:Array.isArray(t.risks)?t.risks.map(e=>"".concat(e.period,": ").concat(e.description)).join("；"):"青年期（20 - 35歲）：火土運旺易耗腎陰，可能出現經期不準、腰肌勞損"},{title:"關鍵年份",text:t.keyYears}];case"代謝循環特質":return[{title:"血液特質",text:t.bloodCharacteristics},{title:"消化特徵",text:t.digestiveFeatures},{title:"皮膚隱患",text:t.skinConcerns}];case"神經免疫平衡":return[{title:"先天優勢",text:t.advantages},{title:"潛在風險",text:t.weaknesses},{title:"關鍵年份",text:t.periodicPattern}];default:return[]}})(e,t.content).map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/20",children:[(0,a.jsx)("h5",{className:"mb-2 font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:e.title}),(0,a.jsx)("p",{style:{fontFamily:"Noto Sans HK, sans-serif"},children:e.text})]},t))})]}))(r,c.systems[r])})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#567156] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"全週期調養方案"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#389D7D] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"作息"})}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.careRegimen.diet})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#389D7D] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"經絡"})}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.careRegimen.acupoints})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#389D7D] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"運動"})}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.careRegimen.exercise})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#389D7D] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"大運提醒"})}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.careRegimen.lifeStageReminder})]})]})]})]}):(0,a.jsx)("div",{className:"py-20 text-center",children:(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"健康分析生成失敗，請重新整理頁面"})})};var p=n(59434);s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,p.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s})}).displayName="Card",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,p.cn)("flex flex-col space-y-1.5 p-6",n),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,p.cn)("text-2xl font-semibold leading-none tracking-tight",n),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,p.cn)("text-sm text-muted-foreground",n),...s})}).displayName="CardDescription",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,p.cn)("p-6 pt-0",n),...s})}).displayName="CardContent",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,p.cn)("flex items-center p-6 pt-0",n),...s})}).displayName="CardFooter",n(26126),n(17313);let y=(e,t)=>{let{birthDateTime:n,gender:a}=e,s=new Date(n),i=new Date().getFullYear(),l=i-s.getFullYear(),r=t.dayStem,o=t.dayBranch,c=t.monthStem,d=t.monthBranch,m=t.yearStem,x=t.yearBranch,h=t.hourStem,f=t.hourBranch,u=t.dayStemWuxing,g=t.monthStemWuxing;return"請根據以下八字資料進行個人化事業運勢分析，並以JSON格式輸出：\n\n八字資料：\n- 日主：".concat(r).concat(u,"（生於").concat(d,"月").concat(c).concat(g,"）\n- 四柱：").concat(m).concat(x,"年柱、").concat(c).concat(d,"月柱、").concat(r).concat(o,"日柱、").concat(h).concat(f,"時柱\n- 性別：").concat("male"===a?"男":"女","性\n- 現年：").concat(l,"歲\n- 出生年份：").concat(s.getFullYear(),'年\n\n請嚴格按照以下JSON格式輸出分析結果：\n\n```json\n{\n  "summary": {\n    "title": "格局定位（例：傷官制殺，專業權威之路）",\n    "description": "基於八字十神組合的事業格局分析，包含核心優勢和適合職業方向"\n  },\n  "talents": {\n    "天賦特質解碼": {\n      "title": "天賦特質解碼",\n      "content": [\n        {\n          "name": "十神A（如：').concat(m).concat(x,'傷官）",\n          "description": "核心優勢能力特質分析，具體工作表現和創新能力",\n          "attention": "注意事項：過旺風險及化解方案（如佩戴飾品、風水佈局）"\n        },\n        {\n          "name": "十神B（如：').concat(c).concat(d,'七殺）", \n          "description": "執行特質和領導能力分析，承壓能力和權威表現",\n          "attention": "注意事項：壓力訊號及風水佈局建議"\n        },\n        {\n          "name": "十神C（如：').concat(h).concat(f,'正印）",\n          "description": "智慧特質和學習能力，專業深度和分析能力",\n          "attention": "注意事項：避免過度思慮，保持行動力"\n        }\n      ]\n    },\n    "二十年黃金賽道": {\n      "title": "二十年黃金賽道", \n      "content": {\n        "periods": [\n          {\n            "years": "').concat(i," - ").concat(i+10,'",\n            "luck": "大運名稱",\n            "action": "關鍵動作（如考照/組隊/創業）",\n            "bestYear": "最佳流年（具體年份）",\n            "warning": "風險預警（因刑衝破害）"\n          },\n          {\n            "years": "').concat(i+10," - ").concat(i+20,'",\n            "luck": "大運名稱",\n            "action": "進階動作（如擴張/上市）", \n            "bestYear": "契機流年（具體年份）",\n            "warning": "人際風險預警"\n          },\n          {\n            "years": "').concat(i+20," - ").concat(i+30,'",\n            "luck": "大運名稱",\n            "action": "巔峰動作（如行業標準制定）",\n            "bestYear": "關鍵年份",\n            "warning": "下屬管理風險"\n          }\n        ]\n      }\n    },\n    "權力巔峰標誌": {\n      "title": "權力巔峰標誌",\n      "content": {\n        "peakYear": "具體年份（如').concat(i+25,'年）",\n        "peakDescription": "權力表現（如掌機構決策權）",\n        "bestPartners": "最佳合作生肖組合（三合六合）",\n        "avoidIndustries": "行業紅線：需避免的行業及原因"\n      }\n    }\n  },\n  "strategies": {\n    "officeLayout": {\n      "title": "辦公室佈局",\n      "description": "具體方位和開運物品",\n      "details": "詳細擺放說明：位置、材質、朝向要求",\n      "warning": "禁忌事項：需避免的顏色和物品"\n    },\n    "annualStrategy": {\n      "title": "流年借力",\n      "year": "特定年份為格局名稱",\n      "description": "該年天干地支組合的格局優勢",\n      "benefit": "具體利用方式：升職、決策、投資時機"\n    },\n    "lifelongTaboo": {\n      "title": "終身禁忌",\n      "warning": "觸發危機的具體行為",\n      "reason": "基於十神理論的詳細解釋和後果分析"\n    }\n  }\n}\n```\n\n分析要求：\n1. 深度結合八字十神理論和大運流年\n2. 考慮').concat("male"===a?"男性":"女性","職場特點\n3. 提供具體可操作的建議（時間、方位、物品）\n4. 預測未來20-30年的關鍵時機\n5. 語言專業但實用，使用傳統中文\n6. 必須輸出標準JSON格式，不要添加任何額外說明\n\n請開始分析：")},b=e=>{let{userInfo:t,wuxingData:n,sessionId:i,onDataUpdate:l}=e,[r,o]=(0,s.useState)("天賦特質解碼"),[c,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[h,f]=(0,s.useState)(!1),g=(null==t?void 0:t.birthDateTime)?u(t.birthDateTime,t.gender):null;(0,s.useEffect)(()=>{t&&n&&p()},[t,n]);let p=async()=>{try{x(!0);let e=y(t,n),a=await fetch("/api/career-fortune-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,userInfo:t,wuxingData:n})}),s=await a.json();if(s.success)d(s.analysis),f(s.isAIGenerated||!1),console.log("\uD83C\uDFAF Using ".concat(s.isAIGenerated?"DeepSeek AI":"Structured Mock"," career data")),l&&s.analysis&&(console.log("\uD83D\uDCBE Saving career fortune analysis data"),l({analysis:s.analysis,isAIGenerated:s.isAIGenerated||!1,generatedAt:new Date().toISOString(),sessionId:i,userInfo:t,wuxingData:n}));else{console.warn("Career API failed, using mock data:",s.error);let e=b(t,n);d(e),f(!1),l&&e&&(console.log("\uD83D\uDCBE Saving mock career fortune analysis data"),l({analysis:e,isAIGenerated:!1,generatedAt:new Date().toISOString(),sessionId:i,userInfo:t,wuxingData:n}))}}catch(e){console.error("Error generating career analysis:",e),d(b(t,n))}finally{x(!1)}},b=(e,t)=>{var n,a,s,i;let l=new Date(e.birthDateTime),r=new Date().getFullYear();l.getFullYear(),t.dayStem;let o=t.dayStemWuxing||"木";return{summary:{title:"傷官制殺，專業權威之路",description:"年柱".concat(t.yearStem).concat(t.yearBranch,"傷官駕殺（制").concat(t.monthStem,"中").concat(t.monthBranch,"金），月柱").concat(t.monthStem).concat(t.monthBranch,"七殺透干，構成「傷官制殺」貴格，適合金性權威職業。")},talents:{天賦特質解碼:{title:"天賦特質解碼",content:[{name:"".concat(t.yearStem).concat(t.yearBranch,"傷官"),description:"".concat(t.yearStem).concat(o,"代表生發與創新，傷官格賦予顛覆性思維，擅長打破常規，轉化危機為機會，能在混亂中快速識別問題核心，提出獨到解決方案。"),attention:"注意事項：傷官過旺易招是非，職場中謹言慎行。可佩戴綠玉吊墜，化傷為財，穩定情緒。"}]},二十年黃金賽道:{title:"二十年黃金賽道",content:{periods:[{years:"2025 - 2035",luck:"".concat((null==g?void 0:null===(a=g.periods)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.dayun)||"丁卯","運"),action:"考取司法/醫師資格",bestYear:"2027丁未年最佳",warning:"2031辛亥年慎言辭職"},{years:"2035 - 2045",luck:"".concat((null==g?void 0:null===(i=g.periods)||void 0===i?void 0:null===(s=i[1])||void 0===s?void 0:s.dayun)||"丙寅","運"),action:"組建專業團隊",bestYear:"2038戊午年契機",warning:"避開東南亞市場（寅巳申三刑）"},{years:"2045 - 2055",luck:"乙丑運",action:"創立行業標準",bestYear:"2046丙寅年",warning:"防下屬背叛（丑戌刑）"}]}},權力巔峰標誌:{title:"權力巔峰標誌",content:{peakYear:"".concat(r+24,"己巳年"),peakDescription:"己土殺星透干，掌機構決策權",bestPartners:"猴（申）、鼠（子）、龍（辰）三合水局",avoidIndustries:"遠離地產業（土重剋水）、娛樂業（火旺耗身）"}}},strategies:{officeLayout:{title:"辦公室佈局",description:"正西放銅質文昌塔（申金位）",details:"銅質文昌塔，放置於辦公桌正西或辦公室西牆邊，底座穩固，塔尖朝上，增強文昌星能量，助思考敏捷與職場表現。",warning:"正西避免放置紅色物品（如紅色文件夾或裝飾），以免火剋金，削弱文昌塔功效；保持該區域整潔，避免雜物堆積。"},annualStrategy:{title:"流年借力",year:"".concat(r+4,"年為己酉年"),description:"天干己土（印星）與地支酉金（七殺）形成殺印相生格局",benefit:"利於權力提升與職場突破。此年你的壬水日主得印星生助，思維清晰，決策果斷，適合競聘管理職位或承擔更高責任。"},lifelongTaboo:{title:"終身禁忌",warning:"勿與上司發生戀情（七殺為忌神）",reason:"七殺為忌神，代表壓力與權威，若與上司發展戀情，易因權力不平衡引發職場危機，影響事業前途，甚至導致名譽損失或職位不穩。"}}}};return m?(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成事業運勢分析..."})]}):c?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-4",children:(0,a.jsx)("h2",{className:"text-4xl font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:"事業運勢分析"})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#3263C4] to-[#567156] rounded-full px-6 py-3 mb-6 inline-block",children:(0,a.jsxs)("h3",{className:"text-xl font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:["總結：",c.summary.title]})}),(0,a.jsx)("p",{className:"text-lg text-[#374A37] leading-relaxed mb-8",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.summary.description})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-xl p-6 mb-6",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#567156] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"事業發展全景圖"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:["天賦特質解碼","二十年黃金賽道","權力巔峰標誌"].map(e=>(0,a.jsx)("button",{onClick:()=>o(e),className:"px-8 py-4 rounded-full font-semibold text-lg transition-all duration-200 ".concat(r===e?"bg-[#3263C4] text-white":"bg-white text-[#757575] hover:bg-gray-50"),style:{fontFamily:"Noto Serif TC, serif",boxShadow:"0 4px 4px rgba(0, 0, 0, 0.25)"},children:e},e))}),(0,a.jsxs)("div",{className:"mb-8",children:["天賦特質解碼"===r&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-[#3263C4] to-[#567156] rounded-xl p-6 text-white mb-6",children:[(0,a.jsx)("h4",{className:"mb-6 text-2xl font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"天賦解碼"}),(0,a.jsx)("div",{className:"space-y-6",children:c.talents["天賦特質解碼"].content.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/20",children:[(0,a.jsx)("h5",{className:"mb-3 text-xl font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:e.name}),(0,a.jsx)("p",{className:"mb-4 leading-relaxed",style:{fontFamily:"Noto Sans HK, sans-serif"},children:e.description}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-white/10",children:(0,a.jsx)("p",{className:"text-sm",style:{fontFamily:"Noto Sans HK, sans-serif"},children:e.attention})})]},t))})]}),"二十年黃金賽道"===r&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-[#3263C4] to-[#567156] rounded-xl p-6 text-white mb-6",children:[(0,a.jsx)("h4",{className:"mb-6 text-2xl font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"黃金賽道"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full rounded-lg bg-white/10",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-white/20",children:[(0,a.jsx)("th",{className:"p-4 text-left",style:{fontFamily:"Noto Serif TC, serif"},children:"時期"}),(0,a.jsx)("th",{className:"p-4 text-left",style:{fontFamily:"Noto Serif TC, serif"},children:"大運"}),(0,a.jsx)("th",{className:"p-4 text-left",style:{fontFamily:"Noto Serif TC, serif"},children:"關鍵動作"}),(0,a.jsx)("th",{className:"p-4 text-left",style:{fontFamily:"Noto Serif TC, serif"},children:"風險預警"})]})}),(0,a.jsx)("tbody",{children:c.talents["二十年黃金賽道"].content.periods.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-white/10",children:[(0,a.jsx)("td",{className:"p-4",style:{fontFamily:"Noto Sans HK, sans-serif"},children:e.years}),(0,a.jsx)("td",{className:"p-4",style:{fontFamily:"Noto Sans HK, sans-serif"},children:e.luck}),(0,a.jsxs)("td",{className:"p-4",style:{fontFamily:"Noto Sans HK, sans-serif"},children:[e.action,"（",e.bestYear,"）"]}),(0,a.jsx)("td",{className:"p-4",style:{fontFamily:"Noto Sans HK, sans-serif"},children:e.warning})]},t))})]})})]}),"權力巔峰標誌"===r&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-[#3263C4] to-[#567156] rounded-xl p-6 text-white mb-6",children:[(0,a.jsx)("h4",{className:"mb-6 text-2xl font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"巔峰時機"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/20",children:[(0,a.jsx)("h5",{className:"mb-2 font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"權力巔峰"}),(0,a.jsxs)("p",{style:{fontFamily:"Noto Sans HK, sans-serif"},children:[c.talents["權力巔峰標誌"].content.peakYear,"：",c.talents["權力巔峰標誌"].content.peakDescription]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/20",children:[(0,a.jsx)("h5",{className:"mb-2 font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"最佳合作"}),(0,a.jsx)("p",{style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.talents["權力巔峰標誌"].content.bestPartners})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/20 md:col-span-2",children:[(0,a.jsx)("h5",{className:"mb-2 font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"行業紅線"}),(0,a.jsx)("p",{style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.talents["權力巔峰標誌"].content.avoidIndustries})]})]})]})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#567156] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"晉升秘訣"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#3263C4] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:c.strategies.officeLayout.title})}),(0,a.jsx)("p",{className:"text-sm text-[#374A37] mb-3",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.strategies.officeLayout.description}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.strategies.officeLayout.details})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#3263C4] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:c.strategies.annualStrategy.title})}),(0,a.jsxs)("p",{className:"text-sm text-[#374A37] mb-3",style:{fontFamily:"Noto Sans HK, sans-serif"},children:[c.strategies.annualStrategy.year,"：",c.strategies.annualStrategy.description]}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.strategies.annualStrategy.benefit})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#3263C4] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:c.strategies.lifelongTaboo.title})}),(0,a.jsx)("p",{className:"text-sm text-[#374A37] mb-3",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.strategies.lifelongTaboo.warning}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:c.strategies.lifelongTaboo.reason})]})]})]})]}):(0,a.jsx)("div",{className:"py-20 text-center",children:(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"事業分析生成失敗，請重新整理頁面"})})},N=e=>{let{userInfo:t,wuxingData:n}=e,[i,l]=(0,s.useState)("奠基期"),[r,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1),h=(null==t?void 0:t.birthDateTime)?u(t.birthDateTime,t.gender):null;(0,s.useEffect)(()=>{t&&n&&f()},[t,n]);let f=async()=>{try{d(!0);let e=function(e,t){let n=new Date(e.birthDateTime),a=new Date().getFullYear()-n.getFullYear(),s=t.yearStem||"壬",i=t.yearBranch||"子",l=t.monthStem||"癸",r=t.monthBranch||"丑",o=t.dayStem||"壬",c=t.dayBranch||"子",d=t.hourStem||"庚",m=t.hourBranch||"申",x=t.dayStemWuxing||"水",h=e.gender||"男";return"# 財運發展通用模型分析\n\n## 用戶基本信息\n- 姓名：".concat(e.name,"\n- 性別：").concat(h,"\n- 出生日期：").concat(e.birthDateTime,"\n- 當前年齡：").concat(a,"歲\n\n## 八字信息\n- 年柱：").concat(s).concat(i,"\n- 月柱：").concat(l).concat(r,"\n- 日柱：").concat(o).concat(c,"（日主：").concat(o).concat(x,"）\n- 時柱：").concat(d).concat(m,'\n\n## 分析要求\n\n請基於以上八字信息，按照以下JSON格式生成詳細的財運分析：\n\n```json\n{\n  "summary": {\n    "title": "一句話總結財運命格特點（不超過12字）",\n    "description": "結合八字結構分析財運獲取方式和總體特徵，150字左右"\n  },\n  "threeStages": {\n    "奠基期": {\n      "title": "奠基期",\n      "ageRange": "具體年齡範圍",\n      "fortune": "對應大運",\n      "content": {\n        "phase1": {\n          "name": "第一階段大運名稱",\n          "description": "該大運期間財運特點分析",\n          "keyYear": "關鍵年份及其重要事件預測",\n          "trapYear": "需要特別注意的危險年份及風險提醒"\n        },\n        "phase2": {\n          "name": "第二階段大運名稱", \n          "description": "該大運期間財運特點分析",\n          "warning": "重要警示年份及注意事項"\n        }\n      }\n    },\n    "爆發期": {\n      "title": "爆發期",\n      "ageRange": "具體年齡範圍",\n      "fortune": "對應大運",\n      "content": {\n        "description": "財運爆發期的核心特徵",\n        "keyYear": "最佳投資年份及具體收益預測",\n        "industries": "最適合的核心投資領域",\n        "peakYear": "財富峰值年份及投資建議"\n      }\n    },\n    "守成期": {\n      "title": "守成期", \n      "ageRange": "具體年齡範圍",\n      "fortune": "對應大運",\n      "content": {\n        "description": "守成期財運管理特點",\n        "keyYear": "重要理財決策年份",\n        "avoidIndustries": "需要避免的投資領域"\n      }\n    }\n  },\n  "wealthRules": {\n    "assetAllocation": {\n      "title": "資產配比",\n      "realEstate": "不動產投資建議及比例",\n      "preciousMetals": "貴金屬投資建議及比例", \n      "cash": "現金流動性管理建議及比例"\n    },\n    "partnerships": {\n      "title": "合作禁忌",\n      "zodiacA": {\n        "animal": "不宜合作的生肖A",\n        "description": "基於八字分析為什麼不宜合作"\n      },\n      "zodiacB": {\n        "animal": "不宜合作的生肖B", \n        "description": "基於八字分析為什麼不宜合作"\n      }\n    },\n    "wealthDirection": {\n      "title": "催財方位",\n      "location": "具體的催財方位",\n      "description": "該方位的風水布局建議",\n      "warning": "注意事項和禁忌"\n    }\n  }\n}\n```\n\n## 分析重點：\n1. 基於八字結構分析財星位置和強弱\n2. 結合大運流年推算三個主要財運階段\n3. 提供具體的投資建議和風險提醒\n4. 給出實用的風水催財方位指導\n5. 所有預測都要有具體的八字理論依據\n\n請確保分析內容專業、準確，符合傳統八字命理學理論。')}(t,n),a=await fetch("/api/wealth-fortune-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,userInfo:t,wuxingData:n})}),s=await a.json();if(s.success)o(s.analysis),x(s.isAIGenerated||!1),console.log("\uD83C\uDFAF Using ".concat(s.isAIGenerated?"DeepSeek AI":"Structured Mock"," wealth data"));else{console.warn("Wealth API failed, using mock data:",s.error);let e=g(t,n);o(e),x(!1)}}catch(e){console.error("Error generating wealth analysis:",e),o(g(t,n))}finally{d(!1)}},g=(e,t)=>{let n=new Date(e.birthDateTime);new Date().getFullYear(),n.getFullYear();let a=t.dayStem||"壬";t.dayStemWuxing;let s=(null==h?void 0:h.periods)||[],i=s[0]||{dayun:"丙寅",yearRange:"2025-2034",ageRange:"25-34歲"},l=s[1]||{dayun:"丁卯",yearRange:"2035-2044",ageRange:"35-44歲"},r=s[2]||{dayun:"壬戌",yearRange:"2045-2054",ageRange:"45-54歲"};return{summary:{title:"劫財奪財，置業守成為上",description:"月干".concat(t.monthStem,"土七殺透出，時柱").concat(a).concat(t.dayBranch,"劫財坐旺，全局無明財星，財富需通過制殺獲取（金製木→木疏土→土生金循環）。")},threeStages:{奠基期:{title:"奠基期",ageRange:i.ageRange,fortune:"".concat(i.dayun,"運"),content:{phase1:{name:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t?"".concat(e.dayun,"運（").concat(e.yearRange,"）"):"".concat(e.dayun,"運")}(i),description:"".concat(i.dayun[0],"火偏財虛透，").concat(i.dayun[1],"木食神生財，主勞力得財"),keyYear:"".concat(i.startYear+3,"年：利考金融證照（證券/基金從業資格）"),trapYear:"致命陷阱：".concat(i.startYear+6,"年慎防P2P理財")},phase2:{name:"次階段（".concat(i.startYear+5," - ").concat(i.endYear,"）"),description:"".concat(i.dayun[0],"火正財合身，").concat(i.dayun[1],"木傷官生財，收入躍升但開支激增"),warning:"".concat(i.endYear-2,"年：合作投資需謹慎")}}},爆發期:{title:"爆發期",ageRange:l.ageRange,fortune:"".concat(l.dayun,"運"),content:{description:"".concat(l.dayun[0],"木傷官制殺，").concat(l.dayun[1],"水祿神助身"),keyYear:"".concat(l.startYear+5,"年：不動產增值收益可觀"),industries:"核心領域：".concat("子"===l.dayun[1]?"水處理工程":"相關行業","、法律服務"),peakYear:"財富峰值：".concat(l.endYear-2,"年，利資源貿易")}},守成期:{title:"守成期",ageRange:r.ageRange,fortune:"".concat(r.dayun,"運"),content:{description:"".concat(r.dayun[1],"土制劫財開財庫，財運穩定"),keyYear:"".concat(r.startYear+5,"年：金水相生，可建立家族信託基金"),avoidIndustries:"忌諱產業：餐飲（火）、林業（木剋土）"}}},wealthRules:{assetAllocation:{title:"資產配比",realEstate:"70%不動產：投資房地產，確保穩健回報",preciousMetals:"20%貴金屬：購買黃金、銀條或相關ETF，作為抗通脹保值資產",cash:"10%流動現金：保留現金或貨幣基金，應對緊急需求或短期投資機會"},partnerships:{title:"合作禁忌",zodiacA:{animal:"生肖馬（午沖子）",description:"屬馬者五行屬火，與子鼠相沖，合作易生衝突，導致決策分歧或財務損失。"},zodiacB:{animal:"生肖兔（卯刑子）",description:"屬兔者五行屬木，與子鼠相刑，易引發信任危機或隱性競爭，影響財運。"}},wealthDirection:{title:"催財方位",location:"臥室西北角（戌位）",description:"西北角屬乾卦，主財運與貴人運。擺放白水晶簇，可聚財旺氣，增強正財運勢。",warning:"注意事項：西北角避免堆放雜物，保持通風明亮；忌擺放尖銳物品或電子產品，以免破壞財氣場。"}}}};return c?(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D09900] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成財運運勢分析..."})]}):r?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-4",children:(0,a.jsx)("h2",{className:"text-4xl font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:"財運運勢分析"})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#D09900] to-[#BD4800] rounded-full px-6 py-3 mb-6 inline-block",children:(0,a.jsxs)("h3",{className:"text-xl font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:["總結：",r.summary.title]})}),(0,a.jsx)("p",{className:"text-lg text-[#374A37] leading-relaxed mb-8",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.summary.description})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-xl p-6 mb-6",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#D09900] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"三階段財運密碼"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:["奠基期","爆發期","守成期"].map(e=>(0,a.jsx)("button",{onClick:()=>l(e),className:"px-8 py-4 rounded-full font-semibold text-lg transition-all duration-200 ".concat(i===e?"bg-[#D09900] text-white":"bg-white text-[#757575] hover:bg-gray-50"),style:{fontFamily:"Noto Serif TC, serif",boxShadow:"0 4px 4px rgba(0, 0, 0, 0.25)"},children:e},e))}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#D09900] to-[#BD4800] rounded-full px-6 py-2 mb-6 text-center",children:(0,a.jsxs)("h4",{className:"text-lg font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:[r.threeStages[i].ageRange,"\xb7",r.threeStages[i].fortune]})}),(0,a.jsxs)("div",{className:"mb-8",children:["奠基期"===i&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#D09900] to-[#BD4800] rounded-full px-6 py-3 mb-4 inline-block",children:(0,a.jsx)("h5",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:r.threeStages["奠基期"].fortune})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["奠基期"].content.phase1.description}),(0,a.jsx)("div",{className:"bg-[#F5F5F5] rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["奠基期"].content.phase1.keyYear})}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-700",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["奠基期"].content.phase1.trapYear})})]})]}),(0,a.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-4 inline-block",children:(0,a.jsx)("h5",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:r.threeStages["奠基期"].content.phase2.name.split("（")[0]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["奠基期"].content.phase2.description}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-700",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["奠基期"].content.phase2.warning})})]})]})]}),"爆發期"===i&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-4 inline-block",children:(0,a.jsx)("h5",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"甲木傷官"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["爆發期"].content.description}),(0,a.jsx)("div",{className:"bg-[#F5F5F5] rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["爆發期"].content.keyYear})})]})]}),(0,a.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-4 inline-block",children:(0,a.jsx)("h5",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"財富峰值"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["爆發期"].content.industries}),(0,a.jsx)("div",{className:"bg-[#F5F5F5] rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["爆發期"].content.peakYear})})]})]})]}),"守成期"===i&&(0,a.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-4 inline-block",children:(0,a.jsxs)("h5",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:[r.threeStages["守成期"].ageRange,"\xb7",r.threeStages["守成期"].fortune]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["守成期"].content.description}),(0,a.jsx)("div",{className:"bg-[#F5F5F5] rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["守成期"].content.keyYear})}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-700",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.threeStages["守成期"].content.avoidIndustries})})]})]})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#D09900] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"財富法則"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:r.wealthRules.assetAllocation.title})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.assetAllocation.realEstate}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.assetAllocation.preciousMetals}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.assetAllocation.cash})]})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:r.wealthRules.partnerships.title})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37] mb-1",style:{fontFamily:"Noto Serif TC, serif"},children:r.wealthRules.partnerships.zodiacA.animal}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.partnerships.zodiacA.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37] mb-1",style:{fontFamily:"Noto Serif TC, serif"},children:r.wealthRules.partnerships.zodiacB.animal}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.partnerships.zodiacB.description})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#D09900] rounded-full px-6 py-3 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-base font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:r.wealthRules.wealthDirection.title})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:r.wealthRules.wealthDirection.location}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.wealthDirection.description}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.wealthRules.wealthDirection.warning})]})]})]})]})]}):(0,a.jsx)("div",{className:"py-20 text-center",children:(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"財運分析生成失敗，請重新整理頁面"})})},j=e=>{let{userInfo:t,wuxingData:n}=e,[i,l]=(0,s.useState)("正緣特徵三重認證"),[r,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1),h=(null==t?void 0:t.birthDateTime)?u(t.birthDateTime,t.gender):null;(0,s.useEffect)(()=>{t&&n&&f()},[t,n]);let f=async()=>{try{d(!0);let e=function(e,t){let n=new Date(e.birthDateTime),a=new Date().getFullYear()-n.getFullYear(),s=t.yearStem||"壬",i=t.yearBranch||"子",l=t.monthStem||"癸",r=t.monthBranch||"丑",o=t.dayStem||"壬",c=t.dayBranch||"子",d=t.hourStem||"庚",m=t.hourBranch||"申",x=t.dayStemWuxing||"水",h=e.gender||"男";return"# 感情婚姻通用指南分析\n\n## 用戶基本信息\n- 姓名：".concat(e.name,"\n- 性別：").concat(h,"\n- 出生日期：").concat(e.birthDateTime,"\n- 當前年齡：").concat(a,"歲\n\n## 八字信息\n- 年柱：").concat(s).concat(i,"\n- 月柱：").concat(l).concat(r,"\n- 日柱：").concat(o).concat(c,"（日主：").concat(o).concat(x,"）\n- 時柱：").concat(d).concat(m,'\n\n## 分析要求\n\n請基於以上八字信息，按照以下JSON格式生成詳細的感情婚姻分析：\n\n```json\n{\n  "summary": {\n    "title": "格局本質一句話總結（如：殺星混雜，晚婚為吉）",\n    "description": "結合八字結構分析夫妻宮和配偶星的情況，解釋婚姻格局特點"\n  },\n  "authenticity": {\n    "profession": {\n      "title": "基本屬性",\n      "description": "正緣伴侶應具備的十神屬性和對應職業類型，詳細說明為什麼適合",\n      "warning": "注意事項和相處建議"\n    },\n    "ageGap": {\n      "title": "年齡差距", \n      "description": "最佳年齡差距範圍及其八字理論依據",\n      "warning": "年齡差距的注意事項"\n    },\n    "meetingChance": {\n      "title": "相識契機",\n      "description": "最佳相遇時機和場景，基於流年分析",\n      "warning": "相識時的注意事項"\n    }\n  },\n  "romanticCycles": {\n    "25歲前": {\n      "period": "具體年齡段",\n      "fortune": "對應大運",\n      "dangerousYear": "高危險流年及其特徵",\n      "crisis": "具體危機類型描述",\n      "solution": "詳細化解方案，包括風水建議"\n    },\n    "35歲危機": {\n      "period": "具體年齡段",\n      "fortune": "對應大運", \n      "dangerousYear": "高危險流年及其特徵",\n      "crisis": "具體危機類型描述",\n      "solution": "詳細化解方案，包括風水建議"\n    },\n    "45歲波動": {\n      "period": "具體年齡段",\n      "fortune": "對應大運",\n      "dangerousYear": "高危險流年及其特徵", \n      "crisis": "具體危機類型描述",\n      "solution": "詳細化解方案，包括風水建議"\n    }\n  },\n  "marriageRules": {\n    "bestYear": {\n      "title": "最佳婚年",\n      "year": "具體年份（夫妻宮到位）",\n      "description": "該年份的八字分析和婚姻時機說明"\n    },\n    "taboos": {\n      "title": "相處禁忌",\n      "financial": {\n        "title": "財務管理禁忌",\n        "description": "基於劫財或財星分析的財務建議"\n      },\n      "frequency": {\n        "title": "相處頻率建議",\n        "description": "基於五行相剋化解的相處模式"\n      }\n    },\n    "childrenFate": {\n      "title": "子女緣",\n      "timing": "最佳生育時機和性別預測",\n      "description": "子女運勢和教育建議"\n    }\n  }\n}\n```\n\n## 分析重點：\n1. 基於夫妻宮（日支）和配偶星分析婚姻格局\n2. 結合大運流年推算感情發展階段和危機期\n3. 提供具體的擇偶條件和相處建議\n4. 給出實用的化解方案和風水布局\n5. 所有分析都要有明確的八字理論依據\n\n格局本質： [夫星/妻星]混雜 → 晚婚為吉\n\n正緣三維認證：\n- 職業特質：需具[十神]屬性（如[職業類型]）\n- 年齡差距：[數字]歲以上可調和[五行矛盾] \n- 相遇契機：[流年]利於[社交場景]中結識\n\n情劫週期表：\n年齡層 | 高危險流年 | 危機類型 | 化解方案\n[歲數]前 | [年] | [爛桃花/三角關係] | 避[生肖]屬相\n[歲數]歲 | [年] | [經濟糾紛] | [風水佈置]\n\n婚姻法則：\n- 最佳婚年：[流年]（[夫妻宮]到位）\n- 相處禁忌：\n  - 禁止[財務行為]（因[劫財星]而奪財）\n  - [分居頻率]緩解[五行相剋]\n\n使用說明：將方括號[ ]內參數替換為命主專屬訊息\n\n請確保分析內容專業、準確，符合傳統八字命理學理論。')}(t,n),a=await fetch("/api/relationship-fortune-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,userInfo:t,wuxingData:n})}),s=await a.json();if(s.success)o(s.analysis),x(s.isAIGenerated||!1),console.log("\uD83D\uDC95 Using ".concat(s.isAIGenerated?"DeepSeek AI":"Structured Mock"," relationship data"));else{console.warn("Relationship API failed, using mock data:",s.error);let e=g(t,n);o(e),x(!1)}}catch(e){console.error("Error generating relationship analysis:",e),o(g(t,n))}finally{d(!1)}},g=(e,t)=>{var n,a,s,i,l,r,o,c,d,m,x,f,u,g,p,y;let b=new Date(e.birthDateTime);return new Date().getFullYear(),b.getFullYear(),t.dayStem,t.dayStemWuxing,{summary:{title:"殺星混雜，晚婚得良緣",description:"月干己土七殺為夫星，日支丑土藏殺，時柱壬子劫財，形成「殺星混雜」格局，婚戀需過濾爛桃花。"},authenticity:{profession:{title:"基本屬性",description:"正緣伴侶具七殺格，代表紀律、權威與責任感強烈，適合軍警、執法人員或外科醫師等需高度自律與決斷力的職業。此類人士能提供穩定保護，補足癸水日主的柔韌性，助感情長久。",warning:"注意事項：七殺過旺易嚴苛，需互補溫柔"},ageGap:{title:"年齡差距",description:"伴侶年長6-12歲，己土印星得火生助，利於中老年運勢發達，此差距助穩定感情，避免年輕衝動導致的波折。年長者帶來成熟智慧，平衡癸水的滲透性。",warning:"注意事項：差距過大易生代溝，定期溝通興趣"},meetingChance:{title:"相識契機",description:"2041年辛酉，辛金印星通關，酉金合局，利智慧交流，適合在學術會議、研討會或專業論壇相遇，透過共同興趣快速建立連結。",warning:"注意事項：酉金暗藏競爭，勿急於表白"}},romanticCycles:{["".concat((null==h?void 0:null===(a=h.periods)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.ageRange)||"25歲前")]:{period:(null==h?void 0:null===(i=h.periods)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:s.ageRange)||"25歲前",fortune:"".concat((null==h?void 0:null===(r=h.periods)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:l.dayun)||"丁卯","運"),dangerousYear:"".concat((null==h?void 0:null===(c=h.periods)||void 0===c?void 0:null===(o=c[0])||void 0===o?void 0:o.startYear)+4||2029,"年：七殺透干"),crisis:"遇激情戀情，但子酉破終分手",solution:"避開生肖馬者（午火增殺攻身）：午火增殺攻身；易放大衝突；分手後靜心1個月，勿衝動脫單。"},["".concat((null==h?void 0:null===(m=h.periods)||void 0===m?void 0:null===(d=m[1])||void 0===d?void 0:d.ageRange)||"35歲危機")]:{period:"".concat((null==h?void 0:null===(f=h.periods)||void 0===f?void 0:null===(x=f[1])||void 0===x?void 0:x.ageRange)||"35歲危機"),fortune:"".concat((null==h?void 0:null===(g=h.periods)||void 0===g?void 0:null===(u=g[1])||void 0===u?void 0:u.dayun)||"丙寅","運"),dangerousYear:"".concat((null==h?void 0:null===(y=h.periods)||void 0===y?void 0:null===(p=y[1])||void 0===p?void 0:p.startYear)+8||2037,"年：巳丑拱殺，易陷三角關係"),crisis:"丁火生己火，巳丑拱金局，紆氣過旺；易推入第三者糾紛，影響婚姻穩定。",solution:"臥室懸掛高山流水畫（金生水）：選擇絲綢畫作，掛南牆；化解火熱，每日約會1次，重建信任。"},"45歲波動":{period:"45歲波動",fortune:"乙丑運",dangerousYear:"2047丁卯年：子卯刑剋，防財產糾紛",crisis:"丁火激木火，子水與西金相刑，易因金錢或產爭執，導致夫妻不和。",solution:"家中財位（東南角）放置聚寶盆（陶瓷，內放3枚銅錢）：穩財運，簽訂婚前協議，明確財產歸屬。"}},marriageRules:{bestYear:{title:"最佳婚年",year:"2033癸丑年（丑土夫宮到位）",description:"2033年癸水上旺，己土丑印星得火生利於中老年運勢發達，利金錢或產爭執，導致夫妻不和。應先記錄雙方共同目標，建立記錄整婚時間。"},taboos:{title:"相處禁忌",financial:{title:"禁止財務共有（壬水劫財奪財）",description:"因壬水劫財星奪財，建議分開管理財產，定期清理投資狀況，避免產權糾紛影響感情和諧。"},frequency:{title:"週末分房睡（緩解水火相激）",description:"水火五行有輕微相剋，週末分開睡覺能緩解衝突，每日約會1次，重建信任。"}},childrenFate:{title:"子女緣",timing:"2044甲子年得長子（子水祿神應期）",description:"子年利財祿，生子時機良好，甲子年天干地支都符合，子女聰明有智慧，多與學術或水相關行業。"}}}};return c?(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#C74772] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成感情運勢分析..."})]}):r?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-4",children:(0,a.jsx)("h2",{className:"text-4xl font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:"感情運勢分析"})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#C74772] to-[#A03A5A] rounded-full px-6 py-3 mb-6 inline-block",children:(0,a.jsxs)("h3",{className:"text-xl font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:["總結：",r.summary.title]})}),(0,a.jsx)("p",{className:"text-lg text-[#374A37] leading-relaxed mb-8",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.summary.description})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-xl p-6 mb-6",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#C74772] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"感情全週期透視"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:["正緣特徵三重認證","三大情劫週期"].map(e=>(0,a.jsx)("button",{onClick:()=>l(e),className:"px-8 py-4 rounded-full font-semibold text-lg transition-all duration-200 ".concat(i===e?"bg-[#C74772] text-white":"bg-white text-[#757575] hover:bg-gray-50"),style:{fontFamily:"Noto Serif TC, serif",boxShadow:"0 4px 4px rgba(0, 0, 0, 0.25)"},children:e},e))}),(0,a.jsxs)("div",{className:"mb-8",children:["正緣特徵三重認證"===i&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#C74772] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"基本屬性"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.authenticity.profession.description}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-700",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.authenticity.profession.warning})})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#C74772] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"年齡差距"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.authenticity.ageGap.description}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-700",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.authenticity.ageGap.warning})})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#C74772] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"相識契機"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.authenticity.meetingChance.description}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-700",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.authenticity.meetingChance.warning})})]})]})]}),"三大情劫週期"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,a.jsx)("div",{className:"bg-[#C74772] text-white p-3 rounded-lg text-center",children:(0,a.jsx)("h5",{className:"text-sm font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"時期"})}),(0,a.jsx)("div",{className:"bg-[#C74772] text-white p-3 rounded-lg text-center",children:(0,a.jsx)("h5",{className:"text-sm font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"大運"})}),(0,a.jsx)("div",{className:"bg-[#C74772] text-white p-3 rounded-lg text-center",children:(0,a.jsx)("h5",{className:"text-sm font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"關鍵流年"})}),(0,a.jsx)("div",{className:"bg-[#C74772] text-white p-3 rounded-lg text-center",children:(0,a.jsx)("h5",{className:"text-sm font-bold",style:{fontFamily:"Noto Serif TC, serif"},children:"風險預警"})})]}),(0,a.jsxs)("div",{className:"grid items-start grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("h5",{className:"font-bold text-[#374A37] text-sm",style:{fontFamily:"Noto Serif TC, serif"},children:r.romanticCycles["25歲前"].period})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["25歲前"].fortune})}),(0,a.jsxs)("div",{className:"p-3 bg-white rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-[#374A37] mb-2",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["25歲前"].dangerousYear}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["25歲前"].crisis})]}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["25歲前"].solution})})]}),(0,a.jsxs)("div",{className:"grid items-start grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("h5",{className:"font-bold text-[#374A37] text-sm",style:{fontFamily:"Noto Serif TC, serif"},children:r.romanticCycles["35歲危機"].period})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["35歲危機"].fortune})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["35歲危機"].dangerousYear})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["35歲危機"].solution})})]}),(0,a.jsxs)("div",{className:"grid items-start grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("h5",{className:"font-bold text-[#374A37] text-sm",style:{fontFamily:"Noto Serif TC, serif"},children:r.romanticCycles["45歲波動"].period})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["45歲波動"].fortune})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["45歲波動"].dangerousYear})}),(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.romanticCycles["45歲波動"].solution})})]})]})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-[#C74772] mb-6",style:{fontFamily:"Noto Serif TC, serif"},children:"婚姻穩固法則"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#C74772] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"最佳婚年"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:r.marriageRules.bestYear.year}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.marriageRules.bestYear.description})]})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#C74772] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"相處禁忌"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37] mb-1",style:{fontFamily:"Noto Serif TC, serif"},children:r.marriageRules.taboos.financial.title}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.marriageRules.taboos.financial.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37] mb-1",style:{fontFamily:"Noto Serif TC, serif"},children:r.marriageRules.taboos.frequency.title}),(0,a.jsx)("p",{className:"text-xs text-[#757575]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.marriageRules.taboos.frequency.description})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#EFEFEF] rounded-lg p-4",style:{boxShadow:"inset 0 4px 4px rgba(0, 0, 0, 0.25)"},children:[(0,a.jsx)("div",{className:"bg-[#C74772] rounded-full px-4 py-2 mb-3 inline-block",children:(0,a.jsx)("h4",{className:"text-sm font-bold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:"子女緣"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif"},children:r.marriageRules.childrenFate.timing}),(0,a.jsx)("p",{className:"text-sm text-[#374A37]",style:{fontFamily:"Noto Sans HK, sans-serif"},children:r.marriageRules.childrenFate.description})]})]})]})]})]}):(0,a.jsx)("div",{className:"py-20 text-center",children:(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"感情分析生成失敗，請重新整理頁面"})})},S=["金","木","水","火","土"];function v(e){var t;let{birthDateTime:n,gender:x,sessionId:h,userInfo:f,wuxingData:u,onFortuneDataUpdate:p}=e;(0,i.useRouter)(),(0,l.Ym)(),(0,r.c3)("report");let y=(0,s.useRef)([]),[v,w]=(0,s.useState)(null),[F,A]=(0,s.useState)([{title:"四大運勢分析"}]),[C,T]=(0,s.useState)("fortune"),[D,k]=(0,s.useState)({health:null,career:null,wealth:null,relationship:null}),Y=(0,i.useSearchParams)(),E=n||Y.get("birthDateTime"),R=x||Y.get("gender"),B=h||Y.get("sessionId");(0,s.useEffect)(()=>{f?w(f):E&&R&&w({birthDateTime:E,gender:R,sessionId:B})},[f,E,R,B]),(0,s.useEffect)(()=>{p&&Object.values(D).some(e=>null!==e)&&(console.log("\uD83C\uDFAF Four Fortune Analysis data updated:",D),Object.entries(D).forEach(e=>{let[t,n]=e;n&&p(t,n)}))},[D,p]);let H=(e,t)=>{console.log("\uD83D\uDCBE Saving ".concat(e," fortune analysis:"),t),k(n=>({...n,[e]:{...t,generatedAt:new Date().toISOString(),sessionId:B}}))},K=e=>{let t=Object.values(e).reduce((e,t)=>e+t,0),n=[],a=[];Object.entries(e).forEach(e=>{let[s,i]=e;i/t*100>=25?n.push(s):0===i&&a.push(s)});let s="";if(1===n.length)s="".concat(n[0],"旺");else if(2===n.length)s="".concat(n.join(""),"兩旺");else if(n.length>=3)s="".concat(n.slice(0,2).join(""),"等多旺");else{var i;let t=Math.max(...Object.values(e)),n=null===(i=Object.entries(e).find(e=>{let[n,a]=e;return a===t}))||void 0===i?void 0:i[0];s=n?"".concat(n,"為主"):"五行平衡"}return{strongElements:n,weakElements:a,strengthDesc:s,elementCounts:e}},I=e=>{let{strongElements:t,weakElements:n}=e,a="正印",s="食神",i="補缺";return t.length>0?(i="洩旺",t.includes("火")?(a="食神",s="財星"):t.includes("土")&&(a="正官",s="正印")):n.length>0&&(i="補缺",n.includes("水")&&(a="正印",s="比肩")),{primaryGod:a,auxiliaryGod:s,strategy:i}},G=e=>{if(!(null==e?void 0:e.birthDateTime))return null;let t=(0,m.Ay)(e.birthDateTime,e.gender),n={},a=[];S.forEach(e=>{let s=0;[t.yearStemWuxing,t.yearBranchWuxing,t.monthStemWuxing,t.monthBranchWuxing,t.dayStemWuxing,t.dayBranchWuxing,t.hourStemWuxing,t.hourBranchWuxing].forEach(t=>{t===e&&s++}),n[e]=s,0===s&&a.push(e)});let s=K(n),i=I(s);return{elementCounts:n,missingElements:a,wuxingData:t,strengthAnalysis:s,usefulGods:i}},W=u&&v?{wuxingData:u,...G(v)}:v?G(v):null;return(0,a.jsxs)("div",{className:"min-h-screen bg-[#EFEFEF]",children:[(0,a.jsx)(c.default,{from:"report"}),(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)("div",{className:"w-full sm:w-[95%] lg:w-[90%] mx-auto px-4 sm:px-5 pt-2s sm:pt-10 lg:pt-10 pb-6 sm:pb-10 flex flex-col lg:flex-row bg-[#EFEFEF]",children:(0,a.jsx)("div",{className:"flex items-start justify-center flex-1 mb-6 lg:justify-start lg:mb-0",children:(0,a.jsx)("h1",{ref:e=>y.current[0]=e,style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,fontSize:"clamp(32px, 6vw, 56px)",color:"#A3B116",lineHeight:1.1,textAlign:"center"},className:"lg:text-left",children:null===(t=F[0])||void 0===t?void 0:t.title})})}),(0,a.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[85%] mx-auto bg-white rounded-[20px] sm:rounded-[26px] p-4 sm:p-8 lg:p-13 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:(()=>{if(!W)return(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在分析您的命理資料..."})]})});let{wuxingData:e}=W,t=["鼠","牛","虎","兔","龍","蛇","馬","羊","猴","雞","狗","豬"][(new Date(v.birthDateTime).getFullYear()-1900)%12];return(0,a.jsxs)("div",{className:"flex flex-col items-start gap-6 lg:flex-row lg:justify-between lg:gap-0",children:[(0,a.jsx)("div",{className:"w-full lg:w-[20%] ml-10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-16 mx-auto mb-4 w-18 sm:w-20 sm:h-20 lg:w-100 lg:h-100",children:(0,a.jsx)(o.default,{src:"/images/animals/".concat("龍"===t?"dragon":"鼠"===t?"mouse":"牛"===t?"cow":"虎"===t?"tiger":"兔"===t?"rabbit":"蛇"===t?"snake":"馬"===t?"horse":"羊"===t?"sheep":"猴"===t?"monkey":"雞"===t?"chicken":"狗"===t?"dog":"豬"===t?"pig":"mouse",".png"),alt:t,width:328,height:328,className:"object-contain"})})})}),(0,a.jsxs)("div",{className:"w-full lg:w-[70%] flex flex-col gap-4 sm:gap-6",children:[(0,a.jsx)("div",{className:"text-center lg:text-start",children:(0,a.jsx)("h3",{className:"font-bold text-[#A3B116] mb-4 sm:mb-6",style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(36px, 8vw, 70px)"},children:"主要結論"})}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-3 mb-4 lg:justify-start sm:gap-4 sm:mb-6",children:[(0,a.jsx)("div",{className:"bg-white border-2 border-black rounded-full px-3 sm:px-6 lg:px-10 py-2 min-w-[100px] sm:min-w-[120px] lg:min-w-[140px] text-center flex-shrink-0",children:(0,a.jsxs)("div",{className:"font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)"},children:["年柱-",(0,a.jsx)("span",{className:"text-[#A3B116]",children:e.year})]})}),(0,a.jsx)("div",{className:"bg-white border-2 border-black rounded-full px-3 sm:px-6 lg:px-10 py-2 min-w-[100px] sm:min-w-[120px] lg:min-w-[140px] text-center flex-shrink-0",children:(0,a.jsxs)("div",{className:"font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)"},children:["月柱-",(0,a.jsx)("span",{className:"text-[#A3B116]",children:e.month})]})}),(0,a.jsx)("div",{className:"bg-white border-2 border-black rounded-full px-3 sm:px-6 lg:px-10 py-2 min-w-[100px] sm:min-w-[120px] lg:min-w-[140px] text-center flex-shrink-0",children:(0,a.jsxs)("div",{className:"font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)"},children:["日柱-",(0,a.jsx)("span",{className:"text-[#A3B116]",children:e.day})]})}),(0,a.jsx)("div",{className:"bg-white border-2 border-black rounded-full px-3 sm:px-6 lg:px-10 py-2 min-w-[100px] sm:min-w-[120px] lg:min-w-[140px] text-center flex-shrink-0",children:(0,a.jsxs)("div",{className:"font-bold text-[#374A37]",style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)"},children:["時柱-",(0,a.jsx)("span",{className:"text-[#A3B116]",children:e.hour})]})})]}),(0,a.jsxs)("div",{className:"flex justify-start gap-8",children:[(0,a.jsx)("div",{className:"bg-[#A3B116] text-white px-15 py-4 rounded-full",children:(0,a.jsxs)("div",{className:"text-xl font-bold text-center",style:{fontFamily:"Noto Serif TC, serif"},children:["五行-",W.strengthAnalysis.strengthDesc]})}),(0,a.jsx)("div",{className:"bg-[#A3B116] text-white px-15 py-4 rounded-full",children:(0,a.jsx)("div",{className:"text-xl font-bold text-center",style:{fontFamily:"Noto Serif TC, serif"},children:(()=>{let e=W.strengthAnalysis.weakElements||[];return 0===e.length?"五行沒有缺失":1===e.length?"缺".concat(e[0]):2===e.length?"缺".concat(e.join("")):"缺".concat(e.slice(0,2).join(""),"等")})()})})]})]})]})})()}),(0,a.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[85%] mx-auto bg-white rounded-[20px] sm:rounded-[26px] p-4 sm:p-8 lg:p-13 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:W?(0,a.jsx)(g,{userInfo:v,wuxingData:W.wuxingData,sessionId:B,onDataUpdate:e=>H("health",e)}):(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成健康運勢分析..."})]})}),(0,a.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[85%] mx-auto bg-white rounded-[20px] sm:rounded-[26px] p-4 sm:p-8 lg:p-13 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:W?(0,a.jsx)(b,{userInfo:v,wuxingData:W.wuxingData,sessionId:B,onDataUpdate:e=>H("career",e)}):(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成事業運勢分析..."})]})}),(0,a.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[85%] mx-auto bg-white rounded-[20px] sm:rounded-[26px] p-4 sm:p-8 lg:p-13 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:W?(0,a.jsx)(N,{userInfo:v,wuxingData:W.wuxingData,sessionId:B,onDataUpdate:e=>H("wealth",e)}):(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成財運運勢分析..."})]})}),(0,a.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[85%] mx-auto bg-white rounded-[20px] sm:rounded-[26px] p-4 sm:p-8 lg:p-13 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:W?(0,a.jsx)(j,{userInfo:v,wuxingData:W.wuxingData,sessionId:B,onDataUpdate:e=>H("relationship",e)}):(0,a.jsxs)("div",{className:"py-20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-[#5A5A5A]",children:"正在生成感情運勢分析..."})]})})]}),(0,a.jsx)(d.A,{})]})}}}]);