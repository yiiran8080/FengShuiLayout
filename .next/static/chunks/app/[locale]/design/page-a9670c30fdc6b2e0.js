(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{827:(e,t,a)=>{"use strict";a.d(t,{A7:()=>p,FN:()=>u,Oj:()=>m,Q8:()=>g,Wk:()=>x});var s=a(8081),i=a(2149),n=a(4905),r=a(2666),l=a(7547),o=a(2194),d=a(9301);let c=i.createContext(null);function h(){let e=i.useContext(c);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let u=i.forwardRef((e,t)=>{let{orientation:a="horizontal",opts:r,setApi:l,plugins:d,className:h,children:u,...x}=e,[p,g]=(0,n.A)({...r,axis:"horizontal"===a?"x":"y"},d),[m,f]=i.useState(!1),[v,b]=i.useState(!1),y=i.useCallback(e=>{e&&(f(e.canScrollPrev()),b(e.canScrollNext()))},[]),w=i.useCallback(()=>{null==g||g.scrollPrev()},[g]),j=i.useCallback(()=>{null==g||g.scrollNext()},[g]),N=i.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),w()):"ArrowRight"===e.key&&(e.preventDefault(),j())},[w,j]);return i.useEffect(()=>{g&&l&&l(g)},[g,l]),i.useEffect(()=>{if(g)return y(g),g.on("reInit",y),g.on("select",y),()=>{null==g||g.off("select",y)}},[g,y]),(0,s.jsx)(c.Provider,{value:{carouselRef:p,api:g,opts:r,orientation:a||((null==r?void 0:r.axis)==="y"?"vertical":"horizontal"),scrollPrev:w,scrollNext:j,canScrollPrev:m,canScrollNext:v},children:(0,s.jsx)("div",{ref:t,onKeyDownCapture:N,className:(0,o.cn)("relative",h),role:"region","aria-roledescription":"carousel",...x,children:u})})});u.displayName="Carousel";let x=i.forwardRef((e,t)=>{let{className:a,...i}=e,{carouselRef:n,orientation:r}=h();return(0,s.jsx)("div",{ref:n,className:"overflow-hidden",children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex","horizontal"===r?"-ml-4":"-mt-4 flex-col",a),...i})})});x.displayName="CarouselContent";let p=i.forwardRef((e,t)=>{let{className:a,...i}=e,{orientation:n}=h();return(0,s.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,o.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===n?"pl-4":"pt-4",a),...i})});p.displayName="CarouselItem";let g=i.forwardRef((e,t)=>{let{className:a,variant:i="outline",size:n="icon",...l}=e,{orientation:c,scrollPrev:u,canScrollPrev:x}=h();return(0,s.jsxs)(d.$,{ref:t,variant:i,size:n,className:(0,o.cn)("absolute  h-8 w-8 rounded-full","horizontal"===c?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!x,onClick:u,...l,children:[(0,s.jsx)(r.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});g.displayName="CarouselPrevious";let m=i.forwardRef((e,t)=>{let{className:a,variant:i="outline",size:n="icon",...r}=e,{orientation:c,scrollNext:u,canScrollNext:x}=h();return(0,s.jsxs)(d.$,{ref:t,variant:i,size:n,className:(0,o.cn)("absolute h-8 w-8 rounded-full","horizontal"===c?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!x,onClick:u,...r,children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Next slide"})]})});m.displayName="CarouselNext"},945:()=>{},2948:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(8081),i=a(378),n=a(9156),r=a(2194);function l(e){let{history:t,historyIndex:a,handleUndo:l,handleRedo:o,className:d}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("flex items-center gap-2",d),children:[(0,s.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 ".concat(a<=0?"text-gray-300":"text-gray-600"),onClick:l,disabled:a<=0,children:(0,s.jsx)(i.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 ".concat(a>=t.length-1?"text-gray-300":"text-gray-600"),onClick:o,disabled:a>=t.length-1,children:(0,s.jsx)(n.A,{className:"w-4 h-4"})})]})}},3030:(e,t,a)=>{"use strict";let s;a.r(t),a.d(t,{default:()=>eD});var i=a(8081),n=a(4137),r=a(9651),l=a(2149),o=a(3634),d=a(8598),c=a.n(d),h=a(9397),u=a(1887),x=a(4128),p=a(9834),g=a(5186),m=a(2948),f=a(5381),v=a(2194),b=a(5131),y=a(9301);function w(e){let{...t}=e;return(0,i.jsx)(b.bL,{"data-slot":"alert-dialog",...t})}function j(e){let{...t}=e;return(0,i.jsx)(b.l9,{"data-slot":"alert-dialog-trigger",...t})}function N(e){let{...t}=e;return(0,i.jsx)(b.ZL,{"data-slot":"alert-dialog-portal",...t})}function R(e){let{className:t,...a}=e;return(0,i.jsx)(b.hJ,{"data-slot":"alert-dialog-overlay",className:(0,v.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function O(e){let{className:t,...a}=e;return(0,i.jsxs)(N,{children:[(0,i.jsx)(R,{}),(0,i.jsx)(b.UC,{"data-slot":"alert-dialog-content",className:(0,v.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function I(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,v.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function T(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,v.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function E(e){let{className:t,...a}=e;return(0,i.jsx)(b.hE,{"data-slot":"alert-dialog-title",className:(0,v.cn)("text-lg font-semibold",t),...a})}function C(e){let{className:t,...a}=e;return(0,i.jsx)(b.rc,{className:(0,v.cn)((0,y.r)(),t),...a})}function A(e){let{className:t,...a}=e;return(0,i.jsx)(b.ZD,{className:(0,v.cn)((0,y.r)({variant:"outline"}),t),...a})}var S=a(6371),D=a(9026);let z=(0,l.forwardRef)((e,t)=>{let{items:a,onShowTab:r,showTab:d,history:b,historyIndex:y,setHistory:N,setHistoryIndex:R,handleUndo:z,handleRedo:U,onGenReport:M,locale:k}=e,F="zh-TW"===k?o.Gx:o.Qc,$=(0,f.c3)("design"),B=(0,S.A)(),[L,G]=(0,l.useState)({x:0,y:0}),[_,H]=(0,l.useState)(!1),[Y,P]=(0,l.useState)({x:0,y:0}),[W,X]=(0,l.useState)(null),[V,K]=(0,l.useState)({width:2e3,height:2e3}),[q,Q]=(0,l.useState)(!1),[J,Z]=(0,l.useState)({x:0,y:0}),[ee,et]=(0,l.useState)(null),[ea,es]=(0,l.useState)([]),[ei,en]=(0,l.useState)(!1),[er,el]=(0,l.useState)({x:0,y:0}),[eo,ed]=(0,l.useState)(null),[ec,eh]=(0,l.useState)(100),[eu,ex]=(0,l.useState)({originScale:100,isMoving:!1,pageX:0,pageY:0,pageX2:0,pageY2:0,initialDistance:0}),[ep,eg]=(0,l.useState)(0);(0,l.useImperativeHandle)(t,()=>({getLocalItems:()=>ea,setLocalItems:es,setActiveRoom:X,setIsRoomDragging:Q,setDraggedRoom:et,setRoomDragStart:Z,setPosition:G,setCompassRotation:eg,getPosition:()=>L,getCompassRotation:()=>ep,getScale:()=>ec,setScale:eh}),[ea,L,ep,ec]);let em=(0,l.useRef)(null),{setNodeRef:ef}=(0,n.zM)({id:"canvas",data:{accepts:[o.w$.ROOM,o.w$.FURNITURE]}});(0,l.useEffect)(()=>{var e;s=null===(e=document.getElementById("canvas-drop-area"))||void 0===e?void 0:e.getBoundingClientRect()},[]);let ev=(e,t,a,s)=>Math.sqrt(Math.pow(a-e,2)+Math.pow(s-t,2)),eb=(0,l.useCallback)(e=>{var t,a;if(!e.target.closest('[data-room-element="true"]')&&"canvas"===e.target.id&&(0===e.button||e.touches)){if((null===(t=e.touches)||void 0===t?void 0:t.length)===2){let t=e.touches[0],a=e.touches[1],s=ev(t.pageX,t.pageY,a.pageX,a.pageY);ex(e=>({...e,isMoving:!0,pageX:t.pageX,pageY:t.pageY,pageX2:a.pageX,pageY2:a.pageY,initialDistance:s,originScale:ec}));return}X(null),H(!0),(null===(a=e.touches)||void 0===a?void 0:a.length)===1?P({x:e.touches[0].clientX-L.x,y:e.touches[0].clientY-L.y}):P({x:e.clientX-L.x,y:e.clientY-L.y})}},[L,ec]),ey=(e,t)=>{if(!e.position||!t.position)return!1;let a=20;return console.log("家具在里面",e.rotation),(-90===e.rotation||-270===e.rotation)&&(console.log("ss",e.size.width,e.size.height),a=Math.abs(e.size.width-e.size.height)/2+a),e.position.x+a>=t.position.x&&e.position.x<=t.position.x+t.size.width&&e.position.x-a+e.size.width<=t.position.x+t.size.width&&e.position.y+a>=t.position.y&&e.position.y<=t.position.y+t.size.height&&e.position.y-a+e.size.height<=t.position.y+t.size.height},ew=(0,l.useCallback)((e,t)=>{var a;if(e.stopPropagation(),Q(!0),et(t),(null===(a=e.touches)||void 0===a?void 0:a.length)==1?Z({x:e.touches[0].clientX-t.position.x,y:e.touches[0].clientY-t.position.y}):Z({x:e.clientX-t.position.x,y:e.clientY-t.position.y}),t.type===o.w$.ROOM){let e=ea.map(e=>e.type===o.w$.FURNITURE&&ey(e,t)?{...e,parentId:t.id,offset:{x:e.position.x-t.position.x,y:e.position.y-t.position.y}}:{...e,parentId:null});es(ea.map(t=>e.find(e=>e.id===t.id)||t))}},[ea]),ej=(0,l.useCallback)((e,t,a)=>{var s;e.stopPropagation(),en(!0),ed(a),(null===(s=e.touches)||void 0===s?void 0:s.length)==1?el({x:e.touches[0].clientX,y:e.touches[0].clientY}):el({x:e.clientX,y:e.clientY})},[]);c().throttle(D.oR.info,3e3);let eN=e=>{var t,a,i,n,r;if(e.preventDefault(),(null===(t=e.touches)||void 0===t?void 0:t.length)===2){let t=e.touches[0],a=e.touches[1],s=ev(t.pageX,t.pageY,a.pageX,a.pageY);eu.initialDistance?s>eu.initialDistance?eI("in",1):eI("out",1):ex(e=>({...e,initialDistance:s,originScale:ec}))}else if(ei&&W&&eo){let t,s;(null===(a=e.touches)||void 0===a?void 0:a.length)==1?(t=e.touches[0].clientX-er.x,s=e.touches[0].clientY-er.y):(t=e.clientX-er.x,s=e.clientY-er.y);let n=W.size.width/W.size.height;es(ea.map(e=>{if(e.id===W.id){let a;let i={...e.size},r={...e.position};switch(eo){case"top-left":i.width=e.size.width-t,W.type===o.w$.ROOM?i.height=e.size.height-s:i.height=i.width/n,r.x=e.position.x+t,r.y=e.position.y+s;break;case"top-right":i.width=e.size.width+t,W.type===o.w$.ROOM?i.height=e.size.height-s:i.height=i.width/n,r.y=e.position.y+s;break;case"bottom-left":i.width=e.size.width-t,W.type===o.w$.ROOM?i.height=e.size.height+s:i.height=i.width/n,r.x=e.position.x+t;break;case"bottom-right":i.width=e.size.width+t,W.type===o.w$.ROOM?i.height=e.size.height+s:i.height=i.width/n}if(e.type===o.w$.ROOM?i.width>=100&&i.height>=100:e.data.type===o.x9.WINDOW?i.width>=8&&i.height>=8:i.width>=20&&i.height>=20)return{...e,size:i,position:r}}return e})),(null===(i=e.touches)||void 0===i?void 0:i.length)==1?el({x:e.touches[0].clientX,y:e.touches[0].clientY}):el({x:e.clientX,y:e.clientY})}else if(q&&ee){let t,a;(null===(n=e.touches)||void 0===n?void 0:n.length)==1?(t=e.touches[0].clientX-J.x,a=e.touches[0].clientY-J.y):(t=e.clientX-J.x,a=e.clientY-J.y),t=Math.max(0,t),a=Math.max(0,a);let s=[];if(ee.type===o.w$.ROOM){let e=ea.filter(e=>e.type===o.w$.FURNITURE&&e.parentId===ee.id).map(e=>e.id);s=ea.map(s=>{if(s.id===ee.id)return{...s,position:{x:t,y:a}};if(e.includes(s.id)){var i,n;return{...s,position:{x:t+(null===(i=s.offset)||void 0===i?void 0:i.x)||0,y:a+(null===(n=s.offset)||void 0===n?void 0:n.y)||0}}}return s})}else s=ea.map(e=>e.id===ee.id?{...e,position:{x:t,y:a}}:e);es(s)}else if(_){let t,a,i,n;(null===(r=e.touches)||void 0===r?void 0:r.length)===1?(t=e.touches[0].clientX-Y.x,a=e.touches[0].clientY-Y.y):(t=e.clientX-Y.x,a=e.clientY-Y.y),t>0&&(t=0),a>0&&(a=0),t<-1e3&&(t=-1e3),a<-1e3&&(a=-1e3),2e3+t<s.width/(ec/100)&&(i=(2e3-t)/(ec/100)),2e3+a<s.height/(ec/100)&&(n=(2e3-a)/(ec/100)),G({x:t,y:a}),K({width:i||V.width,height:n||V.height})}},eR=(0,l.useCallback)(e=>{var t,a;if((null===(t=e.touches)||void 0===t?void 0:t.length)<2&&ex(e=>({...e,isMoving:!1,initialDistance:0})),q||ei){let t,s,i;if((null===(a=e.changedTouches)||void 0===a?void 0:a.length)==1?(t=e.changedTouches[0].clientX-J.x-L.x,s=e.changedTouches[0].clientY-J.y-L.y):(t=e.clientX-J.x-L.x,s=e.clientY-J.y-L.y),ee&&!ea.some(e=>e.id===ee.id)){let e={...ee,position:{x:t/(ec/100),y:s/(ec/100)},data:{...ee.data,label:"".concat(ee.data.label)}};es(i=[...ea,e]),eO(e,i)}else i=ea;let n=b.slice(0,y+1);n.push(i),N(n),R(n.length-1)}H(!1),Q(!1),et(null),en(!1),ed(null)},[q,ei,ea,b,y,J,ee,L,eu]),eO=(e,t)=>{if(e.type===o.w$.FURNITURE){let a=t||ea,s=a.find(t=>t.type===o.w$.ROOM&&ey(e,t));if(s){let t=a.filter(t=>t.type===o.w$.FURNITURE&&t.data.type===e.data.type&&ey(t,s)).sort((e,t)=>e.position.x-t.position.x).map((t,a)=>{let i="".concat(s.data.label,"-").concat(F[e.data.type]).concat(a+1);return t.id===e.id&&(e.data.label=i,e.data.parentRoom=s),{...t,data:{...t.data,label:i,parentRoom:s}}});es(a.map(e=>t.find(t=>t.id===e.id)||e))}else{console.log("选中家具，当前未匹配到房间");let t=c().cloneDeep(a),s=t.filter(t=>t.id===e.id)[0];s&&(s.data.label="未分配-".concat(F[s.data.type]),s.data.parentRoom=null,e.data.label="未分配-".concat(F[s.data.type]),e.data.parentRoom=null,es(t))}}setTimeout(()=>{X(e)})};function eI(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("in"===e&&ec<120)t=ec+a;else if("out"===e&&ec>50)t=ec-a;else{if("reset"!==e)return;t=100}"out"===e&&K({width:(V.width-(L.x<0?L.x:0))*(1+(ec-t)/100),height:(V.height-(L.y<0?L.y:0))*(1+(ec-t)/100)}),eh(t)}(0,l.useEffect)(()=>{let e=em.current;if(e)return e.addEventListener("mousedown",eb),window.addEventListener("mousemove",eN),window.addEventListener("mouseup",eR),e.addEventListener("touchstart",eb),window.addEventListener("touchmove",eN,{passive:!1}),window.addEventListener("touchend",eR),()=>{e.removeEventListener("mousedown",eb),window.removeEventListener("mousemove",eN),window.removeEventListener("mouseup",eR),e.removeEventListener("touchstart",eb),window.removeEventListener("touchmove",eN),window.removeEventListener("touchend",eR)}},[eb,eN,eR]);let eT=(0,l.useCallback)(()=>{W&&es(ea.map(e=>{if(e.id===W.id){let t=((e.rotation||0)-45)%360;return{...e,rotation:t}}return e}))},[W,ea]),eE=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute w-3 h-3 bg-white border border-red-500 cursor-nw-resize rounded-full",style:{top:-6,left:-6},onMouseDown:t=>ej(t,e,"top-left"),onTouchStart:t=>ej(t,e,"top-left")}),(0,i.jsx)("div",{className:"absolute w-3 h-3 bg-white border border-red-500 cursor-ne-resize rounded-full",style:{top:-6,right:-6},onMouseDown:t=>ej(t,e,"top-right"),onTouchStart:t=>ej(t,e,"top-right")}),(0,i.jsx)("div",{className:"absolute w-3 h-3 bg-white border border-red-500 cursor-sw-resize rounded-full",style:{bottom:-6,left:-6},onMouseDown:t=>ej(t,e,"bottom-left"),onTouchStart:t=>ej(t,e,"bottom-left")}),(0,i.jsx)("div",{className:"absolute w-3 h-3 bg-white border border-red-500 cursor-se-resize rounded-full",style:{bottom:-6,right:-6},onMouseDown:t=>ej(t,e,"bottom-right"),onTouchStart:t=>ej(t,e,"bottom-right")})]});return(0,i.jsxs)("div",{ref:e=>{em.current=e,ef(e)},className:"relative w-full min-h-[calc(100vh-64px)] overflow-hidden bg-background",children:[(0,i.jsxs)("div",{className:"fixed top-20 right-6 flex items-center gap-4 z-9",children:[!B&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.A,{history:b,historyIndex:y,handleUndo:z,handleRedo:U,className:" bg-white rounded-full shadow-lg  px-3 py-2"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-full shadow-lg px-3 py-2",children:[(0,i.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 text-gray-600",onClick:e=>eI("out"),disabled:ec<=50,children:(0,i.jsx)(h.A,{className:"w-4 h-4"})}),(0,i.jsxs)("span",{className:"text-sm font-medium text-gray-600 min-w-[48px] text-center",children:[ec,"%"]}),(0,i.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 text-gray-600",onClick:e=>eI("in"),disabled:ec>=120,children:(0,i.jsx)(u.A,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{style:{transform:"rotate(".concat(ep,"deg)"),transition:"transform 0.3s ease-out"},onClick:()=>{eg(ep+45)},className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"N"}),(0,i.jsx)(g.default,{src:"/images/compass.png",alt:"方向",width:40,height:40,className:"cursor-pointer"})]})]}),(0,i.jsx)("div",{id:"canvas",className:"absolute cursor-move",style:{width:"".concat(V.width,"px"),height:"".concat(V.height,"px"),transform:"translate(".concat(L.x,"px, ").concat(L.y,"px)  scale(").concat(ec/100,")"),transformOrigin:"top left",backgroundImage:"radial-gradient(circle, #ddd 1px, transparent 1px)",backgroundSize:"10px 10px"},children:(0,i.jsx)("div",{className:"relative",children:ea.map(e=>e.type===o.w$.ROOM?(0,i.jsxs)("div",{"data-room-element":"true",className:"absolute ".concat((null==W?void 0:W.id)===e.id?"ring-2 ring-red-500":""," cursor-move z-100"),style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},onClick:t=>{t.stopPropagation(),eO(e)},onMouseDown:t=>ew(t,e),onTouchStart:t=>ew(t,e),children:[W&&W.id===e.id&&(0,i.jsxs)("div",{style:{left:"50%",top:"-64px",transform:"translateX(-50%)"},className:"min-w-fit whitespace-nowrap  absolute z-1 h-[40px] rounded-4xl bg-white shadow-lg  items-center px-3 gap-2 md:flex hidden",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"已选中："}),(0,i.jsxs)("div",{className:"flex flex-grow items-center gap-1",children:[(0,i.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:o.$q[W.data.type],borderRadius:"2px"}}),(0,i.jsx)("span",{className:"text-sm text-gray-600 font-bold",children:W.data.label})]}),(0,i.jsx)("button",{className:"flex-shrink-0 text-red-500",onClick:e=>{e.stopPropagation(),es(ea.filter(e=>e.id!==W.id)),X(null)},children:(0,i.jsx)(x.A,{className:"w-4 h-4 text-red-500"})})]}),(0,i.jsx)("div",{className:"w-full h-full",style:{border:e.type===o.w$.ROOM?"8px solid":"none",borderColor:e.type===o.w$.ROOM?o.$q[e.data.type]:"transparent",borderRadius:e.type===o.w$.ROOM?"8px":"0",backgroundColor:e.type===o.w$.ROOM?o.$q[e.data.type]+"80":"transparent"},children:(0,i.jsx)("div",{className:"absolute top-2 left-2 text-[14px] text-[#888888]",style:{zIndex:1},children:e.data.label})}),(null==W?void 0:W.id)===e.id&&eE(e)]},e.id):e.type===o.w$.FURNITURE?(0,i.jsxs)("div",{"data-room-element":"true",className:"absolute cursor-move z-200",style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},onClick:t=>{t.stopPropagation(),eO(e)},onMouseDown:t=>{t.stopPropagation(),ew(t,e)},onTouchStart:t=>{t.stopPropagation(),ew(t,e)},children:[W&&W.id===e.id&&(0,i.jsxs)("div",{style:{left:"50%",top:"-64px",transform:"translateX(-50%)"},className:"min-w-fit whitespace-nowrap absolute z-1 h-[40px] rounded-4xl bg-white shadow-lg  items-center px-3 gap-2 md:flex hidden",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"已选中："}),(0,i.jsxs)("div",{className:"flex flex-grow items-center gap-1",children:[W.data.parentRoom&&(0,i.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:o.$q[W.data.parentRoom.data.type],borderRadius:"2px"}}),(0,i.jsx)("span",{className:"text-sm text-gray-600 font-bold",children:W.data.label})]}),(0,i.jsx)("button",{className:"flex-shrink-0",onClick:e=>{e.stopPropagation(),eT()},children:(0,i.jsx)(p.A,{className:"w-4 h-4"})}),(0,i.jsx)("button",{className:"flex-shrink-0 text-red-500 hover:text-red-600 transition-colors",onClick:e=>{e.stopPropagation(),es(ea.filter(e=>e.id!==W.id)),X(null)},children:(0,i.jsx)(x.A,{className:"w-4 h-4 text-red-500"})})]}),(null==W?void 0:W.id)===e.id&&eE(e),(0,i.jsx)(g.default,{draggable:"false",className:(null==W?void 0:W.id)===e.id?"ring-2 ring-red-500":"",style:{transform:e.rotation?"rotate(".concat(e.rotation,"deg)"):"none",transformOrigin:"center"},src:e.activeIcon,alt:"Furniture",width:e.size.width,height:e.size.height})]},e.id):void 0)})}),W&&(0,i.jsxs)("div",{className:(0,v.cn)("min-w-fit whitespace-nowrap fixed  left-1/2 -translate-x-1/2 h-10 rounded-4xl bg-white shadow-lg flex items-center px-3 gap-2 md:hidden",d?"bottom-85":"bottom-22.5 "),children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"已选中："}),(0,i.jsxs)("div",{className:"flex flex-grow items-center gap-1",children:[(0,i.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:o.$q[W.data.parentRoom?W.data.parentRoom.data.type:W.data.type],borderRadius:"2px"}}),(0,i.jsx)("span",{className:"text-sm text-gray-600 font-bold",children:W.data.label})]}),W.type===o.w$.FURNITURE&&(0,i.jsxs)("button",{className:"flex-shrink-0",onClick:e=>{e.stopPropagation(),eT()},children:[" ",(0,i.jsx)(p.A,{className:"w-4 h-4"})]}),(0,i.jsx)("button",{className:"flex-shrink-0 text-red-500 hover:text-red-600 transition-colors",onClick:e=>{e.stopPropagation(),es(ea.filter(e=>e.id!==W.id)),X(null)},children:(0,i.jsx)(x.A,{className:"w-4 h-4 text-red-500"})})]}),(0,i.jsxs)("div",{className:"fixed z-50 bottom-6 left-0 px-2 gap-4 w-full bg-transparent flex items-center justify-between  md:hidden",children:[!d&&(0,i.jsx)("button",{onClick:r,className:"border-primary border-1 font-bold w-4/5 py-3 bg-white text-foreground rounded-[100px] text-sm",children:$("showTab")}),(0,i.jsxs)(w,{children:[(0,i.jsxs)(j,{className:(0,v.cn)("inline-flex font-bold py-3 bg-button-gradient text-white rounded-[100px] text-sm items-center justify-center gap-0",d?"w-full ":"w-4/5"),children:[$("cta"),(0,i.jsx)(g.default,{src:"/images/hero/star.png",alt:"arrow",width:15,height:16})]}),(0,i.jsxs)(O,{children:[(0,i.jsx)(I,{children:(0,i.jsx)(E,{children:$("alert")})}),(0,i.jsxs)(T,{children:[(0,i.jsx)(A,{children:$("cancel")}),(0,i.jsx)(C,{onClick:M,children:$("ok")})]})]})]})]})]})});var U=a(7950),M=a.n(U),k=a(9128),F=a(1742),$=a(9886),B=a(2986),L=a(9063);function G(){var e,t;let{data:a}=(0,B.wV)(),[s,n]=(0,l.useState)(!1);return(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.name)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-[#6a84f8] rounded-full text-center cursor-pointer",onClick:()=>{n(!0)},children:(0,i.jsx)("span",{className:"text-white font-bold text-xl",children:null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.name.slice(0,1).toUpperCase()})}),(0,i.jsx)(L.A,{isOpen:s,setIsOpen:n})]})}function _(e){let{onSaveProject:t,onGenReport:a,onUserOpen:s}=e,{isMobile:n}=(0,S.A)(),r=(0,f.c3)("design");return(0,i.jsx)("nav",{className:"bg-white h-16 border-b-gray-100 border-b-2 fixed top-0 left-0 right-0 z-10",children:(0,i.jsx)("div",{className:"mx-auto px-4 h-full",children:(0,i.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,i.jsx)(M(),{href:"/",className:"text-2xl font-bold text-primary",children:"HarmoniQ"}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-foreground  gap-3",children:[(0,i.jsx)(k.A,{className:"text-foreground"}),(0,i.jsxs)("span",{className:"flex items-center gap-1 cursor-pointer",onClick:t,children:[(0,i.jsx)(F.A,{className:"w-4 h-4"}),"保存 "]}),(0,i.jsxs)("span",{className:"flex items-center gap-1 cursor-pointer",onClick:()=>s(!0),children:[(0,i.jsx)($.A,{className:"w-4 h-4"}),"个人资料 "]}),(0,i.jsxs)(w,{children:[(0,i.jsxs)(j,{className:"inline-flex px-4 py-1 bg-button-gradient text-white rounded-full hover:bg-primary/90 transition-colors items-center gap-2",children:[r("cta"),(0,i.jsx)("span",{className:"text-lg",children:"✨"})]}),(0,i.jsxs)(O,{children:[(0,i.jsx)(I,{children:(0,i.jsx)(E,{children:r("alert")})}),(0,i.jsxs)(T,{children:[(0,i.jsx)(A,{children:r("cancel")}),(0,i.jsx)(C,{onClick:a,children:r("ok")})]})]})]}),(0,i.jsx)(G,{})]})]})})})}var H=a(4581),Y=a(9197);function P(e){let{onSaveProject:t,history:a,historyIndex:s,handleUndo:n,handleRedo:r,onUserOpen:o}=e,[d,c]=(0,l.useState)(!1);return(0,i.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50",children:[(0,i.jsx)("nav",{className:"bg-white h-16 border-b-gray-100 border-b-2 ",children:(0,i.jsx)("div",{className:"mx-auto px-4 h-full",children:(0,i.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-foreground  gap-3",children:[(0,i.jsx)(m.A,{history:a,historyIndex:s,handleUndo:n,handleRedo:r}),(0,i.jsxs)("span",{className:"flex items-center gap-1 cursor-pointer",onClick:t,children:[(0,i.jsx)(F.A,{className:"w-4 h-4"})," "]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-foreground  gap-3",children:[(0,i.jsx)("span",{className:"flex items-center gap-1 cursor-pointer",children:(0,i.jsx)(H.A,{className:"w-4 h-4",onClick:()=>c(!0)})}),(0,i.jsxs)("span",{className:"flex items-center gap-1 cursor-pointer",children:[(0,i.jsx)($.A,{className:"w-4 h-4",onClick:()=>o(!0)})," "]}),(0,i.jsx)(G,{})]})]})})}),d&&(0,i.jsxs)("div",{className:"h-8 w-full bg-[#E5F4FF] px-6 py-3 flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-[12px] text-foreground flex items-center gap-1",children:[(0,i.jsx)(H.A,{className:"w-4 h-4 text-[#888]"}),"至少需要设置1个房间、1扇门和1扇窗才可测算"]}),(0,i.jsx)(Y.A,{className:"w-4 h-4 text-[#888]",onClick:()=>c(!1)})]})]})}function W(e){let{id:t,type:a,data:s,children:r,isOverCanvas:l}=e,{attributes:o,listeners:d,setNodeRef:c,transform:h,isDragging:u}=(0,n.PM)({id:t,data:{type:a,...s}}),x=h?{transform:"translate3d(".concat(h.x,"px, ").concat(h.y,"px, 0)"),opacity:u&&!l?.5:u&&l?0:1,position:"relative",zIndex:u?1e3:1,visibility:"visible"}:{};return(0,i.jsxs)("div",{className:"relative z-0 w-22.5",children:[(0,i.jsx)("div",{className:"absolute  -z-1 w-22.5 top-0 left-0",children:r}),(0,i.jsx)("div",{ref:c,...d,...o,className:"cursor-move",style:{...x},children:r})]})}a(8365);var X=a(4928);function V(e){let{className:t,children:a,...s}=e;return(0,i.jsxs)(X.bL,{"data-slot":"scroll-area",className:(0,v.cn)("relative",t),...s,children:[(0,i.jsx)(X.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,i.jsx)(K,{}),(0,i.jsx)(X.OK,{})]})}function K(e){let{className:t,orientation:a="vertical",...s}=e;return(0,i.jsx)(X.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,v.cn)("flex touch-none p-px transition-colors select-none visible","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:(0,i.jsx)(X.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function q(e){let{sidebarRef:t,roomItems:a,furnitureItems:s,isOverCanvas:n,draggingItemSize:r}=e;return(0,i.jsx)(V,{className:"h-[calc(100vh-64px)] w-1/6",children:(0,i.jsxs)("div",{ref:t,className:"md:block hidden  bg-white p-4 shadow border-r-gray-100 border-r-2",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"房间"}),(0,i.jsx)("div",{className:"grid 2xl:grid-cols-3 xl:grid-cols-2 gap-2",children:a.map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:n,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:" bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:r,height:r})}),(0,i.jsx)("span",{className:"mt-1 text-sm text-gray-600",children:e.data.label})]})},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"家具"}),(0,i.jsx)("div",{className:"grid 2xl:grid-cols-3 xl:grid-cols-2 gap-2",children:s.map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:n,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:r,height:r})}),(0,i.jsx)("span",{className:"mt-1 text-sm text-gray-600",children:e.data.label})]})},e.id))})]})]})})}var Q=a(4684),J=a(3121);function Z(e){let{className:t,...a}=e;return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Q.bL,{"data-slot":"tabs",className:(0,v.cn)("flex flex-col gap-2",t),...a}),(0,i.jsx)(J.A,{className:"w-4 h-4 absolute top-2.5 right-5",onClick:()=>a.setShowTab(!1)})]})}function ee(e){let{className:t,...a}=e;return(0,i.jsx)(Q.B8,{"data-slot":"tabs-list",className:(0,v.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function et(e){let{className:t,...a}=e;return(0,i.jsx)(Q.l9,{"data-slot":"tabs-trigger",className:(0,v.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function ea(e){let{className:t,...a}=e;return(0,i.jsx)(Q.UC,{"data-slot":"tabs-content",className:(0,v.cn)("flex-1 outline-none",t),...a})}var es=a(827);function ei(e){let{showTab:t,setShowTab:a,roomItems:s,furnitureItems:n,isOverCanvas:r,draggingItemSize:o}=e,[d,c]=(0,l.useState)("");return(0,l.useEffect)(()=>{c("room")},[]),(0,i.jsx)("div",{style:{boxShadow:"0 -1px 5px 0px rgba(0, 0, 0, 0.2)"},className:(0,v.cn)("fixed bottom-0 left-0 z-10 w-full pb-20 pl-0 pr-2 bg-white md:hidden rounded-t-2xl transition-transform duration-300 ease-in-out",t?"translate-y-0":"translate-y-full"),children:(0,i.jsxs)(Z,{value:d,className:"w-full gap-4",setShowTab:a,onValueChange:e=>c(e),children:[(0,i.jsxs)(ee,{className:"mx-auto bg-white gap-8",children:[(0,i.jsx)(et,{defaultValue:!0,value:"room",className:"rounded-[3px] text-[12px] font-bold data-[state=active]:shadow-none data-[state=active]:border-b-4 data-[state=active]:border-b-primary",children:"房间"}),(0,i.jsx)(et,{value:"furniture",className:"rounded-[3px] text-[12px] font-bold data-[state=active]:shadow-none data-[state=active]:border-b-4 data-[state=active]:border-b-primary",children:"家具"})]}),(0,i.jsx)(ea,{value:"room",className:"w-full pb-3 overflow-hidden",children:(0,i.jsxs)(es.FN,{children:[(0,i.jsxs)(es.Wk,{children:[(0,i.jsx)(es.A7,{children:(0,i.jsx)("div",{className:"grid grid-cols-4 gap-x-8 gap-y-6",children:s.slice(0,8).map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:r,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:o,height:o})}),(0,i.jsx)("span",{className:"mt-1 text-[12px] text-gray-600",children:e.data.label})]})},e.id))})}),(0,i.jsx)(es.A7,{children:(0,i.jsx)("div",{className:"grid grid-cols-4 gap-x-8 gap-y-6",children:s.slice(8).map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:r,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:o,height:o})}),(0,i.jsx)("span",{className:"mt-1 text-[12px] text-gray-600",children:e.data.label})]})},e.id))})})]}),(0,i.jsx)(es.Q8,{className:"left-0 "}),(0,i.jsx)(es.Oj,{className:"right-0"})]})}),(0,i.jsx)(ea,{value:"furniture",className:"w-full pb-3 overflow-hidden",children:(0,i.jsxs)(es.FN,{children:[(0,i.jsxs)(es.Wk,{children:[(0,i.jsx)(es.A7,{children:(0,i.jsx)("div",{className:"grid grid-cols-4 gap-x-8 gap-y-6",children:n.slice(0,8).map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:r,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:o,height:o})}),(0,i.jsx)("span",{className:"mt-1 text-[12px] text-gray-600",children:e.data.label})]})},e.id))})}),(0,i.jsx)(es.A7,{children:(0,i.jsx)("div",{className:"grid grid-cols-4 gap-x-8 gap-y-6",children:n.slice(8,16).map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:r,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:o,height:o})}),(0,i.jsx)("span",{className:"mt-1 text-[12px] text-gray-600",children:e.data.label})]})},e.id))})}),(0,i.jsx)(es.A7,{children:(0,i.jsx)("div",{className:"grid grid-cols-4 gap-x-8 gap-y-6",children:n.slice(16).map(e=>(0,i.jsx)(W,{id:e.id,type:e.type,data:e.data,isOverCanvas:r,children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:e.data.icon,alt:e.data.label,width:o,height:o})}),(0,i.jsx)("span",{className:"mt-1 text-[12px] text-gray-600",children:e.data.label})]})},e.id))})})]}),(0,i.jsx)(es.Q8,{className:"left-0 "}),(0,i.jsx)(es.Oj,{className:"right-0"})]})})]})})}var en=a(6391),er=a(9571);function el(e){let{...t}=e;return(0,i.jsx)(er.bL,{"data-slot":"dialog",...t})}function eo(e){let{...t}=e;return(0,i.jsx)(er.ZL,{"data-slot":"dialog-portal",...t})}function ed(e){let{className:t,...a}=e;return(0,i.jsx)(er.hJ,{"data-slot":"dialog-overlay",className:(0,v.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function ec(e){let{className:t,children:a,...s}=e;return(0,i.jsxs)(eo,{"data-slot":"dialog-portal",children:[(0,i.jsx)(ed,{}),(0,i.jsxs)(er.UC,{"data-slot":"dialog-content",className:(0,v.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s,children:[a,(0,i.jsxs)(er.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,i.jsx)(Y.A,{}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function eh(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-header",className:(0,v.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function eu(e){let{className:t,...a}=e;return(0,i.jsx)(er.hE,{"data-slot":"dialog-title",className:(0,v.cn)("text-lg leading-none font-semibold",t),...a})}var ex=a(1394),ep=a(5945),eg=a(4710),em=a(1659);function ef(e){let{className:t,...a}=e;return(0,i.jsx)(eg.bL,{"data-slot":"radio-group",className:(0,v.cn)("grid gap-3",t),...a})}function ev(e){let{className:t,...a}=e;return(0,i.jsx)(eg.q7,{"data-slot":"radio-group-item",className:(0,v.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,i.jsx)(eg.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,i.jsx)(em.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var eb=a(5586);function ey(e){let{className:t,...a}=e;return(0,i.jsx)(eb.b,{"data-slot":"label",className:(0,v.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}a(889),a(945);var ew=a(1606),ej=a(9013);let eN=Array.from({length:100},(e,t)=>(2025-t).toString()),eR=Array.from({length:12},(e,t)=>(t+1).toString().padStart(2,"0")),eO=Array.from({length:31},(e,t)=>(t+1).toString().padStart(2,"0")),eI=Array.from({length:24},(e,t)=>t.toString().padStart(2,"0"));class eT extends l.Component{componentDidMount(){this.props.value&&this.setState({value:this.props.value})}componentDidUpdate(e,t){this.props.value&&this.props.value!==e.value&&this.setState({value:this.props.value})}render(){return(0,i.jsx)("div",{style:{background:"#f5f5f9",padding:0},children:(0,i.jsxs)(ew.A,{selectedValue:this.state.value,onValueChange:this.onChange,children:[(0,i.jsx)(ej.A,{indicatorClassName:"my-picker-indicator",children:this.renderItems(eN,"年")}),(0,i.jsx)(ej.A,{indicatorClassName:"my-picker-indicator",children:this.renderItems(eR,"月")}),(0,i.jsx)(ej.A,{indicatorClassName:"my-picker-indicator",children:this.renderItems(eO,"日")}),(0,i.jsx)(ej.A,{indicatorClassName:"my-picker-indicator",children:this.renderItems(eI,"时")})]})})}constructor(...e){super(...e),this.state={value:[]},this.onChange=e=>{this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},this.renderItems=(e,t)=>e.map(e=>(0,i.jsx)(ej.A.Item,{className:"my-picker-view-item",value:e,children:e+t}))}}function eE(e){let{open:t,onUserOpen:a,onSubmit:s,userInfo:n}=e,r=(0,S.A)(),[o,d]=(0,l.useState)("男"),[c,h]=(0,l.useState)("1996"),[u,x]=(0,l.useState)("03"),[p,g]=(0,l.useState)("12"),[m,f]=(0,l.useState)("22");(0,l.useEffect)(()=>{if(n&&(d(n.gender||"male"),n.birthDateTime)){let e=new Date(n.birthDateTime);h(e.getFullYear().toString()),x((e.getMonth()+1).toString().padStart(2,"0")),g(e.getDate().toString().padStart(2,"0")),f(e.getHours().toString().padStart(2,"0"))}},[n]);let v=()=>{s({gender:o,birthDateTime:new Date(parseInt(c),parseInt(u)-1,parseInt(p),parseInt(m))})},b=e=>{e&&(h(e[0]),x(e[1]),g(e[2]),f(e[3]))};return(0,i.jsx)(el,{open:t,onOpenChange:a,children:(0,i.jsxs)(ec,{className:"sm:max-w-[432px]",children:[(0,i.jsxs)(eh,{children:[(0,i.jsx)(eu,{className:"text-lg md:text-xl font-bold md:text-left text-center",children:"个人资料"}),(0,i.jsx)("div",{className:"py-4 text-sm md:text-base  text-left",children:"您的个人资料仅用于此次测算"})]}),(0,i.jsx)(ex.Separator,{className:"md:hidden"}),(0,i.jsxs)("div",{className:"grid gap-4 pb-4",children:[r?(0,i.jsx)(()=>(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(ey,{className:"text-base",children:"性别"}),(0,i.jsxs)("div",{className:"flex bg-gray-200 p-1 rounded-[6px]  ",children:[(0,i.jsx)("button",{style:{boxShadow:"0 1px 5px 0px rgba(0, 0, 0, 0.3)"},className:"rounded-[6px] px-4 py-1 ".concat("male"===o?"bg-white":"transparent"),onClick:()=>d("male"),children:"男"}),(0,i.jsx)("button",{className:"rounded-[6px] px-4 py-1 ".concat("female"===o?"bg-white":"transparent"),onClick:()=>d("female"),children:"女"})]})]}),{}):(0,i.jsx)(()=>(0,i.jsxs)("div",{className:"space-y-2 pb-4",children:[(0,i.jsx)(ey,{className:"font-bold pb-2 text-base",children:"性别"}),(0,i.jsxs)(ef,{value:o,onValueChange:d,className:"flex space-x-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ev,{value:"male",id:"male"}),(0,i.jsx)(ey,{htmlFor:"male",children:"男"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(ev,{value:"female",id:"female"}),(0,i.jsx)(ey,{htmlFor:"female",children:"女"})]})]})]}),{}),(0,i.jsx)(ex.Separator,{className:"md:hidden"}),r?(0,i.jsx)(()=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between pb-4",children:[(0,i.jsx)(ey,{className:"text-base",children:"出生日期"}),(0,i.jsx)("span",{children:"".concat(c,"年").concat(u,"月").concat(p,"日").concat(m,"时")})]}),(0,i.jsx)(ex.Separator,{}),(0,i.jsx)(eT,{onChange:b,value:[c,u,p,m]}),(0,i.jsx)(ex.Separator,{})]}),{}):(0,i.jsx)(()=>(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(ey,{className:"font-bold pb-4 text-base",children:"年"}),(0,i.jsxs)(ep.l6,{value:c,onValueChange:h,children:[(0,i.jsx)(ep.bq,{className:"w-24",children:(0,i.jsx)(ep.yv,{placeholder:"年"})}),(0,i.jsx)(ep.gC,{children:eN.map(e=>(0,i.jsxs)(ep.eb,{value:e,children:[e,"年"]},e))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(ey,{className:"font-bold pb-4 text-base",children:"月"}),(0,i.jsxs)(ep.l6,{value:u,onValueChange:x,children:[(0,i.jsx)(ep.bq,{className:"w-24",children:(0,i.jsx)(ep.yv,{placeholder:"月"})}),(0,i.jsx)(ep.gC,{children:eR.map(e=>(0,i.jsxs)(ep.eb,{value:e,children:[e,"月"]},e))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(ey,{className:"font-bold pb-4 text-base",children:"日"}),(0,i.jsxs)(ep.l6,{value:p,onValueChange:g,children:[(0,i.jsx)(ep.bq,{className:"w-20",children:(0,i.jsx)(ep.yv,{placeholder:"日"})}),(0,i.jsx)(ep.gC,{children:eO.map(e=>(0,i.jsxs)(ep.eb,{value:e,children:[e,"日"]},e))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(ey,{className:"font-bold pb-4 text-base",children:"小时"}),(0,i.jsxs)(ep.l6,{value:m,onValueChange:f,children:[(0,i.jsx)(ep.bq,{className:"w-20",children:(0,i.jsx)(ep.yv,{placeholder:"时"})}),(0,i.jsx)(ep.gC,{children:eI.map(e=>(0,i.jsxs)(ep.eb,{value:e,children:[e,"时"]},e))})]})]})]}),{}),r?(0,i.jsxs)("div",{className:"flex justify-around",children:[(0,i.jsx)(y.$,{onClick:()=>{a(!1)},className:"px-10 border-1 border-[#ccc] text-foreground rounded-[100px] bg-white font-bold mt-10",children:"取消"}),(0,i.jsx)(y.$,{onClick:v,className:"px-10 bg-[#13ab87] font-bold mt-10 rounded-[100px]",children:"保存"})]}):(0,i.jsx)(y.$,{onClick:v,className:"w-full bg-[#13ab87] font-bold mt-10 rounded-[100px]",children:"保存"})]})]})})}var eC=a(7386),eA=a.n(eC);let eS={[o.sR.LIVING_ROOM]:"#F0DF9C",[o.sR.DINING_ROOM]:"#F5D4BC",[o.sR.STORAGE_ROOM]:"#ADC0BC",[o.sR.STUDY_ROOM]:"#B0B8C9",[o.sR.BEDROOM]:"#F5B8B8",[o.sR.BATHROOM]:"#C1D7E2",[o.sR.KITCHEN]:"#EDE0C6",[o.sR.BALCONY]:"#D0DCAA",[o.sR.GARDEN]:"#AACDBC",[o.sR.GARAGE]:"#C7C7DD",[o.sR.CORRIDOR]:"#CDCDCD"};function eD(e){var t,a;let{params:s}=e,d=(0,l.use)(s).locale,c="zh-TW"===d?o.t7:o.Xs,h="zh-TW"===d?o.Gx:o.Qc,u=[{id:"door-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.DOOR,label:h[o.x9.DOOR],icon:"/images/fur-icon/door.png",activeIcon:"/images/fur-icon/door-gr.png",size:{width:40,height:40}}},{id:"window-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.WINDOW,label:h[o.x9.WINDOW],icon:"/images/fur-icon/window.png",activeIcon:"/images/fur-icon/window-gr.png",size:{width:8,height:56}}},{id:"table-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.TABLE,label:h[o.x9.TABLE],icon:"/images/fur-icon/table.png",activeIcon:"/images/fur-icon/table-gr.png",size:{width:44,height:120}}},{id:"chair-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.CHAIR,label:h[o.x9.CHAIR],icon:"/images/fur-icon/chair.png",activeIcon:"/images/fur-icon/chair-gr.png",size:{width:28,height:35}}},{id:"sofa-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.SOFA,label:h[o.x9.SOFA],icon:"/images/fur-icon/sofa.png",activeIcon:"/images/fur-icon/sofa-gr.png",size:{width:67,height:123}}},{id:"bed-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.BED,label:h[o.x9.BED],icon:"/images/fur-icon/bed.png",activeIcon:"/images/fur-icon/bed-gr.png",size:{width:89,height:128}}},{id:"lamp-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.LAMP,label:h[o.x9.LAMP],icon:"/images/fur-icon/lamp.png",activeIcon:"/images/fur-icon/lamp-gr.png",size:{width:70,height:128}}},{id:"tv-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.TV,label:h[o.x9.TV],icon:"/images/fur-icon/tv.png",activeIcon:"/images/fur-icon/tv-gr.png",size:{width:134,height:32}}},{id:"bookshelf-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.BOOKSHELF,label:h[o.x9.BOOKSHELF],icon:"/images/fur-icon/bookshelf.png",activeIcon:"/images/fur-icon/bookshelf-gr.png",size:{width:44,height:44}}},{id:"wardrobe-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.WARDROBE,label:h[o.x9.WARDROBE],icon:"/images/fur-icon/wardrobe.png",activeIcon:"/images/fur-icon/wardrobe-gr.png",size:{width:40,height:129}}},{id:"plant-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.PLANT,label:h[o.x9.PLANT],icon:"/images/fur-icon/plant.png",activeIcon:"/images/fur-icon/plant-gr.png",size:{width:36,height:36}}},{id:"fridge-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.FRIDGE,label:h[o.x9.FRIDGE],icon:"/images/fur-icon/fridge.png",activeIcon:"/images/fur-icon/fridge-gr.png",size:{width:40,height:43}}},{id:"stove-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.STOVE,label:h[o.x9.STOVE],icon:"/images/fur-icon/stove.png",activeIcon:"/images/fur-icon/stove-gr.png",size:{width:62,height:32}}},{id:"sink-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.SINK,label:h[o.x9.SINK],icon:"/images/fur-icon/sink.png",activeIcon:"/images/fur-icon/sink-gr.png",size:{width:60,height:40}}},{id:"washbasin-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.WASHBASIN,label:h[o.x9.WASHBASIN],icon:"/images/fur-icon/washbasin.png",activeIcon:"/images/fur-icon/washbasin-gr.png",size:{width:50,height:50}}},{id:"toilet-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.TOILET,label:h[o.x9.TOILET],icon:"/images/fur-icon/toilet.png",activeIcon:"/images/fur-icon/toilet-gr.png",size:{width:40,height:60}}},{id:"shower-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.SHOWER,label:h[o.x9.SHOWER],icon:"/images/fur-icon/shower.png",activeIcon:"/images/fur-icon/shower-gr.png",size:{width:80,height:80}}},{id:"bathtub-template",type:o.w$.FURNITURE,data:{cateType:o.w$.FURNITURE,type:o.x9.BATHTUB,label:h[o.x9.BATHTUB],icon:"/images/fur-icon/bathtub.png",activeIcon:"/images/fur-icon/bathtub-gr.png",size:{width:120,height:60}}}],x=(0,n.FR)((0,n.MS)(n.IG,{tolerance:50}),(0,n.MS)(n.cA,{activationConstraint:{distance:10}})),p=(0,r.useRouter)(),[m,f]=(0,l.useState)(null),[v,b]=(0,l.useState)(!1),[y,w]=(0,l.useState)(0),[j,N]=(0,l.useState)(!1),[R,O]=(0,l.useState)([[]]),[I,T]=(0,l.useState)(0),[E,C]=(0,l.useState)(!1),[A,U]=(0,l.useState)({}),[M,k]=(0,l.useState)(!1),F=(0,l.useRef)(null),$=(0,l.useRef)(null),L=(0,S.A)(),G=L?48:56,H=L?{width:200,height:200}:{width:300,height:300},Y=[{id:"living-room",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.LIVING_ROOM,label:c[o.sR.LIVING_ROOM],icon:"/images/room-icon/living_room.png",size:H}},{id:"dining-room",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.DINING_ROOM,label:c[o.sR.DINING_ROOM],icon:"/images/room-icon/dining_room.png",size:H}},{id:"storage-room",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.STORAGE_ROOM,label:c[o.sR.STORAGE_ROOM],icon:"/images/room-icon/storage_room.png",size:H}},{id:"study-room",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.STUDY_ROOM,label:c[o.sR.STUDY_ROOM],icon:"/images/room-icon/study_room.png",size:H}},{id:"bedroom",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.BEDROOM,label:c[o.sR.BEDROOM],icon:"/images/room-icon/bedroom.png",size:H}},{id:"bathroom",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.BATHROOM,label:c[o.sR.BATHROOM],icon:"/images/room-icon/bathroom.png",size:H}},{id:"kitchen",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.KITCHEN,label:c[o.sR.KITCHEN],icon:"/images/room-icon/kitchen.png",size:H}},{id:"balcony",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.BALCONY,label:c[o.sR.BALCONY],icon:"/images/room-icon/balcony.png",size:H}},{id:"garden",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.GARDEN,label:c[o.sR.GARDEN],icon:"/images/room-icon/garden.png",size:H}},{id:"garage",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.GARAGE,label:c[o.sR.GARAGE],icon:"/images/room-icon/garage.png",size:H}},{id:"corridor",type:o.w$.ROOM,data:{cateType:o.w$.ROOM,type:o.sR.CORRIDOR,label:c[o.sR.CORRIDOR],icon:"/images/room-icon/corridor.png",size:H}}],{data:W}=(0,B.wV)();(0,l.useEffect)(()=>{let e=()=>{$.current&&w($.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,l.useEffect)(()=>{(async()=>{var e,t,a,s,i;let n=null==W?void 0:null===(e=W.user)||void 0===e?void 0:e.userId;if(n)try{k(!0);let{status:e,message:r,data:l}=await (0,en.Jt)("/api/users/".concat(n)),{status:o,message:d,data:c}=await (0,en.Jt)("/api/design/".concat(n));if(0!==e){D.oR.error("查询用户错误:"+r);return}if(0!==o){D.oR.error("查询布局错误:"+d);return}U(l),C(!0);let{localItems:h=[],scale:u=100,canvasPosition:x={x:0,y:0},compassRotation:p=0}=c,g=h.map(e=>({...e,type:e._type,data:{...e.data,type:e.data._type}}));null===(t=F.current)||void 0===t||t.setLocalItems(g),null===(a=F.current)||void 0===a||a.setPosition(x),null===(s=F.current)||void 0===s||s.setCompassRotation(p),null===(i=F.current)||void 0===i||i.setScale(u),k(!1)}catch(e){k(!1),D.oR.error("加载布局错误:"+e),console.error("Error loading design:",e)}})()},[null==W?void 0:null===(t=W.user)||void 0===t?void 0:t.userId]);let X=(e,t)=>{let{over:a}=e,s=(null==a?void 0:a.id)==="canvas";if(b(s),s){let e=F.current.getLocalItems(),a="".concat(m.data.current.label).concat(e.filter(e=>e.data.type===m.data.current.type).length+1),s={id:"".concat(m.data.current.type,"-").concat(e.filter(e=>e.data.type===m.data.current.type).length+1),type:m.data.current.cateType,data:{...m.data.current,label:m.data.current.cateType===o.w$.ROOM?a:""},size:m.data.current.size,activeIcon:m.data.current.activeIcon};F.current.setIsRoomDragging(!0),F.current.setRoomDragStart(t),F.current.setDraggedRoom(s)}else F.current.setIsRoomDragging(!1)},V=async()=>{var e;(null==W?void 0:null===(e=W.user)||void 0===e?void 0:e.userId)||(0,r.redirect)("/auth/login");try{k(!0);let{status:e}=await (0,en.bE)("/api/design/".concat(W.user.userId),{localItems:F.current.getLocalItems(),canvasPosition:F.current.getPosition(),compassRotation:F.current.getCompassRotation(),scale:F.current.getScale()});0==e&&D.oR.success("保存成功！")}catch(e){D.oR.error("保存失败："+e),console.error("Error saving design:",e)}finally{k(!1)}},K=async()=>{let e=F.current.getLocalItems(),t=!1,a=!1;if(e.forEach(e=>{"door"===e.data.type&&(t=!0),"window"===e.data.type&&(a=!0)}),!t||!a){D.oR.error("至少需要1个房间、1扇门和1扇窗才可测算！",{autoClose:!1,style:{width:400}});return}await V(),p.push("/report?birthDateTime=".concat(A.birthDateTime))},Q=()=>{if(I>0){var e,t;null===(e=F.current)||void 0===e||e.setActiveRoom(null),T(e=>e-1),null===(t=F.current)||void 0===t||t.setLocalItems(R[I-1])}},J=()=>{if(I<R.length-1){var e,t;null===(e=F.current)||void 0===e||e.setActiveRoom(null),T(e=>e+1),null===(t=F.current)||void 0===t||t.setLocalItems(R[I+1])}},Z=async e=>{var t;(null==W?void 0:null===(t=W.user)||void 0===t?void 0:t.userId)||(0,r.redirect)("/auth/login"),k(!0),U(e);try{let{status:t}=await (0,en.bE)("/api/users/".concat(W.user.userId),{gender:e.gender,birthDateTime:e.birthDateTime.toISOString()});0==t&&(D.oR.success("保存成功！"),C(!1))}catch(e){D.oR.error("保存失败："+e),console.error("Error saving user info:",e)}finally{k(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eA(),{color:"#666",loading:M,cssOverride:{position:"fixed",left:"50%",top:"50%",zIndex:60},size:30,"aria-label":"loading...","data-testid":"loader"}),(0,i.jsx)(eE,{open:E,onUserOpen:C,onSubmit:Z,userInfo:A}),L?(0,i.jsx)(P,{onSaveProject:V,history:R,historyIndex:I,handleUndo:Q,handleRedo:J,onUserOpen:C}):(0,i.jsx)(_,{onSaveProject:V,onGenReport:K,onUserOpen:C}),(0,i.jsx)("div",{className:"pt-16",children:(0,i.jsxs)(n.Mp,{sensors:x,onDragStart:e=>{let{active:t}=e;f(t),b(!1)},onDragOver:e=>{L||X(e,{x:y,y:G})},onDragMove:e=>{L&&e.delta.y<-120&&X(e,{x:0,y:50})},children:[(0,i.jsx)("div",{className:"min-h-[calc(100vh-64px)] bg-gray-50",children:(0,i.jsx)("div",{className:"container p-0",style:{maxWidth:"100%"},children:(0,i.jsxs)("div",{className:"flex h-[calc(100vh-64px)]",children:[L?(0,i.jsx)(ei,{showTab:j,setShowTab:N,roomItems:Y,furnitureItems:u,isOverCanvas:v,draggingItemSize:G}):(0,i.jsx)(q,{sidebarRef:$,roomItems:Y,furnitureItems:u,isOverCanvas:v,draggingItemSize:G}),(0,i.jsx)("div",{className:"flex-1 overflow-auto",id:"canvas-drop-area",children:(0,i.jsx)(z,{ref:F,locale:d,history:R,historyIndex:I,setHistory:O,setHistoryIndex:T,handleUndo:Q,handleRedo:J,onGenReport:K,showTab:j,onShowTab:()=>{N(!0)}})})]})})}),(0,i.jsx)(n.Hd,{children:(null==m?void 0:m.id)&&v&&(m.data.current.cateType===o.w$.ROOM?(0,i.jsx)("div",{className:"flex flex-col items-center justify-center bg-white/80 rounded-lg",style:{transform:L?"translateY(78px)":"translateY(0)",width:H.width,height:H.height,border:"8px solid",borderColor:eS[null===(a=Y.find(e=>e.id===m.id))||void 0===a?void 0:a.data.type],borderRadius:"8px"},children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)(g.default,{className:"bg-[#EFF7F4] rounded-lg",src:m.data.current.icon,alt:"Room",width:G,height:G}),(0,i.jsx)("span",{className:"mt-1 text-sm text-gray-600",children:m.data.current.label+(F.current.getLocalItems().filter(e=>e.data.type===m.data.current.type).length+1)})]})}):(0,i.jsx)(g.default,{src:m.data.current.activeIcon,alt:"Furniture",width:m.data.current.size.width,height:m.data.current.size.height}))})]})})]})}},3456:(e,t,a)=>{Promise.resolve().then(a.bind(a,3030))},3634:(e,t,a)=>{"use strict";a.d(t,{$q:()=>c,Gx:()=>l,Qc:()=>r,Xs:()=>o,sR:()=>i,t7:()=>d,w$:()=>s,x9:()=>n});let s={ROOM:"room",FURNITURE:"furniture"},i={LIVING_ROOM:"living_room",DINING_ROOM:"dining_room",STORAGE_ROOM:"storage_room",STUDY_ROOM:"study_room",BEDROOM:"bedroom",BATHROOM:"bathroom",KITCHEN:"kitchen",BALCONY:"balcony",GARDEN:"garden",GARAGE:"garage",CORRIDOR:"corridor"},n={BED:"bed",SOFA:"sofa",TABLE:"table",CHAIR:"chair",CABINET:"cabinet",TV:"tv",LAMP:"lamp",DOOR:"door",WINDOW:"window",BOOKSHELF:"bookshelf",WARDROBE:"wardrobe",PLANT:"plant",FRIDGE:"fridge",STOVE:"stove",SINK:"sink",WASHBASIN:"washbasin",TOILET:"toilet",SHOWER:"shower",BATHTUB:"bathtub"},r={[n.DOOR]:"门",[n.WINDOW]:"窗",[n.TABLE]:"枱",[n.CHAIR]:"椅子",[n.SOFA]:"沙发",[n.BED]:"床",[n.LAMP]:"儿童床",[n.TV]:"电视",[n.BOOKSHELF]:"茶几",[n.WARDROBE]:"柜",[n.PLANT]:"植物",[n.FRIDGE]:"冰箱",[n.STOVE]:"炉具",[n.SINK]:"锌盘",[n.WASHBASIN]:"洗手盘",[n.TOILET]:"马桶",[n.SHOWER]:"淋浴",[n.BATHTUB]:"浸浴"},l={[n.DOOR]:"門",[n.WINDOW]:"窗",[n.TABLE]:"枱",[n.CHAIR]:"椅子",[n.SOFA]:"沙發",[n.BED]:"床",[n.LAMP]:"兒童床",[n.TV]:"電視",[n.BOOKSHELF]:"茶几",[n.WARDROBE]:"櫃",[n.PLANT]:"植物",[n.FRIDGE]:"冰箱",[n.STOVE]:"爐具",[n.SINK]:"锌盘",[n.WASHBASIN]:"洗手盤",[n.TOILET]:"馬桶",[n.SHOWER]:"淋浴",[n.BATHTUB]:"浸浴"},o={[i.LIVING_ROOM]:"客厅",[i.DINING_ROOM]:"饭厅",[i.STORAGE_ROOM]:"杂物房",[i.STUDY_ROOM]:"书房",[i.BEDROOM]:"睡房",[i.BATHROOM]:"浴室",[i.KITCHEN]:"厨房",[i.BALCONY]:"阳台",[i.GARDEN]:"花园",[i.GARAGE]:"车库",[i.CORRIDOR]:"走廊"},d={[i.LIVING_ROOM]:"客廳",[i.DINING_ROOM]:"飯廳",[i.STORAGE_ROOM]:"雜物房",[i.STUDY_ROOM]:"書房",[i.BEDROOM]:"睡房",[i.BATHROOM]:"浴室",[i.KITCHEN]:"廚房",[i.BALCONY]:"陽台",[i.GARDEN]:"花園",[i.GARAGE]:"車庫",[i.CORRIDOR]:"走廊"},c={[i.LIVING_ROOM]:"#F0DF9C",[i.DINING_ROOM]:"#F5D4BC",[i.STORAGE_ROOM]:"#ADC0BC",[i.STUDY_ROOM]:"#B0B8C9",[i.BEDROOM]:"#F5B8B8",[i.BATHROOM]:"#C1D7E2",[i.KITCHEN]:"#EDE0C6",[i.BALCONY]:"#D0DCAA",[i.GARDEN]:"#AACDBC",[i.GARAGE]:"#C7C7DD",[i.CORRIDOR]:"#CDCDCD"}},6391:(e,t,a)=>{"use strict";async function s(e){let{url:t,method:a,headers:s={},body:i}=e;try{let e=await fetch(t,{method:a.toUpperCase(),headers:{"Content-Type":"application/json",...s},body:i?JSON.stringify(i):void 0});return await e.json()}catch(e){throw Error("ajax error ",e.message)}}async function i(e){return await s({url:e,method:"GET"})}async function n(e,t){return await s({url:e,method:"POST",body:t})}a.d(t,{Jt:()=>i,bE:()=>n})},9301:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>l});var s=a(8081);a(2149);var i=a(9929),n=a(3484),r=a(2194);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...d}=e,c=o?i.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,r.cn)(l({variant:a,size:n,className:t})),...d})}}},e=>{var t=t=>e(e.s=t);e.O(0,[837,265,52,361,382,26,186,742,761,670,497,954,358],()=>t(3456)),_N_E=e.O()}]);