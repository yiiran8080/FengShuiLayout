(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3666],{29320:(e,t,s)=>{Promise.resolve().then(s.bind(s,98078))},40003:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(95155),r=s(60388),i=s(66766),l=s(22346),n=s(17652);function c(){let e=(0,n.c3)("home.footer"),t={contact:[{name:e("contact"),href:"/customer/contact"}],law:[{name:e("privacy"),href:"/customer/privacy"},{name:e("terms"),href:"/customer/terms"}],social:[{icon:"/images/footer/Facebook.png",href:"https://www.facebook.com/profile.php?id=61578389876952"},{icon:"/images/footer/Instagram.png",href:"https://www.instagram.com/harmoniq_fengshui/"}]};return(0,a.jsx)("footer",{className:"px-5 text-gray-300 md:px-0",style:{background:"#374A37",fontFamily:"Noto Serif TC, serif"},children:(0,a.jsxs)("div",{className:"container px-4 mx-auto py-30",children:[(0,a.jsxs)("div",{className:"justify-center item-center text-[50px] font-bold text-white text-center mt-20 mb-20",children:[(0,a.jsx)("h1",{className:"text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"46px"},children:e("title")}),(0,a.jsx)("p",{className:"mt-2 text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"24px"},children:e("subtitle")})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-5",children:[(0,a.jsxs)("div",{className:"flex gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("consult")}),(0,a.jsx)("ul",{className:"space-y-2",children:t.contact.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(r.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("law")}),(0,a.jsx)("ul",{className:"space-y-2",children:t.law.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(r.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white min-w-30",style:{fontFamily:"Noto Serif TC, serif"},children:e("focus")}),(0,a.jsx)("div",{className:"flex space-x-4",children:t.social.map(e=>e.href?(0,a.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80",children:(0,a.jsx)(i.default,{src:e.icon,alt:"",width:30,height:30})},e.icon):(0,a.jsx)(i.default,{src:e.icon,alt:"",width:30,height:30},e.icon))})]})]}),(0,a.jsx)(l.Separator,{className:"mt-7.5"}),(0,a.jsx)("div",{className:"mt-5 font-semibold text-center border-t border-[#004F44] md:mt-10",style:{fontFamily:"Noto Serif TC, serif"},children:(0,a.jsxs)("p",{children:["\xa9 2025 HarmoniQ. ",e("copyright")]})})]})})}},98078:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(95155),r=s(12115),i=s(35695),l=s(35226),n=s(40003);function c(){let e=(0,i.useSearchParams)(),t=(0,i.useRouter)(),s=e.get("session_id"),[c,o]=(0,r.useState)({birthDate:"",birthTime:"",gender:""}),[d,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[p,u]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(!s){u("無效的支付會話"),m(!1);return}try{let e=await fetch("/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:s})}),t=await e.json();console.log("Payment verification response:",t),0===t.status&&"paid"===t.data.payment_status?h(!0):u("支付驗證失敗，請聯繫客服")}catch(e){u("驗證支付時發生錯誤")}m(!1)})()},[s]);let g=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))},j=async e=>{if(e.preventDefault(),!c.birthDate||!c.gender){u("請填寫生日和性別");return}b(!0),u("");try{let e=c.birthTime?"".concat(c.birthDate,"T").concat(c.birthTime):"".concat(c.birthDate,"T12:00");t.push("/report?birthDateTime=".concat(encodeURIComponent(e),"&gender=").concat(c.gender,"&sessionId=").concat(s))}catch(e){u("提交資料時發生錯誤，請重試"),b(!1)}};return d?(0,a.jsx)("div",{className:"min-h-screen bg-[#EFEFEF] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#A3B116] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"正在驗證支付狀態..."})]})}):x?(0,a.jsxs)("div",{className:"min-h-screen bg-[#EFEFEF]",children:[(0,a.jsx)(l.default,{}),(0,a.jsx)("div",{className:"container px-4 py-20 mx-auto",children:(0,a.jsxs)("div",{className:"max-w-md p-8 mx-auto bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"mb-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"請填寫您的生辰資料以生成專屬報告"})}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["出生日期 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"date",name:"birthDate",value:c.birthDate,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#A3B116]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["出生時間"," ",(0,a.jsx)("span",{className:"text-gray-400",children:"(選填)"})]}),(0,a.jsx)("input",{type:"time",name:"birthTime",value:c.birthTime,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#A3B116]"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"提供出生時間可以獲得更準確的分析"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block mb-4 text-sm font-medium text-gray-700",children:["選擇性別 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("div",{onClick:()=>o(e=>({...e,gender:"male"})),className:"flex flex-col items-center p-4 cursor-pointer transition-all ".concat("male"===c.gender?"border-[#A3B116] bg-[#A3B116]/10":"border-gray-200 hover:border-gray-300"),children:(0,a.jsx)("img",{src:"/images/hero/male.png",alt:"Male",className:"mb-2 w-30 h-30"})}),(0,a.jsx)("div",{onClick:()=>o(e=>({...e,gender:"female"})),className:"flex flex-col items-center p-4 cursor-pointer transition-all  ".concat("female"===c.gender?"border-[#A3B116] bg-[#A3B116]/10":"border-gray-200 hover:border-gray-300"),children:(0,a.jsx)("img",{src:"/images/hero/female.png",alt:"Female",className:"mb-2 w-30 h-30"})})]})]}),p&&(0,a.jsx)("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:p})}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-[#A3B116] text-white py-3 px-4 rounded-lg font-semibold hover:bg-[#8B9914] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"w-5 h-5 mr-2 border-b-2 border-white rounded-full animate-spin"}),"生成報告中..."]}):"生成專屬報告"})]})]})}),(0,a.jsx)(n.A,{})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#EFEFEF]",children:[(0,a.jsx)(l.default,{}),(0,a.jsx)("div",{className:"container px-4 py-20 mx-auto",children:(0,a.jsxs)("div",{className:"max-w-md p-8 mx-auto text-center bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"mb-4 text-6xl text-red-500",children:"⚠️"}),(0,a.jsx)("h1",{className:"mb-4 text-2xl font-bold text-gray-800",children:"支付驗證失敗"}),(0,a.jsx)("p",{className:"mb-6 text-gray-600",children:p}),(0,a.jsx)("button",{onClick:()=>t.push("/price"),className:"bg-[#A3B116] text-white px-6 py-3 rounded-lg hover:bg-[#8B9914] transition-colors",children:"返回購買頁面"})]})}),(0,a.jsx)(n.A,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6453,7215,8543,6874,6491,9855,5226,8441,1684,7358],()=>t(29320)),_N_E=e.O()}]);