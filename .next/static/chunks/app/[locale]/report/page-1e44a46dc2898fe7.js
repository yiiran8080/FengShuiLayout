(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3004],{9731:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(12115),s=n(91599),r=n(40054),i=n.n(r),l=n(60470);function o(e,t){let n=(0,a.useRef)(!0),[r,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)({});(0,a.useEffect)(()=>{console.log("renderRef.current",n.current),(async()=>{let n=null==t?void 0:t.userId;if(n&&e){let a=t.birthDateTime;console.log("查询用户已有报告"),o(!0);let{status:r,data:i}=await (0,s.Jt)("/api/reportUserDoc/".concat(n,"/").concat("zh-CN"==e?"zh":"tw"));if(0==r&&i){if(console.log("已有报告"),"done"==t.genStatus&&(!i.mingLiData||!i.liuNianData||!i.jiajuProData)){let{status:t,data:a}=await (0,s.Jt)("/api/reportUserDoc/".concat(n,"/").concat("zh-CN"==e?"tw":"zh"));0==t&&a&&m(a)}d(i)}else{console.log("生成随机报告");let{data:t}=await (0,s.Jt)("/api/reportDoc/zh",{isCached:!0}),{data:r}=await (0,s.Jt)("/api/reportDoc/tw",{isCached:!0});if(t&&r){let{nayin:i,year:o,month:c,day:u,hour:m}=(0,l.Ay)(a),h=Math.floor(3*Math.random()),g=Math.floor(3*Math.random()),f={nianzhuData:t.nianzhuData[o][h],yuezhuData:t.yuezhuData[c][h],rizhuData:t.rizhuData[u][h],shizhuData:t.shizhuData[m][h],yunchengData:t.yunchengData[i][h],jiajuData:x(t.jiajuData,g)},p={nianzhuData:r.nianzhuData[o][h],yuezhuData:r.yuezhuData[c][h],rizhuData:r.rizhuData[u][h],shizhuData:r.shizhuData[m][h],yunchengData:r.yunchengData[i][h],jiajuData:x(r.jiajuData,g)};d("zh-CN"==e?f:p),(0,s.bE)("/api/reportUserDoc/".concat(n,"/zh"),f),(0,s.bE)("/api/reportUserDoc/".concat(n,"/tw"),p)}}o(!1)}})()},[e,t]);let x=(e,t)=>{if(e){let n=i().cloneDeep(e);for(let e in n){let a=n[e];for(let e in a)a[e]=a[e][t]}return n}};return{loading:r,reportDocData:c,assistantData:u}}},17313:(e,t,n)=>{"use strict";n.d(t,{Xi:()=>c,av:()=>d,j7:()=>o,tU:()=>l});var a=n(95155);n(12115);var s=n(60704),r=n(66474),i=n(59434);function l(e){let{className:t,...n}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(s.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...n}),n.setShowTab&&(0,a.jsx)(r.A,{className:"w-4 h-4 absolute top-2.5 right-5",onClick:()=>n.setShowTab(!1)})]})}function o(e){let{className:t,...n}=e;return(0,a.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...n})}function c(e){let{className:t,...n}=e;return(0,a.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function d(e){let{className:t,...n}=e;return(0,a.jsx)(s.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...n})}},23048:(e,t,n)=>{"use strict";n.d(t,{default:()=>_});var a=n(95155),s=n(8900),r=n(12115),i=n(35695),l=n(88939),o=n(9731),c=n(66766);n(67705);var d=n(17652);n(25446),n(40054);var u=n(17313),m=n(76142),x=n(60470),h=n(91599),g=n(71463),f=n(38543),p=n(22346),b=n(29190),v=n(82940),j=n.n(v);let y="我研究命理這行已經二十多年了，專門看八字和紫微斗數，今天來跟您聊聊";j()().format("YYYY");let N={mingpan:"你是一位精通子平八字與紫微鬥數的命理學家，擅長用現代心理學解讀傳統命盤。[任務] 根據用戶提供的性別、出生年月日時、八字、五行分布等屬性，分析命盤結構，需包含： 1. 用不到200字概括命局核心特質（需區分男命 / 女命分析差異，突出{八字.特殊格局}的影響） 2. 列出3個關鍵命盤特徵，並說明其現實映射（例：月柱正印坐絕 → 母親健康需注意） 3. 結合五行分布{八字.五行分布}，指出需補強的元素與風水建議（如缺火者宜用紅色家居）\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出，不得改變結構：**\n\n\uD83D\uDCCB 命局核心特質：\n{性別}命格特質概述（不超過200字，需突出{八字.特殊格局}影響）\n\n\uD83D\uDD0D 關鍵命盤特徵：\n1.{命盤特徵1} → {現實映射}（例：月柱正印坐絕 → 母親健康需注意）\n2.{命盤特徵2} → {現實映射}\n3.{命盤特徵3} → {現實映射}\n\n\uD83C\uDFE0 五行補強建議：\n根據{八字.五行分布}，需補強{缺失元素}\n風水建議：{具體建議}（例：缺火者宜用紅色家居）\n\n[重要提醒]：輸出內容必須嚴格按照上述結構，包括所有符號（\uD83D\uDCCB\uD83D\uDD0D\uD83C\uDFE0）、編號和換行符。不得省略任何格式要素。",kaiyun:y+"個人開運元素。[生成邏輯]- **先天數**：日幹{日幹}對應河圖數（例：丁火→2、7）；- **後天數**：用神{用神}對應洛書數（例：木→3、8）；- **動態調整**：流年太歲{當前流年幹支}卦數（例：甲辰→5）。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出，不得改變結構：**\n\n「您的戰略數字組合爲【{先天數}\xd7{後天數}】，具體應用：\n1.\uD83D\uDDD3 日常決策：重要會議選含{數字}的日期 \n2.\uD83D\uDECB 空間布局：辦公室樓層尾數取{數字} \n3.⌨️ 密碼設計：銀行密碼嵌入{數字}序列 \n4.⚠️今年注意：今年餘下月份注意事項 \n\n[色譜算法]- 主色：用神對應色系（例：木→青綠色系）；- 輔色：通關元素色（例：木火交戰取紅色系）；- 禁忌色：忌神{忌神}色系（例：水→黑色）。\n\n[輸出示例（必須遵循此格式）]：\n1.「職場穿搭公式：{主色}襯衫 + {輔色}領帶（例：火焰紅+鮮黃）\n2. 家居能量點：在{方位}牆刷{色號}，搭配{材質}裝飾品（例：西南方塗刷極光銀金屬漆）」\n\n[重要提醒]：輸出內容必須嚴格按照上述結構，包括所有符號、編號和換行符。",liuqin:y+"六親緣分。[分析維度] -夫妻宮：時柱{時柱天幹地支}十神（{十神屬性}）對婚姻穩定性的影響；- 年柱{年柱天幹地支}與父母宮位關系，推算原生家庭帶來的情感模式 -{日支藏幹}透出的潛意識需求。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出：**\n\n1. 情感優勢：用⭐️符號標记3個利於親密關系的特質\n2. 潛在挑戰：用⚠️符號警示2個需注意的模式（如比劫爭合導致的三角關系風險）\n3. 風水調節：推薦2種臥室擺設法（例：牀頭朝向{吉方}化解孤辰寡宿）\n\n[重要提醒]：必須使用指定符號（⭐️⚠️）和編號格式。",shiye:y+"事業財富。[關鍵指標] -財星定位：根據{日幹}找出正/偏財對應的天幹（例：甲木日主以己土爲正財）-官殺配置：分析{月柱}官殺強度與事業成就關聯性 - 大運走勢：結合當前大運{大運幹支}推算未來5年財運轉折點。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出：**\n\n✔️ 最佳行業：基於{五行比例}或五行用神{用神元素}推薦3個領域（如喜水者適合物流、傳媒）\n✔️ 辦公風水：需含方位角{財位度數}與開運物擺放坐標\n\n[重要提醒]：必須使用指定符號（✔️）和編號格式。",minggong:y+"生涯發展策略。[分析矩陣]需交叉驗證以下維度：1.主星組合能量：{主星}+{輔星}形成的格局（例：紫微+左右→領導型人格）;2.四化動能走向：{四化}在十二宮的牽引效應（例：財帛宮化祿→財富創造力）;3.五行局制約：{五行局}對{主星}特性的放大/抑制（例：火六局強化七殺執行力）。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出，不得改變結構：**\n\n\uD83D\uDCCA 核心星盤解碼：\n1.「{主星}」在{亮度}狀態 → {現代詮釋}（例：七殺入廟→特種兵式突破能力）\n2.受{輔星}影響 → 產生{特性變異}（例：遇文昌→殺戮文青特質）\n\n\uD83E\uDDE0 思維模式剖面：\n1.決策優勢：{主星}+{四化}形成{思維模式}（例：天機化科→系統化學習力）\n2.認知盲區：{五行局}限制導致{誤判類型}（例：木三局遇煞→過度理想化）\n\n\uD83C\uDFE0 家居能量調頻：\n1.主色調：{主星五行}\xd7{八字用神}→推薦{顏色}（例：紫微土+用神火→陶土紅）\n2.關鍵擺件：在{本命方位}放置{材質}{物品}（例：西北方放銅質地球儀強化遷移宮）\n3.禁忌規避：禁止在{宮位對應方位}使用{衝突元素}（例：子女宮化忌→正東方避放尖銳物）\n\n\uD83D\uDE80 二十年大運導航：\n1.{年齡段}：{主星}逢{大運主星} → 聚焦{領域}（例：35-44歲破軍運→跨界創新期）\n2.危機轉折點：{年份}觸發{四化} → 需提前布局{風水調整}（例：2026年廉貞化忌→辦公室正南放水晶陣）\n\n⚡ 能量爆發公式：「{主星優勢} \xd7 {方位催化} + {行爲修正}」組合技（例：武曲貪狼命宮 → 每日辰時在西北方金屬區制定財務計劃 + 穿黑白條紋衫）\n\n[重要提醒]：輸出內容必須嚴格按照上述結構，包括所有符號（\uD83D\uDCCA\uD83E\uDDE0\uD83C\uDFE0\uD83D\uDE80⚡）、編號和換行符。不得省略任何格式要素。",jiankang:y+"健康預警及養生建議。[關鍵指標]-醫學命理映射 ：1.病竈器官：根據五行失衡{八字.五行分布}對應髒腑（例：木過旺→肝膽壓力）；2.流年觸發：標注{當前流年幹支}可能引發的健康風險（如歲運並臨加強火元素→心血管負擔）。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出：**\n\n❗️ 年度重點預防項目：\n1.{病竈器官}相關疾病預防（例：肝膽排毒）\n2.{流年風險}相關注意事項（例：心血管保養）\n3.{季節性}健康風險防範（例：秋冬燥熱）\n\n\uD83C\uDFE5 風水化解方案：\n1.在{臥室東方}放置{顏色}水晶平衡{五行}氣\n2.{方位}擺放{植物/物品}調節能量場\n\n\uD83C\uDF3F 中醫養生建議：\n根據{五行缺失}多食用{顏色}食物（例：土弱者多喫黃色食物）\n\n[重要提醒]：必須使用指定符號（❗️\uD83C\uDFE5\uD83C\uDF3F）和編號格式。",ganqing:y+"感情運勢。[分析維度]：1.日支{日支}藏幹 → 潛意識情感需求（例：午藏丁火己土 → 渴望激情與穩定並存）；2.十神中{十神配置.正官/七殺}力量 → 伴侶特質傾向（例：正官透幹 → 易吸引穩重對象）；3.神煞{神煞} → 情感機遇/挑戰（例：紅鸞在流年夫妻宮 → 本年婚戀信號強烈）。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出：**\n\n\uD83D\uDD25 情感能量診斷：\n1.優勢：{主星}坐命 → {優勢描述}（例：紫微破軍→敢於突破傳統關系模式）\n2.盲點：{神煞}引發{問題}（例：孤辰+日支衝 → 需避免過度獨立）\n\n\uD83D\uDCA1 風水強化方案：\n1.臥室{方位}放置{色系}物品（根據{日幹}五行喜忌）\n2.每周{星期幾}佩戴{材質}飾品增強桃花氣（例：喜金者選白銀）\n\n[重要提醒]：必須使用指定符號（\uD83D\uDD25\uD83D\uDCA1）和編號格式。",renji:y+"人際關系。[關鍵指標] -月柱{月柱天幹地支} → 社交模式根源（例：月柱偏印 → 習慣觀察後再深入交往）；- 五行{八字.五行分布} → 人際能量場特性（例：木旺者自帶領導氣場）；-遷移宮主星{遷移宮主星} → 對外互動風格。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出，不得改變結構：**\n\n\uD83E\uDD1D 關系優化指南：\n✅ 貴人類型：{十神}強旺者（例：比肩旺 → 適合與同行合作）\n⚠️ 避坑提示：{衝克配置}易引發衝突（例：日柱癸水衝丁火 → 慎交午年出生者）\n\n\uD83C\uDF10 社交風水：\n1.辦公桌{方位}擺放{物品}（例：青龍位放綠植增強人脈）\n2.微信頭像建議用{色系}（根據{當前流年幹支}）\n\n[重要提醒]：輸出內容必須嚴格按照上述結構，包括所有符號（\uD83E\uDD1D✅⚠️\uD83C\uDF10）、編號和換行符。不得省略任何格式要素。",juece:y+"決策時機。[關鍵指標] 1. 大運{大運幹支}與{當前流年幹支}關系 → 宏觀周期判斷。 2. 命宮{主星}四化{四化} → 決策風格（例：化祿在財帛宮 → 風險偏好較高）；3. 流月{當前流月幹支}與日柱{日柱}合衝 → 微觀時機捕捉。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出：**\n\n⏳ 年度關鍵窗口：\n1.{月份}：{主星}逢{流月主星} → 適合啓動重大事項\n2.避開{月份}：{衝克關系}易判斷失誤\n\n\uD83C\uDFAF 決策增強技巧：\n1.每日{時辰}進行冥想（根據{時柱}能量高峯）\n2.籤約時坐{方位}（例：財星在巽宮 → 東南方位）\n\n[重要提醒]：必須使用指定符號（⏳\uD83C\uDFAF）和編號格式。",gexing:y+"用戶個性。[分析維度]：1.主星{命宮主星} + 輔星{命宮輔星} → 核心特質（例：紫微+左輔 → 領袖型人格）；2.身宮{身宮主星} → 潛在第二性格；3.五行局{五行局} → 能量表達方式（例：水二局 → 以柔克剛）。[輸出模板] \uD83D\uDCBC 現代心理學映射：1.\uD83D\uDD0D MBTI關聯：{命宮主星}對應{人格類型}（例：七殺→ENTJ領導者型）；2.\uD83D\uDD0D 九型人格關聯：{命宮主星+命宮輔星}傾向{類型號碼}號{類型名稱}（例：紫微+文昌→1號完美主義者，追求卓越品質）。\uD83D\uDCBC 發展建議：1.利用{主星優勢}強化{領域}（例：太陽星→適合公眾表達）；2.通過{風水調整}彌補{主星缺陷}（例：太陰落陷→增加書房照明）",yunshi:y+"人生運勢。[關鍵指標：十年大運交叉分析] 1. {當前大運}重點宮位 → 主戰場（例：大運財帛宮強 → 累積財富期）；2. {命宮主星}與{大運主星}相位 → 機遇類型（例：會照天梁→得長輩提攜）；3.流年{當前流年幹支}觸發{本命盤配置} → 年度主題。\n\n[嚴格輸出格式要求]\n**必須按以下格式輸出：**\n\n\uD83D\uDE80 人生躍遷攻略：\n1.35-40歲：{大運主星}入{宮位} → 聚焦{領域}（例：破軍入官祿宮→創業黃金期）\n2.危機預警：{年份}逢{雙化忌} → 提前布局{風水化解方案}\n\n\uD83D\uDCCC 終身風水錨點：\n1.祖墳/長居地{方位}保持{元素平衡}（根據八字{五行分布缺失}）\n2.本命文昌位{度數}布置書桌\n\n[重要提醒]：必須使用指定符號（\uD83D\uDE80\uD83D\uDCCC）和編號格式。"};function w(e){return N[e]+"[說話方式] 用日常對話的方式，就像面對面聊天一樣，多用親切用詞，不要哈囉，你好；[要求] 1.語言簡潔流暢，避免術語堆砌，使用完整的句子且用口語化方式表達，避免用數字表達或分析，內容不要提及過去，圍繞今年餘下時間；用\"能量場\"\"行爲模式\"等現代詞匯替代傳統表述；2.不要超過200字 3.不要使用使用'#'或'*'等雜亂符號 4.條目之間使用\n符號分隔 5.【重要】必須嚴格使用正宗繁體中文，禁止出現任何簡體字，包括：根据→根據、关系→關係、现代→現代等"}function C(e,t){return"\n性別：".concat("female"==e.gender?"女":"男",",\n出生年月日時：").concat(j()(e.birthDateTime).format("YYYY-MM-DD HH:mm:ss"),",\n八字：{年柱：").concat(t.year,",月柱：").concat(t.month,",日柱：").concat(t.day,",時柱：").concat(t.hour,",五行分布：").concat(t.wuxingScale,"}，\n納音：").concat(t.nayin,"，五行局：").concat(t.wuxingJu,"，\n年天幹十神：").concat(t.yearStemTenGod,", 年地支十神：").concat(t.yearBranchTenGod,", 月天幹十神：").concat(t.monthStemTenGod,", 月地支十神：").concat(t.monthBranchTenGod,", 日天幹十神：").concat(t.dayStemTenGod,", 日地支十神：").concat(t.dayBranchTenGod,", 時天幹十神：").concat(t.hourStemTenGod,", 時地支十神：").concat(t.hourBranchTenGod,"，\n命宮：").concat(t.mingPalace,"，身宮：").concat(t.bodyPalace,"，\n遷移宮主星： ").concat(t.qianyiPalace,",\n流年夫妻宮主星:").concat(x.Ec,",\n當前流年幹支：").concat(t.liunianGanzhi,",\n當前流月幹支:").concat(x.U8,",\n日支藏幹： ").concat(t.rizhiCanggan,",\n大運幹支： ").concat(t.dayunGanzhi,",\n年柱神煞:").concat(t.yearGods,", 月柱神煞:").concat(t.monthGods,", 日柱神煞:").concat(t.dayGods,"\n")}function k(){return'[全局設定]：角色：你是一個精通玄空風水與空間規劃的家居顧問。任務：根據用戶提供的用戶信息和房間、家具信息生成各房間風水優化方案。要求：1. 結合命理需求與空間物理特性 ；2. 所有建議需標注具體方位（如東北、西南）；3. 用\uD83D\uDD25/⚠️符號區分強化與禁忌提示，且用\n換行符分隔；；4. 如果返回的風水建議中包含1.2.3.等分項，各項之間用\n換行符分隔。\n[元素-材質映射]： {\n木: [實木, 竹編, 綠色植物],\n火: [LED燈帶, 亞克力, 紅色紡織品],\n土: [陶瓷, 石材, 黃色裝飾],\n金: [金屬框架, 不鏽鋼, 白色家具],\n水: [玻璃, 魚缸, 黑色飾品]\n}。\n[返回結構]：要求返回一個json對象格式，這個對象裏有4個鍵值對，下面我依次描述這4個鍵值對內容生成的規則。必須要按照以下這四個鍵的順序返回，不可以變化鍵的順序！每一個鍵所對應的內容不能超過150字。\n第一個鍵是"家具擺放"。[內容示例（以臥室爲例）其他房間要替換爲合適的內容]：根據用戶繪製的佈局和現有家具配置，提供3個關鍵風水優化建議：\n1. 主要家具調整：牀位移至{方位}（形成{吉局}，利{運勢類型}）\n2. 新增家具化解：於{方位}添置{家具}化解{形煞}（例：弧形屏風擋橫梁）\n3. 現有家具優化：將{現有家具}調整至{方位}（增強{風水效果}，改善{能量流動}）\n每個建議必須佔一行，用\n分隔。\n\n第二個鍵是"禁忌提醒"。[內容示例（以臥室爲例）其他房間要替換爲合適的內容]：\n❌  牀頭現位於{方位}，正對{門窗位（可能沒有門窗）} → 引發{健康問題}（科學解釋：氣流直吹影響睡眠）\n❌  根據{元素-材質映射}: {家具材質}與八字忌神相克 → 建議更換爲{材質}\n❌  {家具名稱}位置形成{風水形煞} → 影響{運勢方面}（例：鏡子對牀造成煞氣影響睡眠品質）\n每個建議必須佔一行，用\n分隔，最少提供3項建議。\n\n第三個鍵是"五行色系與材質"。[內容示例]：\n\uD83C\uDFA8 推薦主色調：以{顏色}為主，例如：{Pantone色號} {顏色名稱}+{材質}（例：以紅色為主，例如：18-1142 Tango Red探戈紅+乳膠漆，因用神火元素需要暖色調增強能量）\n\uD83C\uDFA8 輔助色彩：以{顏色}為主，例如：{Pantone色號} {顏色名稱}+{材質}（例：以橘色為主，例如：16-1546 Living Coral珊瑚橘+軟裝，配合八字喜火強化財運）\n❌ 禁忌色系：{色系}（例：避用藍色系，因忌神水元素會削弱命格中的火能量，影響事業發展）\n每個建議必須說明選色的命理依據，用\n分隔。\n\n第四個鍵是"運勢增強方法"。[內容示例]：\n\uD83D\uDD25 命理增強焦點：根據您的{八字.用神}，本房應強化{元素}能量（例：火元素→紅色系，因日主{日幹}需要暖色調補充陽氣）\n\uD83D\uDCAB 具體操作方案：\n1. 時間催運：每日{時辰}開放{方位}的{燈具類型}（例：辰時開啟東南方暖光燈強化財運，配合日主甲木喜陽光）\n2. 物品布置：在{方位}放置{開運物}（例：正南方擺放紫水晶洞補火元素，化解八字缺火影響事業發展）\n3. 行為調整：{具體行為建議}（例：每週{星期幾}在{方位}進行{活動}強化{運勢類型}，根據{神煞}位置優化能量場）\n每個建議必須說明命理依據，用\n分隔，最少提供3項具體可執行的方案。\n\n[請注意]:1. 家具類型要和{房間類型}匹配。例如，如果房間類型是廚房，家具爲冰箱、竈臺、水槽等。2. 可以引用[命理-空間聯動方案] ，例如：根據{神煞}：- "天乙貴人"位在{方位} → 設置{家具}（例：書桌利事業貴人）；-「亡神」出現在{方位} → 安裝{化解物件}（例：銅葫蘆壓制）\n'}let F={north:"正北",south:"正南",east:"正東",west:"正西",center:"中宮",northEast:"東北",southEast:"東南",northWest:"西北",southWest:"西南"};function D(e,t,n){return C(t,n)+"\n房間信息：{房間類型：".concat(e.data.label,",\n方位：").concat(F[e.direction],",\n現有家具：").concat(e.furListStr?"["+e.furListStr+"]":"",",\n}\n")}var S=n(59434),z=n(5464),E=n(66474);function A(e){let{locale:t,userInfo:n,jiajuProDataString:s,onSaveData:i,assistantDataString:l,isPrinting:o,jiajuDataString:v}=e,j=(0,d.c3)("report.pro"),y=(0,d.c3)("toast"),[N,w]=(0,r.useState)(null),[C,F]=(0,r.useState)("tab0"),[A,O]=(0,r.useState)(null),[R,B]=(0,r.useState)([]),[I,J]=(0,r.useState)({}),[_,L]=(0,r.useState)(!1),[M,P]=(0,r.useState)({}),[T,q]=(0,r.useState)(5),[U,G]=(0,r.useState)(!1),H="zh-CN"===t?b.AU:k,Y="zh-CN"===t?b.BN:D,$=v?JSON.parse(v):{},W=I&&Object.keys(I).length>0;(0,r.useEffect)(()=>{if(s)try{let e=JSON.parse(s);J(e)}catch(e){console.error("Error parsing jiajuProDataString:",e),J({})}},[s]),(0,r.useEffect)(()=>{if(n){let e=(0,x.Ay)(n.birthDateTime,n.gender);P(e),!A||s||n.isLock||X(n,e)}},[n,A,s]);let X=(e,t)=>{console.log("jiaju gen"),q(0);let n=H(),a=A.localItems.filter(e=>"room"===e._type),s=A.localItems.filter(e=>"furniture"===e._type),r=a.map(e=>{let t=s.filter(t=>{var n;return(null===(n=t.data.parentRoom)||void 0===n?void 0:n.id)===e.id}).map(e=>"{家具类型: ".concat(e.data.label.split("-")[1]," ，家具坐标：x-").concat(e.position.x,",y-").concat(e.position.y,"}"));return{...e,furListStr:t.toString()}}),o=a.map(e=>e.id),c=l?JSON.parse(l):{},d="done"===e.genStatus?j("transfer"):"";L(!0),(function(e){let t=[],n=0,a=e.length;return new Promise((s,r)=>{e.forEach((e,i)=>{e.then(e=>{if(0!==e.status)throw Error(e.message);t[i]=e,q(100*(++n/a)),n===a&&s(t)}).catch(r)})})})(r.map(a=>(0,h.bE)("/api/generateCode",{user:Y(a,e,t||M),system:d+n,assistant:"done"===e.genStatus?JSON.stringify(c[a.id]):"",jsonResult:!0}))).then(async e=>{L(!1);let t={};e.forEach((e,n)=>{let a=JSON.parse(e.data),s={};Object.keys(a).forEach((e,t)=>{s["tab".concat(t+1)]=a[e]}),t[o[n]]=s}),J(t),console.log("res 家居进阶",t),i(t)}).catch(e=>{L(!1),f.oR.error("家居风水进阶分析生成错误，请稍后刷新此页面重试。"+e.message,{autoClose:!1})})},V=e=>{F(e),G(!1)},K=()=>{if("tab0"===C)return(0,a.jsx)("div",{className:"mt-3",children:$&&$[null==N?void 0:N.data._type]&&$[null==N?void 0:N.data._type][null==N?void 0:N.direction]&&Object.entries($[null==N?void 0:N.data._type][null==N?void 0:N.direction]).map(e=>{let[t,n]=e;return(0,a.jsxs)("p",{className:"flex leading-8",children:[(0,a.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-22.5",children:[t,"："]}),(0,a.jsx)("span",{className:"whitespace-pre-wrap",children:n})]},t)})});if(W&&N&&I[N.id]){let e=I[N.id][C];return(0,a.jsx)("div",{className:"mt-3",children:(e||"").toString().replace(/\\n/g,"\n").split("\n").map((e,t)=>(0,a.jsx)("div",{className:"mb-1",children:e.trim()||"\xa0"},t))})}return null};return(0,a.jsxs)("section",{className:"relative",children:[_&&(0,a.jsx)("div",{className:"absolute z-12 w-[80%] max-w-125 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2",children:(0,a.jsx)(z.N,{percent:T,strokeWidth:2,strokeColor:"#2db7f5",railWidth:2})}),(0,a.jsxs)(g.m5,{size:"large",spinning:_,tip:y((null==n?void 0:n.genStatus)==="done"?"translating2":"generating"),className:"bg-[#fff9]",children:[(0,a.jsxs)("p",{className:"md:mb-20 mb-10 md:px-0 px-2.5 font-bold leading-8 tracking-normal text-justify",children:[(0,a.jsx)("span",{className:"text-sm leading-8",children:"命主八字"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-[#073E31] font-bold text-xl",children:"".concat(M.year,"年、").concat(M.month,"月、").concat(M.day,"日、").concat(M.hour).concat(j("hour"))})]}),(0,a.jsx)(m.A,{activeRoom:N,setActiveRoom:e=>{w(e),F("tab0")},onChangeDesignData:e=>{O(e)},onChangeRoomList:e=>{B(e)}}),N&&!o&&(0,a.jsxs)("div",{className:"w-full md:rounded-b-3xl bg-[#fafafa] md:p-8 p-5 border-1 border-[#E6E6E6]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.default,{width:(null==N?void 0:N.data._type)==="dining_room"?28:32,height:(null==N?void 0:N.data._type)==="dining_room"?28:32,style:{color:"red"},alt:"",src:"/images/report/".concat(null==N?void 0:N.data._type,".svg")}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:null==N?void 0:N.data.label})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("div",{className:"block mb-5 md:hidden",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>G(!U),className:"flex items-center justify-between w-full px-4 py-3 text-sm font-medium bg-white border border-gray-200 rounded-lg",children:[(0,a.jsx)("span",{children:(()=>{switch(C){case"tab0":default:return"佈局基本分析";case"tab1":return j("tab1");case"tab2":return j("tab2");case"tab3":return j("tab3");case"tab4":return j("tab4")}})()}),(0,a.jsx)(E.A,{className:"w-4 h-4 transition-transform ".concat(U?"rotate-180":"")})]}),U&&(0,a.jsxs)("div",{className:"absolute left-0 right-0 z-10 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg top-full",children:[(0,a.jsx)("button",{onClick:()=>V("tab0"),className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 ".concat("tab0"===C?"bg-blue-50 text-blue-600 font-medium":""),children:"佈局基本分析"}),W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>V("tab1"),className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 ".concat("tab1"===C?"bg-blue-50 text-blue-600 font-medium":""),children:j("tab1")}),(0,a.jsx)("button",{onClick:()=>V("tab2"),className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 ".concat("tab2"===C?"bg-blue-50 text-blue-600 font-medium":""),children:j("tab2")}),(0,a.jsx)("button",{onClick:()=>V("tab3"),className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 ".concat("tab3"===C?"bg-blue-50 text-blue-600 font-medium":""),children:j("tab3")}),(0,a.jsx)("button",{onClick:()=>V("tab4"),className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 ".concat("tab4"===C?"bg-blue-50 text-blue-600 font-medium":""),children:j("tab4")})]})]})]})}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsxs)(u.tU,{value:C,className:"w-full gap-0",onValueChange:F,children:[(0,a.jsxs)(u.j7,{className:"justify-start gap-5 p-0 bg-transparent",children:[(0,a.jsx)(u.Xi,{value:"tab0",className:"cursor-pointer pb-3 px-0 rounded-none bg-transparent text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:"佈局基本分析"}),W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Xi,{value:"tab1",className:"cursor-pointer pb-3 px-0 rounded-none bg-transparent text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:j("tab1")}),(0,a.jsx)(u.Xi,{value:"tab2",className:"cursor-pointer pb-3 px-0 rounded-none bg-transparent text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:j("tab2")}),(0,a.jsx)(u.Xi,{value:"tab3",className:"cursor-pointer pb-3 px-0 rounded-none bg-transparent text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:j("tab3")}),(0,a.jsx)(u.Xi,{value:"tab4",className:"cursor-pointer pb-3 px-0 rounded-none bg-transparent text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:j("tab4")})]})]}),(0,a.jsx)(p.Separator,{className:"mb-5"}),(0,a.jsx)(u.av,{value:"tab0",className:"w-full leading-8",children:K()}),W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.av,{value:"tab1",className:"w-full leading-8",children:K()}),(0,a.jsx)(u.av,{value:"tab2",className:"w-full leading-8",children:K()}),(0,a.jsx)(u.av,{value:"tab3",className:"w-full leading-8",children:K()}),(0,a.jsx)(u.av,{value:"tab4",className:"w-full leading-8",children:K()})]})]})}),(0,a.jsx)("div",{className:"block md:hidden",children:(0,a.jsx)("div",{className:"w-full leading-8",children:K()})})]})]})]}),o&&(0,a.jsxs)("div",{className:"w-full bg-[#fafafa] md:p-8 p-5 border-1 border-[#E6E6E6]",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-bold text-primary",children:"佈局基本分析"}),R.map(e=>(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-md font-bold text-[#073E31] mb-2",children:e.data.label}),$&&$[e.data._type]&&$[e.data._type][e.direction]&&Object.entries($[e.data._type][e.direction]).map(e=>{let[t,n]=e;return(0,a.jsxs)("p",{className:"flex text-sm leading-8",children:[(0,a.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-22.5",children:[t,"："]}),(0,a.jsx)("span",{className:"whitespace-pre-wrap",children:n})]},t)})]},"basic-".concat(e.id)))]}),W&&Object.entries(I).map(e=>{let[n,s]=e,r=(0,S.Ay)(n,t);return(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{className:"mt-3 mb-2 font-bold whitespace-nowrap text-primary",children:[r,"："]}),Object.entries(s).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"font-bold whitespace-nowrap",children:[j(t),"："]}),(0,a.jsx)("div",{className:"mt-1",children:(s||"").toString().replace(/\\n/g,"\n").split("\n").map((e,t)=>(0,a.jsx)("div",{className:"mb-1",children:e.trim()||"\xa0"},t))})]},n+t)})]},n)})]}),(0,a.jsx)("div",{className:"px-6 my-5 md:p-0",children:(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-[#FF531A]",children:"*"}),j("p6-1")]})})]})}function O(e){let{locale:t,userInfo:n,mingLiDataString:s,assistantDataString:i,onSaveData:o,isPrinting:c}=e,u=(0,d.c3)("report.pro"),m=(0,d.c3)("toast"),[p,v]=(0,r.useState)({mingpan:""}),[j,y]=(0,r.useState)("mingpan"),[N,k]=(0,r.useState)(!1),[F,D]=(0,r.useState)({}),[S,E]=(0,r.useState)(5),A=(0,l.A)(),O="zh-CN"===t?b.sR:w,R="zh-CN"===t?b.gL:C;(0,r.useEffect)(()=>{let e={};n&&D(e=(0,x.Ay)(n.birthDateTime,n.gender)),!n||n.isLock||s||I(n,e)},[n,s]),(0,r.useEffect)(()=>{s&&v(JSON.parse(s))},[s]);let B=e=>{y(e)},I=(e,t)=>{f.oR.info(m("done"===e.genStatus?"translating2":"generating")),console.log("mingli gen"),E(0);let n=R(e,t||F),a=i?JSON.parse(i):{},s="done"===e.genStatus?u("transfer"):"",r=[(0,h.bE)("/api/generateCode",{user:n,system:s+O("mingpan"),assistant:"done"===e.genStatus?JSON.stringify(a.mingpan):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("minggong"),assistant:"done"===e.genStatus?JSON.stringify(a.minggong):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("liuqin"),assistant:"done"===e.genStatus?JSON.stringify(a.liuqin):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("shiye"),assistant:"done"===e.genStatus?JSON.stringify(a.shiye):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("jiankang"),assistant:"done"===e.genStatus?JSON.stringify(a.jiankang):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("ganqing"),assistant:"done"===e.genStatus?JSON.stringify(a.ganqing):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("renji"),assistant:"done"===e.genStatus?JSON.stringify(a.renji):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("juece"),assistant:"done"===e.genStatus?JSON.stringify(a.juece):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("gexing"),assistant:"done"===e.genStatus?JSON.stringify(a.gexing):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("yunshi"),assistant:"done"===e.genStatus?JSON.stringify(a.yunshi):""}),(0,h.bE)("/api/generateCode",{user:n,system:s+O("kaiyun"),assistant:"done"===e.genStatus?JSON.stringify(a.kaiyun):""})];k(!0),(function(e){let t=[],n=0,a=e.length;return new Promise((s,r)=>{e.forEach((e,i)=>{e.then(e=>{if(0!==e.status)throw Error(e.message);t[i]=e,console.log("c",++n),E(n/a*100),n===a&&s(t)}).catch(r)})})})(r).then(e=>{k(!1),console.log("res 命理进阶",e);let t={...p,mingpan:e[0].data,minggong:e[1].data,liuqin:e[2].data,shiye:e[3].data,jiankang:e[4].data,ganqing:e[5].data,renji:e[6].data,juece:e[7].data,gexing:e[8].data,yunshi:e[9].data,kaiyun:e[10].data};v(t),o(t)}).catch(e=>{k(!1),f.oR.error("个人命理进阶分析生成错误，请稍后刷新此页面重试。"+e.message,{autoClose:!1})})},J=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9] md:rounded-t-xl rounded-t-lg rounded-r-none border-2 border-[#6CA698] flex items-center justify-center",style:{borderTopRightRadius:0},children:(0,a.jsx)("div",{style:"mingpan"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("mingpan"),children:u("mingpan")})}),(0,a.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"minggong"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("minggong"),children:u("minggong")})}),(0,a.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"gexing"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("gexing"),children:u("gexing")})}),(0,a.jsx)("div",{className:"md:p-2 p-1 bg-[#F7FAF9] md:rounded-t-xl rounded-t-lg rounded-l-none  border-2 border-[#6CA698] flex items-center justify-center",style:{borderTopLeftRadius:0},children:(0,a.jsx)("div",{style:"yunshi"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("yunshi"),children:u("yunshi")})})]}),_=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:p-2 p-1 bg-[#F7FAF9] md:rounded-b-xl rounded-b-0 border-2 border-[#6CA698] flex items-center justify-center",style:{borderBottomRightRadius:0},children:(0,a.jsx)("div",{style:"renji"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("renji"),children:u("renji")})}),(0,a.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"juece"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("juece"),children:u("juece")})}),(0,a.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"kaiyun"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("kaiyun"),children:u("kaiyun")})}),(0,a.jsx)("div",{style:{borderBottomLeftRadius:0},className:"bg-[#F7FAF9] border-2 border-[#6CA698] md:rounded-b-xl rounded-b-0 "})]});return(0,a.jsxs)("div",{className:"relative",children:[N&&(0,a.jsxs)("div",{className:"absolute z-12 w-[80%] max-w-125 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 ",children:[(0,a.jsx)(z.N,{percent:S,strokeWidth:2,strokeColor:"#2db7f5",railWidth:2})," "]}),(0,a.jsx)(g.m5,{size:"large",spinning:N,tip:m((null==n?void 0:n.genStatus)=="done"?"translating2":"generating"),className:"bg-[#fff9]",children:c?(0,a.jsx)("div",{className:"p-5 mx-auto bg-secondary rounded-2xl",children:Object.entries(p).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("p",{className:"font-bold whitespace-nowrap text-primary",children:[u(t),"："]}),(0,a.jsx)("span",{className:"whitespace-pre-wrap",children:n})]},t)})}):(0,a.jsx)("div",{children:A?(0,a.jsxs)("div",{className:"p-4 mx-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 grid-rows-3 h-full border-2 border-[#6CA698] rounded-t-xl ",children:[J,(0,a.jsx)("div",{className:"p-1 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"liuqin"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("liuqin"),children:u("liuqin")})}),(0,a.jsx)("div",{className:"p-1 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"shiye"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("shiye"),children:u("shiye")})}),(0,a.jsx)("div",{className:"p-1 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"ganqing"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("ganqing"),children:u("ganqing")})}),(0,a.jsx)("div",{className:"p-1  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"jiankang"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xs font-bold text-center cursor-pointer md:text-xl min-h-12 hover:bg-gray-100",onClick:()=>B("jiankang"),children:u("jiankang")})}),_]}),(0,a.jsx)("div",{className:"text-sm whitespace-pre-wrap text-white overflow-y-auto rounded-b-xl  border-4 border-t-0  border-[#6CA698]   p-8  bg-[#066952CC]",children:p[j]})]}):(0,a.jsx)("div",{className:"mx-auto p-4 w-[952px] h-[608px]",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 grid-rows-4 h-full border-8 border-[#6CA698] rounded-2xl",children:[J,(0,a.jsx)("div",{className:"p-2 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"liuqin"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xl font-bold text-center cursor-pointer hover:bg-gray-100",onClick:()=>B("liuqin"),children:u("liuqin")})}),(0,a.jsx)("div",{className:"text-xs min-h-12 whitespace-pre-wrap text-white overflow-y-auto col-span-2 row-span-2 border border-gray-300  p-4 flex justify-center bg-[#066952CC]",children:p[j]}),(0,a.jsx)("div",{className:"p-2 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"shiye"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xl font-bold cursor-pointer hover:bg-gray-100",onClick:()=>B("shiye"),children:u("shiye")})}),(0,a.jsx)("div",{className:"p-2 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"ganqing"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xl font-bold text-center cursor-pointer hover:bg-gray-100",onClick:()=>B("ganqing"),children:u("ganqing")})}),(0,a.jsx)("div",{className:"p-2  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,a.jsx)("div",{style:"jiankang"===j?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"flex items-center justify-center w-full h-full text-xl font-bold text-center cursor-pointer hover:bg-gray-100",onClick:()=>B("jiankang"),children:u("jiankang")})}),_]})})})})]})}n(91091),n(66424);function R(e){let{className:t,...n}=e;return(0,a.jsx)("div",{"data-slot":"skeleton",className:(0,S.cn)("bg-secondary animate-pulse rounded-md",t),...n})}var B=n(96609),I=n(45493);let J={金:"#CCBB00",木:"#00991B",水:"#0088CC",火:"#E52918",土:"#BF8F00"};function _(e){var t,n;let{locale:u}=e;(0,l.A)();let m=(0,i.useRouter)(),x=(0,d.c3)("report");(0,d.c3)("toast");let g=(0,r.useRef)(null),p=(0,r.useRef)([]),[b,v]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),[N,w]=(0,r.useState)(0),[C,k]=(0,r.useState)(!1),F=(0,r.useRef)(null),[D,S]=(0,r.useState)(!1),[z,E]=(0,r.useState)(!0),[_,L]=(0,r.useState)(null),[M,P]=(0,r.useState)(null),[T,q]=(0,r.useState)(null),[U,G]=(0,r.useState)(null),[H,Y]=(0,r.useState)(null),$=(0,r.useRef)([]),W=(0,r.useRef)([]),X=(0,r.useRef)([]),V=(0,r.useRef)([]),[K,Q]=(0,r.useState)(null),[Z,ee]=(0,r.useState)(null),[et,en]=(0,r.useState)(null),{loading:ea,reportDocData:es,assistantData:er}=(0,o.A)(u,_),ei=(0,B.useReactToPrint)({contentRef:g,pageStyle:"\n            @page { \n                size: A4;\n                margin: 20mm 15mm 20mm 15mm;  /* top right bottom left margins */\n            }\n            @media print {\n                body, html {\n                    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');\n                    height: auto;\n                    font-family: 'SimSun', 'Microsoft YaHei', sans-serif;\n                    overflow: initial !important;\n                    margin: 0;\n                    zoom: 100%;\n                }\n                .hidden-on-print { display: none !important; }\n                .show-on-print { display: block !important;}\n                \n                /* Page breaks for chapters */\n                .chapter-page-break {\n                    page-break-before: always !important;\n                }\n                \n                /* Show all tab content when printing */\n                .tab-content-print {\n                    max-height: none !important;\n                    overflow: visible !important;\n                    opacity: 1 !important;\n                    display: block !important;\n                }\n                \n                /* Hide interactive buttons when printing */\n                .interactive-tabs {\n                    display: none !important;\n                }\n                \n                .page-break {\n                    margin-top: 1rem;\n                    display: block;\n                    page-break-before: auto;\n                }\n                .canvasImage{\n                    page-break-inside: avoid;\n                    break-inside: avoid;\n                }\n                img{\n                    max-width: 100% !important;\n                    height: auto !important;\n                    page-break-inside: auto;\n                    break-inside: auto;\n                }\n      }\n        ",removeAfterPrint:!0,documentTitle:"Harmoniq风水家居报告"});(0,r.useEffect)(()=>{let e=[{title:x("title1"),children:[{title:"年柱"},{title:"月柱"},{title:"日柱"},{title:x("shizhu")}]},{title:x("title2"),children:[{title:x("title2-1"),color:"#088C6E",bgColor:"#F7FAF9"},{title:x("title2-2"),color:"#00A637",bgColor:"#F5FAF7"},{title:x("title2-3"),color:"#0A58A6",bgColor:"#F5F8FA"},{title:x("title2-4"),color:"#E52E5C",bgColor:"#FAF5F6"},{title:x("title2-5"),color:"#D9B815",bgColor:"#FCFBF5"},{title:x("title2-6"),color:"#066952",bgColor:"#F7FAF9"}]},{title:x("title3")}],t=[{id:"section-0",title:"第一章：个人命理基础分析",isMain:!0},{id:"section-0-0",title:"年柱",isMain:!1},{id:"section-0-1",title:"月柱"},{id:"section-0-2",title:"日柱"},{id:"section-0-3",title:"时柱"},{id:"section-1",title:"第二章：流年运程基础分析",isMain:!0},{id:"section-1-0",title:"整体运势"},{id:"section-1-1",title:"健康运势"},{id:"section-1-2",title:"事业运势"},{id:"section-1-3",title:"感情运势"},{id:"section-1-4",title:"财运运势"},{id:"section-1-5",title:"总结"},{id:"section-2",title:"第三章：流年运程基础分析",isMain:!0},{id:"section-3",isMain:!0}];z?(v([...e,{title:x("title4")}]),y(t)):(v([...e,{title:x("title4")},{title:x("title5")},{title:x("title6")}]),y([...t,{id:"section-4",isMain:!0},{id:"section-5",isMain:!0}]))},[z]),(0,r.useEffect)(()=>{let e=()=>{let e=p.current.map(e=>e?e.getBoundingClientRect().top:1/0).findIndex(e=>e>80);w(-1===e?j.length-1:Math.max(0,e-1))};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]);let{data:el}=(0,I.wV)();(0,r.useEffect)(()=>{var e;let t=null==el?void 0:null===(e=el.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{status:e,message:n,data:a}=await (0,h.Jt)("/api/users/".concat(t));0==e&&(L(a),E(a.isLock))})()},[null==el?void 0:null===(t=el.user)||void 0===t?void 0:t.userId]),(0,r.useEffect)(()=>{let e=e=>{e.target.closest(".report-menu")||e.target.closest(".progress-indicator")||k(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{let e=async()=>{var e;let t=null==el?void 0:null===(e=el.user)||void 0===e?void 0:e.userId;if(!t||!K)return;console.log("\uD83D\uDCBE Saving MingLi data:",K);let{status:n}=await (0,h.F6)("/api/reportUserDoc/".concat(t,"/").concat("zh-CN"==u?"zh":"tw"),{mingLiData:K});console.log("\uD83D\uDCBE MingLi save result:",n)};K&&e()},[K]),(0,r.useEffect)(()=>{let e=async()=>{var e;let t=null==el?void 0:null===(e=el.user)||void 0===e?void 0:e.userId;if(!t||!Z)return;console.log("\uD83D\uDCBE Saving LiuNian data:",Z);let{status:n}=await (0,h.F6)("/api/reportUserDoc/".concat(t,"/").concat("zh-CN"==u?"zh":"tw"),{liuNianData:Z});console.log("\uD83D\uDCBE LiuNian save result:",n)};Z&&e()},[Z]),(0,r.useEffect)(()=>{let e=async()=>{var e;let t=null==el?void 0:null===(e=el.user)||void 0===e?void 0:e.userId;if(!t||!et)return;console.log("\uD83D\uDCBE Saving JiajuPro data:",et);let{status:n}=await (0,h.F6)("/api/reportUserDoc/".concat(t,"/").concat("zh-CN"==u?"zh":"tw"),{jiajuProData:et});console.log("\uD83D\uDCBE JiajuPro save result:",n),0===n&&K&&Z&&await (0,h.bE)("/api/users/".concat(t),{genStatus:"done"})};et&&e()},[et]);let eo=()=>{clearTimeout(F.current),k(!0)},ec=e=>{var t;null===(t=p.current[e])||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"})};if(ea)return(0,a.jsxs)("div",{className:"space-y-8 mt-25",children:[(0,a.jsx)(R,{className:"h-4 w-[80%]"}),(0,a.jsx)(R,{className:"h-4 w-[70%]"}),(0,a.jsx)(R,{className:"h-4 w-[80%]"}),(0,a.jsx)(R,{className:"h-4 w-[70%]"})]});if(!es){f.oR.error(x("error")),m.push("/design");return}return(0,a.jsxs)("div",{className:"relative min-h-screen bg-white",children:[!D&&(0,a.jsx)(s.default,{from:"report"}),(0,a.jsxs)("div",{className:"fixed z-10 right-4 top-32",children:[!D&&(0,a.jsx)("a",{href:"#",className:"absolute right-0 py-1 text-center text-white hidden-on-print rounded-3xl w-25 -top-12 bg-primary",onClick:()=>{S(!0),setTimeout(()=>{ei()},500),setTimeout(()=>{S(!1)},3e3)},children:x("download")}),(0,a.jsx)("div",{className:"flex flex-col items-center gap-2 cursor-pointer select-none progress-indicator",onMouseEnter:eo,onClick:eo,children:j.map((e,t)=>(0,a.jsx)("div",{className:"transition-all duration-200 ".concat(e.isMain?"w-5 h-5":"w-2 h-2"," rounded-full  ").concat(N===t?"bg-[#20B580]":"bg-[#E7F2EE] "),style:{margin:e.isMain?"8px 0":"3px 0"}},e.id))}),C&&(0,a.jsx)("div",{className:"absolute top-0 right-0 report-menu w-56 bg-white shadow-lg rounded-lg py-4 px-4 text-sm max-h-[70vh] overflow-y-auto",tabIndex:-1,children:b.map((e,t)=>{var n;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm mb-1 cursor-pointer ".concat(N===j.findIndex(e=>e.id==="section-".concat(t))?"text-[#20B580]":""),onClick:()=>ec(j.findIndex(e=>e.id==="section-".concat(t))),children:e.title}),null===(n=e.children)||void 0===n?void 0:n.map((e,n)=>(0,a.jsx)("div",{className:"text-sm pl-4 py-1 cursor-pointer ".concat(N===j.findIndex(e=>e.id==="section-".concat(t,"-").concat(n))?"text-[#20B580]":"text-gray-700"),onClick:()=>ec(j.findIndex(e=>e.id==="section-".concat(t,"-").concat(n))),children:e.title},e.title))]},e.title)})})]}),(0,a.jsxs)("div",{ref:g,children:[(0,a.jsxs)("div",{className:"mx-auto md:max-w-250 md:px-5",children:[(0,a.jsx)("h1",{ref:e=>p.current[0]=e,className:"md:text-[40px] text-[28px] text-center font-bold my-10 md:mt-30 md:px-0 px-5 text-[#073E31]",id:"section-0",children:b[0].title}),(0,a.jsxs)("p",{className:"px-5 font-bold leading-8 tracking-normal text-justify md:px-0",children:[(0,a.jsx)("span",{className:"text-[#073E31]",children:x("p1-1")}),x("p1-2"),(0,a.jsx)("span",{className:"text-[#073E31]",children:x("p1-3")}),"。",(0,a.jsx)("br",{}),x("p1-4")]}),(0,a.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-gradient-to-br from-white via-[#e8f7ef] to-[#cbead6] p-8 md:mt-8 mt-2",children:[" ",(0,a.jsx)("h2",{id:"section-0-1",ref:e=>p.current[1]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:"年柱"}),(0,a.jsx)("p",{className:"mb-6 leading-8 text-justify",children:x("p1-5")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mb-6 interactive-tabs",children:Object.entries(es.nianzhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsx)("button",{className:"px-4 py-2 rounded-full font-bold border transition-all duration-200 ".concat(M===t?"bg-[#20B580] text-white border-[#20B580]":"bg-white text-[#20B580] border-[#20B580]"),style:{color:M===t?"#fff":J[n.slice(-1)],borderColor:J[n.slice(-1)]},onClick:()=>{P(M===t?null:t)},children:n},t)})}),Object.entries(es.nianzhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsxs)("div",{ref:e=>$.current[t]=e,className:"flex justify-center mt-4 ".concat(D?"tab-content-print":""),style:D?{}:{maxHeight:500*(M===t),overflow:"hidden",transition:"max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s",opacity:+(M===t)},children:[(0,a.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,a.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:J[n.slice(-1)]},children:n}),(0,a.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,a.jsx)("div",{className:"flex items-center justify-end ml-4",style:{marginRight:"-40px",zIndex:1},children:(0,a.jsx)(c.default,{className:"object-contain w-105 h-75",priority:!0,src:"/images/report/".concat(n.slice(-1),".png"),alt:n,width:420,height:320})})]},t)})]}),(0,a.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-gradient-to-br from-white via-[#e8f7ef] to-[#cbead6] p-8 md:mt-8 mt-2",children:[(0,a.jsx)("h2",{id:"section-0-2",ref:e=>p.current[2]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:"月柱"}),(0,a.jsx)("p",{className:"mb-6 leading-8 text-justify",children:x("p1-6")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mb-6 interactive-tabs",children:Object.entries(es.yuezhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsx)("button",{className:"px-4 py-2 rounded-full font-bold border transition-all duration-200 ".concat(T===t?"bg-[#20B580] text-white border-[#20B580]":"bg-white text-[#20B580] border-[#20B580]"),style:{color:T===t?"#fff":J[n.slice(-1)],borderColor:J[n.slice(-1)]},onClick:()=>{q(T===t?null:t)},children:n},t)})}),Object.entries(es.yuezhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsxs)("div",{ref:e=>W.current[t]=e,className:"flex justify-center mt-4 ".concat(D?"tab-content-print":""),style:D?{}:{maxHeight:500*(T===t),overflow:"hidden",transition:"max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s",opacity:+(T===t)},children:[(0,a.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,a.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:J[n.slice(-1)]},children:n}),(0,a.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,a.jsx)("div",{className:"flex items-center justify-end ml-4",style:{marginRight:"-40px",zIndex:1},children:(0,a.jsx)(c.default,{className:"object-contain w-105 h-75",priority:!0,src:"/images/report/".concat(n.slice(-1),".png"),alt:n,width:420,height:320})})]},t)})]}),(0,a.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-gradient-to-br from-white via-[#e8f7ef] to-[#cbead6] p-8 md:mt-8 mt-2",children:[(0,a.jsx)("h2",{id:"section-0-3",ref:e=>p.current[3]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:"日柱"}),(0,a.jsx)("p",{className:"mb-6 leading-8 text-justify",children:x("p1-7")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mb-6 interactive-tabs",children:Object.entries(es.rizhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsx)("button",{className:"px-4 py-2 rounded-full font-bold border transition-all duration-200 ".concat(U===t?"bg-[#20B580] text-white border-[#20B580]":"bg-white text-[#20B580] border-[#20B580]"),style:{color:U===t?"#fff":J[n.slice(-1)],borderColor:J[n.slice(-1)]},onClick:()=>{G(U===t?null:t)},children:n},t)})}),Object.entries(es.rizhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsxs)("div",{ref:e=>X.current[t]=e,className:"flex justify-center mt-4 ".concat(D?"tab-content-print":""),style:D?{}:{maxHeight:500*(U===t),overflow:"hidden",transition:"max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s",opacity:+(U===t)},children:[(0,a.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,a.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:J[n.slice(-1)]},children:n}),(0,a.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,a.jsx)("div",{className:"flex items-center justify-end ml-4",style:{marginRight:"-40px",zIndex:1},children:(0,a.jsx)(c.default,{className:"object-contain w-105 h-75",priority:!0,src:"/images/report/".concat(n.slice(-1),".png"),alt:n,width:420,height:320})})]},t)})]}),(0,a.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-gradient-to-br from-white via-[#e8f7ef] to-[#cbead6] p-8 md:mt-8 mt-2",children:[(0,a.jsx)("h2",{id:"section-0-4",ref:e=>p.current[4]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:x("shizhu")}),(0,a.jsx)("p",{className:"mb-6 leading-8 text-justify",children:x("p1-8")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mb-6 interactive-tabs",children:Object.entries(es.shizhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsx)("button",{className:"px-4 py-2 rounded-full font-bold border transition-all duration-200 ".concat(H===t?"bg-[#20B580] text-white border-[#20B580]":"bg-white text-[#20B580] border-[#20B580]"),style:{color:H===t?"#fff":J[n.slice(-1)],borderColor:J[n.slice(-1)]},onClick:()=>{Y(H===t?null:t)},children:n},t)})}),Object.entries(es.shizhuData).map((e,t)=>{let[n,s]=e;return(0,a.jsxs)("div",{ref:e=>V.current[t]=e,className:"flex justify-center mt-4 ".concat(D?"tab-content-print":""),style:D?{}:{maxHeight:500*(H===t),overflow:"hidden",transition:"max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s",opacity:+(H===t)},children:[(0,a.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,a.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:J[n.slice(-1)]},children:n}),(0,a.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,a.jsx)("div",{className:"flex items-center justify-end ml-4",style:{marginRight:"-40px",zIndex:1},children:(0,a.jsx)(c.default,{className:"object-contain w-105 h-75",priority:!0,src:"/images/report/".concat(n.slice(-1),".png"),alt:n,width:420,height:320})})]},t)})]})]},"section-0"),(0,a.jsxs)("div",{className:"relative mx-auto max-w-250 md:px-5 chapter-page-break",children:[(0,a.jsx)("h1",{ref:e=>p.current[5]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-1",children:b[1].title}),(0,a.jsxs)("p",{className:"px-5 font-bold leading-8 tracking-normal text-justify md:px-0",children:[(0,a.jsx)("span",{className:"text-[#073E31]",children:x("p2-1")}),x("p2-2")]}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-3 px-5 mt-8 mb-8 sm:gap-4 md:gap-6 md:px-0 md:justify-between",children:es.yunchengData.slice(0,5).map((e,t)=>{var n;return(0,a.jsxs)("div",{className:"flex flex-col items-center min-w-0 flex-1 max-w-[calc(50%-6px)] sm:max-w-[calc(33.333%-8px)] md:max-w-none",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-16 h-16 mb-2 border-2 rounded-full sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 sm:border-3 md:border-4",style:{borderColor:b[1].children[t].color,background:"#fff"},children:[(0,a.jsx)("span",{className:"text-xl font-extrabold sm:text-2xl md:text-4xl lg:text-5xl",style:{color:b[1].children[t].color},children:null===(n=e.zhishu)||void 0===n?void 0:n.split("/")[0]}),(0,a.jsx)("span",{className:"text-xs font-bold sm:text-sm md:text-base lg:text-lg",style:{color:b[1].children[t].color},children:"/10"})]}),(0,a.jsx)("span",{className:"mt-1 text-xs text-center text-gray-600 sm:text-sm md:hidden",children:b[1].children[t].title})]},t)})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{children:es.yunchengData.map((e,t)=>{var n;return(0,a.jsxs)("section",{style:{backgroundColor:b[1].children[t].bgColor},className:"md:rounded-[26px] rounded-none md:p-8 p-5 md:mt-10 mt-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{ref:e=>p.current[6+t]=e,id:"section-1-".concat(t),className:"leading-8 text-xl font-bold flex items-center",style:{color:b[1].children[t].color},children:[t<5&&(0,a.jsx)(c.default,{src:"/images/report/icon".concat(t,".png"),width:24,height:24,alt:"",className:"mr-1"}),b[1].children[t].title]}),t<5&&(0,a.jsxs)("p",{className:"leading-8 flex items-end",style:{color:b[1].children[t].color},children:[(0,a.jsx)("span",{className:"text-xl font-bold",children:null===(n=e.zhishu)||void 0===n?void 0:n.split("/")[0]}),(0,a.jsx)("span",{className:"text-sm",children:"/10"})]})]}),(0,a.jsx)("p",{className:"leading-8 text-justify",children:e.content})]})})})})]},"section-1"),(0,a.jsxs)("div",{className:"mx-auto md:max-w-250 md:px-5 chapter-page-break",children:[(0,a.jsx)("h1",{ref:e=>p.current[12]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-2",children:b[2].title}),(0,a.jsxs)("p",{className:"px-5 mb-8 font-bold leading-8 tracking-normal text-justify md:px-0",children:[(0,a.jsx)("span",{className:"text-[#073E31]",children:x("p3-1")}),x("p3-2"),(0,a.jsx)("br",{}),x("p3-3"),(0,a.jsxs)("span",{className:"text-[#073E31]",children:[" ",x("p3-4")]}),x("p3-5")]}),(0,a.jsx)(A,{locale:u,onSaveData:en,userInfo:_,jiajuProDataString:JSON.stringify(es.jiajuProData||void 0),assistantDataString:JSON.stringify(er.jiajuProData),jiajuDataString:JSON.stringify(es.jiajuData),isPrinting:D})]},"section-2"),(0,a.jsxs)("div",{className:"relative mx-auto md:max-w-250 md:px-5 chapter-page-break",children:[(0,a.jsx)("h1",{ref:e=>p.current[13]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-3",children:null===(n=b[3])||void 0===n?void 0:n.title}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{children:(0,a.jsx)(O,{locale:u,onSaveData:Q,userInfo:_,mingLiDataString:JSON.stringify(es.mingLiData||void 0),assistantDataString:JSON.stringify(er.mingLiData),isPrinting:D})})})]},"section-3")]})]})}},30285:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,r:()=>l});var a=n(95155);n(12115);var s=n(99708),r=n(74466),i=n(59434);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:n,size:r,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:n,size:r,className:t})),...c})}},48963:(e,t,n)=>{Promise.resolve().then(n.bind(n,23048))},66424:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var a=n(95155);n(12115);var s=n(47655),r=n(59434);function i(e){let{className:t,children:n,...i}=e;return(0,a.jsxs)(s.bL,{"data-slot":"scroll-area",className:(0,r.cn)("relative",t),...i,children:[(0,a.jsx)(s.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),(0,a.jsx)(l,{}),(0,a.jsx)(s.OK,{})]})}function l(e){let{className:t,orientation:n="vertical",...i}=e;return(0,a.jsx)(s.VM,{"data-slot":"scroll-area-scrollbar",orientation:n,className:(0,r.cn)("flex touch-none p-px transition-colors select-none visible","vertical"===n&&"h-full w-2.5 border-l border-l-transparent","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent",t),...i,children:(0,a.jsx)(s.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},76142:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(95155);n(40054);var s=n(12115),r=n(45493),i=n(91599),l=n(48842),o=n(87712),c=n(84616),d=n(66766),u=n(17652);function m(e){var t;let{activeRoom:n,setActiveRoom:m,onChangeDesignData:x,onChangeRoomList:h}=e,g=(0,u.c3)("report"),[f,p]=(0,s.useState)({}),[b,v]=(0,s.useState)({width:0,height:0}),[j,y]=(0,s.useState)(100),[N,w]=(0,s.useState)(0),[C,k]=(0,s.useState)([]),[F,D]=(0,s.useState)(!1),{data:S}=(0,r.wV)();if((0,s.useEffect)(()=>{var e;let t=null==S?void 0:null===(e=S.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{data:e}=await (0,i.Jt)("/api/design/".concat(t));y(e.scale),w(e.compassRotation);let n=e.localItems;if(!n||0===n.length)return;let a=n.filter(e=>"room"===e._type);k(a),m(a[0]);let s=n[0].position.x,r=n[0].position.y,l=n[0].position.x+n[0].size.width,o=n[0].position.y+n[0].size.height;n.forEach(e=>{e.position.x<s&&(s=e.position.x),e.position.y<r&&(r=e.position.y),e.position.x+e.size.width>l&&(l=e.position.x+e.size.width),e.position.y+e.size.height>o&&(o=e.position.y+e.size.height)});let c=n.map(e=>({...e,position:{x:e.position.x-s+100,y:e.position.y-r+100}})),d={...e,localItems:c};p(d),x&&x(d),h&&h(a),v({width:l-s+200,height:o-r+200})})()},[null==S?void 0:null===(t=S.user)||void 0===t?void 0:t.userId]),!f.localItems)return"";function z(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("in"===e&&j<120)t=j+n;else if("out"===e&&j>50)t=j-n;else{if("reset"!==e)return;t=100}y(t)}let E=e=>{m(e)},A=e=>{m(e)};return(0,a.jsxs)("div",{className:"relative canvasImage",children:[(0,a.jsx)("div",{className:"relative border-1 border-[#E6E6E6] rounded-t-3xl py-[2px] mt-8 overflow-scroll",children:(0,a.jsx)("div",{onClick:()=>D(!1),className:"relative flex justify-center w-full h-135",style:{minWidth:b.width},children:(0,a.jsx)("div",{id:"roomCanvas",className:"absolute cursor-not-allowed",style:{width:"".concat(b.width,"px"),height:"".concat(b.height,"px"),transform:"scale(".concat(j/100,")"),transformOrigin:"top left"},children:(0,a.jsx)("div",{className:"relative",children:f.localItems.map(e=>e._type===l.w$.ROOM?(0,a.jsx)("div",{"data-room-element":"true",className:"absolute ".concat((null==n?void 0:n.id)===e.id?"ring-2 ring-red-500":""," cursor-move z-100"),style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},onClick:t=>{t.stopPropagation(),A(e)},children:(0,a.jsx)("div",{className:"w-full h-full",style:{border:e._type===l.w$.ROOM?"8px solid":"none",borderColor:e._type===l.w$.ROOM?l.$q[e.data._type]:"transparent",borderRadius:"8px",backgroundColor:l.$q[e.data._type]+"80"},children:(0,a.jsx)("div",{className:"absolute top-2 left-2 text-[14px] text-[#888888]",style:{zIndex:1},children:e.data.label})})},e.id):e._type===l.w$.FURNITURE?(0,a.jsx)("div",{"data-room-element":"true",className:"absolute cursor-move z-200",style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},children:(0,a.jsx)(d.default,{draggable:"false",className:(null==n?void 0:n.id)===e.id?"ring-2 ring-red-500":"",style:{transform:e.rotation?"rotate(".concat(e.rotation,"deg)"):"none",transformOrigin:"center"},src:e.activeIcon,alt:"Furniture",width:e.size.width,height:e.size.height})},e.id):void 0)})})})}),(0,a.jsxs)("div",{style:{transform:"rotate(".concat(N,"deg)"),transition:"transform 0.3s ease-out"},className:"absolute flex flex-col items-center top-5 right-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"N"}),(0,a.jsx)(d.default,{src:"/images/compass.png",alt:"方向",width:40,height:40})]}),(0,a.jsxs)("div",{className:"absolute flex items-center gap-2 px-3 py-2 bg-white rounded-full shadow-lg top-120 right-5",children:[(0,a.jsx)("button",{className:"p-1 text-gray-600 rounded hover:bg-gray-100",onClick:e=>z("out"),disabled:j<=50,children:(0,a.jsx)(o.A,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-600 min-w-[48px] text-center",children:[j,"%"]}),(0,a.jsx)("button",{className:"p-1 text-gray-600 rounded hover:bg-gray-100",onClick:e=>z("in"),disabled:j>=120,children:(0,a.jsx)(c.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{onClick:()=>D(!0),className:"absolute z-20 flex items-center justify-center w-10 h-10 text-xs rounded-full shadow-lg cursor-pointer top-120 left-5",children:[F&&(0,a.jsx)("div",{className:"absolute left-0 w-20 px-4 py-4 overflow-y-auto text-sm bg-white rounded-lg shadow-lg bottom-10 report-menu max-h-110",children:C.map((e,t)=>(0,a.jsx)("div",{className:"text-sm mb-4 cursor-pointer ".concat((null==n?void 0:n.id)===e.id?"text-[#20B580]":""),onClick:()=>E(e),children:e.data.label},t))}),(0,a.jsx)("span",{children:g("catelog")})]})]})}},91091:(e,t,n)=>{"use strict";n.d(t,{A7:()=>h,FN:()=>m,Oj:()=>f,Q8:()=>g,Wk:()=>x});var a=n(95155),s=n(12115),r=n(85005),i=n(35169),l=n(92138),o=n(59434),c=n(30285);let d=s.createContext(null);function u(){let e=s.useContext(d);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let m=s.forwardRef((e,t)=>{let{orientation:n="horizontal",opts:i,setApi:l,plugins:c,className:u,children:m,...x}=e,[h,g]=(0,r.A)({...i,axis:"horizontal"===n?"x":"y"},c),[f,p]=s.useState(!1),[b,v]=s.useState(!1),j=s.useCallback(e=>{e&&(p(e.canScrollPrev()),v(e.canScrollNext()))},[]),y=s.useCallback(()=>{null==g||g.scrollPrev()},[g]),N=s.useCallback(()=>{null==g||g.scrollNext()},[g]),w=s.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),y()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[y,N]);return s.useEffect(()=>{g&&l&&l(g)},[g,l]),s.useEffect(()=>{if(g)return j(g),g.on("reInit",j),g.on("select",j),()=>{null==g||g.off("select",j)}},[g,j]),(0,a.jsx)(d.Provider,{value:{carouselRef:h,api:g,opts:i,orientation:n||((null==i?void 0:i.axis)==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:N,canScrollPrev:f,canScrollNext:b},children:(0,a.jsx)("div",{ref:t,onKeyDownCapture:w,className:(0,o.cn)("relative",u),role:"region","aria-roledescription":"carousel",...x,children:m})})});m.displayName="Carousel";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e,{carouselRef:r,orientation:i}=u();return(0,a.jsx)("div",{ref:r,className:"overflow-hidden",children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex","horizontal"===i?"-ml-4":"-mt-4 flex-col",n),...s})})});x.displayName="CarouselContent";let h=s.forwardRef((e,t)=>{let{className:n,...s}=e,{orientation:r}=u();return(0,a.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,o.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",n),...s})});h.displayName="CarouselItem";let g=s.forwardRef((e,t)=>{let{className:n,variant:s="outline",size:r="icon",...l}=e,{orientation:d,scrollPrev:m,canScrollPrev:x}=u();return(0,a.jsxs)(c.$,{ref:t,variant:s,size:r,className:(0,o.cn)("absolute  h-8 w-8 rounded-full","horizontal"===d?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!x,onClick:m,...l,children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});g.displayName="CarouselPrevious";let f=s.forwardRef((e,t)=>{let{className:n,variant:s="outline",size:r="icon",...i}=e,{orientation:d,scrollNext:m,canScrollNext:x}=u();return(0,a.jsxs)(c.$,{ref:t,variant:s,size:r,className:(0,o.cn)("absolute h-8 w-8 rounded-full","horizontal"===d?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!x,onClick:m,...i,children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Next slide"})]})});f.displayName="CarouselNext"}},e=>{var t=t=>e(e.s=t);e.O(0,[4935,8057,586,6453,5849,5493,534,3063,1463,2942,5005,7285,2197,6699,3151,8441,1684,7358],()=>t(48963)),_N_E=e.O()}]);