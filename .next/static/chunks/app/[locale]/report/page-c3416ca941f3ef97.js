(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3004],{6608:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var n=a(73243);a(45323);var s=a(67703),r=a(32249),i=a(75919),l=a(73379),o=a(93286),c=a(40217),d=a(62618),m=a(93881);function u(e){var t;let{from:a}=e,u=(0,c.c3)("Navigation"),x=(0,c.c3)("home.hero"),h=(0,i.A)(),{data:g}=(0,l.wV)(),p=null==g?void 0:null===(t=g.user)||void 0===t?void 0:t.userId;return(0,n.jsx)("nav",{className:"bg-[#066952] h-16 hidden-on-print",children:(0,n.jsx)("div",{className:"px-4 h-full",children:(0,n.jsxs)("div",{className:"md:max-w-[80%] mx-auto flex items-center justify-between h-full",children:[(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[(!h||"report"!==a)&&(0,n.jsx)(s.N_,{href:"/",className:"text-2xl font-bold text-white",children:"HarmoniQ"}),"report"==a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Separator,{orientation:"vertical",className:"h-6 hidden md:block"}),(0,n.jsx)("span",{className:"md:text-xl font-bold text-white",children:u("yourReport")})]})]}),(0,n.jsxs)("div",{className:"flex items-center md:space-x-6",children:[!h&&(0,n.jsx)(r.A,{}),"report"==a&&(0,n.jsx)(d.A,{}),p&&"login"!==a?(0,n.jsx)(m.A,{}):(0,n.jsx)(s.N_,{className:"block text-base focus:text-primary text-[white]",href:"/auth/login",children:x("login")})]})]})})})}},19924:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var n=a(73243);a(45323);var s=a(88999),r=a(4318);function i(e){let{className:t,children:a,...i}=e;return(0,n.jsxs)(s.bL,{"data-slot":"scroll-area",className:(0,r.cn)("relative",t),...i,children:[(0,n.jsx)(s.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,n.jsx)(l,{}),(0,n.jsx)(s.OK,{})]})}function l(e){let{className:t,orientation:a="vertical",...i}=e;return(0,n.jsx)(s.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,r.cn)("flex touch-none p-px transition-colors select-none visible","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...i,children:(0,n.jsx)(s.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},43263:(e,t,a)=>{"use strict";a.d(t,{A7:()=>h,FN:()=>u,Oj:()=>p,Q8:()=>g,Wk:()=>x});var n=a(73243),s=a(45323),r=a(9920),i=a(772),l=a(22893),o=a(4318),c=a(43601);let d=s.createContext(null);function m(){let e=s.useContext(d);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let u=s.forwardRef((e,t)=>{let{orientation:a="horizontal",opts:i,setApi:l,plugins:c,className:m,children:u,...x}=e,[h,g]=(0,r.A)({...i,axis:"horizontal"===a?"x":"y"},c),[p,f]=s.useState(!1),[b,j]=s.useState(!1),v=s.useCallback(e=>{e&&(f(e.canScrollPrev()),j(e.canScrollNext()))},[]),y=s.useCallback(()=>{null==g||g.scrollPrev()},[g]),N=s.useCallback(()=>{null==g||g.scrollNext()},[g]),w=s.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),y()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[y,N]);return s.useEffect(()=>{g&&l&&l(g)},[g,l]),s.useEffect(()=>{if(g)return v(g),g.on("reInit",v),g.on("select",v),()=>{null==g||g.off("select",v)}},[g,v]),(0,n.jsx)(d.Provider,{value:{carouselRef:h,api:g,opts:i,orientation:a||((null==i?void 0:i.axis)==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:N,canScrollPrev:p,canScrollNext:b},children:(0,n.jsx)("div",{ref:t,onKeyDownCapture:w,className:(0,o.cn)("relative",m),role:"region","aria-roledescription":"carousel",...x,children:u})})});u.displayName="Carousel";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e,{carouselRef:r,orientation:i}=m();return(0,n.jsx)("div",{ref:r,className:"overflow-hidden",children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex","horizontal"===i?"-ml-4":"-mt-4 flex-col",a),...s})})});x.displayName="CarouselContent";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e,{orientation:r}=m();return(0,n.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,o.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",a),...s})});h.displayName="CarouselItem";let g=s.forwardRef((e,t)=>{let{className:a,variant:s="outline",size:r="icon",...l}=e,{orientation:d,scrollPrev:u,canScrollPrev:x}=m();return(0,n.jsxs)(c.$,{ref:t,variant:s,size:r,className:(0,o.cn)("absolute  h-8 w-8 rounded-full","horizontal"===d?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!x,onClick:u,...l,children:[(0,n.jsx)(i.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});g.displayName="CarouselPrevious";let p=s.forwardRef((e,t)=>{let{className:a,variant:s="outline",size:r="icon",...i}=e,{orientation:d,scrollNext:u,canScrollNext:x}=m();return(0,n.jsxs)(c.$,{ref:t,variant:s,size:r,className:(0,o.cn)("absolute h-8 w-8 rounded-full","horizontal"===d?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!x,onClick:u,...i,children:[(0,n.jsx)(l.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Next slide"})]})});p.displayName="CarouselNext"},43601:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>l});var n=a(73243);a(45323);var s=a(7843),r=a(83944),i=a(4318);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:r,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:r,className:t})),...c})}},55009:(e,t,a)=>{Promise.resolve().then(a.bind(a,91936))},62618:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(73243),s=a(45323);a(67703);var r=a(40217),i=a(4318),l=a(92387),o=a(71400),c=a(73379);function d(e){var t;let{className:a}=e,d=(0,r.c3)("Navigation"),[m,u]=(0,s.useState)(!0),{data:x}=(0,c.wV)();(0,s.useEffect)(()=>{var e;let t=null==x?void 0:null===(e=x.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{status:e,message:a,data:n}=await (0,l.Jt)("/api/users/".concat(t));0==e&&u(n.isLock)})()},[null==x?void 0:null===(t=x.user)||void 0===t?void 0:t.userId]);let h=async()=>{let{status:e,data:t,message:a}=await (0,l.bE)("/api/checkoutSessions");if(0==e){let{url:e}=t;console.log(t),window.open(e,"_self")}else o.oR.error(a)};return m&&(0,n.jsx)("button",{onClick:h,className:(0,i.cn)("cursor-pointer font-bold text-[#066952] rounded-[20px] bg-[#A7F7D3] md:px-4 px-1.5 py-1 mr-1 md:mr-6",a),children:d("unlock")})}},86693:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>c,av:()=>d,j7:()=>o,tU:()=>l});var n=a(73243);a(45323);var s=a(69282),r=a(82247),i=a(4318);function l(e){let{className:t,...a}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(s.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...a}),a.setShowTab&&(0,n.jsx)(r.A,{className:"w-4 h-4 absolute top-2.5 right-5",onClick:()=>a.setShowTab(!1)})]})}function o(e){let{className:t,...a}=e;return(0,n.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)(s.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...a})}},91936:(e,t,a)=>{"use strict";a.d(t,{default:()=>ey});var n=a(73243),s=a(6608),r=a(45323),i=a(14041),l=a(75919),o=a(92387),c=a(92378),d=a.n(c),m=a(74941),u=a(52593),x=a(14927),h=a(28889),g=a.n(h),p=a(85620),f=a.n(p),b=a(731);g().extend(m.t).extend(u.sM).extend(x.z0);let j=g()(f()().format("YYYY-MM-DD")).char8.year.toString(),{LYGanzhiMap:v,LYzhiMap:y,LYStarMap:N,LYSihuaMap:w,spouseStarMap:C,spouseSihuaMap:S}=function(){let e=f()().format("YYYY"),t={},a={},n={},s={},r={},i={};for(let l=1;l<=12;l++){let o=e+"-"+(l<10?"0"+l:""+l)+"-15",c=b.astro.bySolar(o,0,"男",!0,"zh-CN").horoscope(o);a[l]=c.monthly.earthlyBranch,t[l]=c.monthly.heavenlyStem+c.monthly.earthlyBranch,n[l]=c.palace("命宫","monthly").majorStars.map(e=>e.name).toString(),r[l]=c.palace("夫妻","monthly").majorStars.map(e=>e.name).toString(),s[l]=c.palace("命宫","monthly").mutagedPlaces().map(e=>e.name).toString(),i[l]=c.palace("夫妻","monthly").mutagedPlaces().map(e=>e.name).toString()}return{LYGanzhiMap:t,LYzhiMap:a,LYStarMap:n,LYSihuaMap:s,spouseStarMap:r,spouseSihuaMap:i}}(),D=function(){let e=f()().format("YYYY-MM-DD");return g()(e).char8.month.toString()}(),F=function(){let e=f()().format("YYYY-MM-DD");return b.astro.bySolar(e,0,"男",!0,"zh-CN").horoscope(e,0).palace("夫妻","yearly").majorStars.map(e=>e.name).toString()}(),k={};function E(e,t){var a;let n=f()(e).format("YYYY-MM-DD HH:mm:ss");if(console.log("birthStr",n),k[n+"-"+t])return k[n+"-"+t];let s=Math.floor(f()(e).hour()/2),r=f()(e).format("YYYY-MM-DD"),i=b.astro.bySolar(r,s,"female"==t?"女":"男",!0,"zh-CN"),l=i.palace("命宫"),o=i.palace("身宫"),c=i.palace("迁移").majorStars.map(e=>e.name).toString(),d=i.horoscope(r,s),m=g()(n),u=function(e,t,a,n,s,r,i,l){let o={金:0,木:0,水:0,火:0,土:0},c=[e,t,a,n,s,r,i,l];c.forEach(e=>{["金","木","水","火","土"].includes(e)&&o[e]++});let d=c.length;return"金:".concat((o.金/d*100).toFixed(2),"%，木:").concat((o.木/d*100).toFixed(2),"%，水:").concat((o.水/d*100).toFixed(2),"%，火:").concat((o.火/d*100).toFixed(2),"%，土:").concat((o.土/d*100).toFixed(2),"%")}(m.char8.year.stem.e5.name,m.char8.year.branch.e5.name,m.char8.month.stem.e5.name,m.char8.month.branch.e5.name,m.char8.day.stem.e5.name,m.char8.day.branch.e5.name,m.char8.hour.stem.e5.name,m.char8.hour.branch.e5.name),x=m.char8.day.branch.hiddenStems.map(e=>e.name).toString(),h=m.char8ex(+("female"!==t)),p=h.year,v=h.month,y=h.day,N=h.hour,w={nayin:m.char8.year.takeSound,wuxingJu:(a=m.char8.year.takeSoundE5.toString(),"".concat(a).concat(A[a],"局")),year:m.char8.year.toString(),month:m.char8.month.toString(),day:m.char8.day.toString(),hour:m.char8.hour.toString(),wuxingScale:u,rizhiCanggan:x,mingPalace:"{主星：".concat(l.majorStars.map(e=>e.name).toString(),",主星亮度：").concat(l.majorStars.map(e=>e.brightness||"").toString(),", 辅星： ").concat(l.minorStars.map(e=>e.name).toString(),", 四化：").concat(l.mutagedPlaces().map(e=>e.name).toString(),"}"),bodyPalace:"{主星：".concat(o.majorStars.map(e=>e.name).toString(),",主星亮度：").concat(o.majorStars.map(e=>e.brightness||"").toString(),", 辅星： ").concat(o.minorStars.map(e=>e.name).toString(),", 四化：").concat(o.mutagedPlaces().map(e=>e.name).toString(),"}"),qianyiPalace:c,dayunGanzhi:d.decadal.heavenlyStem+d.decadal.earthlyBranch,liunianGanzhi:j,yearStemTenGod:p.stemTenGod.name,yearBranchTenGod:p.branchTenGod.map(e=>e.name).toString(),monthStemTenGod:v.stemTenGod.name,monthBranchTenGod:v.branchTenGod.map(e=>e.name).toString(),dayStemTenGod:y.stemTenGod.name,dayBranchTenGod:y.branchTenGod.map(e=>e.name).toString(),hourStemTenGod:N.stemTenGod.name,hourBranchTenGod:N.branchTenGod.map(e=>e.name).toString(),yearGods:p.gods.map(e=>e.name).toString(),monthGods:v.gods.map(e=>e.name).toString(),dayGods:y.gods.map(e=>e.name).toString()};return k[n+"-"+t]=w,console.log("result",w),w}let A={水:"二",木:"三",金:"四",土:"五",火:"六"};var z=a(58204);a(41677);var T=a(40217),O=a(62618),G=a(73379),Y=a(49126),M=a(52751),J=a(4449);function R(e){var t;let{activeRoom:a,setActiveRoom:s,onChangeDesignData:i,onChangeRoomList:l}=e,c=(0,T.c3)("report"),[d,m]=(0,r.useState)({}),[u,x]=(0,r.useState)({width:0,height:0}),[h,g]=(0,r.useState)(100),[p,f]=(0,r.useState)(0),[b,j]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),{data:N}=(0,G.wV)();if((0,r.useEffect)(()=>{var e;let t=null==N?void 0:null===(e=N.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{data:e}=await (0,o.Jt)("/api/design/".concat(t));g(e.scale),f(e.compassRotation);let a=e.localItems;if(!a||0===a.length)return;let n=a.filter(e=>"room"===e._type);j(n),s(n[0]);let r=a[0].position.x,c=a[0].position.y,d=a[0].position.x+a[0].size.width,u=a[0].position.y+a[0].size.height;a.forEach(e=>{e.position.x<r&&(r=e.position.x),e.position.y<c&&(c=e.position.y),e.position.x+e.size.width>d&&(d=e.position.x+e.size.width),e.position.y+e.size.height>u&&(u=e.position.y+e.size.height)});let h=a.map(e=>({...e,position:{x:e.position.x-r+100,y:e.position.y-c+100}})),p={...e,localItems:h};m(p),i&&i(p),l&&l(n),x({width:d-r+200,height:u-c+200})})()},[null==N?void 0:null===(t=N.user)||void 0===t?void 0:t.userId]),!d.localItems)return"";function w(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("in"===e&&h<120)t=h+a;else if("out"===e&&h>50)t=h-a;else{if("reset"!==e)return;t=100}g(t)}let C=e=>{s(e)},S=e=>{s(e)};return(0,n.jsxs)("div",{className:"relative canvasImage",children:[(0,n.jsx)("div",{className:"relative border-1 border-[#E6E6E6] rounded-t-3xl py-[2px] mt-8 overflow-scroll",children:(0,n.jsx)("div",{onClick:()=>y(!1),className:"relative flex justify-center w-full h-135",style:{minWidth:u.width},children:(0,n.jsx)("div",{id:"roomCanvas",className:"absolute cursor-not-allowed",style:{width:"".concat(u.width,"px"),height:"".concat(u.height,"px"),transform:"scale(".concat(h/100,")"),transformOrigin:"top left"},children:(0,n.jsx)("div",{className:"relative",children:d.localItems.map(e=>e._type===Y.w$.ROOM?(0,n.jsx)("div",{"data-room-element":"true",className:"absolute ".concat((null==a?void 0:a.id)===e.id?"ring-2 ring-red-500":""," cursor-move z-100"),style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},onClick:t=>{t.stopPropagation(),S(e)},children:(0,n.jsx)("div",{className:"w-full h-full",style:{border:e._type===Y.w$.ROOM?"8px solid":"none",borderColor:e._type===Y.w$.ROOM?Y.$q[e.data._type]:"transparent",borderRadius:"8px",backgroundColor:Y.$q[e.data._type]+"80"},children:(0,n.jsx)("div",{className:"absolute top-2 left-2 text-[14px] text-[#888888]",style:{zIndex:1},children:e.data.label})})},e.id):e._type===Y.w$.FURNITURE?(0,n.jsx)("div",{"data-room-element":"true",className:"absolute cursor-move z-200",style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},children:(0,n.jsx)(z.default,{draggable:"false",className:(null==a?void 0:a.id)===e.id?"ring-2 ring-red-500":"",style:{transform:e.rotation?"rotate(".concat(e.rotation,"deg)"):"none",transformOrigin:"center"},src:e.activeIcon,alt:"Furniture",width:e.size.width,height:e.size.height})},e.id):void 0)})})})}),(0,n.jsxs)("div",{style:{transform:"rotate(".concat(p,"deg)"),transition:"transform 0.3s ease-out"},className:"absolute top-5 right-5 flex flex-col items-center",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"N"}),(0,n.jsx)(z.default,{src:"/images/compass.png",alt:"方向",width:40,height:40})]}),(0,n.jsxs)("div",{className:"absolute flex  top-120 right-5 items-center gap-2 bg-white rounded-full shadow-lg px-3 py-2",children:[(0,n.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 text-gray-600",onClick:e=>w("out"),disabled:h<=50,children:(0,n.jsx)(M.A,{className:"w-4 h-4"})}),(0,n.jsxs)("span",{className:"text-sm font-medium text-gray-600 min-w-[48px] text-center",children:[h,"%"]}),(0,n.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 text-gray-600",onClick:e=>w("in"),disabled:h>=120,children:(0,n.jsx)(J.A,{className:"w-4 h-4"})})]}),(0,n.jsxs)("div",{onClick:()=>y(!0),className:"z-20 absolute top-120 left-5 w-10 h-10 rounded-full shadow-lg text-xs flex justify-center items-center cursor-pointer",children:[v&&(0,n.jsx)("div",{className:"absolute bottom-10 left-0 report-menu w-20 bg-white shadow-lg rounded-lg py-4 px-4 text-sm max-h-110 overflow-y-auto",children:b.map((e,t)=>(0,n.jsx)("div",{className:"text-sm mb-4 cursor-pointer ".concat((null==a?void 0:a.id)===e.id?"text-[#20B580]":""),onClick:()=>C(e),children:e.data.label},t))}),(0,n.jsx)("span",{children:c("catelog")})]})]})}function _(e){let{jiajuDataString:t,isPrinting:a}=e,s=(0,T.c3)("report"),[i,l]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),d=JSON.parse(t);return(0,n.jsxs)("section",{children:[(0,n.jsx)(R,{activeRoom:i,setActiveRoom:l,onChangeRoomList:e=>{c(e)}}),i&&!a&&(0,n.jsxs)("div",{className:"w-full md:rounded-b-3xl bg-[#fafafa] md:p-8 p-5 border-1 border-[#E6E6E6]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.default,{width:(null==i?void 0:i.data._type)==="dining_room"?28:32,height:(null==i?void 0:i.data._type)==="dining_room"?28:32,style:{color:"red"},alt:"",src:"/images/report/".concat(null==i?void 0:i.data._type,".svg")}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:null==i?void 0:i.data.label})]}),(0,n.jsx)("div",{className:"mt-3",children:d&&d[null==i?void 0:i.data._type]&&Object.entries(d[null==i?void 0:i.data._type][null==i?void 0:i.direction]).map(e=>{let[t,a]=e;return(0,n.jsxs)("p",{className:"leading-8 flex",children:[" ",(0,n.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-22.5",children:[t,"："]}),(0,n.jsxs)("span",{className:"whitespace-pre-wrap",children:[a," "]})]})})})]}),a&&(0,n.jsx)("div",{className:"w-full md:rounded-b-3xl bg-[#fafafa] md:p-8 p-5 border-1 border-[#E6E6E6]",children:(0,n.jsx)("div",{className:"mt-3",children:o.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-[#073E31]",children:e.data.label}),d&&d[e.data._type]&&Object.entries(d[e.data._type][e.direction]).map(e=>{let[t,a]=e;return(0,n.jsxs)("p",{className:"leading-8 flex",children:[" ",(0,n.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-22.5",children:[t,"："]}),(0,n.jsxs)("span",{className:"whitespace-pre-wrap",children:[a," "]})]})})]}))})}),(0,n.jsxs)("div",{className:"md:flex mt-10 items-center px-6 md:p-0",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-[#FF531A]",children:"*"}),s("p3-6"),(0,n.jsx)("span",{className:"font-bold",children:s("p3-7")})]}),(0,n.jsx)(O.A,{className:"bg-[#096E56] text-white md:ml-2 w-full md:w-auto mt-5 md:mt-0 block md:inline text-center"})]})]})}var P=a(71400),I=a(8403);let L="你是一位精通子平八字与紫微斗数的命理学家，擅长用天干地支以及星曜特性推算";f()().format("YYYY");let B={mingpan:"你是一位精通子平八字与紫微斗数的命理学家，擅长用现代心理学解读传统命盘。[任务] 根据用户提供的性别、出生年月日时、八字、五行分布等属性，分析命盘结构，需包含：  1. 用不到200字概括命局核心特质（需区分男命 / 女命分析差异，突出{八字.特殊格局}的影响）  2. 列出3个关键命盘特征，并说明其现实映射（例：月柱正印坐绝 → 母亲健康需注意）  3. 结合五行分布{八字.五行分布}，指出需补强的元素与风水建议（如缺火者宜用红色家居）",kaiyun:L+"个人开运元素。[生成逻辑]- **先天数**：日干{日干}对应河图数（例：丁火→2、7）；- **后天数**：用神{用神}对应洛书数（例：木→3、8）；- **动态调整**：流年太岁{当前流年干支}卦数（例：甲辰→5）。[输出模板] 「您的战略数字组合为【{先天数}\xd7{后天数}】，具体应用：1.✅ 日常决策：重要会议选含{数字}的日期（例：3日/13时）；2.✅ 空间布局：办公室楼层尾数取{数字}（例：7楼/17层）；3.✅ 密码设计：银行密码嵌入{数字}序列（例：37_28_19）」。[色谱算法]- 主色：用神对应色系（例：木→青绿色系）；- 辅色：通关元素色（例：木火交战取红色系）；- 禁忌色：忌神{忌神}色系（例：水→黑色）；[Pantone映射表]if 用神 == 火,则推荐色=[18-1664 TPX火焰红, 13-0647 TCX鲜黄]；if 用神 == 金，则推荐色=[19-4055 TCX经典蓝, 17 - 5104 TCX极光银]。[输出示例]：1.「职场穿搭公式：{主色}衬衫 + {辅色}领带（例：火焰红+鲜黄）；2.家居能量点：在{方位}墙刷{色号}，搭配{材质}装饰品（例：西南方涂刷极光银金属漆）」。",liuqin:L+"六亲缘分。[分析维度] -夫妻宫：时柱{时柱天干地支}十神（{十神属性}）对婚姻稳定性的影响；- 年柱{年柱天干地支}与父母宫位关系，推算原生家庭带来的情感模式  -{日支藏干}透出的潜意识需求。[输出模板]  1. 情感优势：用⭐️符号标记3个利于亲密关系的特质 ；2. 潜在挑战：用⚠️符号警示2个需注意的模式（如比劫争合导致的三角关系风险）；3. 风水调节：推荐2种卧室摆设法（例：床头朝向{吉方}化解孤辰寡宿）",shiye:L+"事业财富。[关键指标]  -财星定位：根据{日干}找出正/偏财对应的天干（例：甲木日主以己土为正财）-官杀配置：分析{月柱}官杀强度与事业成就关联性  - 大运走势：结合当前大运{大运干支}推算未来5年财运转折点。 [风水建议] :1.用✔️符号标记最佳行业：基于{五行比例}或五行用神{用神元素}推荐3个领域（如喜水者适合物流、传媒） ; 2. 用✔️符号标记办公风水：需含方位角{财位度数}与开运物摆放坐标 ",minggong:L+"生涯发展策略。[分析矩阵]需交叉验证以下维度：1.主星组合能量：{主星}+{辅星}形成的格局（例：紫微+左右→领导型人格）;2.四化动能走向：{四化}在十二宫的牵引效应（例：财帛宫化禄→财富创造力）;3.五行局制约：{五行局}对{主星}特性的放大/抑制（例：火六局强化七杀执行力）。 [输出格式] #核心星盘解码：1.「{主星}」在{亮度}状态 → {现代诠释}（例：七杀入庙→特种兵式突破能力）；2.受{辅星}影响 → 产生{特性变异}（例：遇文昌→杀戮文青特质）#思维模式剖面：1.决策优势：{主星}+{四化}形成{思维模式}（例：天机化科→系统化学习力）；2.认知盲区：{五行局}限制导致{误判类型}（例：木三局遇煞→过度理想化）#家居能量调频：1.主色调：{主星五行}\xd7{八字用神}→推荐{Pantone色号}（例：紫微土+用神火→16-1359陶土红）2. 关键摆件：在{本命方位}放置{材质}{物品}（例：西北方放铜质地球仪强化迁移宫）3. 禁忌规避：禁止在{宫位对应方位}使用{冲突元素}（例：子女宫化忌→正东方避放尖锐物）。# 二十年大运导航：1. {年龄段}：{主星}逢{大运主星} → 聚焦{领域}（例：35-44岁破军运→跨界创新期）2.危机转折点：{年份}触发{四化} → 需提前布局{风水调整}（例：2026年廉贞化忌→办公室正南放水晶阵）。#能量爆发公式：「{主星优势} \xd7 {方位催化} + {行为修正}」组合技，例：武曲贪狼命宫 → 每日辰时在西北方金属区制定财务计划 + 穿黑白条纹衫",jiankang:L+"健康预警及养生建议。[关键指标]-医学命理映射 ：1.病灶器官：根据五行失衡{八字.五行分布}对应脏腑（例：木过旺→肝胆压力）；2.流年触发：标注{当前流年干支}可能引发的健康风险（如岁运并临加强火元素→心血管负担）。[输出要求] ：1.用❗️符号突出3项年度重点预防项目； 2.提供2个风水化解方案（例：在{卧室东方}放置白水晶平衡木气）；  3.附上中医养生建议（如土弱者可多吃黄色食物）  ",ganqing:L+"感情运势。[分析维度]：1.日支{日支}藏干 → 潜意识情感需求（例：午藏丁火己土 → 渴望激情与稳定并存）；2.十神中{十神配置.正官/七杀}力量 → 伴侣特质倾向（例：正官透干 → 易吸引稳重对象）；3.神煞{神煞} → 情感机遇/挑战（例：红鸾在流年夫妻宫 → 本年婚恋信号强烈）。[输出模板]\uD83D\uDD25 情感能量诊断：1.优势：{主星}坐命 → {优势描述}（例：紫微破军→敢于突破传统关系模式）；2.盲点：{神煞}引发{问题}（例：孤辰+日支冲 → 需避免过度独立）。\uD83D\uDCA1 风水强化方案：1.卧室{方位}放置{色系}物品（根据{日干}五行喜忌）2.每周{星期几}佩戴{材质}饰品增强桃花气（例：喜金者选白银）",renji:L+"人际关系。[关键指标] -月柱{月柱天干地支} → 社交模式根源（例：月柱偏印 → 习惯观察后再深入交往）；- 五行{八字.五行分布} → 人际能量场特性（例：木旺者自带领导气场）；-迁移宫主星{迁移宫主星} → 对外互动风格。[输出模板]\uD83E\uDD1D 关系优化指南：✅ 贵人类型：{十神}强旺者（例：比肩旺 → 适合与同行合作）；⚠️ 避坑提示：{冲克配置}易引发冲突（例：日柱癸水冲丁火 → 慎交午年出生者）；\uD83C\uDF10 社交风水：1.办公桌{方位}摆放{物品}（例：青龙位放绿植增强人脉）；2.微信头像建议用{色系}（根据{当前流年干支}）",juece:L+"决策时机。[关键指标] 1. 大运{大运干支}与{当前流年干支}关系 → 宏观周期判断。 2. 命宫{主星}四化{四化} → 决策风格（例：化禄在财帛宫 → 风险偏好较高）；3. 流月{当前流月干支}与日柱{日柱}合冲 → 微观时机捕捉。[输出模板] ⏳ 年度关键窗口：1.- {月份}：{主星}逢{流月主星} → 适合启动重大事项 ；2.避开{月份}：{冲克关系}易判断失误。\uD83C\uDFAF 决策增强技巧：1.每日{时辰}进行冥想（根据{时柱}能量高峰）；2.签约时坐{方位}（例：财星在巽宫 → 东南方位）",gexing:L+"用户个性。[分析维度]：1.主星{命宫主星} + 辅星{命宫辅星} → 核心特质（例：紫微+左辅 → 领袖型人格）；2.身宫{身宫主星} → 潜在第二性格；3.五行局{五行局} → 能量表达方式（例：水二局 → 以柔克刚）。[输出模板] \uD83D\uDCBC 现代心理学映射：1.\uD83D\uDD0D MBTI关联：{命宫主星}对应{人格类型}（例：七杀→ENTJ）；2.\uD83D\uDD0D 霍兰德职业代码：{命宫主星+命宫辅星}倾向{代码}（例：天机+文昌→IAS型）。\uD83D\uDCBC 发展建议：1.利用{主星优势}强化{领域}（例：太阳星→适合公众表达）；2.通过{风水调整}弥补{主星缺陷}（例：太阴落陷→增加书房照明）",yunshi:L+"人生运势。[关键指标：十年大运交叉分析] 1. {当前大运}重点宫位 → 主战场（例：大运财帛宫强 → 累积财富期）；2. {命宫主星}与{大运主星}相位 → 机遇类型（例：会照天梁→得长辈提携）；3.流年{当前流年干支}触发{本命盘配置} → 年度主题。[输出模板]  \uD83D\uDE80 人生跃迁攻略：1.35-40岁：{大运主星}入{宫位} → 聚焦{领域}（例：破军入官禄宫→创业黄金期）；2. 危机预警：{年份}逢{双化忌} → 提前布局{风水化解方案}。\uD83D\uDCCC 终身风水锚点：1.祖坟/长居地{方位}保持{元素平衡}（根据八字{五行分布缺失}）2.本命文昌位{度数}布置书桌"};function q(e){return B[e]+" [要求] 1.语言简洁流畅，避免术语堆砌，使用完整的句子且用口语化方式表达；用“能量场”“行为模式”等现代词汇替代传统表述；2.不要超过200字 3.不要使用使用'#'或'*'等杂乱符号 4.条目之间使用\n符号分隔"}function X(e,t){return"\n   性别：".concat("female"==e.gender?"女":"男",",\n   出生年月日时：").concat(f()(e.birthDateTime).format("YYYY-MM-DD HH:mm:ss"),",\n   八字：{年柱：").concat(t.year,",月柱：").concat(t.month,",日柱：").concat(t.day,",时柱：").concat(t.hour,",五行分布：").concat(t.wuxingScale,"}，\n   纳音：").concat(t.nayin,"，五行局：").concat(t.wuxingJu,"， \n   年天干十神：").concat(t.yearStemTenGod,", 年地支十神：").concat(t.yearBranchTenGod,", 月天干十神：").concat(t.monthStemTenGod,", 月地支十神：").concat(t.monthBranchTenGod,", 日天干十神：").concat(t.dayStemTenGod,", 日地支十神：").concat(t.dayBranchTenGod,", 时天干十神：").concat(t.hourStemTenGod,", 时地支十神：").concat(t.hourBranchTenGod,"，\n   命宫：").concat(t.mingPalace,"，身宫：").concat(t.bodyPalace,"，\n   迁移宫主星： ").concat(t.qianyiPalace,",\n   流年夫妻宫主星:").concat(F,",\n   当前流年干支：").concat(t.liunianGanzhi,",\n   当前流月干支:").concat(D,",\n   日支藏干： ").concat(t.rizhiCanggan,",\n   大运干支： ").concat(t.dayunGanzhi,", \n   年柱神煞:").concat(t.yearGods,", 月柱神煞:").concat(t.monthGods,", 日柱神煞:").concat(t.dayGods,"\n   ")}function H(e,t,a){return"\n     性别：".concat("female"==t.gender?"女":"男",",\n   出生年月日时：").concat(f()(t.birthDateTime).format("YYYY-MM-DD HH:mm:ss"),",\n   八字：{年柱：").concat(a.year,",月柱：").concat(a.month,",日柱：").concat(a.day,",时柱：").concat(a.hour,",五行分布：").concat(a.wuxingScale,"}，\n   纳音：").concat(a.nayin,"，五行局：").concat(a.wuxingJu,"， \n   年柱神煞:").concat(a.yearGods,", 月柱神煞:").concat(a.monthGods,", 日柱神煞:").concat(a.dayGods,"，\n    环境参数：{流月命宫主星：").concat(N[e],"，流月命宫四化：").concat(w[e],"，当前流月干支：").concat(v[e],",流月夫妻宫主星：").concat(C[e],",流月夫妻宫四化：").concat(S[e]," }，\n    ")}function W(){return"[全局设定]：{角色：你是一名精通八字与奇门遁甲的流月运势分析师。任务：根据用户提供的用户信息生成{当前流月干支}月运程报告。要求：1. 每模块用\uD83D\uDD25/⚠️/\uD83D\uDCA1符号区分正/负/中性向提示，且用\n换行符分隔；2. 风水建议需含具体方位与物品（例：东南方放水晶） ；3.禁用模糊表述，所有结论需关联命理参数}；4. 如果返回的内容中包含1.2.3.等分项，各项之间用\n换行符分隔；5.每一项的内容不超过150字。[返回结构]：要求返回一个json对象格式，这个对象里有5个键值对，下面我依次描述这5个键值对内容生成的规则。\n       第一个键是“健康防护”,它所对应的内容[分析逻辑]是：1.流月{当前流月干支}与日柱{日干}产生{刑/冲/合} → 对应脏腑：{器官}；2.神煞{神煞}触发 → 重点预防：{疾病类型}。\uD83D\uDD25 增强建议：1. 卧室{方位}放置{颜色}靠垫（补{五行}气）；2. 每日{时辰}饮用{草药茶}（例：火弱喝红枣枸杞）。以上仅为示例，请你发散更多内容。\n     第二个键是“感情人际”,它所对应的内容[分析逻辑]是：1.流月夫妻宫：{流月夫妻宫主星}+{流月夫妻宫四化} → 关系趋势（例：贪狼化禄→桃花机遇）；2.日支{日支}与月支{月支}合冲 → 相处模式变化。\uD83D\uDCA1 行动策略：1. 约会首选{方位}的{餐厅类型}（例：喜金者去西式餐厅）；2. 佩戴{材质}饰品增强吸引力（例：喜水戴黑曜石）。以上仅为示例，请你发散更多内容。\n    第三个键是'事业动能' ,它所对应的内容[分析逻辑]是 : 1.流月官禄宫：{流月命宫主星}遇{流月命宫四化} → 突破点：{领域}；2.八字{用神}与月令{流月干支}关系 → 行动节奏建议（激进/保守）；⚠️ 风险预警：避开{日期}（流日{干支}冲{年柱}）签约；\n✅ 办公风水：在办公桌{方位}贴{颜色}便利贴提升效率。以上仅为示例，请你发散更多内容 。\n    第四个键是“财富走势”,它所对应的内容是 :[财星定位]：1.偏财位：九宫{方位}飞{星名} → 投资建议（例：八白左辅星→房地产利）;2.日主{日干}克{当前流月月干} → 求财难易度评估。\uD83E\uDD11 催财秘法：1. 钱包内放{数量}枚{材质}硬币；2.每周{星期几}整理{方位}杂物保持气流通畅。以上仅为示例，请你发散更多内容。\n    第五个键是“本月四大开运法。它所对应的内容要求根据{五行分布}与{当前流月干支}动态生成）。[内容模板]：1. **色彩激活**：多穿{颜色}衣物（例：喜火穿红色）；\n2. **方位布局**：在{方位}放置{物品}（例：东北方放陶瓷存钱罐）；\n3. **时间择吉**：重要事项优先选{上午/下午}{时辰}  ；\n4. **行为修正**：减少{行为}（例：水弱者忌熬夜）。\n    "}function U(){return JSON.stringify({健康防护:"⚠️流月子水冲日支午火 → 心血管负担增加\n\uD83D\uDD25建议：\n1. 客厅正南放红色地毯补火\n2.每日亥时按摩劳宫穴 ",感情人际:"\uD83D\uDCA1夫妻宫贪狼化禄 → 单身者23日易遇心动对象\n✅ 行动：约会在西北方咖啡厅，佩戴银饰",事业动能:"✅ 官禄宫紫微+左辅 → 团队领导力爆发期\n⚠️ 避开5日（丙午冲年柱）签合约",财富走势:"\uD83E\uDD11 偏财位在东南（六白武曲）→ 短期理财收益佳",本月四大开运法:"1. 穿黑色外套  \n2. 东南方放铜貔貅  \n3. 重要会议选巳时 \n4. 每早整理西南角文件"})}function V(){return"[全局设定]：角色：你是一个精通玄空风水与空间规划的AI家居顾问。任务：根据用户提供的用户信息和房间、家具信息生成各房间风水优化方案。要求：1. 结合命理需求与空间物理特性 ；2. 所有建议需标注具体方位（如东北、西南）；3. 用\uD83D\uDD25/⚠️符号区分强化与禁忌提示，且用\n换行符分隔；；4. 如果返回的风水建议中包含1.2.3.等分项，各项之间用\n换行符分隔。\n[元素-材质映射]： {\n    木: [实木, 竹编, 绿色植物],\n    火: [LED灯带, 亚克力, 红色纺织品],\n    土: [陶瓷, 石材, 黄色装饰],\n    金: [金属框架, 不锈钢, 白色家具],\n    水: [玻璃, 鱼缸, 黑色饰品]\n}。\n    [返回结构]：要求返回一个json对象格式，这个对象里有4个键值对，下面我依次描述这4个键值对内容生成的规则。必须要按照以下这四个键的顺序返回，不可以变化键的顺序！每一个键所对应的内容不能超过150字。\n    第一个键是“家具摆放”。[内容示例（以卧室为例）其他房间要替换为合适的内容]：1.床位移至{方位}（形成{吉局}，利{运势类型}）；2. 添置{家具}于{方位}化解{形煞}（例：弧形屏風擋橫梁）。\n    第二个键是“禁忌提醒”。[内容示例（以卧室为例）其他房间要替换为合适的内容]：1. 床头现位于{方位}，正对{门窗位（可能没有门窗）} → 引发{健康问题}（科学解释：气流直吹影响睡眠）。2.根据{元素-材质映射}: {家具材质}与八字忌神相克 → 建议更换为{材质}。\n    第三个键是“五行色系与材质”。[内容示例]：✅ 主牆面：{Pantone色号}+{材质}（例：16-1546 Living Coral乳胶漆）；\n❌ 避用：{色系}（因{五行冲突}）。\n    第四个键是“运势增强方法”。[内容示例]：\uD83D\uDD25 命理增强焦点：根据您的{八字.用神}，本房应强化{元素}能量（例：火元素→红色系）；\n1. 每日{时辰}开放{方位}的{灯具类型}；\n2.在{方位}放置{开运物}（例：紫水晶洞补{元素}）。\n    [请注意]:1. 家具类型要和{房间类型}匹配。例如，如果房间类型是厨房，家具为冰箱、灶台、水槽等。2. 可以引用[命理-空间联动方案] ，例如：根据{神煞}：- “天乙贵人”位在{方位} → 设置{家具}（例：书桌利事业贵人）；-「亡神」出現在{方位} → 安裝{化解物件}（例：铜葫芦压制）\n    "}let $={north:"正北",south:"正南",east:"正东",west:"正西",center:"中宫",northEast:"东北",southEast:"东南",northWest:"西北",southWest:"西南"};function K(e,t,a){return X(t,a)+"\n    房间信息：{房间类型：".concat(e.data.label,",\n     方位：").concat($[e.direction],",\n    现有家具：").concat(e.furListStr?"["+e.furListStr+"]":"",",\n     }\n   ")}let Q="你是一位精通子平八字與紫微鬥數的命理學家，擅長用天幹地支以及星曜特性推算";f()().format("YYYY");let Z={mingpan:"你是一位精通子平八字與紫微鬥數的命理學家，擅長用現代心理學解讀傳統命盤。[任務] 根據用戶提供的性別、出生年月日時、八字、五行分布等屬性，分析命盤結構，需包含： 1. 用不到200字概括命局核心特質（需區分男命 / 女命分析差異，突出{八字.特殊格局}的影響） 2. 列出3個關鍵命盤特徵，並說明其現實映射（例：月柱正印坐絕 → 母親健康需注意） 3. 結合五行分布{八字.五行分布}，指出需補強的元素與風水建議（如缺火者宜用紅色家居）",kaiyun:Q+"個人開運元素。[生成邏輯]- **先天數**：日幹{日幹}對應河圖數（例：丁火→2、7）；- **後天數**：用神{用神}對應洛書數（例：木→3、8）；- **動態調整**：流年太歲{當前流年幹支}卦數（例：甲辰→5）。[輸出模板] 「您的戰略數字組合爲【{先天數}\xd7{後天數}】，具體應用：1.✅ 日常決策：重要會議選含{數字}的日期（例：3日/13時）；2.✅ 空間布局：辦公室樓層尾數取{數字}（例：7樓/17層）；3.✅ 密碼設計：銀行密碼嵌入{數字}序列（例：37_28_19）」。[色譜算法]- 主色：用神對應色系（例：木→青綠色系）；- 輔色：通關元素色（例：木火交戰取紅色系）；- 禁忌色：忌神{忌神}色系（例：水→黑色）；[Pantone映射表]if 用神 == 火,則推薦色=[18-1664 TPX火焰紅, 13-0647 TCX鮮黃]；if 用神 == 金，則推薦色=[19-4055 TCX經典藍, 17 - 5104 TCX極光銀]。[輸出示例]：1.「職場穿搭公式：{主色}襯衫 + {輔色}領帶（例：火焰紅+鮮黃）；2.家居能量點：在{方位}牆刷{色號}，搭配{材質}裝飾品（例：西南方塗刷極光銀金屬漆）」。",liuqin:Q+"六親緣分。[分析維度] -夫妻宮：時柱{時柱天幹地支}十神（{十神屬性}）對婚姻穩定性的影響；- 年柱{年柱天幹地支}與父母宮位關系，推算原生家庭帶來的情感模式 -{日支藏幹}透出的潛意識需求。[輸出模板] 1. 情感優勢：用⭐️符號標記3個利於親密關系的特質 ；2. 潛在挑戰：用⚠️符號警示2個需注意的模式（如比劫爭合導致的三角關系風險）；3. 風水調節：推薦2種臥室擺設法（例：牀頭朝向{吉方}化解孤辰寡宿）",shiye:Q+"事業財富。[關鍵指標] -財星定位：根據{日幹}找出正/偏財對應的天幹（例：甲木日主以己土爲正財）-官殺配置：分析{月柱}官殺強度與事業成就關聯性 - 大運走勢：結合當前大運{大運幹支}推算未來5年財運轉折點。 [風水建議] :1.用✔️符號標記最佳行業：基於{五行比例}或五行用神{用神元素}推薦3個領域（如喜水者適合物流、傳媒） ; 2. 用✔️符號標記辦公風水：需含方位角{財位度數}與開運物擺放坐標 ",minggong:Q+"生涯發展策略。[分析矩陣]需交叉驗證以下維度：1.主星組合能量：{主星}+{輔星}形成的格局（例：紫微+左右→領導型人格）;2.四化動能走向：{四化}在十二宮的牽引效應（例：財帛宮化祿→財富創造力）;3.五行局制約：{五行局}對{主星}特性的放大/抑制（例：火六局強化七殺執行力）。 [輸出格式] #核心星盤解碼：1.「{主星}」在{亮度}狀態 → {現代詮釋}（例：七殺入廟→特種兵式突破能力）；2.受{輔星}影響 → 產生{特性變異}（例：遇文昌→殺戮文青特質）#思維模式剖面：1.決策優勢：{主星}+{四化}形成{思維模式}（例：天機化科→系統化學習力）；2.認知盲區：{五行局}限制導致{誤判類型}（例：木三局遇煞→過度理想化）#家居能量調頻：1.主色調：{主星五行}\xd7{八字用神}→推薦{Pantone色號}（例：紫微土+用神火→16-1359陶土紅）2. 關鍵擺件：在{本命方位}放置{材質}{物品}（例：西北方放銅質地球儀強化遷移宮）3. 禁忌規避：禁止在{宮位對應方位}使用{衝突元素}（例：子女宮化忌→正東方避放尖銳物）。# 二十年大運導航：1. {年齡段}：{主星}逢{大運主星} → 聚焦{領域}（例：35-44歲破軍運→跨界創新期）2.危機轉折點：{年份}觸發{四化} → 需提前布局{風水調整}（例：2026年廉貞化忌→辦公室正南放水晶陣）。#能量爆發公式：「{主星優勢} \xd7 {方位催化} + {行爲修正}」組合技，例：武曲貪狼命宮 → 每日辰時在西北方金屬區制定財務計劃 + 穿黑白條紋衫",jiankang:Q+"健康預警及養生建議。[關鍵指標]-醫學命理映射 ：1.病竈器官：根據五行失衡{八字.五行分布}對應髒腑（例：木過旺→肝膽壓力）；2.流年觸發：標注{當前流年幹支}可能引發的健康風險（如歲運並臨加強火元素→心血管負擔）。[輸出要求] ：1.用❗️符號突出3項年度重點預防項目； 2.提供2個風水化解方案（例：在{臥室東方}放置白水晶平衡木氣）； 3.附上中醫養生建議（如土弱者可多喫黃色食物） ",ganqing:Q+"感情運勢。[分析維度]：1.日支{日支}藏幹 → 潛意識情感需求（例：午藏丁火己土 → 渴望激情與穩定並存）；2.十神中{十神配置.正官/七殺}力量 → 伴侶特質傾向（例：正官透幹 → 易吸引穩重對象）；3.神煞{神煞} → 情感機遇/挑戰（例：紅鸞在流年夫妻宮 → 本年婚戀信號強烈）。[輸出模板]\uD83D\uDD25 情感能量診斷：1.優勢：{主星}坐命 → {優勢描述}（例：紫微破軍→敢於突破傳統關系模式）；2.盲點：{神煞}引發{問題}（例：孤辰+日支衝 → 需避免過度獨立）。\uD83D\uDCA1 風水強化方案：1.臥室{方位}放置{色系}物品（根據{日幹}五行喜忌）2.每周{星期幾}佩戴{材質}飾品增強桃花氣（例：喜金者選白銀）",renji:Q+"人際關系。[關鍵指標] -月柱{月柱天幹地支} → 社交模式根源（例：月柱偏印 → 習慣觀察後再深入交往）；- 五行{八字.五行分布} → 人際能量場特性（例：木旺者自帶領導氣場）；-遷移宮主星{遷移宮主星} → 對外互動風格。[輸出模板]\uD83E\uDD1D 關系優化指南：✅ 貴人類型：{十神}強旺者（例：比肩旺 → 適合與同行合作）；⚠️ 避坑提示：{衝克配置}易引發衝突（例：日柱癸水衝丁火 → 慎交午年出生者）；\uD83C\uDF10 社交風水：1.辦公桌{方位}擺放{物品}（例：青龍位放綠植增強人脈）；2.微信頭像建議用{色系}（根據{當前流年幹支}）",juece:Q+"決策時機。[關鍵指標] 1. 大運{大運幹支}與{當前流年幹支}關系 → 宏觀周期判斷。 2. 命宮{主星}四化{四化} → 決策風格（例：化祿在財帛宮 → 風險偏好較高）；3. 流月{當前流月幹支}與日柱{日柱}合衝 → 微觀時機捕捉。[輸出模板] ⏳ 年度關鍵窗口：1.- {月份}：{主星}逢{流月主星} → 適合啓動重大事項 ；2.避開{月份}：{衝克關系}易判斷失誤。\uD83C\uDFAF 決策增強技巧：1.每日{時辰}進行冥想（根據{時柱}能量高峯）；2.籤約時坐{方位}（例：財星在巽宮 → 東南方位）",gexing:Q+"用戶個性。[分析維度]：1.主星{命宮主星} + 輔星{命宮輔星} → 核心特質（例：紫微+左輔 → 領袖型人格）；2.身宮{身宮主星} → 潛在第二性格；3.五行局{五行局} → 能量表達方式（例：水二局 → 以柔克剛）。[輸出模板] \uD83D\uDCBC 現代心理學映射：1.\uD83D\uDD0D MBTI關聯：{命宮主星}對應{人格類型}（例：七殺→ENTJ）；2.\uD83D\uDD0D 霍蘭德職業代碼：{命宮主星+命宮輔星}傾向{代碼}（例：天機+文昌→IAS型）。\uD83D\uDCBC 發展建議：1.利用{主星優勢}強化{領域}（例：太陽星→適合公衆表達）；2.通過{風水調整}彌補{主星缺陷}（例：太陰落陷→增加書房照明）",yunshi:Q+"人生運勢。[關鍵指標：十年大運交叉分析] 1. {當前大運}重點宮位 → 主戰場（例：大運財帛宮強 → 累積財富期）；2. {命宮主星}與{大運主星}相位 → 機遇類型（例：會照天梁→得長輩提攜）；3.流年{當前流年幹支}觸發{本命盤配置} → 年度主題。[輸出模板] \uD83D\uDE80 人生躍遷攻略：1.35-40歲：{大運主星}入{宮位} → 聚焦{領域}（例：破軍入官祿宮→創業黃金期）；2. 危機預警：{年份}逢{雙化忌} → 提前布局{風水化解方案}。\uD83D\uDCCC 終身風水錨點：1.祖墳/長居地{方位}保持{元素平衡}（根據八字{五行分布缺失}）2.本命文昌位{度數}布置書桌"};function ee(e){return Z[e]+" [要求] 1.語言簡潔流暢，避免術語堆砌，使用完整的句子且用口語化方式表達；用“能量場”“行爲模式”等現代詞匯替代傳統表述；2.不要超過200字 3.不要使用使用'#'或'*'等雜亂符號 4.條目之間使用\n符號分隔"}function et(e,t){return"\n性別：".concat("female"==e.gender?"女":"男",",\n出生年月日時：").concat(f()(e.birthDateTime).format("YYYY-MM-DD HH:mm:ss"),",\n八字：{年柱：").concat(t.year,",月柱：").concat(t.month,",日柱：").concat(t.day,",時柱：").concat(t.hour,",五行分布：").concat(t.wuxingScale,"}，\n納音：").concat(t.nayin,"，五行局：").concat(t.wuxingJu,"，\n年天幹十神：").concat(t.yearStemTenGod,", 年地支十神：").concat(t.yearBranchTenGod,", 月天幹十神：").concat(t.monthStemTenGod,", 月地支十神：").concat(t.monthBranchTenGod,", 日天幹十神：").concat(t.dayStemTenGod,", 日地支十神：").concat(t.dayBranchTenGod,", 時天幹十神：").concat(t.hourStemTenGod,", 時地支十神：").concat(t.hourBranchTenGod,"，\n命宮：").concat(t.mingPalace,"，身宮：").concat(t.bodyPalace,"，\n遷移宮主星： ").concat(t.qianyiPalace,",\n流年夫妻宮主星:").concat(F,",\n當前流年幹支：").concat(t.liunianGanzhi,",\n當前流月幹支:").concat(D,",\n日支藏幹： ").concat(t.rizhiCanggan,",\n大運幹支： ").concat(t.dayunGanzhi,",\n年柱神煞:").concat(t.yearGods,", 月柱神煞:").concat(t.monthGods,", 日柱神煞:").concat(t.dayGods,"\n")}function ea(e,t,a){return"\n性別：".concat("female"==t.gender?"女":"男",",\n出生年月日時：").concat(f()(t.birthDateTime).format("YYYY-MM-DD HH:mm:ss"),",\n八字：{年柱：").concat(a.year,",月柱：").concat(a.month,",日柱：").concat(a.day,",時柱：").concat(a.hour,",五行分布：").concat(a.wuxingScale,"}，\n納音：").concat(a.nayin,"，五行局：").concat(a.wuxingJu,"，\n年柱神煞:").concat(a.yearGods,", 月柱神煞:").concat(a.monthGods,", 日柱神煞:").concat(a.dayGods,"，\n環境參數：{流月命宮主星：").concat(N[e],"，流月命宮四化：").concat(w[e],"，當前流月幹支：").concat(v[e],",流月夫妻宮主星：").concat(C[e],",流月夫妻宮四化：").concat(S[e]," }，\n")}function en(){return"[全局設定]：{角色：你是一名精通八字與奇門遁甲的流月運勢分析師。任務：根據用戶提供的用戶信息生成{當前流月幹支}月運程報告。要求：1. 每模塊用\uD83D\uDD25/⚠️/\uD83D\uDCA1符號區分正/負/中性向提示，且用\n換行符分隔；2. 風水建議需含具體方位與物品（例：東南方放水晶） ；3.禁用模糊表述，所有結論需關聯命理參數}；4. 如果返回的內容中包含1.2.3.等分項，各項之間用\n換行符分隔；5.每一項的內容不超過150字。[返回結構]：要求返回一個json對象格式，這個對象裏有5個鍵值對，下面我依次描述這5個鍵值對內容生成的規則。\n第一個鍵是“健康防護”,它所對應的內容[分析邏輯]是：1.流月{當前流月幹支}與日柱{日幹}產生{刑/衝/合} → 對應髒腑：{器官}；2.神煞{神煞}觸發 → 重點預防：{疾病類型}。\uD83D\uDD25 增強建議：1. 臥室{方位}放置{顏色}靠墊（補{五行}氣）；2. 每日{時辰}飲用{草藥茶}（例：火弱喝紅棗枸杞）。以上僅爲示例，請你發散更多內容。\n第二個鍵是“感情人際”,它所對應的內容[分析邏輯]是：1.流月夫妻宮：{流月夫妻宮主星}+{流月夫妻宮四化} → 關系趨勢（例：貪狼化祿→桃花機遇）；2.日支{日支}與月支{月支}合衝 → 相處模式變化。\uD83D\uDCA1 行動策略：1. 約會首選{方位}的{餐廳類型}（例：喜金者去西式餐廳）；2. 佩戴{材質}飾品增強吸引力（例：喜水戴黑曜石）。以上僅爲示例，請你發散更多內容。\n第三個鍵是'事業動能' ,它所對應的內容[分析邏輯]是 : 1.流月官祿宮：{流月命宮主星}遇{流月命宮四化} → 突破點：{領域}；2.八字{用神}與月令{流月幹支}關系 → 行動節奏建議（激進/保守）；⚠️ 風險預警：避開{日期}（流日{幹支}衝{年柱}）籤約；\n✅ 辦公風水：在辦公桌{方位}貼{顏色}便利貼提升效率。以上僅爲示例，請你發散更多內容 。\n第四個鍵是“財富走勢”,它所對應的內容是 :[財星定位]：1.偏財位：九宮{方位}飛{星名} → 投資建議（例：八白左輔星→房地產利）;2.日主{日幹}克{當前流月月幹} → 求財難易度評估。\uD83E\uDD11 催財祕法：1. 錢包內放{數量}枚{材質}硬幣；2.每周{星期幾}整理{方位}雜物保持氣流通暢。以上僅爲示例，請你發散更多內容。\n第五個鍵是“本月四大開運法。它所對應的內容要求根據{五行分布}與{當前流月幹支}動態生成）。[內容模板]：1. **色彩激活**：多穿{顏色}衣物（例：喜火穿紅色）；\n2. **方位布局**：在{方位}放置{物品}（例：東北方放陶瓷存錢罐）；\n3. **時間擇吉**：重要事項優先選{上午/下午}{時辰} ；\n4. **行爲修正**：減少{行爲}（例：水弱者忌熬夜）。\n"}function es(){return JSON.stringify({健康防護:"⚠️流月子水衝日支午火 → 心血管負擔增加\n\uD83D\uDD25建議：\n1. 客廳正南放紅色地毯補火\n2.每日亥時按摩勞宮穴 ",感情人際:"\uD83D\uDCA1夫妻宮貪狼化祿 → 單身者23日易遇心動對象\n✅ 行動：約會在西北方咖啡廳，佩戴銀飾",事業動能:"✅ 官祿宮紫微+左輔 → 團隊領導力爆發期\n⚠️ 避開5日（丙午衝年柱）籤合約",財富走勢:"\uD83E\uDD11 偏財位在東南（六白武曲）→ 短期理財收益佳",本月四大開運法:"1. 穿黑色外套 \n2. 東南方放銅貔貅 \n3. 重要會議選巳時 \n4. 每早整理西南角文件"})}function er(){return"[全局設定]：角色：你是一個精通玄空風水與空間規劃的AI家居顧問。任務：根據用戶提供的用戶信息和房間、家具信息生成各房間風水優化方案。要求：1. 結合命理需求與空間物理特性 ；2. 所有建議需標注具體方位（如東北、西南）；3. 用\uD83D\uDD25/⚠️符號區分強化與禁忌提示，且用\n換行符分隔；；4. 如果返回的風水建議中包含1.2.3.等分項，各項之間用\n換行符分隔。\n[元素-材質映射]： {\n木: [實木, 竹編, 綠色植物],\n火: [LED燈帶, 亞克力, 紅色紡織品],\n土: [陶瓷, 石材, 黃色裝飾],\n金: [金屬框架, 不鏽鋼, 白色家具],\n水: [玻璃, 魚缸, 黑色飾品]\n}。\n[返回結構]：要求返回一個json對象格式，這個對象裏有4個鍵值對，下面我依次描述這4個鍵值對內容生成的規則。必須要按照以下這四個鍵的順序返回，不可以變化鍵的順序！每一個鍵所對應的內容不能超過150字。\n第一個鍵是“家具擺放”。[內容示例（以臥室爲例）其他房間要替換爲合適的內容]：1.牀位移至{方位}（形成{吉局}，利{運勢類型}）；2. 添置{家具}於{方位}化解{形煞}（例：弧形屏風擋橫梁）。\n第二個鍵是“禁忌提醒”。[內容示例（以臥室爲例）其他房間要替換爲合適的內容]：1. 牀頭現位於{方位}，正對{門窗位（可能沒有門窗）} → 引發{健康問題}（科學解釋：氣流直吹影響睡眠）。2.根據{元素-材質映射}: {家具材質}與八字忌神相克 → 建議更換爲{材質}。\n第三個鍵是“五行色系與材質”。[內容示例]：✅ 主牆面：{Pantone色號}+{材質}（例：16-1546 Living Coral乳膠漆）；\n❌ 避用：{色系}（因{五行衝突}）。\n第四個鍵是“運勢增強方法”。[內容示例]：\uD83D\uDD25 命理增強焦點：根據您的{八字.用神}，本房應強化{元素}能量（例：火元素→紅色系）；\n1. 每日{時辰}開放{方位}的{燈具類型}；\n2.在{方位}放置{開運物}（例：紫水晶洞補{元素}）。\n[請注意]:1. 家具類型要和{房間類型}匹配。例如，如果房間類型是廚房，家具爲冰箱、竈臺、水槽等。2. 可以引用[命理-空間聯動方案] ，例如：根據{神煞}：- “天乙貴人”位在{方位} → 設置{家具}（例：書桌利事業貴人）；-「亡神」出現在{方位} → 安裝{化解物件}（例：銅葫蘆壓制）\n"}let ei={north:"正北",south:"正南",east:"正東",west:"正西",center:"中宮",northEast:"東北",southEast:"東南",northWest:"西北",southWest:"西南"};function el(e,t,a){return et(t,a)+"\n房間信息：{房間類型：".concat(e.data.label,",\n方位：").concat(ei[e.direction],",\n現有家具：").concat(e.furListStr?"["+e.furListStr+"]":"",",\n}\n")}var eo=a(27943);function ec(e){let{locale:t,userInfo:a,mingLiDataString:s,assistantDataString:i,onSaveData:c,isPrinting:d}=e,m=(0,T.c3)("report.pro"),u=(0,T.c3)("toast"),[x,h]=(0,r.useState)({mingpan:""}),[g,p]=(0,r.useState)("mingpan"),[f,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)({}),[y,N]=(0,r.useState)(5),w=(0,l.A)(),C="zh-CN"===t?q:ee,S="zh-CN"===t?X:et;(0,r.useEffect)(()=>{let e={};a&&v(e=E(a.birthDateTime,a.gender)),!a||a.isLock||s||F(a,e)},[a,s]),(0,r.useEffect)(()=>{s&&h(JSON.parse(s))},[s]);let D=e=>{p(e)},F=(e,t)=>{P.oR.info(u("done"===e.genStatus?"translating2":"generating")),console.log("mingli gen"),N(0);let a=S(e,t||j),n=i?JSON.parse(i):{},s="done"===e.genStatus?m("transfer"):"",r=[(0,o.bE)("/api/generateCode",{user:a,system:s+C("mingpan"),assistant:"done"===e.genStatus?JSON.stringify(n.mingpan):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("minggong"),assistant:"done"===e.genStatus?JSON.stringify(n.minggong):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("liuqin"),assistant:"done"===e.genStatus?JSON.stringify(n.liuqin):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("shiye"),assistant:"done"===e.genStatus?JSON.stringify(n.shiye):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("jiankang"),assistant:"done"===e.genStatus?JSON.stringify(n.jiankang):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("ganqing"),assistant:"done"===e.genStatus?JSON.stringify(n.ganqing):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("renji"),assistant:"done"===e.genStatus?JSON.stringify(n.renji):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("juece"),assistant:"done"===e.genStatus?JSON.stringify(n.juece):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("gexing"),assistant:"done"===e.genStatus?JSON.stringify(n.gexing):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("yunshi"),assistant:"done"===e.genStatus?JSON.stringify(n.yunshi):""}),(0,o.bE)("/api/generateCode",{user:a,system:s+C("kaiyun"),assistant:"done"===e.genStatus?JSON.stringify(n.kaiyun):""})];b(!0),(function(e){let t=[],a=0,n=e.length;return new Promise((s,r)=>{e.forEach((e,i)=>{e.then(e=>{if(0!==e.status)throw Error(e.message);t[i]=e,console.log("c",++a),N(a/n*100),a===n&&s(t)}).catch(r)})})})(r).then(e=>{b(!1),console.log("res 命理进阶",e);let t={...x,mingpan:e[0].data,minggong:e[1].data,liuqin:e[2].data,shiye:e[3].data,jiankang:e[4].data,ganqing:e[5].data,renji:e[6].data,juece:e[7].data,gexing:e[8].data,yunshi:e[9].data,kaiyun:e[10].data};h(t),c(t)}).catch(e=>{b(!1),P.oR.error("个人命理进阶分析生成错误，请稍后刷新此页面重试。"+e.message,{autoClose:!1})})},k=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9] md:rounded-t-xl rounded-t-lg rounded-r-none border-2 border-[#6CA698] flex items-center justify-center",style:{borderTopRightRadius:0},children:(0,n.jsx)("div",{style:"mingpan"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full  cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("mingpan"),children:m("mingpan")})}),(0,n.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"minggong"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("minggong"),children:m("minggong")})}),(0,n.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"gexing"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("gexing"),children:m("gexing")})}),(0,n.jsx)("div",{className:"md:p-2 p-1 bg-[#F7FAF9] md:rounded-t-xl rounded-t-lg rounded-l-none  border-2 border-[#6CA698] flex items-center justify-center",style:{borderTopLeftRadius:0},children:(0,n.jsx)("div",{style:"yunshi"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full  cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("yunshi"),children:m("yunshi")})})]}),A=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"md:p-2 p-1 bg-[#F7FAF9] md:rounded-b-xl rounded-b-0 border-2 border-[#6CA698] flex items-center justify-center",style:{borderBottomRightRadius:0},children:(0,n.jsx)("div",{style:"renji"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("renji"),children:m("renji")})}),(0,n.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"juece"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("juece"),children:m("juece")})}),(0,n.jsx)("div",{className:"md:p-2 p-1  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"kaiyun"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("kaiyun"),children:m("kaiyun")})}),(0,n.jsx)("div",{style:{borderBottomLeftRadius:0},className:"bg-[#F7FAF9] border-2 border-[#6CA698] md:rounded-b-xl rounded-b-0 "})]});return(0,n.jsxs)("div",{className:"relative",children:[f&&(0,n.jsxs)("div",{className:"absolute z-12 w-[80%] max-w-125 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 ",children:[(0,n.jsx)(eo.N,{percent:y,strokeWidth:2,strokeColor:"#2db7f5",railWidth:2})," "]}),(0,n.jsx)(I.m5,{size:"large",spinning:f,tip:u((null==a?void 0:a.genStatus)=="done"?"translating2":"generating"),className:"bg-[#fff9]",children:d?(0,n.jsx)("div",{className:"mx-auto p-5 bg-secondary rounded-2xl",children:Object.entries(x).map(e=>{let[t,a]=e;return(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsxs)("p",{className:"font-bold whitespace-nowrap text-primary",children:[m(t),"："]}),(0,n.jsx)("span",{className:"whitespace-pre-wrap",children:a})]},t)})}):(0,n.jsx)("div",{children:w?(0,n.jsxs)("div",{className:"mx-auto p-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 grid-rows-3 h-full border-4 border-[#6CA698] rounded-t-xl ",children:[k,(0,n.jsx)("div",{className:"p-1 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"liuqin"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("liuqin"),children:m("liuqin")})}),(0,n.jsx)("div",{className:"p-1 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"shiye"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("shiye"),children:m("shiye")})}),(0,n.jsx)("div",{className:"p-1 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"ganqing"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("ganqing"),children:m("ganqing")})}),(0,n.jsx)("div",{className:"p-1  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"jiankang"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold md:text-xl text-xs min-h-12 w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("jiankang"),children:m("jiankang")})}),A]}),(0,n.jsx)("div",{className:"text-sm whitespace-pre-wrap text-white overflow-y-auto rounded-b-xl  border-4 border-t-0  border-[#6CA698]   p-8  bg-[#066952CC]",children:x[g]})]}):(0,n.jsx)("div",{className:"mx-auto p-4 w-[952px] h-[608px]",children:(0,n.jsxs)("div",{className:"grid grid-cols-4 grid-rows-4 h-full border-4 border-[#6CA698] rounded-2xl",children:[k,(0,n.jsx)("div",{className:"p-2 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"liuqin"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold text-xl w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("liuqin"),children:m("liuqin")})}),(0,n.jsx)("div",{className:"text-xs min-h-12 whitespace-pre-wrap text-white overflow-y-auto col-span-2 row-span-2 border border-gray-300  p-4 flex justify-center bg-[#066952CC]",children:x[g]}),(0,n.jsx)("div",{className:"p-2 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"shiye"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"font-bold text-sm w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("shiye"),children:m("shiye")})}),(0,n.jsx)("div",{className:"p-2 bg-[#F7FAF9]  border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"ganqing"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold text-xl w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("ganqing"),children:m("ganqing")})}),(0,n.jsx)("div",{className:"p-2  bg-[#F7FAF9]   border-2 border-[#6CA698] flex items-center justify-center",children:(0,n.jsx)("div",{style:"jiankang"===g?{backgroundColor:"#066952CC",color:"#fff"}:{backgroundColor:"#F7FAF9"},className:"text-center font-bold text-xl w-full h-full cursor-pointer hover:bg-gray-100 flex items-center justify-center",onClick:()=>D("jiankang"),children:m("jiankang")})}),A]})})})})]})}var ed=a(43263),em=a(19924),eu=a(93286);let ex={1:"正月",2:"二月",3:"三月",4:"四月",5:"五月",6:"六月",7:"七月",8:"八月",9:"九月",10:"十月",11:"十一月",12:"十二月"};function eh(e){let{locale:t,userInfo:a,liuNianDataString:s,onSaveData:i,assistantDataString:c,isPrinting:d}=e,m=(0,T.c3)("report.pro"),u=(0,T.c3)("toast"),x=(0,l.A)(),[h,g]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[b,j]=(0,r.useState)({}),[v,N]=(0,r.useState)(5),w="zh-CN"===t?W:en,C="zh-CN"===t?H:ea,S="zh-CN"===t?U:es;(0,r.useEffect)(()=>{let e={};a&&j(e=E(a.birthDateTime,a.gender)),!a||a.isLock||s||D(a,e)},[a,s]),(0,r.useEffect)(()=>{s&&g(JSON.parse(s))},[s]);let D=(e,t)=>{console.log("liunian gen"),N(0);let a=w(),n=S(),s=c?JSON.parse(c):[],r="done"===e.genStatus?m("transfer"):"",l=Array.from({length:12}).map((i,l)=>(0,o.bE)("/api/generateCode",{user:C(l+1,e,t||b),system:r+a,assistant:"done"===e.genStatus?JSON.stringify(s[l]):n,jsonResult:!0}));f(!0),(function(e){let t=[],a=0,n=e.length;return new Promise((s,r)=>{e.forEach((e,i)=>{e.then(e=>{if(0!==e.status)throw Error(e.message);t[i]=e,N(100*(++a/n)),a===n&&s(t)}).catch(r)})})})(l).then(async e=>{f(!1);let t=e.map(e=>{let t=JSON.parse(e.data),a={};for(let e in t)a[e]=t[e];return a});g(t),console.log("res 流年进阶",t),i(t)}).catch(e=>{f(!1),P.oR.error("流年运程进阶分析生成错误，请稍后刷新此页面重试。"+e.message,{autoClose:!1})})};return(0,n.jsxs)("div",{className:"relative",children:[p&&(0,n.jsxs)("div",{className:"absolute z-12 w-[80%] max-w-125 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 ",children:[(0,n.jsx)(eo.N,{percent:v,strokeWidth:2,strokeColor:"#2db7f5",railWidth:2})," "]}),(0,n.jsx)(I.m5,{size:"large",spinning:p,tip:u((null==a?void 0:a.genStatus)=="done"?"translating2":"generating"),className:"bg-[#fff9]",children:(0,n.jsxs)("div",{className:"md:px-0 px-2.5 ",children:[(0,n.jsxs)("p",{className:"max-w-250 mx-auto md:mb-20 mb-10 font-bold leading-8 tracking-normal text-justify",children:[(0,n.jsx)("span",{className:"text-sm leading-8",children:"命主八字"}),(0,n.jsx)("br",{}),(0,n.jsxs)("span",{className:"text-[#073E31] font-bold text-xl",children:[" ","".concat(b.year,"年、").concat(b.month,"月、").concat(b.day,"日、").concat(b.hour).concat(m("hour"))]})]}),d?(0,n.jsx)("div",{children:h.length>0&&Array.from({length:12}).map((e,t)=>{let a=Object.entries(h[t]),s=a.slice(0,4),r=a.slice(4);return(0,n.jsxs)("div",{className:"rounded-[8px]",children:[(0,n.jsx)("div",{className:"w-full h-12 bg-[#0E8C6F] rounded-t-[8px] relative py-4",children:(0,n.jsx)("div",{className:"h-5 w-full",style:{background:"url('/images/report/month/huawen.png') repeat"}})}),(0,n.jsxs)("div",{className:"p-5 flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"md:flex md:flex-col md:items-center",children:[(0,n.jsx)("div",{className:"mt-12 md:mb-3 mb-2 text-[40px] font-[900] text-[#0E8C6F]",children:ex[t+1]}),(0,n.jsxs)("div",{className:"mb-12 text-sm text-center px-6.5 py-1.5 bg-[#0E8C6F] text-white rounded-sm",children:[y[t+1],"月"]})]}),(0,n.jsxs)("div",{children:[s.map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"flex mb-1 items-start",children:[(0,n.jsx)("div",{className:"text-sm whitespace-nowrap p-1.5 bg-[#0E8C6F] text-white rounded-sm mr-2 mt-2 w-28",children:a}),(0,n.jsx)("span",{className:"text-sm leading-8 whitespace-pre-wrap",children:s})]},t)}),(0,n.jsx)(eu.Separator,{className:"my-5"}),r.map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm whitespace-nowrap p-1.5 bg-[#0E8C6F] text-white rounded-sm mr-2 mb-3 max-w-28",children:a}),(0,n.jsx)("div",{className:"text-sm whitespace-pre-wrap leading-8",children:s})]},t)})]})]})]},t)})}):(0,n.jsx)(ed.FN,{className:"w-full",children:(0,n.jsx)(ed.Wk,{className:"-ml-1 pb-7.5",children:h.length>0&&Array.from({length:12}).map((e,t)=>{let a=Object.entries(h[t]),s=a.slice(0,4),r=a.slice(4);return(0,n.jsx)(ed.A7,{className:"md:ml-10 md:basis-170  basis-84  md:h-139 pl-2.5",children:(0,n.jsxs)("div",{className:"rounded-[8px]",style:x?{}:{boxShadow:"0px 0px 15px 0px"},children:[(0,n.jsx)("div",{className:"w-full h-12 bg-[#0E8C6F] rounded-t-[8px] relative py-4",children:(0,n.jsx)("div",{className:"h-5 w-full",style:{background:"url('/images/report/month/huawen.png') repeat"}})}),(0,n.jsxs)("div",{className:"p-5 md:flex ",children:[(0,n.jsxs)("div",{className:"p-6 flex md:flex-col items-center flex-row md:justify-start justify-between rounded-[8px] border-2 border-[#0E8C6F] md:min-w-74.5  md:h-117 h-38 md:mr-5 mb-5 md:mb-0",children:[(0,n.jsxs)("div",{className:"md:flex md:flex-col md:items-center",children:[(0,n.jsx)("div",{className:"mt-12 md:mb-3 mb-2 text-[40px] font-[900] text-[#0E8C6F]",children:ex[t+1]}),(0,n.jsxs)("div",{className:"mb-12 text-sm text-center px-6.5 py-1.5 bg-[#0E8C6F] text-white rounded-sm",children:[y[t+1],"月"]})]}),(0,n.jsx)(z.default,{width:x?104:208,height:x?104:208,src:"/images/report/month/".concat(2,".png"),alt:[t+1]+"月",className:"object-contain"})]}),(0,n.jsx)("div",{className:"grow",children:(0,n.jsxs)(em.F,{className:"h-117 w-full",children:[s.map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"flex mb-1 items-start",children:[(0,n.jsx)("div",{className:"text-sm whitespace-nowrap p-1.5 bg-[#0E8C6F] text-white rounded-sm mr-2 mt-2 w-28",children:a}),(0,n.jsx)("span",{className:"text-sm leading-8 whitespace-pre-wrap",children:s})]},t)}),(0,n.jsx)(eu.Separator,{className:"my-5"}),r.map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm whitespace-nowrap p-1.5 bg-[#0E8C6F] text-white rounded-sm mr-2 mb-3 max-w-28",children:a}),(0,n.jsx)("div",{className:"text-sm whitespace-pre-wrap leading-8",children:s})]},t)})]})})]})]})},t)})})})]})})]})}var eg=a(86693),ep=a(4318);function ef(e){var t,a,s,i;let{locale:l,userInfo:c,jiajuProDataString:d,onSaveData:m,assistantDataString:u,isPrinting:x}=e,h=(0,T.c3)("report.pro"),g=(0,T.c3)("toast"),[p,f]=(0,r.useState)(null),[b,j]=(0,r.useState)("tab1"),[v,y]=(0,r.useState)(null),[N,w]=(0,r.useState)({}),[C,S]=(0,r.useState)(!1),[D,F]=(0,r.useState)({}),[k,A]=(0,r.useState)(5),O="zh-CN"===l?V:er,G="zh-CN"===l?K:el;(0,r.useEffect)(()=>{d&&w(JSON.parse(d))},[d]),(0,r.useEffect)(()=>{let e={};c&&F(e=E(c.birthDateTime,c.gender)),c&&v&&!d&&!c.isLock&&Y(c,e)},[c,v,d]);let Y=(e,t)=>{console.log("jiaju gen"),A(0);let a=O(),n=v.localItems.filter(e=>"room"===e._type),s=v.localItems.filter(e=>"furniture"===e._type),r=n.map(e=>{let t=s.filter(t=>{var a;return(null===(a=t.data.parentRoom)||void 0===a?void 0:a.id)===e.id}).map(e=>"{家具类型: ".concat(e.data.label.split("-")[1]," ，家具坐标：x-").concat(e.position.x,",y-").concat(e.position.y,"}"));return{...e,furListStr:t.toString()}}),i=n.map(e=>e.id),l=u?JSON.parse(u):{},c="done"===e.genStatus?h("transfer"):"";S(!0),(function(e){let t=[],a=0,n=e.length;return new Promise((s,r)=>{e.forEach((e,i)=>{e.then(e=>{if(0!==e.status)throw Error(e.message);t[i]=e,A(100*(++a/n)),a===n&&s(t)}).catch(r)})})})(r.map(n=>(0,o.bE)("/api/generateCode",{user:G(n,e,t||D),system:c+a,assistant:"done"===e.genStatus?JSON.stringify(l[n.id]):"",jsonResult:!0}))).then(async e=>{S(!1);let t={};e.map((e,a)=>{let n=JSON.parse(e.data),s={};Object.keys(n).forEach((e,t)=>{s["tab".concat(t+1)]=n[e]}),t[i[a]]=s}),w(t),console.log("res 家居进阶",t),m(t)}).catch(e=>{S(!1),P.oR.error("家居风水进阶分析生成错误，请稍后刷新此页面重试。"+e.message,{autoClose:!1})})};return(0,n.jsxs)("section",{className:"relative",children:[C&&(0,n.jsxs)("div",{className:"absolute z-12 w-[80%] max-w-125 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 ",children:[(0,n.jsx)(eo.N,{percent:k,strokeWidth:2,strokeColor:"#2db7f5",railWidth:2})," "]}),(0,n.jsxs)(I.m5,{size:"large",spinning:C,tip:g((null==c?void 0:c.genStatus)=="done"?"translating2":"generating"),className:"bg-[#fff9]",children:[(0,n.jsxs)("p",{className:"md:mb-20 mb-10  md:px-0 px-2.5 font-bold leading-8 tracking-normal text-justify",children:[(0,n.jsx)("span",{className:"text-sm leading-8",children:"命主八字"}),(0,n.jsx)("br",{}),(0,n.jsxs)("span",{className:"text-[#073E31] font-bold text-xl",children:[" ","".concat(D.year,"年、").concat(D.month,"月、").concat(D.day,"日、").concat(D.hour).concat(h("hour"))]})]}),(0,n.jsx)(R,{activeRoom:p,setActiveRoom:e=>{f(e),j("tab1")},onChangeDesignData:e=>{y(e)}}),p&&!x&&(0,n.jsxs)("div",{className:"w-full md:rounded-b-3xl bg-[#fafafa] md:p-8 p-5 border-1 border-[#E6E6E6]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.default,{width:(null==p?void 0:p.data._type)==="dining_room"?28:32,height:(null==p?void 0:p.data._type)==="dining_room"?28:32,style:{color:"red"},alt:"",src:"/images/report/".concat(null==p?void 0:p.data._type,".svg")}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:null==p?void 0:p.data.label})]}),(0,n.jsx)("div",{className:"mt-8",children:N&&(0,n.jsxs)(eg.tU,{value:b,className:"w-full gap-0",onValueChange:e=>j(e),children:[(0,n.jsxs)(eg.j7,{className:"gap-5 justify-start bg-transparent p-0",children:[(0,n.jsx)(eg.Xi,{defaultValue:!0,value:"tab1",className:"cursor-pointer pb-3  px-0 rounded-none bg-transparent text-sm md:text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:h("tab1")}),(0,n.jsx)(eg.Xi,{value:"tab2",className:"cursor-pointer pb-3  px-0 rounded-none bg-transparent text-sm md:text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:h("tab2")}),(0,n.jsx)(eg.Xi,{value:"tab3",className:"cursor-pointer pb-3  px-0 rounded-none bg-transparent text-sm md:text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:h("tab3")}),(0,n.jsx)(eg.Xi,{value:"tab4",className:"cursor-pointer pb-3  px-0 rounded-none bg-transparent text-sm md:text-base data-[state=active]:font-bold data-[state=active]:shadow-none data-[state=active]:border-b-3 data-[state=active]:border-b-[#333] data-[state=active]:bg-transparent",children:h("tab4")})]}),(0,n.jsx)(eu.Separator,{className:"mb-5"}),(0,n.jsx)(eg.av,{value:"tab1",className:"w-full leading-8",children:null===(t=N[p.id])||void 0===t?void 0:t.tab1}),(0,n.jsx)(eg.av,{value:"tab2",className:"w-full leading-8",children:null===(a=N[p.id])||void 0===a?void 0:a.tab2}),(0,n.jsx)(eg.av,{value:"tab3",className:"w-full leading-8",children:null===(s=N[p.id])||void 0===s?void 0:s.tab3}),(0,n.jsx)(eg.av,{value:"tab4",className:"w-full leading-8",children:null===(i=N[p.id])||void 0===i?void 0:i.tab4})]})})]})]}),x&&(0,n.jsx)("div",{className:"w-full  bg-[#fafafa] md:p-8 p-5 border-1 border-[#E6E6E6]",children:N&&Object.entries(N).map(e=>{let[t,a]=e,s=(0,ep.Ay)(t,l);return(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("p",{className:"font-bold whitespace-nowrap mb-2 mt-3 text-primary",children:[s,"："]}),Object.entries(a).map(e=>{let[a,s]=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-bold whitespace-nowrap",children:[h(a),"："]}),(0,n.jsxs)("span",{className:"whitespace-pre-wrap",children:[" ",s]})]},t+a)})]},t)})}),(0,n.jsx)("div",{className:"my-5 px-6 md:p-0",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-[#FF531A]",children:"*"}),h("p6-1")]})})]})}function eb(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"skeleton",className:(0,ep.cn)("bg-secondary animate-pulse rounded-md",t),...a})}var ej=a(69817);let ev={金:"#CCBB00",木:"#00991B",水:"#0088CC",火:"#E52918",土:"#BF8F00"};function ey(e){var t,a,c;let{locale:m}=e;(0,l.A)();let u=(0,i.useRouter)(),x=(0,T.c3)("report");(0,T.c3)("toast");let h=(0,r.useRef)(null),g=(0,r.useRef)([]),[p,f]=(0,r.useState)([]),[b,j]=(0,r.useState)([]),[v,y]=(0,r.useState)(0),[N,w]=(0,r.useState)(!1),C=(0,r.useRef)(null),[S,D]=(0,r.useState)(!1),[F,k]=(0,r.useState)(!0),[A,Y]=(0,r.useState)(null),[M,J]=(0,r.useState)(null),[R,I]=(0,r.useState)(null),[L,B]=(0,r.useState)(null),{loading:q,reportDocData:X,assistantData:H}=function(e,t){let a=(0,r.useRef)(!0),[n,s]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null),[c,m]=(0,r.useState)({});(0,r.useEffect)(()=>{console.log("renderRef.current",a.current),(async()=>{let a=null==t?void 0:t.userId;if(a&&e){let n=t.birthDateTime;console.log("查询用户已有报告"),s(!0);let{status:r,data:i}=await (0,o.Jt)("/api/reportUserDoc/".concat(a,"/").concat("zh-CN"==e?"zh":"tw"));if(0==r&&i){if(console.log("已有报告"),"done"==t.genStatus&&(!i.mingLiData||!i.liuNianData||!i.jiajuProData)){let{status:t,data:n}=await (0,o.Jt)("/api/reportUserDoc/".concat(a,"/").concat("zh-CN"==e?"tw":"zh"));0==t&&n&&m(n)}l(i)}else{console.log("生成随机报告");let{data:t}=await (0,o.Jt)("/api/reportDoc/zh",{isCached:!0}),{data:s}=await (0,o.Jt)("/api/reportDoc/tw",{isCached:!0});if(t&&s){let{nayin:r,year:i,month:c,day:d,hour:m}=E(n),x=Math.floor(3*Math.random()),h=Math.floor(3*Math.random()),g={nianzhuData:t.nianzhuData[i][x],yuezhuData:t.yuezhuData[c][x],rizhuData:t.rizhuData[d][x],shizhuData:t.shizhuData[m][x],yunchengData:t.yunchengData[r][x],jiajuData:u(t.jiajuData,h)},p={nianzhuData:s.nianzhuData[i][x],yuezhuData:s.yuezhuData[c][x],rizhuData:s.rizhuData[d][x],shizhuData:s.shizhuData[m][x],yunchengData:s.yunchengData[r][x],jiajuData:u(s.jiajuData,h)};l("zh-CN"==e?g:p),(0,o.bE)("/api/reportUserDoc/".concat(a,"/zh"),g),(0,o.bE)("/api/reportUserDoc/".concat(a,"/tw"),p)}}s(!1)}})()},[e,t]);let u=(e,t)=>{if(e){let a=d().cloneDeep(e);for(let e in a){let n=a[e];for(let e in n)n[e]=n[e][t]}return a}};return{loading:n,reportDocData:i,assistantData:c}}(m,A),W=(0,ej.useReactToPrint)({contentRef:h,pageStyle:"\n            @page { size: A4;margin:0  }\n            @media print {\n                body, html {\n                    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');\n                    height: auto;\n                    font-family: 'SimSun', 'Microsoft YaHei', sans-serif;\n                    overflow: initial !important;  // 重要，如果不分页需要加上\n                    margin: 0;\n                    zoom: 100%;\n                }\n                .hidden-on-print { display: none !important; }\n                .show-on-print { display: block !important;}\n                .page-break {\n                    margin-top: 1rem;\n                    display: block;\n                    page-break-before: auto;\n                }\n                .canvasImage{\n                    page-break-inside: avoid;\n                    break-inside: avoid;\n                }\n                img{\n                    max-width: 100% !important;\n                    height: auto !important;\n                    page-break-inside: auto;\n                    break-inside: auto;\n                }\n      }\n        ",removeAfterPrint:!0,documentTitle:"Harmoniq风水家居报告"});(0,r.useEffect)(()=>{let e=[{title:x("title1"),children:[{title:"年柱"},{title:"月柱"},{title:"日柱"},{title:x("shizhu")}]},{title:x("title2"),children:[{title:x("title2-1"),color:"#088C6E",bgColor:"#F7FAF9"},{title:x("title2-2"),color:"#00A637",bgColor:"#F5FAF7"},{title:x("title2-3"),color:"#0A58A6",bgColor:"#F5F8FA"},{title:x("title2-4"),color:"#E52E5C",bgColor:"#FAF5F6"},{title:x("title2-5"),color:"#D9B815",bgColor:"#FCFBF5"},{title:x("title2-6"),color:"#066952",bgColor:"#F7FAF9"}]},{title:x("title3")}],t=[{id:"section-0",title:"第一章：个人命理基础分析",isMain:!0},{id:"section-0-0",title:"年柱",isMain:!1},{id:"section-0-1",title:"月柱"},{id:"section-0-2",title:"日柱"},{id:"section-0-3",title:"时柱"},{id:"section-1",title:"第二章：流年运程基础分析",isMain:!0},{id:"section-1-0",title:"整体运势"},{id:"section-1-1",title:"健康运势"},{id:"section-1-2",title:"事业运势"},{id:"section-1-3",title:"感情运势"},{id:"section-1-4",title:"财运运势"},{id:"section-1-5",title:"总结"},{id:"section-2",title:"第三章：流年运程基础分析",isMain:!0},{id:"section-3",isMain:!0}];F?(f([...e,{title:x("title4Preview")}]),j(t)):(f([...e,{title:x("title4")},{title:x("title5")},{title:x("title6")}]),j([...t,{id:"section-4",isMain:!0},{id:"section-5",isMain:!0}]))},[F]),(0,r.useEffect)(()=>{let e=()=>{let e=g.current.map(e=>e?e.getBoundingClientRect().top:1/0).findIndex(e=>e>80);y(-1===e?b.length-1:Math.max(0,e-1))};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]);let{data:U}=(0,G.wV)();(0,r.useEffect)(()=>{var e;let t=null==U?void 0:null===(e=U.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{status:e,message:a,data:n}=await (0,o.Jt)("/api/users/".concat(t));0==e&&(Y(n),k(n.isLock))})()},[null==U?void 0:null===(t=U.user)||void 0===t?void 0:t.userId]),(0,r.useEffect)(()=>{let e=e=>{e.target.closest(".report-menu")||e.target.closest(".progress-indicator")||w(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{let e=async()=>{var e;let t=null==U?void 0:null===(e=U.user)||void 0===e?void 0:e.userId;if(!t)return;let{status:a}=await (0,o.F6)("/api/reportUserDoc/".concat(t,"/").concat("zh-CN"==m?"zh":"tw"),{mingLiData:M,liuNianData:R,jiajuProData:L});0==a&&await (0,o.bE)("/api/users/".concat(t),{genStatus:"done"})};M&&R&&L&&e()},[M,R,L]);let V=()=>{clearTimeout(C.current),w(!0)},$=e=>{var t;null===(t=g.current[e])||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"})};if(q)return(0,n.jsxs)("div",{className:"space-y-8 mt-25",children:[(0,n.jsx)(eb,{className:"h-4 w-[80%]"}),(0,n.jsx)(eb,{className:"h-4 w-[70%]"}),(0,n.jsx)(eb,{className:"h-4 w-[80%]"}),(0,n.jsx)(eb,{className:"h-4 w-[70%]"})]});if(!X){P.oR.error(x("error")),u.push("/design");return}return(0,n.jsxs)("div",{className:"relative min-h-screen bg-white",children:[!S&&(0,n.jsx)(s.default,{from:"report"}),(0,n.jsxs)("div",{className:"fixed right-4 top-32 z-10",children:[!S&&(0,n.jsx)("a",{href:"#",className:"hidden-on-print  absolute rounded-3xl text-center py-1 w-25 -top-12 right-0  bg-primary text-white",onClick:()=>{D(!0),setTimeout(()=>{W()},500),setTimeout(()=>{D(!1)},3e3)},children:x("download")}),(0,n.jsx)("div",{className:"progress-indicator flex flex-col items-center gap-2 cursor-pointer select-none",onMouseEnter:V,onClick:V,children:b.map((e,t)=>(0,n.jsx)("div",{className:"transition-all duration-200 ".concat(e.isMain?"w-5 h-5":"w-2 h-2"," rounded-full  ").concat(v===t?"bg-[#20B580]":"bg-[#E7F2EE] "),style:{margin:e.isMain?"8px 0":"3px 0"}},e.id))}),N&&(0,n.jsx)("div",{className:"absolute top-0 right-0 report-menu w-56 bg-white shadow-lg rounded-lg py-4 px-4 text-sm max-h-[70vh] overflow-y-auto",tabIndex:-1,children:p.map((e,t)=>{var a;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm mb-1 cursor-pointer ".concat(v===b.findIndex(e=>e.id==="section-".concat(t))?"text-[#20B580]":""),onClick:()=>$(b.findIndex(e=>e.id==="section-".concat(t))),children:e.title}),null===(a=e.children)||void 0===a?void 0:a.map((e,a)=>(0,n.jsx)("div",{className:"text-sm pl-4 py-1 cursor-pointer ".concat(v===b.findIndex(e=>e.id==="section-".concat(t,"-").concat(a))?"text-[#20B580]":"text-gray-700"),onClick:()=>$(b.findIndex(e=>e.id==="section-".concat(t,"-").concat(a))),children:e.title},e.title))]},e.title)})})]}),(0,n.jsxs)("div",{ref:h,children:[(0,n.jsxs)("div",{className:"md:max-w-250 mx-auto  md:px-5",children:[(0,n.jsx)("h1",{ref:e=>g.current[0]=e,className:"md:text-[40px] text-[28px] text-center font-bold my-10 md:mt-30 md:px-0 px-5 text-[#073E31]",id:"section-0",children:p[0].title}),(0,n.jsxs)("p",{className:"font-bold leading-8 tracking-normal text-justify px-5 md:px-0",children:[(0,n.jsx)("span",{className:"text-[#073E31]",children:x("p1-1")}),x("p1-2"),(0,n.jsx)("span",{className:"text-[#073E31]",children:x("p1-3")}),"。",(0,n.jsx)("br",{}),x("p1-4")]}),(0,n.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-[#F7FAF9] md:p-10 p-5  md:mt-18 mt-10",children:[(0,n.jsx)("h2",{id:"section-0-1",ref:e=>g.current[1]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:"年柱"}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:x("p1-5")}),Object.entries(X.nianzhuData).map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"relative mt-8 flex flex-col  items-center gap-12 lg:gap-0 mx-auto ".concat(1==t?"lg:flex-row-reverse":"lg:flex-row"),children:[(0,n.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,n.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:ev[a.slice(-1)]},children:a}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,n.jsx)("div",{className:"relative ".concat(0==t?"lg:-right-20":"lg:-left-20"),children:(0,n.jsx)(z.default,{className:"w-105 h-75 object-contain",priority:!0,src:"/images/report/".concat(a.slice(-1),".png"),alt:a,width:420,height:320})})]},t)})]}),(0,n.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-[#F7FAF9] md:p-10 p-5  md:mt-18 mt-10",children:[(0,n.jsx)("h2",{id:"section-0-2",ref:e=>g.current[2]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:"月柱"}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:x("p1-6")}),Object.entries(X.yuezhuData).map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"relative mt-8 flex flex-col  items-center gap-12 lg:gap-0 mx-auto ".concat(1==t?"lg:flex-row-reverse":"lg:flex-row"),children:[(0,n.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,n.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:ev[a.slice(-1)]},children:a}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,n.jsx)("div",{className:"relative ".concat(0==t?"lg:-right-20":"lg:-left-20"),children:(0,n.jsx)(z.default,{className:"w-105 h-75 object-contain",priority:!0,src:"/images/report/".concat(a.slice(-1),".png"),alt:a,width:420,height:320})})]},t)})]}),(0,n.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-[#F7FAF9] md:p-10 p-5  md:mt-18 mt-10",children:[(0,n.jsx)("h2",{id:"section-0-3",ref:e=>g.current[3]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:"日柱"}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:x("p1-7")}),Object.entries(X.rizhuData).map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"relative mt-8 flex flex-col  items-center gap-12 lg:gap-0 mx-auto ".concat(1==t?"lg:flex-row-reverse":"lg:flex-row"),children:[(0,n.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,n.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:ev[a.slice(-1)]},children:a}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,n.jsx)("div",{className:"relative ".concat(0==t?"lg:-right-20":"lg:-left-20"),children:(0,n.jsx)(z.default,{className:"w-105 h-75 object-contain",priority:!0,src:"/images/report/".concat(a.slice(-1),".png"),alt:a,width:420,height:320})})]},t)})]}),(0,n.jsxs)("section",{className:"md:rounded-[26px] rounded-none bg-[#F7FAF9] md:p-10 p-5 md:mt-18 mt-10",children:[(0,n.jsx)("h2",{id:"section-0-4",ref:e=>g.current[4]=e,className:"text-[28px] text-[#073E31] font-bold mb-3",children:x("shizhu")}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:x("p1-8")}),Object.entries(X.shizhuData).map((e,t)=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"relative mt-8 flex flex-col  items-center gap-12 lg:gap-0 mx-auto ".concat(1==t?"lg:flex-row-reverse":"lg:flex-row"),children:[(0,n.jsxs)("section",{className:"".concat(2!==t&&"lg:max-w-125"," flex-grow"),children:[(0,n.jsx)("p",{className:"leading-8 text-xl font-bold text-[#073E31]",style:{color:ev[a.slice(-1)]},children:a}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:s})]}),2!==t&&(0,n.jsx)("div",{className:"relative ".concat(0==t?"lg:-right-20":"lg:-left-20"),children:(0,n.jsx)(z.default,{className:"w-105 h-75 object-contain",priority:!0,src:"/images/report/".concat(a.slice(-1),".png"),alt:a,width:420,height:320})})]},t)})]}),(0,n.jsxs)("div",{className:"md:flex mt-10 items-center px-6 md:p-0",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-[#FF531A]",children:"*"})," ",x("p1-9"),(0,n.jsx)("span",{className:"font-bold",children:x("p1-10")})]}),(0,n.jsx)(O.A,{className:"bg-[#096E56] text-white md:ml-2 w-full md:w-auto mt-5 md:mt-0 block md:inline text-center"})]})]},"section-0"),(0,n.jsxs)("div",{className:"md:max-w-250 mx-auto  md:px-5",children:[(0,n.jsx)("h1",{ref:e=>g.current[5]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-1",children:p[1].title}),(0,n.jsxs)("p",{className:"font-bold leading-8 tracking-normal text-justify px-5 md:px-0",children:[(0,n.jsx)("span",{className:"text-[#073E31]",children:x("p2-1")}),x("p2-2")]}),X.yunchengData.map((e,t)=>{var a;return(0,n.jsxs)("section",{style:{backgroundColor:p[1].children[t].bgColor},className:"md:rounded-[26px] rounded-none md:p-8 p-5 md:mt-10 mt-10",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("p",{ref:e=>g.current[6+t]=e,id:"section-1-".concat(t),className:"leading-8 text-xl font-bold flex items-center",style:{color:p[1].children[t].color},children:[t<5&&(0,n.jsx)(z.default,{src:"/images/report/icon".concat(t,".png"),width:24,height:24,alt:"",className:"mr-1"}),p[1].children[t].title]}),t<5&&(0,n.jsxs)("p",{className:"leading-8 flex items-end",style:{color:p[1].children[t].color},children:[(0,n.jsx)("span",{className:"font-bold text-xl",children:null===(a=e.zhishu)||void 0===a?void 0:a.split("/")[0]}),(0,n.jsx)("span",{className:"text-sm",children:"/10"})]})]}),(0,n.jsx)("p",{className:"leading-8 text-justify",children:e.content})]})}),(0,n.jsxs)("div",{className:"md:flex mt-10 items-center px-6 md:p-0",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-[#FF531A]",children:"*"}),x("p2-3"),(0,n.jsx)("span",{className:"font-bold",children:x("p2-4")})]}),(0,n.jsx)(O.A,{className:"bg-[#096E56] text-white md:ml-2 w-full md:w-auto mt-5 md:mt-0 block md:inline text-center"})]})]},"section-1"),(0,n.jsxs)("div",{className:"md:max-w-250 mx-auto  md:px-5",children:[(0,n.jsx)("h1",{ref:e=>g.current[12]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-2",children:p[2].title}),(0,n.jsxs)("p",{className:"font-bold leading-8 tracking-normal text-justify px-5 md:px-0",children:[(0,n.jsx)("span",{className:"text-[#073E31]",children:x("p3-1")}),x("p3-2"),(0,n.jsx)("br",{}),x("p3-3"),(0,n.jsxs)("span",{className:"text-[#073E31]",children:[" ",x("p3-4")]}),x("p3-5")]}),(0,n.jsx)(_,{jiajuDataString:JSON.stringify(X.jiajuData),isPrinting:S})]},"section-2"),(0,n.jsxs)("div",{className:"relative md:max-w-250 mx-auto  md:px-5",children:[(0,n.jsx)("h1",{ref:e=>g.current[13]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-3",children:p[3].title}),F&&(0,n.jsx)("div",{className:"absolute bg-lock z-10 left-0 top-25 w-full md:h-70 h-60"}),(0,n.jsx)("div",{className:F&&"md:h-70 h-60 overflow-hidden",children:(0,n.jsx)(ec,{locale:m,onSaveData:J,userInfo:A,mingLiDataString:JSON.stringify(X.mingLiData||void 0),assistantDataString:JSON.stringify(H.mingLiData),isPrinting:S})})]},"section-3"),!F&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{ref:e=>g.current[14]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-4",children:null===(a=p[4])||void 0===a?void 0:a.title}),(0,n.jsx)(eh,{locale:m,onSaveData:I,userInfo:A,liuNianDataString:JSON.stringify(X.liuNianData||void 0),assistantDataString:JSON.stringify(H.liuNianData),isPrinting:S})]},"section-4"),!F&&(0,n.jsxs)("div",{className:"md:max-w-250 mx-auto  md:px-5",children:[(0,n.jsx)("h1",{ref:e=>g.current[15]=e,className:"md:text-[40px] text-[28px] text-center font-bold md:mt-18 mt-10 mb-10 md:px-0 px-5 text-[#073E31]",id:"section-5",children:null===(c=p[5])||void 0===c?void 0:c.title}),(0,n.jsx)(ef,{locale:m,onSaveData:B,userInfo:A,jiajuProDataString:JSON.stringify(X.jiajuProData||void 0),assistantDataString:JSON.stringify(H.jiajuProData),isPrinting:S})]},"section-5")]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3265,2351,8548,2376,1400,3379,3257,8403,7029,5593,1882,7511,52,1638,2072,7358],()=>t(55009)),_N_E=e.O()}]);