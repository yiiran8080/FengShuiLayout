(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7432],{40003:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var o=s(95155),r=s(60388),l=s(66766),a=s(22346),n=s(17652);function i(){let e=(0,n.c3)("home.footer"),t={contact:[{name:e("contact"),href:"/customer/contact"}],law:[{name:e("privacy"),href:"/customer/privacy"},{name:e("terms"),href:"/customer/terms"}],social:[{icon:"/images/footer/Facebook.png",href:"https://www.facebook.com/profile.php?id=61578389876952"},{icon:"/images/footer/Instagram.png",href:"https://www.instagram.com/harmoniq_fengshui/"}]};return(0,o.jsx)("footer",{className:"px-5 text-gray-300 md:px-0",style:{background:"#374A37",fontFamily:"Noto Serif TC, serif"},children:(0,o.jsxs)("div",{className:"container px-4 mx-auto py-30",children:[(0,o.jsxs)("div",{className:"justify-center item-center text-[50px] font-bold text-white text-center mt-20 mb-20",children:[(0,o.jsx)("h1",{className:"text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"46px"},children:e("title")}),(0,o.jsx)("p",{className:"mt-2 text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"24px"},children:e("subtitle")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-5",children:[(0,o.jsxs)("div",{className:"flex gap-12",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("consult")}),(0,o.jsx)("ul",{className:"space-y-2",children:t.contact.map(e=>(0,o.jsx)("li",{children:(0,o.jsx)(r.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("law")}),(0,o.jsx)("ul",{className:"space-y-2",children:t.law.map(e=>(0,o.jsx)("li",{children:(0,o.jsx)(r.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white min-w-30",style:{fontFamily:"Noto Serif TC, serif"},children:e("focus")}),(0,o.jsx)("div",{className:"flex space-x-4",children:t.social.map(e=>e.href?(0,o.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80",children:(0,o.jsx)(l.default,{src:e.icon,alt:"",width:30,height:30})},e.icon):(0,o.jsx)(l.default,{src:e.icon,alt:"",width:30,height:30},e.icon))})]})]}),(0,o.jsx)(a.Separator,{className:"mt-7.5"}),(0,o.jsx)("div",{className:"mt-5 font-semibold text-center border-t border-[#004F44] md:mt-10",style:{fontFamily:"Noto Serif TC, serif"},children:(0,o.jsxs)("p",{children:["\xa9 2025 HarmoniQ. ",e("copyright")]})})]})})}},42966:(e,t,s)=>{Promise.resolve().then(s.bind(s,67916))},58105:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let o=[{name:"north",range:[337.5,22.5],baseAngle:0},{name:"northEast",range:[22.5,67.5],baseAngle:45},{name:"east",range:[67.5,112.5],baseAngle:90},{name:"southEast",range:[112.5,157.5],baseAngle:135},{name:"south",range:[157.5,202.5],baseAngle:180},{name:"southWest",range:[202.5,247.5],baseAngle:225},{name:"west",range:[247.5,292.5],baseAngle:270},{name:"northWest",range:[292.5,337.5],baseAngle:315}];function r(e){let t,s,r,l,a,n,i=e.localItems.filter(e=>"room"===e.type),c=e.localItems.filter(e=>"furniture"===e.type),m=(e,t,s,o,r)=>{if(e===t)return"center";let l=e.position.x+e.size.width/2,a=180/Math.PI*Math.atan2(l-s,-(e.position.y+e.size.height/2-o));for(let e of(a<0&&(a+=360),r))if(337.5!==e.range[0]){if(a>=e.range[0]&&a<e.range[1])return e.name}else if(a>=e.range[0]||a<e.range[1])return e.name},{centerRoom:d,centerX:x,centerY:h}=(t=0,s=0,r=i[0].position.x+i[0].size.width/2,l=i[0].position.y+i[0].size.height/2,a=i[0].position.x+i[0].size.width/2,n=i[0].position.y+i[0].size.height/2,i.forEach(e=>{e.position.x+e.size.width/2<r&&(r=e.position.x+e.size.width/2),e.position.y+e.size.height/2<l&&(l=e.position.y+e.size.height/2),e.position.x+e.size.width/2>a&&(a=e.position.x+e.size.width/2),e.position.y+e.size.height/2>n&&(n=e.position.y+e.size.height/2)}),t=(r+a)/2,s=(l+n)/2,{centerRoom:i.find(e=>e.position.x<=t&&e.position.x+e.size.width>=t&&e.position.y<=s&&e.position.y+e.size.height>=s),centerX:t,centerY:s}),p=e.compassRotation||0,g=o.findIndex(e=>e.baseAngle===p%360),f=o.slice(g).concat(o.slice(0,g)).map((e,t)=>({...e,name:o[t].name})),u=i.map(e=>{let t=m(e,d,x,h,f);return{...e,direction:t}});return{...e,localItems:[...u,...c]}}},60470:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>b});var o=s(25932),r=s(34831),l=s(27726),a=s(7419),n=s.n(a),i=s(82940),c=s.n(i),m=s(99836);n().extend(o.t).extend(r.sM).extend(l.z0);let d=n()(c()().format("YYYY-MM-DD")).char8.year.toString(),{LYGanzhiMap:x,LYzhiMap:h,LYStarMap:p,LYSihuaMap:g,spouseStarMap:f,spouseSihuaMap:u}=function(){let e=c()().format("YYYY"),t={},s={},o={},r={},l={},a={};for(let n=1;n<=12;n++){let i=e+"-"+(n<10?"0"+n:""+n)+"-15",c=m.astro.bySolar(i,0,"男",!0,"zh-CN").horoscope(i);s[n]=c.monthly.earthlyBranch,t[n]=c.monthly.heavenlyStem+c.monthly.earthlyBranch,o[n]=c.palace("命宫","monthly").majorStars.map(e=>e.name).toString(),l[n]=c.palace("夫妻","monthly").majorStars.map(e=>e.name).toString(),r[n]=c.palace("命宫","monthly").mutagedPlaces().map(e=>e.name).toString(),a[n]=c.palace("夫妻","monthly").mutagedPlaces().map(e=>e.name).toString()}return{LYGanzhiMap:t,LYzhiMap:s,LYStarMap:o,LYSihuaMap:r,spouseStarMap:l,spouseSihuaMap:a}}();(function(){let e=c()().format("YYYY-MM-DD");n()(e).char8.month.toString()})(),function(){let e=c()().format("YYYY-MM-DD");m.astro.bySolar(e,0,"男",!0,"zh-CN").horoscope(e,0).palace("夫妻","yearly").majorStars.map(e=>e.name).toString()}();let y={};function b(e,t){var s;let o=c()(e).format("YYYY-MM-DD HH:mm:ss");if(console.log("birthStr",o),y[o+"-"+t])return y[o+"-"+t];let r=Math.floor(c()(e).hour()/2),l=c()(e).format("YYYY-MM-DD"),a=m.astro.bySolar(l,r,"female"==t?"女":"男",!0,"zh-CN"),i=a.palace("命宫"),x=a.palace("身宫"),h=a.palace("迁移").majorStars.map(e=>e.name).toString(),p=a.horoscope(l,r),g=n()(o),f=function(e,t,s,o,r,l,a,n){let i={金:0,木:0,水:0,火:0,土:0},c=[e,t,s,o,r,l,a,n];c.forEach(e=>{["金","木","水","火","土"].includes(e)&&i[e]++});let m=c.length;return"金:".concat((i.金/m*100).toFixed(2),"%，木:").concat((i.木/m*100).toFixed(2),"%，水:").concat((i.水/m*100).toFixed(2),"%，火:").concat((i.火/m*100).toFixed(2),"%，土:").concat((i.土/m*100).toFixed(2),"%")}(g.char8.year.stem.e5.name,g.char8.year.branch.e5.name,g.char8.month.stem.e5.name,g.char8.month.branch.e5.name,g.char8.day.stem.e5.name,g.char8.day.branch.e5.name,g.char8.hour.stem.e5.name,g.char8.hour.branch.e5.name),u=g.char8.day.branch.hiddenStems.map(e=>e.name).toString(),b=g.char8.year.branch.hiddenStems,j=g.char8.month.branch.hiddenStems,N=g.char8.day.branch.hiddenStems,w=g.char8.hour.branch.hiddenStems,S=g.char8ex(+("female"!==t)),F=S.year,T=S.month,C=S.day,A=S.hour,E={nayin:g.char8.year.takeSound,wuxingJu:(s=g.char8.year.takeSoundE5.toString(),"".concat(s).concat(v[s],"局")),year:g.char8.year.toString(),month:g.char8.month.toString(),day:g.char8.day.toString(),hour:g.char8.hour.toString(),wuxingScale:f,rizhiCanggan:u,mingPalace:"{主星：".concat(i.majorStars.map(e=>e.name).toString(),",主星亮度：").concat(i.majorStars.map(e=>e.brightness||"").toString(),", 辅星： ").concat(i.minorStars.map(e=>e.name).toString(),", 四化：").concat(i.mutagedPlaces().map(e=>e.name).toString(),"}"),bodyPalace:"{主星：".concat(x.majorStars.map(e=>e.name).toString(),",主星亮度：").concat(x.majorStars.map(e=>e.brightness||"").toString(),", 辅星： ").concat(x.minorStars.map(e=>e.name).toString(),", 四化：").concat(x.mutagedPlaces().map(e=>e.name).toString(),"}"),qianyiPalace:h,dayunGanzhi:p.decadal.heavenlyStem+p.decadal.earthlyBranch,liunianGanzhi:d,yearStemTenGod:F.stemTenGod.name,yearBranchTenGod:F.branchTenGod.map(e=>e.name).toString(),monthStemTenGod:T.stemTenGod.name,monthBranchTenGod:T.branchTenGod.map(e=>e.name).toString(),dayStemTenGod:C.stemTenGod.name,dayBranchTenGod:C.branchTenGod.map(e=>e.name).toString(),hourStemTenGod:A.stemTenGod.name,hourBranchTenGod:A.branchTenGod.map(e=>e.name).toString(),yearGods:F.gods.map(e=>e.name).toString(),monthGods:T.gods.map(e=>e.name).toString(),dayGods:C.gods.map(e=>e.name).toString(),yearStem:g.char8.year.stem.name,yearStemWuxing:g.char8.year.stem.e5.name,yearBranch:g.char8.year.branch.name,yearBranchWuxing:g.char8.year.branch.e5.name,monthStem:g.char8.month.stem.name,monthStemWuxing:g.char8.month.stem.e5.name,monthBranch:g.char8.month.branch.name,monthBranchWuxing:g.char8.month.branch.e5.name,dayStem:g.char8.day.stem.name,dayStemWuxing:g.char8.day.stem.e5.name,dayBranch:g.char8.day.branch.name,dayBranchWuxing:g.char8.day.branch.e5.name,hourStem:g.char8.hour.stem.name,hourStemWuxing:g.char8.hour.stem.e5.name,hourBranch:g.char8.hour.branch.name,hourBranchWuxing:g.char8.hour.branch.e5.name,yearNayin:g.char8.year.takeSound,monthNayin:g.char8.month.takeSound,dayNayin:g.char8.day.takeSound,hourNayin:g.char8.hour.takeSound,yearNayinWuxing:g.char8.year.takeSoundE5.toString(),monthNayinWuxing:g.char8.month.takeSoundE5.toString(),dayNayinWuxing:g.char8.day.takeSoundE5.toString(),hourNayinWuxing:g.char8.hour.takeSoundE5.toString(),yearBranchHiddenStems:b.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),monthBranchHiddenStems:j.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),dayBranchHiddenStems:N.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),hourBranchHiddenStems:w.map(e=>({stem:e.name,element:e.e5.name,strength:e.value}))};return y[o+"-"+t]=E,console.log("result",E),E}let v={水:"二",木:"三",金:"四",土:"五",火:"六"}},67916:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var o=s(95155),r=s(12115),l=s(35695),a=s(45493),n=s(11518),i=s.n(n),c=s(60470),m=s(66766);s(76142);var d=s(69303);function x(e){var t,s,l,a,n,x,h,p;let{analysis:g,mingGuaInfo:f,userProfile:u,designSummary:y,roomAnalyses:b,yearlyAdvice:v}=e,[j,N]=(0,r.useState)("overview"),[w,S]=(0,r.useState)(0),[F,T]=(0,r.useState)(null),[C,A]=(0,r.useState)(null),[E,k]=(0,r.useState)(!1),[W,z]=(0,r.useState)({yearlyFocus:!1,nineMovement:!1,personalAdvice:!1}),B=e=>{z(t=>({...t,[e]:!t[e]}))},[I,R]=(0,r.useState)(null),[D,M]=(0,r.useState)(null),[P,G]=(0,r.useState)([]),[O,Y]=(0,r.useState)(!1),[H,_]=(0,r.useState)(!1),[L,K]=(0,r.useState)(!1),{preview:U}=(0,d.l)(),J={1:{trigram:"坎",group:"東四命",element:"水",direction:"north",name:"坎卦"},2:{trigram:"坤",group:"西四命",element:"土",direction:"southWest",name:"坤卦"},3:{trigram:"震",group:"東四命",element:"木",direction:"east",name:"震卦"},4:{trigram:"巽",group:"東四命",element:"木",direction:"southEast",name:"巽卦"},6:{trigram:"乾",group:"西四命",element:"金",direction:"northWest",name:"乾卦"},7:{trigram:"兌",group:"西四命",element:"金",direction:"west",name:"兌卦"},8:{trigram:"艮",group:"西四命",element:"土",direction:"northEast",name:"艮卦"},9:{trigram:"離",group:"東四命",element:"火",direction:"south",name:"離卦"}},V=(e,t)=>{let s;let o=parseInt(e);return"男"===t?0==(s=(100-o%100)%9)?9:s:0==(s=(o%100-4)%9)?9:s},q=e=>{let t={金:0,木:0,水:0,火:0,土:0};[e.yearStemWuxing,e.yearBranchWuxing,e.monthStemWuxing,e.monthBranchWuxing,e.dayStemWuxing,e.dayBranchWuxing,e.hourStemWuxing,e.hourBranchWuxing].forEach(e=>{t.hasOwnProperty(e)&&t[e]++});let s=Object.keys(t).filter(e=>0===t[e]);return{elements:t,status:0===s.length?"五行齊全":"缺".concat(s.join("、"))}},$=(e,t)=>{if(!t)return"根據八字信息生成個人分析，但命卦信息不完整。";let s=q(e);return"根據以下八字信息，生成一段分析，描述該人的五行特徵、主要元素、性格特徵、潜在的優勢與劣勢，以及相應的建議來平衡五行。請包括具體的顏色、物品或佈局建議。\n\n八字信息：\n年柱：".concat(e.year,"\n月柱：").concat(e.month,"  \n日柱：").concat(e.day,"\n時柱：").concat(e.hour,"\n命卦：").concat(t.name,"（").concat(t.group,"，").concat(t.element,"）\n五行分佈：金").concat(s.elements.金,"、木").concat(s.elements.木,"、水").concat(s.elements.水,"、火").concat(s.elements.火,"、土").concat(s.elements.土,"\n五行狀態：").concat(s.status,"\n納音：").concat(e.nayin,"\n\n請用繁體中文生成約150字的分析，格式如下範例：\n您八字木火旺盛，主元素為木。火能助木生髮，表現為熱情積極、充滿活力，但五行中土元素缺乏，穩定性和耐力較弱。金元素雖有存在，但較弱。建議補充土的能量，如黃色、褐色飾品及生活環境中註重土屬性佈局，以平衡五行，助於身心健康和運勢提升。整體個性堅韌樂觀，富有進取心與責任感。")},Q=async(e,t)=>{if(console.log("fetchPersonalAnalysisSummary called with:",{wuxingData:e,mingGuaInfo:t,personalAnalysisSummary:C}),console.log("roomAnalyses:",b),!e||!t){console.log("Early return due to missing data:",{noWuxingData:!e,noMingGuaInfo:!t});return}if(C){console.log("Already has personal analysis, skipping");return}console.log("Starting personal analysis API call..."),k(!0);try{let s=$(e,t);console.log("Generated prompt:",s);let o=await fetch("/api/personal-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s,userProfile:{...u,wuxingData:e,mingGuaInfo:t}})});if(console.log("API response status:",o.status),o.ok){let e=await o.json();console.log("API response data:",e),A(e.analysis)}else{console.log("API failed, using fallback");let s=X(e,t);A(s)}}catch(o){console.error("Error in fetchPersonalAnalysisSummary:",o);let s=X(e,t);console.log("Using fallback analysis:",s),A(s)}finally{console.log("Setting loading to false"),k(!1)}},X=(e,t)=>{if(!t)return"個人命卦信息不完整，無法生成詳細分析。";let s={木:e.wood||0,火:e.fire||0,土:e.earth||0,金:e.metal||0,水:e.water||0},o=Object.entries(s).reduce((e,t)=>s[e[0]]>s[t[0]]?e:t)[0],r=Object.entries(s).reduce((e,t)=>s[e[0]]<s[t[0]]?e:t)[0];return"您的命卦為".concat(t.name,"，五行以").concat(o,"為主導，").concat({木:"性格堅韌積極，富有成長性和創造力",火:"熱情奔放，充滿活力和進取心",土:"穩重踏實，具有包容性和責任感",金:"理性堅毅，具有決斷力和正義感",水:"智慧靈活，具有適應性和洞察力"}[o],"。").concat(r,"元素相對較弱，建議在生活中適當補充").concat(r,"的能量，如選擇對應顏色的飾品或居家佈置。納音為").concat(e.nayin,"，整體運勢").concat("東四命"===t.group?"偏向東方吉位":"偏向西方吉位","，適合相應的風水佈局來提升整體運勢。")};(0,r.useEffect)(()=>{console.log("useEffect triggered with userProfile:",u);let e=(null==u?void 0:u.birthDate)||(null==u?void 0:u.birthDateTime)||((null==u?void 0:u.birthYear)?new Date(u.birthYear,(u.birthMonth||1)-1,u.birthDay||1,u.birthHour||12):null),t=null==u?void 0:u.gender;if(console.log("Extracted data:",{birthDate:e,gender:t}),e&&t){console.log("Processing wuxing calculation...");try{let s=new Date(e),o=(0,c.Ay)(s,"男"===t||"male"===t?"male":"female"),r=s.getFullYear(),l=V(r,"male"===t||"female"===t?"male"===t?"男":"女":t),a=J[l];console.log("Calculation results:",{wuxingData:o,mingGuaInfo:a,mingGuaNumber:l}),o&&a&&l?(console.log("Setting localPersonalData and calling fetchPersonalAnalysisSummary"),T({wuxingData:o,mingGuaInfo:a,mingGuaNumber:l}),Q(o,a)):console.log("Missing data for AI analysis:",{hasWuxingData:!!o,hasMingGuaInfo:!!a,hasMingGuaNumber:!!l})}catch(e){console.error("Error in local calculation:",e)}}else console.log("Missing birthDate or gender, not processing")},[u]);let Z={northEast:{star:"五黃廉貞星",element:"土",type:"凶",color:"bg-red-500"},east:{star:"九紫右弼星",element:"火",type:"吉",color:"bg-green-500"},southEast:{star:"一白貪狼星",element:"水",type:"吉",color:"bg-green-500"},south:{star:"二黑巨門星",element:"土",type:"凶",color:"bg-red-500"},southWest:{star:"八白左輔星",element:"土",type:"吉",color:"bg-green-500"},west:{star:"七赤破軍星",element:"金",type:"凶",color:"bg-red-500"},northWest:{star:"三碧祿存星",element:"木",type:"凶",color:"bg-red-500"},north:{star:"四綠文曲星",element:"木",type:"吉",color:"bg-green-500"},center:{star:"六白武曲星",element:"金",type:"吉",color:"bg-green-500"}},ee={northEast:"生氣",east:"五鬼",southEast:"禍害",south:"六煞",southWest:"伏位",west:"延年",northWest:"天醫",north:"絕命",center:"中宮"},et=e=>({生氣:"生氣-健康事業",延年:"延年-長壽人緣",天醫:"天醫-健康",伏位:"伏位-安定",五鬼:"五鬼-意外災禍",禍害:"禍害-是非口舌",六煞:"六煞-感情破財",絕命:"絕命-重大凶險"})[e]||e,{auspiciousData:es,inauspiciousData:eo}=(()=>{let e={northEast:"東北",east:"正東",southEast:"東南",south:"正南",southWest:"西南",west:"正西",northWest:"西北",north:"正北",center:"中宮"};return{auspiciousData:["northEast","west","northWest","southWest","center"].map(t=>{let s=Z[t];return{position:et(ee[t]),direction:e[t],star:(null==s?void 0:s.star)||"未知",type:(null==s?void 0:s.type)||"未知"}}),inauspiciousData:["east","southEast","south","north"].map(t=>{let s=Z[t];return{position:et(ee[t]),direction:e[t],star:(null==s?void 0:s.star)||"未知",type:(null==s?void 0:s.type)||"未知"}})}})(),er=(()=>{let e=(null==y?void 0:y.compassRotation)||0,t=e=>{let t=(e%360+360)%360;if(t>=337.5||t<22.5)return{direction:"north",chinese:"正北",degree:"0\xb0"};if(t>=22.5&&t<67.5)return{direction:"northEast",chinese:"東北",degree:"45\xb0"};if(t>=67.5&&t<112.5)return{direction:"east",chinese:"正東",degree:"90\xb0"};if(t>=112.5&&t<157.5)return{direction:"southEast",chinese:"東南",degree:"135\xb0"};if(t>=157.5&&t<202.5)return{direction:"south",chinese:"正南",degree:"180\xb0"};else if(t>=202.5&&t<247.5)return{direction:"southWest",chinese:"西南",degree:"225\xb0"};else if(t>=247.5&&t<292.5)return{direction:"west",chinese:"正西",degree:"270\xb0"};else return{direction:"northWest",chinese:"西北",degree:"315\xb0"}},s=t(e),o=t((e+180)%360),r={north:{trigram:"坎",group:"東四宅",name:"坎宅",description:"坎宅（坐北向南）",element:"水"},east:{trigram:"震",group:"東四宅",name:"震宅",description:"震宅（坐東向西）",element:"木"},southEast:{trigram:"巽",group:"東四宅",name:"巽宅",description:"巽宅（坐東南向西北）",element:"木"},south:{trigram:"離",group:"東四宅",name:"離宅",description:"離宅（坐南向北）",element:"火"},southWest:{trigram:"坤",group:"西四宅",name:"坤宅",description:"坤宅（坐西南向東北）",element:"土"},west:{trigram:"兌",group:"西四宅",name:"兌宅",description:"兌宅（坐西向東）",element:"金"},northWest:{trigram:"乾",group:"西四宅",name:"乾宅",description:"乾宅（坐西北向東南）",element:"金"},northEast:{trigram:"艮",group:"西四宅",name:"艮宅",description:"艮宅（坐東北向西南）",element:"土"}}[o.direction],l=(null==r?void 0:r.group)||"未知宅型",a=(null==r?void 0:r.name)||"未知宅";return{facing:s,sitting:o,houseType:l,houseName:a,houseElement:(null==r?void 0:r.element)||"未知",houseTrigram:(null==r?void 0:r.trigram)||"未知",sitTrigramName:({north:"坎山",northEast:"艮山",east:"震山",southEast:"巽山",south:"離山",southWest:"坤山",west:"兌山",northWest:"乾山"})[o.direction]||"未知山",faceTrigramName:({north:"坎向",northEast:"艮向",east:"震向",southEast:"巽向",south:"離向",southWest:"坤向",west:"兌向",northWest:"乾向"})[s.direction]||"未知向",compassRotation:Math.round(e),description:"".concat(s.chinese).concat(Math.round(e),"\xb0")}})();(e=>{let{houseType:t,houseName:s,houseElement:o,houseTrigram:r}=e;return"東四宅"===t?"東四宅包括坎、震、巽、離四個卦，對應北、東、東南、南四個方位。東四宅的居住者通常性格較為靈活、有活力，適合動態的生活方式。":"西四宅包括坤、兌、乾、艮四個卦，對應西南、西、西北、東北四個方位。西四宅的居住者通常性格較為穩重、有耐性，適合穩定的生活方式。"})(er);let el=(e,t,s,o,r)=>{try{let o;try{let t=e,s=e.match(/\{[\s\S]*\}/);if(s)t=s[0];else{let o=e.split("請按以下嚴格的JSON格式輸出：")[1];o&&(s=o.match(/\{[\s\S]*\}/))&&(t=s[0])}if(!s){let s=e.match(/\{[\s\S]*$/);if(s){let e=((t=s[0]).match(/\{/g)||[]).length,o=(t.match(/\}/g)||[]).length;e>o&&(t+="}".repeat(e-o))}}o=JSON.parse(t)}catch(r){o=ea(e,t,s)}return en(o,t,s)}catch(e){return ec(t,s)}},ea=(e,t,s)=>{let o={yearSummary:"",recommendations:{furniture:[],colors:[],habits:[],items:[]},comprehensiveAdvice:{overall:"",seasonal:"",personal:""}};for(let s of[/2025年[^。]*。/,RegExp("".concat(t.roomType,"位於[^。]*。"),"g"),/飛星[^。]*屬[^。]*。/,/八宅位置[^。]*。/]){let t=e.match(s);if(t){o.yearSummary=t[0];break}}let r=(s,o)=>{let r=[];return o.forEach(t=>{let s=RegExp("".concat(t,"[：:]([\\s\\S]*?)(?=\\n\\s*[\\w\\u4e00-\\u9fa5]+[：:]|$)"),"g"),o=e.match(s);o&&o.forEach(e=>{let t=e.match(/[•·▪▫\-\d+\.]\s*([^•·▪▫\-\n]+)/g);t&&t.forEach(e=>{let t=e.replace(/[•·▪▫\-\d+\.]\s*/,"").trim();t.length>15&&r.push(t)})})}),r.length>0?r:["正在生成".concat(t.roomType).concat(s,"建議...")]};o.recommendations.furniture=r("家具",["家具擺放","擺放建議","配置建議","朝向建議"]),o.recommendations.colors=r("色彩",["色彩建議","顏色搭配","元素色彩","配色方案"]),o.recommendations.habits=r("習慣",["生活習慣","行為建議","日常指導","個人化行為"]),o.recommendations.items=r("物品",["風水用品","擺設建議","化煞物品","調理物品"]);let l=(s,o)=>{for(let t of o){let s=RegExp("".concat(t,"[：:]([^。]*[。])"),"g"),o=e.match(s);if(o&&o[0])return o[0].replace(/[^：:]*[：:]/,"").trim()}return"正在生成".concat(t.roomType).concat(s,"分析...")};return o.comprehensiveAdvice.overall=l("整體",["整體格局分析","格局分析","整體分析"]),o.comprehensiveAdvice.seasonal=l("季節",["季節性注意事項","季節建議","四季調整"]),o.comprehensiveAdvice.personal=l("個人",["個人化建議","個人建議","專屬建議"]),o},en=(e,t,s)=>{var o,r,l,a,n,i,c;return{yearSummary:e.yearSummary||"正在為".concat(t.roomType,"生成2025年AI風水分析..."),recommendations:{furniture:ei(null===(o=e.recommendations)||void 0===o?void 0:o.furniture,"".concat(t.roomType,"家具建議")),colors:ei(null===(r=e.recommendations)||void 0===r?void 0:r.colors,"".concat(t.roomType,"色彩建議")),habits:ei(null===(l=e.recommendations)||void 0===l?void 0:l.habits,"".concat(t.roomType,"習慣建議")),items:ei(null===(a=e.recommendations)||void 0===a?void 0:a.items,"".concat(t.roomType,"物品建議"))},comprehensiveAdvice:{overall:(null===(n=e.comprehensiveAdvice)||void 0===n?void 0:n.overall)||"正在深度分析".concat(t.roomType,"整體風水格局..."),seasonal:(null===(i=e.comprehensiveAdvice)||void 0===i?void 0:i.seasonal)||"正在生成".concat(t.roomType,"季節性風水建議..."),personal:(null===(c=e.comprehensiveAdvice)||void 0===c?void 0:c.personal)||"正在結合命卦生成個人化建議..."},isLucky:(null==s?void 0:s.type)==="吉"}},ei=(e,t)=>Array.isArray(e)&&e.length>0?e:["正在生成".concat(t,"...")],ec=(e,t)=>({yearSummary:"正在連接AI為".concat(e.roomType,"生成專業風水分析，請稍候..."),recommendations:{furniture:["正在生成".concat(e.roomType,"專業家具擺放建議...")],colors:["正在生成".concat(e.roomType,"專業色彩風水建議...")],habits:["正在生成".concat(e.roomType,"個人化生活指導...")],items:["正在生成".concat(e.roomType,"專業風水用品建議...")]},comprehensiveAdvice:{overall:"正在進行".concat(e.roomType,"深度風水格局分析，請稍候..."),seasonal:"正在生成".concat(e.roomType,"四季風水調整指南..."),personal:"正在結合您的個人命卦生成專屬建議..."},isLucky:(null==t?void 0:t.type)==="吉"}),em=(()=>{let e=parseInt(u.birthYear),t=parseInt(u.birthMonth)||6;return{birthYear:e,birthMonth:t,birthDay:parseInt(u.birthDay)||26,gender:"male"===u.gender?"男":"female"===u.gender?"女":u.gender,age:2025-e,yearlyAdvice:v||null}})();return(()=>{let e=y.totalRooms,t=y.auspiciousRooms;return 0===e?0:Math.round(t/e*100)})(),(0,o.jsxs)("div",{className:"w-full sm:w-[95%] lg:w-[85%] mt-6 sm:mt-8 lg:mt-10 min-h-screen p-3 sm:p-4 lg:p-6",style:{backgroundColor:"#EFEFEF"},children:[(0,o.jsxs)("div",{className:"p-3 mb-4 sm:p-4 lg:p-6",children:[(0,o.jsx)("div",{className:"flex flex-col items-center justify-center lg:flex-row lg:items-start lg:justify-start",children:(0,o.jsx)("h1",{style:{fontFamily:"Noto Serif TC, serif",fontWeight:900,fontSize:"clamp(32px, 8vw, 56px)",color:"#374A37",lineHeight:1.1,WebkitTextStroke:"1px #374A37"},className:"mb-4 text-center lg:text-left lg:mb-10",children:"全屋風水分析"})}),(0,o.jsx)("div",{className:"w-full px-3 pb-6 mx-auto mb-1 text-center sm:px-4 lg:px-5 sm:pb-8 lg:text-left",children:(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK, sans-serif",fontWeight:400,fontSize:"clamp(16px, 4vw, 20px)",color:"#000000",lineHeight:"clamp(1.6, 2vw, 2.0)"},children:"屋主的個人八宅吉位是根本，八宅吉位不會因流年凶星而失效。流年凶星僅是提醒在特定時段內，相關方位需要更加謹慎防範和化解，以避免凶煞激發帶來的不利影響。風水調理是一種動態與靜態的結合，類似於醫療中對長期體質和季節性流感的關係，需要針對性地進行調整，兩者相輔相成，並不是彼此替代的關係。"})})]}),(0,o.jsx)("div",{className:"p-3 mb-4 bg-white sm:p-4 lg:p-6",style:{borderRadius:"clamp(25px, 6vw, 45px)",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},children:(0,o.jsx)("div",{className:"p-4 bg-white sm:p-6 lg:p-8",children:(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,o.jsx)("div",{className:"hidden lg:flex lg:w-[10%] items-start justify-center",children:(0,o.jsx)("div",{className:"text-[96px] font-extrabold leading-none",style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,color:"#A3B116",writingMode:"vertical-rl",textOrientation:"upright",WebkitTextStroke:"1px #A3B116"},children:"個人命卦"})}),(0,o.jsxs)("div",{className:"w-full lg:w-[90%] lg:pl-8",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-4 mb-6 md:flex-row",children:[(0,o.jsx)("div",{className:"flex items-center justify-center md:justify-start",children:(0,o.jsx)("img",{src:"/images/life/".concat((null==F?void 0:null===(t=F.mingGuaInfo)||void 0===t?void 0:t.trigram)||f.trigram,".png"),alt:"".concat((null==F?void 0:null===(s=F.mingGuaInfo)||void 0===s?void 0:s.trigram)||f.trigram,"卦"),className:"w-[200px] h-[200px] sm:w-[250px] sm:h-[250px] lg:w-[300px] lg:h-[300px] object-contain"})}),(0,o.jsxs)("div",{className:"flex-1 space-y-3 sm:space-y-4",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4",children:[(0,o.jsx)("div",{className:"w-full sm:w-[154px] h-[60px] sm:h-[89px] rounded-[1000px] flex items-center justify-center",style:{backgroundColor:"#EFEFEF"},children:(0,o.jsx)("span",{className:"text-[24px] sm:text-[32px] font-extrabold",style:{fontFamily:"Noto Serif TC",fontWeight:800,color:"#515151"},children:em.gender})}),(0,o.jsx)("div",{className:"flex-1 h-[60px] sm:h-[89px] rounded-[1000px] flex items-center justify-center",style:{backgroundColor:"#EFEFEF"},children:(0,o.jsxs)("span",{className:"text-[20px] sm:text-[24px] lg:text-[32px] font-extrabold",style:{fontFamily:"Noto Serif TC",fontWeight:800,color:"#515151"},children:[em.birthYear,"年",em.birthMonth,"月",em.birthDay,"日"]})})]}),(0,o.jsx)("div",{className:"rounded-[1000px] flex items-center justify-center h-[60px] sm:h-[89px]",style:{backgroundColor:"#567156"},children:(0,o.jsx)("span",{className:"text-[32px] sm:text-[48px] lg:text-[64px] font-extrabold text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,WebkitTextStroke:"1px white"},children:(null==F?void 0:null===(l=F.mingGuaInfo)||void 0===l?void 0:l.group)||f.group})})]}),(0,o.jsxs)("div",{className:"w-full sm:w-[200px] md:w-[150px] border-2 rounded-lg flex flex-col items-center justify-center relative overflow-hidden mx-auto",style:{borderColor:"#A3B116",height:"200px"},children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-no-repeat opacity-50",style:{backgroundImage:"url(/images/elements/".concat((null==F?void 0:null===(a=F.mingGuaInfo)||void 0===a?void 0:a.element)||f.element,".png)"),backgroundSize:"80px 80px",backgroundPosition:"center 70%",zIndex:0}}),(0,o.jsx)("div",{className:"text-[24px] sm:text-[32px] mb-2 relative z-10",style:{color:"#374A37",fontFamily:"Noto Serif TC, serif",fontWeight:800,WebkitTextStroke:"1px #374A37",top:"0%",transform:"translateY(-50%)"},children:"五行"}),(0,o.jsx)("div",{className:"text-[48px] sm:text-[64px] font-black relative z-10",style:{fontFamily:"Noto Serif TC, serif",fontWeight:900,top:"10%",left:"10%",color:{土:"#DEAB20",木:"#567156",水:"#939393",火:"#B4003C",金:"#B2A062"}[(null==F?void 0:null===(h=F.mingGuaInfo)||void 0===h?void 0:h.element)||f.element]||"#567156",WebkitTextStroke:"1px ".concat({土:"#DEAB20",木:"#567156",水:"#939393",火:"#B4003C",金:"#B2A062"}[(null==F?void 0:null===(p=F.mingGuaInfo)||void 0===p?void 0:p.element)||f.element]||"#567156")},children:(null==F?void 0:null===(n=F.mingGuaInfo)||void 0===n?void 0:n.element)||f.element})]})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-4 lg:gap-25 px-3 sm:px-4 lg:px-5 py-4 sm:py-6 mb-6 sm:mb-8 w-full lg:w-[90%] rounded-full",style:{boxShadow:"0 2px 5.3px rgba(0, 0, 0, 0.25)"},children:[(0,o.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-4 sm:gap-4 lg:gap-6 lg:mb-0",children:(()=>{let e=(null==u?void 0:u.birthDate)||(null==u?void 0:u.birthDateTime)||((null==u?void 0:u.birthYear)?new Date(u.birthYear,(u.birthMonth||1)-1,u.birthDay||1,u.birthHour||12):null);if(!e||!(null==u?void 0:u.gender))return(0,o.jsx)("div",{className:"text-sm sm:text-base",children:"資料不完整"});let t="男"===u.gender||"male"===u.gender?"male":"female",s=(0,c.Ay)(e,t);if(!s)return(0,o.jsx)("div",{className:"text-sm sm:text-base",children:"計算中..."});let r=q(s);return[{name:"土",count:r.elements.土,icon:"/images/elements/土.png",color:"#DEAB20"},{name:"木",count:r.elements.木,icon:"/images/elements/木.png",color:"#567156"},{name:"水",count:r.elements.水,icon:"/images/elements/水.png",color:"#939393"},{name:"火",count:r.elements.火,icon:"/images/elements/火.png",color:"#B4003C"},{name:"金",count:r.elements.金,icon:"/images/elements/金.png",color:"#B2A062"}].map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("img",{src:e.icon,alt:e.name,className:"w-6 h-6 sm:w-8 sm:h-8"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-600 sm:text-md",children:e.name}),(0,o.jsx)("span",{className:"text-lg sm:text-xl font-bold",style:{color:e.color},children:e.count})]},t))})()}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:(()=>{let e=(null==u?void 0:u.birthDate)||(null==u?void 0:u.birthDateTime)||((null==u?void 0:u.birthYear)?new Date(u.birthYear,(u.birthMonth||1)-1,u.birthDay||1,u.birthHour||12):null);if(!e||!(null==u?void 0:u.gender))return(0,o.jsx)("div",{children:"資料不完整"});let t="男"===u.gender||"male"===u.gender?"male":"female",s=(0,c.Ay)(e,t);if(!s)return(0,o.jsx)("div",{children:"計算中..."});let r=q(s);if(Object.values(r.elements).every(e=>e>=1))return(0,o.jsxs)("div",{className:"flex flex-col items-center gap-2 lg:flex-row lg:gap-2",children:[(0,o.jsx)("span",{className:"text-[24px] sm:text-[30px] font-bold",style:{color:"#A3B116",fontFamily:"Noto Serif TC, serif",WebkitTextStroke:"0.5px #A3B116"},children:"五行齊全"}),(0,o.jsx)("span",{className:"text-[18px] sm:text-[20px] lg:text-[25px] text-center lg:text-left",style:{color:"#515151",fontFamily:"Noto Serif TC, serif"},children:"- 沒有嚴重缺失某一元素"})]});{let e=Object.entries(r.elements).filter(e=>{let[t,s]=e;return 0===s}).map(e=>{let[t]=e;return t}),t={土:"#DEAB20",木:"#567156",水:"#939393",火:"#B4003C",金:"#B2A062"};return(0,o.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 lg:justify-start",children:e.map((s,r)=>(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{className:"text-[24px] sm:text-[30px] font-bold",style:{color:t[s]},children:s}),(0,o.jsx)("span",{className:"text-[18px] sm:text-[20px] lg:text-[25px]",style:{color:"#515151"},children:"缺失"}),r<e.length-1&&(0,o.jsx)("span",{className:"text-[18px] sm:text-[20px] lg:text-[25px] mx-1",style:{color:"#515151"},children:"、"})]},s))})}})()})]})}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-3 mb-6 sm:grid-cols-2 lg:grid-cols-4 sm:gap-4 sm:mb-8",children:(()=>{let e=(null==u?void 0:u.birthDate)||(null==u?void 0:u.birthDateTime)||((null==u?void 0:u.birthYear)?new Date(u.birthYear,(u.birthMonth||1)-1,u.birthDay||1,u.birthHour||12):null);if(!e||!(null==u?void 0:u.gender))return Array.from({length:4}).map((e,t)=>(0,o.jsx)("div",{className:"w-full h-[45px] sm:h-[55px] flex items-center justify-center animate-pulse rounded-full",style:{backgroundColor:"#EBEAEA"},children:(0,o.jsx)("div",{className:"w-3/4 h-4 bg-gray-300 rounded sm:h-6"})},t));let t="男"===u.gender||"male"===u.gender?"male":"female",s=(0,c.Ay)(e,t);return s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-full h-[45px] sm:h-[55px] flex items-center justify-center rounded-full",style:{backgroundColor:"#EBEAEA",fontFamily:"Noto Serif TC, serif"},children:(0,o.jsxs)("span",{className:"text-[18px] sm:text-[24px] lg:text-[32px] font-extrabold text-black",style:{fontFamily:"Noto Serif TC",fontWeight:800},children:["年柱 -"," ",s.year]})}),(0,o.jsx)("div",{className:"w-full h-[45px] sm:h-[55px] flex items-center justify-center rounded-full",style:{backgroundColor:"#EBEAEA",fontFamily:"Noto Serif TC, serif"},children:(0,o.jsxs)("span",{className:"text-[18px] sm:text-[24px] lg:text-[32px] font-extrabold text-black",style:{fontFamily:"Noto Serif TC",fontWeight:800},children:["月柱 -"," ",s.month]})}),(0,o.jsx)("div",{className:"w-full h-[45px] sm:h-[55px] flex items-center justify-center rounded-full",style:{backgroundColor:"#EBEAEA",fontFamily:"Noto Serif TC, serif"},children:(0,o.jsxs)("span",{className:"text-[18px] sm:text-[24px] lg:text-[32px] font-extrabold text-black",style:{fontFamily:"Noto Serif TC",fontWeight:800},children:["日柱 -"," ",s.day]})}),(0,o.jsx)("div",{className:"w-full h-[45px] sm:h-[55px] flex items-center justify-center rounded-full",style:{backgroundColor:"#EBEAEA",fontFamily:"Noto Serif TC, serif"},children:(0,o.jsxs)("span",{className:"text-[18px] sm:text-[24px] lg:text-[32px] font-extrabold text-black",style:{fontFamily:"Noto Serif TC",fontWeight:800},children:["時柱 -"," ",s.hour]})})]}):Array.from({length:4}).map((e,t)=>(0,o.jsx)("div",{className:"w-full h-[45px] sm:h-[55px] flex items-center justify-center animate-pulse rounded-full",style:{backgroundColor:"#EBEAEA"},children:(0,o.jsx)("div",{className:"w-3/4 h-4 bg-gray-300 rounded sm:h-6"})},t))})()}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"mb-3 sm:mb-4 text-[20px] sm:text-[24px] lg:text-[28px] text-black",style:{fontFamily:"Noto Sans HK",fontWeight:400,WebkitTextStroke:"0.5px black"},children:"個人特質分析"}),E?(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"w-full h-2 mb-2 bg-gray-200 rounded sm:h-3"}),(0,o.jsx)("div",{className:"w-4/5 h-2 mb-2 bg-gray-200 rounded sm:h-3"}),(0,o.jsx)("div",{className:"w-5/6 h-2 bg-gray-200 rounded sm:h-3"})]}):C?(0,o.jsx)("p",{className:"text-base leading-relaxed text-black sm:text-lg",children:C}):(0,o.jsx)("p",{className:"text-gray-600",children:"正在分析個人特質..."})]})]})]})})}),(0,o.jsx)("div",{className:"w-full p-4 mb-4 bg-white sm:p-6 lg:p-8",style:{borderRadius:"clamp(25px, 6vw, 45px)",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},children:(0,o.jsxs)("div",{className:"flex flex-col w-full gap-4 lg:flex-row lg:gap-0",children:[(0,o.jsx)("div",{className:"hidden lg:flex lg:w-[10%] lg:ml-4 items-center justify-center",children:(0,o.jsx)("div",{className:"text-[96px] font-extrabold leading-none",style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,color:"#A3B116",writingMode:"vertical-rl",textOrientation:"upright",WebkitTextStroke:"1px #A3B116"},children:"宅卦"})}),(0,o.jsx)("div",{className:"block mb-4 text-center lg:hidden",children:(0,o.jsx)("h3",{className:"text-[32px] font-extrabold",style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,color:"#A3B116",WebkitTextStroke:"1px #A3B116"},children:"宅卦"})}),(0,o.jsxs)("div",{className:"w-full lg:w-[20%] flex flex-col items-center justify-center px-2 sm:px-4",children:[(0,o.jsx)("div",{className:"mb-3 sm:mb-4",children:(0,o.jsx)("img",{src:"/images/directions/".concat((()=>{let e=er.description;return e.includes("正北")?"North":e.includes("正南")?"South":e.includes("正東")?"East":e.includes("正西")?"West":e.includes("東北")?"NorthEast":e.includes("西北")?"NorthWest":e.includes("東南")?"SouthEast":e.includes("西南")?"SouthWest":"North"})(),".png"),alt:er.description,className:"object-contain w-[40px] h-[40px] sm:w-[120px] sm:h-[120px]",style:{filter:"brightness(0)"}})}),(0,o.jsx)("div",{className:"text-[20px] sm:text-[24px] lg:text-[32px] font-[800] text-center",style:{fontFamily:"Noto Serif TC",color:"#9AAA00"},children:er.description})]}),(0,o.jsxs)("div",{className:"w-full lg:w-[70%] flex flex-col justify-center px-2 sm:px-4 lg:px-6",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-3 mb-4 sm:flex-row sm:gap-4 sm:mb-6",children:[(0,o.jsx)("div",{className:"flex-1 bg-white border-[2px] sm:border-[3px] px-3 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4 text-center",style:{borderColor:"#A3B116",borderRadius:"100px"},children:(0,o.jsxs)("div",{className:"text-[18px] sm:text-[24px] lg:text-[32px] font-[800]",style:{fontFamily:"Noto Serif TC",color:"#464646"},children:["坐：",er.sitting.chinese,"-",er.sitTrigramName]})}),(0,o.jsx)("div",{className:"flex-1 bg-white border-[2px] sm:border-[3px] px-3 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4 text-center",style:{borderColor:"#A3B116",borderRadius:"100px"},children:(0,o.jsxs)("div",{className:"text-[18px] sm:text-[24px] lg:text-[32px] font-[800]",style:{fontFamily:"Noto Serif TC",color:"#464646"},children:["向：",er.facing.chinese,"-",er.faceTrigramName]})})]}),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center w-full px-4 py-3 sm:flex-row sm:px-6 lg:px-8 sm:py-4",style:{backgroundColor:"#A3B116",borderRadius:"100px"},children:[(0,o.jsxs)("div",{className:"text-[28px] sm:text-[36px] lg:text-[48px] font-[800] text-center",style:{fontFamily:"Noto Serif TC",color:"#FFFFFF"},children:["屬",er.houseName]}),(0,o.jsxs)("div",{className:"text-[28px] sm:text-[36px] lg:text-[48px] font-[800] text-center",style:{fontFamily:"Noto Serif TC",color:"#FFFFFF"},children:["(",er.houseType,")"]})]})})]})]})}),(0,o.jsx)("div",{className:"w-full p-3 mb-4 bg-white rounded-[65px] sm:p-6 lg:p-8",style:{borderRadius:"20px sm:45px",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},children:(0,o.jsxs)("div",{className:"flex flex-col w-full gap-4 lg:flex-row lg:gap-0",children:[(0,o.jsxs)("div",{className:"w-full lg:w-[10%] lg:ml-4 flex items-center justify-center lg:justify-center",children:[(0,o.jsx)("div",{className:"block mb-4 lg:hidden",children:(0,o.jsx)("h2",{style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,fontSize:"clamp(28px, 6vw, 40px)",color:"#A3B116",textAlign:"center"},children:"命宅相配分析"})}),(0,o.jsx)("div",{className:"hidden font-extrabold leading-none lg:block",style:{fontFamily:"Noto Serif TC, serif",fontWeight:800,fontSize:"clamp(60px, 8vw, 96px)",color:"#A3B116",writingMode:"vertical-rl",textOrientation:"upright",WebkitTextStroke:"1px #A3B116"},children:"命宅"})]}),(0,o.jsx)("div",{className:"w-full lg:w-[45%] flex items-center justify-center px-3 sm:px-6 lg:px-10 mb-6 lg:mb-0",children:(0,o.jsxs)("div",{className:"grid items-center w-full grid-cols-1 gap-4 sm:grid-cols-3 sm:gap-2",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC, serif",color:"#374A37",WebkitTextStroke:"1px #374A37",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:800},children:"屋主"})}),(0,o.jsx)("div",{className:"px-4 sm:px-6 py-3 text-center bg-white border-[3px] mx-auto max-w-[200px]",style:{borderColor:"#A3B116",borderRadius:"100px"},children:(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC",color:"#464646",fontSize:"clamp(16px, 4vw, 24px)",fontWeight:800},children:(null==F?void 0:null===(x=F.mingGuaInfo)||void 0===x?void 0:x.group)||(null==f?void 0:f.group)||"計算中..."})})]}),(0,o.jsx)("div",{className:"order-first text-center sm:order-none",children:(0,o.jsx)("div",{className:"font-bold text-gray-400",style:{fontSize:"clamp(32px, 6vw, 40px)"},children:"VS"})}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC, serif",color:"#374A37",WebkitTextStroke:"1px #374A37",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:800},children:"宅卦"})}),(0,o.jsx)("div",{className:"px-4 sm:px-6 py-3 text-center bg-white border-[3px] mx-auto max-w-[200px]",style:{borderColor:"#A3B116",borderRadius:"100px"},children:(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC",color:"#464646",fontSize:"clamp(16px, 4vw, 20px)",fontWeight:800},children:er.houseType})})]})]})}),(0,o.jsx)("div",{className:"w-full lg:w-[45%] flex items-center justify-center px-3 sm:px-6",children:(0,o.jsx)("div",{className:"w-full",children:(()=>{var e;let t=(null==F?void 0:null===(e=F.mingGuaInfo)||void 0===e?void 0:e.group)||(null==f?void 0:f.group),s=er.houseType,r="東四命"===t&&"東四宅"===s||"西四命"===t&&"西四宅"===s,l="男"===em.gender?"男主":"女主";return(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"inline-flex items-center w-full justify-center py-3 sm:py-5 rounded-full font-bold mb-4 ".concat(r?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),style:{fontSize:"clamp(18px, 4vw, 32px)"},children:r?"✅ 命宅相配":"⚠️ 命宅不配"}),(0,o.jsx)("p",{className:"leading-relaxed",style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(14px, 3vw, 20px)",color:"#374A37"},children:r?"".concat(l,"命卦與宅卦相配，屬於理想的風水格局。此配置有利於居住者的整體運勢，能充分發揮住宅的吉利效應，建議繼續保持現有布局並適當加強吉位的能量。"):"".concat(l,"命卦與宅卦不相配，需特別重視凶方化解與吉方增強。建議通過五行調和、方位布局優化等方式來改善居住環境的風水效應。")})]})})()})})]})}),(0,o.jsxs)("div",{style:{borderRadius:"20px sm:45px",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},className:"jsx-53cf7689e61885af w-full p-3 mb-4 bg-white rounded-[65px] sm:p-6 lg:p-8",children:[(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af mb-6",children:[(0,o.jsx)("h2",{style:{fontFamily:"Noto Serif TC, serif",color:"#A3B116",WebkitTextStroke:"1px #A3B116",fontSize:"clamp(24px, 5vw, 52px)"},className:"jsx-53cf7689e61885af mb-4 font-bold text-center sm:text-left",children:"居室布局分析"}),(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex flex-col justify-center gap-3 mb-6 sm:flex-row sm:gap-6",children:[(0,o.jsx)("button",{onClick:()=>Y(!O),style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)",fontWeight:"700",boxShadow:O?"0 8px 25px rgba(34, 197, 94, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.1)"},className:"jsx-53cf7689e61885af "+"px-4 sm:px-8 py-3 sm:py-4 rounded-2xl border-3 transition-all duration-300 transform hover:scale-105 ".concat(O?"border-green-500 bg-green-100 text-green-700 shadow-lg shadow-green-200":"border-gray-300 bg-white text-gray-600 hover:border-green-400 shadow-md hover:shadow-lg"),children:"八宅吉凶"}),(0,o.jsx)("button",{onClick:()=>_(!H),style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)",fontWeight:"700",boxShadow:H?"0 8px 25px rgba(59, 130, 246, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.1)"},className:"jsx-53cf7689e61885af "+"px-4 sm:px-8 py-3 sm:py-4 rounded-2xl border-3 transition-all duration-300 transform hover:scale-105 ".concat(H?"border-blue-500 bg-blue-100 text-blue-700 shadow-lg shadow-blue-200":"border-gray-300 bg-white text-gray-600 hover:border-blue-400 shadow-md hover:shadow-lg"),children:"流年吉凶"}),(0,o.jsx)("button",{onClick:()=>K(!L),style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 18px)",fontWeight:"700",boxShadow:L?"0 8px 25px rgba(107, 114, 128, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.1)"},className:"jsx-53cf7689e61885af "+"px-4 sm:px-8 py-3 sm:py-4 rounded-2xl border-3 transition-all duration-300 transform hover:scale-105 ".concat(L?"border-gray-500 bg-gray-100 text-gray-700 shadow-lg shadow-gray-200":"border-gray-300 bg-white text-gray-600 hover:border-gray-400 shadow-md hover:shadow-lg"),children:"簡易指南"})]}),(O||H)&&(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex flex-col justify-center gap-4 mb-4 sm:flex-row sm:gap-8",children:[O&&(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex flex-col items-center gap-4 px-4 py-3 bg-white border border-gray-200 shadow-lg sm:flex-row sm:px-6 rounded-2xl",children:[(0,o.jsx)("h4",{style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 16px)"},className:"jsx-53cf7689e61885af font-bold text-center text-gray-700 sm:text-left",children:"八宅吉凶:"}),(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex items-center gap-4",children:[(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex items-center gap-2",children:[(0,o.jsx)("div",{className:"jsx-53cf7689e61885af w-4 h-4 bg-green-500 border-2 border-white rounded-full shadow-md"}),(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC, serif"},className:"jsx-53cf7689e61885af text-sm font-medium text-gray-600",children:"吉位"})]}),(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex items-center gap-2",children:[(0,o.jsx)("div",{className:"jsx-53cf7689e61885af w-4 h-4 bg-red-500 border-2 border-white rounded-full shadow-md"}),(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC, serif"},className:"jsx-53cf7689e61885af text-sm font-medium text-gray-600",children:"凶位"})]})]})]}),H&&(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex flex-col items-center gap-4 px-4 py-3 bg-white border border-gray-200 shadow-lg sm:flex-row sm:px-6 rounded-2xl",children:[(0,o.jsx)("h4",{style:{fontFamily:"Noto Serif TC, serif",fontSize:"clamp(14px, 3vw, 16px)"},className:"jsx-53cf7689e61885af font-bold text-center text-gray-700 sm:text-left",children:"流年吉凶:"}),(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex items-center gap-4",children:[(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex items-center gap-2",children:[(0,o.jsx)("div",{className:"jsx-53cf7689e61885af w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md"}),(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC, serif"},className:"jsx-53cf7689e61885af text-sm font-medium text-gray-600",children:"吉星"})]}),(0,o.jsxs)("div",{className:"jsx-53cf7689e61885af flex items-center gap-2",children:[(0,o.jsx)("div",{className:"jsx-53cf7689e61885af w-4 h-4 bg-purple-600 border-2 border-white rounded-full shadow-md"}),(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC, serif"},className:"jsx-53cf7689e61885af text-sm font-medium text-gray-600",children:"凶星"})]})]})]})]})]}),(0,o.jsx)(i(),{id:"53cf7689e61885af",children:".roomcanvas-container.jsx-53cf7689e61885af .canvasImage>div{height:1200px!important;overflow:visible!important}.roomcanvas-container.jsx-53cf7689e61885af .h-135{height:1200px!important;overflow:visible!important}"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-4 lg:grid-cols-2",children:[(0,o.jsxs)("div",{className:"p-6 bg-white",style:{borderRadius:"45px",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},children:[(0,o.jsx)("h3",{className:"mb-4",style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"35px",color:"#A3B116"},children:"四吉位&流年飛星"}),(0,o.jsx)("div",{className:"space-y-3",children:es.map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-[30%] px-3 py-2 text-center",style:{backgroundColor:"#EFEFEF",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"#3E5513"},children:e.position})}),(0,o.jsx)("div",{className:"w-[20%] px-3 py-2 text-center",style:{backgroundColor:"#EFEFEF",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"#3E5513"},children:e.direction})}),(0,o.jsx)("div",{className:"w-[30%] px-3 py-2 text-center",style:{backgroundColor:"#EFEFEF",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"#3E5513"},children:e.star})}),(0,o.jsx)("div",{className:"w-[20%] px-3 py-2 text-center",style:{backgroundColor:"吉"===e.type?"#A3B116":"#B4003C",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"white"},children:e.type})})]},t))})]}),(0,o.jsxs)("div",{className:"p-6 bg-white",style:{borderRadius:"45px",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},children:[(0,o.jsx)("h3",{className:"mb-4",style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"35px",color:"#B4003C"},children:"四凶位&流年飛星"}),(0,o.jsx)("div",{className:"space-y-3",children:eo.map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-[30%] px-3 py-2 text-center",style:{backgroundColor:"#EFEFEF",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"#B4003C"},children:e.position})}),(0,o.jsx)("div",{className:"w-[20%] px-3 py-2 text-center",style:{backgroundColor:"#EFEFEF",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"#B4003C"},children:e.direction})}),(0,o.jsx)("div",{className:"w-[30%] px-3 py-2 text-center",style:{backgroundColor:"#EFEFEF",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"#B4003C"},children:e.star})}),(0,o.jsx)("div",{className:"w-[20%] px-3 py-2 text-center",style:{backgroundColor:"吉"===e.type?"#A3B116":"#B4003C",borderRadius:"10px"},children:(0,o.jsx)("div",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"18px",color:"white"},children:e.type})})]},t))})]})]}),b&&b.length>0&&(0,o.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mb-6 sm:gap-4 sm:justify-start",children:b.map((e,t)=>{let s=Z[e.direction],r=(null==s?void 0:s.type)==="吉",l=w===t;return(0,o.jsx)("button",{onClick:()=>S(t),className:"px-4 sm:px-8 lg:px-10 py-2 rounded-full text-sm sm:text-lg font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg cursor-pointer ".concat(l?"shadow-xl scale-105":"hover:shadow-md"),style:{backgroundColor:r?"#A3B116":"#B4003C",color:"white",fontFamily:"Noto Serif TC",fontSize:"clamp(14px, 3vw, 20px)",fontWeight:800,border:l?"3px solid white":"none",boxShadow:l?"0 0 0 3px rgba(0,0,0,0.2)":"0 4px 8px rgba(0,0,0,0.15)"},children:(()=>{var s;let o=e.roomType&&"房間"!==e.roomType?e.roomType:(null===(s=e.data)||void 0===s?void 0:s._type)||e.type||"房間";return"".concat(o).concat(t+1)})()},t)})}),(0,o.jsxs)("div",{className:"relative p-3 mb-4 overflow-hidden rounded-[65px] bg-white sm:p-6",style:{borderRadius:"20px sm:45px",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)",backgroundImage:"url('/images/report/housing-report-bg.png')",backgroundPosition:"right bottom",backgroundRepeat:"no-repeat",backgroundSize:"clamp(50%, 70%, 90%)"},children:[b&&b.length>0&&null!==w&&b[w]&&(0,o.jsx)("div",{className:"space-y-6",children:(()=>{var e,t,s;let r;let l=b[w],a=Z[l.direction],n=ee[l.direction],i=(null==a?void 0:a.type)==="吉",c={northEast:"東北",east:"東",southEast:"東南",south:"南",southWest:"西南",west:"西",northWest:"西北",north:"北"}[l.direction],m=null==b?void 0:b.find(e=>e.roomId===l.roomId||b.indexOf(e)===w);return r=m&&m.aiAnalysis?el(m.aiAnalysis,l,a,n,c):ec(l,a),(0,o.jsxs)("div",{id:"room-".concat(w),className:"transition-all duration-300 rounded-xl",children:[(0,o.jsxs)("div",{className:"flex flex-col items-start justify-start gap-4 p-3 mb-4 sm:flex-row sm:items-center sm:gap-10 sm:p-6",children:[(0,o.jsx)("div",{children:(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(20px, 5vw, 30px)",color:"#374A37"},children:(null==m?void 0:m.roomType)||l.roomType})}),(0,o.jsx)("div",{className:"w-full px-3 py-2 sm:px-6 sm:w-auto",style:{borderRadius:"100px",border:"3px solid ".concat(i?"#A3B116":"#B4003C"),backgroundColor:"white"},children:(0,o.jsxs)("span",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(14px, 3vw, 18px)",color:"#374A37"},children:[c," -"," ",null==a?void 0:a.star]})})]}),(0,o.jsxs)("div",{className:"px-3 mb-4 sm:px-6",children:[(0,o.jsx)("h5",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(16px, 3.5vw, 20px)",color:"black",marginBottom:"12px"},children:"2025年總結"}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("div",{children:(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 20px)",color:"black"},className:"leading-relaxed",children:r.yearSummary})})})]}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-2 px-3 mb-6 sm:px-6 sm:gap-4",children:[(0,o.jsx)("span",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(20px, 5vw, 30px)",color:"#374A37"},children:c}),(0,o.jsx)("img",{src:"/images/elements/".concat(null==a?void 0:a.element,".png"),alt:null==a?void 0:a.element,className:"object-contain",style:{width:"clamp(24px, 6vw, 30px)",height:"clamp(24px, 6vw, 30px)"}}),(0,o.jsx)("div",{className:"flex items-center justify-center rounded-full",style:{backgroundColor:i?"#A3B116":"#B4003C",width:"clamp(32px, 8vw, 40px)",height:"clamp(32px, 8vw, 40px)"},children:(0,o.jsx)("span",{style:{color:"white",fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(14px, 3vw, 18px)"},children:i?"吉":"凶"})}),(0,o.jsxs)("span",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(16px, 4vw, 30px)",color:"#374A37"},className:"w-full sm:w-auto",children:["八宅:"," ",et(n)]})]}),(0,o.jsxs)("div",{className:"px-3 mb-4 sm:px-6",children:[(0,o.jsxs)("h6",{className:"flex items-center mb-2",style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(16px, 3.5vw, 20px)",color:"black"},children:[(0,o.jsx)("span",{className:"mr-2",children:"\uD83C\uDFE0"}),"整體格局分析"]}),(0,o.jsx)("p",{className:"leading-relaxed text-gray-600",style:{fontSize:"clamp(14px, 3vw, 16px)"},children:(null===(e=r.comprehensiveAdvice)||void 0===e?void 0:e.overall)||"分析中..."})]}),(0,o.jsxs)("div",{className:"px-3 sm:px-6",children:[(0,o.jsx)("h5",{style:{fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(20px, 5vw, 30px)",color:i?"#A3B116":"#B4003C"},className:"mb-3",children:i?"強化建議":"化解建議"}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-4 rounded-lg sm:grid-cols-2 lg:grid-cols-4",children:[{title:i?"家具擺放":"環境調整",color:"bg-[#EFEFEF] border-gray-200",items:r.recommendations.furniture},{title:i?"元素色彩":"擺件禁忌",color:"bg-[#EFEFEF] border-gray-200",items:r.recommendations.colors},{title:i?"生活習慣":"行為禁忌",color:"bg-[#EFEFEF] border-gray-200",items:r.recommendations.habits},{title:i?"能量強化":"化煞措施",color:"bg-[#EFEFEF] border-gray-200",items:r.recommendations.items}].map((e,t)=>(0,o.jsxs)("div",{className:"".concat(e.color," border rounded-lg p-3 sm:p-4"),children:[0===t||1===t||2===t||3===t?(0,o.jsx)("div",{className:"flex justify-start mb-3",children:(0,o.jsx)("div",{style:{width:"clamp(120px, 30vw, 140px)",height:"32px",borderRadius:"18px",backgroundColor:3===t?"#A3B116":i?"#A3B116":"#B4003C",fontFamily:"Noto Serif TC",fontWeight:800,fontSize:"clamp(14px, 3.5vw, 20px)",color:"#FFFFFF"},className:"flex items-center justify-center rounded",children:e.title})}):(0,o.jsx)("div",{className:"mb-3 font-bold text-center",style:{fontSize:"clamp(14px, 3.5vw, 16px)"},children:e.title}),(0,o.jsx)("ul",{className:"space-y-2",children:e.items.map((e,s)=>(0,o.jsxs)("li",{className:"flex items-start",style:0===t||1===t||2===t||3===t?{fontSize:"clamp(12px, 3vw, 16px)"}:{},children:[(0,o.jsx)("span",{className:"mr-2",children:"•"}),(0,o.jsx)("span",{children:e})]},s))})]},t))})]}),r.comprehensiveAdvice&&(0,o.jsx)("div",{className:"p-3 mt-3 sm:p-6",children:(0,o.jsxs)("div",{className:"space-y-5 text-sm",children:[(0,o.jsx)("div",{className:"w-full",children:(0,o.jsxs)("div",{className:"p-3 rounded-lg shadow-sm sm:p-4",style:{backgroundColor:"#F3E5F5",border:"2px solid #CE93D8"},children:[(0,o.jsxs)("h6",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(16px, 3.5vw, 20px)",color:"#7B1FA2",marginBottom:"12px"},className:"flex items-center",children:[(0,o.jsx)("span",{className:"mr-2",children:"\uD83C\uDF38"}),"季節性注意事項"]}),(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 16px)",color:"#4A148C"},className:"leading-relaxed",children:(null===(t=r.comprehensiveAdvice)||void 0===t?void 0:t.seasonal)||"分析中..."})]})}),(0,o.jsxs)("div",{className:"p-3 rounded-lg shadow-sm sm:p-4",style:{backgroundColor:"#E8F5E8",border:"2px solid #81C784"},children:[(0,o.jsxs)("h6",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(16px, 3.5vw, 20px)",color:"#2E7D32",marginBottom:"12px"},className:"flex items-center",children:[(0,o.jsx)("span",{className:"mr-2",children:"\uD83D\uDC64"}),"個人化建議"]}),(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 16px)",color:"#1B5E20"},className:"leading-relaxed",children:(null===(s=r.comprehensiveAdvice)||void 0===s?void 0:s.personal)||"分析中..."})]})]})})]},w)})()}),(!b||0===b.length)&&(0,o.jsx)("div",{className:"py-8 text-center text-gray-500",children:(0,o.jsx)("p",{children:"暫無房間分析數據"})})]}),(0,o.jsxs)("div",{className:"p-5 mb-4 bg-white rounded-[65px] sm:p-8",style:{borderRadius:"20px sm:45px",boxShadow:"0 4px 5.3px rgba(0, 0, 0, 0.25)"},children:[(0,o.jsx)("div",{className:"flex items-center mb-4",children:(0,o.jsx)("h2",{className:"font-bold text-gray-800",style:{fontSize:"clamp(18px, 4vw, 30px)"},children:"流年提醒 2024~2043-下元九運"})}),(0,o.jsxs)("div",{className:"space-y-6",children:[(null==em?void 0:em.yearlyAdvice)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row justify-center gap-2 mb-8 sm:gap-6",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center p-3 text-center transition-opacity cursor-pointer sm:p-4 hover:opacity-80",onClick:()=>B("yearlyFocus"),children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mb-3 bg-red-100 border-red-300 rounded-full sm:w-16 sm:h-16 border-3",children:(0,o.jsx)(m.default,{src:"/images/report/personal-1.png",alt:"2025重點提醒",width:10,height:10,className:"object-contain"})}),(0,o.jsx)("h4",{className:"font-bold text-red-700",style:{fontSize:"clamp(12px, 3vw, 14px)"},children:"2025重點提醒"})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center p-3 text-center transition-opacity cursor-pointer sm:p-4 hover:opacity-80",onClick:()=>B("nineMovement"),children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mb-3 bg-blue-100 border-blue-300 rounded-full sm:w-16 sm:h-16 border-3",children:(0,o.jsx)(m.default,{src:"/images/report/personal-2.png",alt:"下元九運影響",width:34,height:34,className:"object-contain"})}),(0,o.jsx)("h4",{className:"font-bold text-blue-700",style:{fontSize:"clamp(12px, 3vw, 14px)"},children:"下元九運影響"})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center p-3 text-center transition-opacity cursor-pointer sm:p-4 hover:opacity-80",onClick:()=>B("personalAdvice"),children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mb-3 bg-yellow-100 border-yellow-400 rounded-full sm:w-16 sm:h-16 border-3",children:(0,o.jsx)(m.default,{src:"/images/report/personal-3.png",alt:"個人化年度建議",width:34,height:34,className:"object-contain"})}),(0,o.jsx)("h4",{className:"font-bold text-yellow-700",style:{fontSize:"clamp(12px, 3vw, 14px)"},children:"個人化年度建議"})]})]}),W.yearlyFocus&&(0,o.jsxs)("div",{className:"p-3 rounded-lg sm:p-6 bg-gradient-to-r from-red-50 to-pink-50",children:[(0,o.jsx)("h3",{className:"mb-4 font-bold text-red-700",style:{fontSize:"clamp(16px, 3.5vw, 18px)"},children:"2025年度重點提醒"}),(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 16px)",color:"#374151"},className:"leading-relaxed",children:em.yearlyAdvice.currentYear||"分析中..."})]}),W.nineMovement&&(0,o.jsxs)("div",{className:"p-3 rounded-lg sm:p-6 bg-gradient-to-r from-blue-50 to-cyan-50",children:[(0,o.jsx)("h3",{className:"mb-4 font-bold text-blue-700",style:{fontSize:"clamp(16px, 3.5vw, 18px)"},children:"下元九運影響"}),(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 16px)",color:"#374151"},className:"leading-relaxed",children:em.yearlyAdvice.nineStarCycle||"分析中..."})]}),W.personalAdvice&&(0,o.jsxs)("div",{className:"p-3 rounded-lg sm:p-6 bg-gradient-to-r from-yellow-50 to-orange-50",children:[(0,o.jsx)("h3",{className:"mb-4 font-bold text-yellow-700",style:{fontSize:"clamp(16px, 3.5vw, 18px)"},children:"個人化年度建議"}),(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 16px)",color:"#374151"},className:"leading-relaxed",children:em.yearlyAdvice.personalizedAdvice||"分析中..."})]})]}),!(null==em?void 0:em.yearlyAdvice)&&(0,o.jsx)("div",{className:"p-3 rounded-lg sm:p-4 bg-gradient-to-r from-gray-50 to-gray-100",children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center sm:flex-row",children:[(0,o.jsx)("div",{className:"w-6 h-6 mb-2 mr-0 border-b-2 border-purple-600 rounded-full sm:mr-3 sm:mb-0 animate-spin"}),(0,o.jsx)("p",{style:{fontFamily:"Noto Sans HK",fontWeight:400,fontSize:"clamp(14px, 3vw, 16px)",color:"#6B7280"},className:"text-center sm:text-left",children:"正在生成個人化年度風水建議..."})]})})]})]})]})}function h(e){let{size:t="md"}=e;return(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[t]," animate-spin"),children:(0,o.jsx)("div",{className:"w-full h-full border-4 border-amber-200 border-t-amber-600 rounded-full"})})})}s(26597),s(52699);var p=s(58105),g=s(48842),f=s(35226),u=s(40003);let y={[g.sR.LIVING_ROOM]:"客廳",[g.sR.BEDROOM]:"臥室",[g.sR.DINING_ROOM]:"餐廳",[g.sR.KITCHEN]:"廚房",[g.sR.BATHROOM]:"浴室",[g.sR.STUDY_ROOM]:"書房",[g.sR.STORAGE_ROOM]:"儲物房",[g.sR.BALCONY]:"陽台",[g.sR.GARDEN]:"花園",[g.sR.GARAGE]:"車庫",[g.sR.CORRIDOR]:"走廊",living_room:"客廳",bedroom:"臥室",dining_room:"餐廳",kitchen:"廚房",bathroom:"浴室",study_room:"書房",storage_room:"儲物房",balcony:"陽台",garden:"花園",garage:"車庫",corridor:"走廊"};function b(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),[m,d]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),j=(0,l.useSearchParams)(),N=(0,l.useRouter)(),{data:w,status:S}=(0,a.wV)();(0,r.useEffect)(()=>{if("loading"===S){console.log("Waiting for session to load...");return}let e=sessionStorage.getItem("bazhaiAnalysisData");if(e)try{let{designData:t,userProfile:s,timestamp:o}=JSON.parse(e);if(Date.now()-o<36e5&&t&&s){console.log("✅ Using data from sessionStorage:",{designData:t,userProfile:s}),F(t,s),sessionStorage.removeItem("bazhaiAnalysisData");return}}catch(e){console.error("❌ SessionStorage parsing error:",e)}let t=j.get("designData"),s=j.get("userProfile");if(console.log("\uD83D\uDD0D Bazhai Report Page - URL Params:",{designDataParam:t?"Found":"Missing",userProfileParam:s?"Found":"Missing"}),t&&s)try{let e=JSON.parse(decodeURIComponent(t)),o=JSON.parse(decodeURIComponent(s));console.log("✅ Parsed data successfully from URL:",{designData:e,userProfile:o}),F(e,o)}catch(e){c("數據解析失敗"),console.error("❌ URL parsing error:",e)}else console.log("❌ No data found in sessionStorage or URL parameters"),console.log("\uD83D\uDD04 Attempting to perform analysis with current data"),F()},[j,S]);let F=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var o,r;if("loading"===S){console.log("Session still loading, waiting...");return}if(!(null==w?void 0:w.user)){console.log("No session found, redirecting to login"),N.push("/auth/login");return}console.log("User session found:",w.user),n(!0);let l=e;if(!l){let e=localStorage.getItem("designData");if(console.log("Raw design data from localStorage:",e),!e){console.log("❌ No design data found, redirecting to design page"),c("請先在設計頁面建立平面圖後再進行八宅分析"),n(!1),setTimeout(()=>{N.push("/design")},3e3);return}try{l=JSON.parse(e)}catch(e){console.error("❌ Error parsing design data:",e),c("設計資料格式錯誤，請重新建立平面圖"),n(!1),setTimeout(()=>{N.push("/design")},3e3);return}}console.log("Using design data:",l),console.log("Parsed design data:",l),console.log("Design data keys:",Object.keys(l)),console.log("LocalItems type check:",typeof l.localItems),console.log("LocalItems length:",null===(o=l.localItems)||void 0===o?void 0:o.length);let a=(0,p.A)(l);if(console.log("Data with room directions:",a),console.log("DataWithDirections keys:",Object.keys(a)),console.log("DataWithDirections localItems length:",null===(r=a.localItems)||void 0===r?void 0:r.length),a.localItems&&a.localItems.length>0){console.log("First few localItems:",a.localItems.slice(0,3)),console.log("All item types in localItems:",a.localItems.map(e=>e.type));let e=a.localItems.filter(e=>"room"===e.type);console.log('Items with type "room":',e),console.log("Room items count:",e.length),e.forEach((e,t)=>{console.log("Room ".concat(t+1,":"),{type:e.type,roomType:e.roomType,direction:e.direction,hasDirection:!!e.direction,isNotCenter:"center"!==e.direction,hasRoomType:!!e.roomType,fullRoom:e})})}console.log("Starting room filtering...");let i=a.localItems||[];if(console.log("Total items to filter:",i.length),!i||0===i.length)throw Error("No items found in localItems");let m=i.filter(e=>"room"===e.type);if(console.log('Step 1 - Items with type "room":',m.length),!m)throw Error("step1 filtering failed");let d=m.filter(e=>e.direction);console.log("Step 2 - Items with direction:",d.length);let x=d.filter(e=>{if("center"===e.direction){let t=e.id||"";return!!(t.includes("living_room")||t.includes("dining_room")||t.includes("family_room"))&&(console.log("\uD83C\uDFAF Keeping center room as important: ".concat(t)),e.direction="center",!0)}return"center"!==e.direction});console.log("Step 3 - Items not center (except important center rooms):",x.length);let h=x.map(e=>{var t,s,o,r;let l=e.roomType||(null===(t=e.data)||void 0===t?void 0:t._type)||(null===(s=e.data)||void 0===s?void 0:s.type)||e.type,a=y[l]||g.t7[l]||l;return a&&"room"!==a||(a="房間"),console.log("\uD83D\uDDFA️ Mapping room:",{originalItem:e,rawRoomType:l,mappedRoomType:a,itemRoomType:e.roomType,dataType:null===(o=e.data)||void 0===o?void 0:o._type,dataTypeField:null===(r=e.data)||void 0===r?void 0:r.type,itemType:e.type,isLivingRoom:"living_room"===l||l===g.sR.LIVING_ROOM,finalIsLivingRoom:"客廳"===a}),{...e,roomType:a}}),f=h.filter(e=>e.roomType&&"房間"!==e.roomType);console.log("Step 4 - Items with valid roomType:",f.length),console.log("Step 4 - Filtered room types:",f.map(e=>e.roomType));let u=h.filter(e=>"客廳"===e.roomType||"living_room"===e.rawRoomType||e.rawRoomType===g.sR.LIVING_ROOM);console.log("\uD83C\uDFE0 Living rooms found:",u.length,u.map(e=>({roomType:e.roomType,direction:e.direction,id:e.id})));let b=f;if(0===b.length&&h.length>0&&(console.log("⚠️ No rooms with specific roomType found, using all rooms with fallback"),b=h),console.log("Filtered rooms for analysis:",b),console.log("Rooms count:",b.length),!b.length)throw Error("No rooms found in the design");let v=s;v||(v={mingGua:w.user.mingGua||1,gender:w.user.gender||"male",birthYear:w.user.birthYear||1990}),console.log("User profile for analysis:",v);let j=await fetch("/api/bazhai-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:b,userProfile:v,designSummary:{compassRotation:l.compassRotation||0}})});if(!j.ok)throw Error("API request failed: ".concat(j.status));let F=await j.json();if(console.log("API response:",F),F.success&&F.data)t(F.data);else throw Error("No analysis data received from API")}catch(s){console.error("Bazhai analysis error:",s);let e="分析過程發生錯誤",t=!1;"No design data found"===s.message?(e="請先在設計頁面建立平面圖後再進行八宅分析",t=!0):s.message.includes("parsing")?(e="設計資料格式錯誤，請重新建立平面圖",t=!0):e=s.message.includes("API")?"分析服務暫時無法使用，請稍後再試":s.message||"分析失敗，請重新嘗試",c(e),t&&setTimeout(()=>{N.push("/design")},3e3)}finally{n(!1)}};return s?(0,o.jsx)("div",{className:"flex items-center justify-center w-full min-h-screen",style:{backgroundColor:"#EFEFEF"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(h,{}),(0,o.jsx)("p",{className:"mt-4 text-lg text-amber-800",children:"正在進行八宅風水分析..."}),(0,o.jsx)("p",{className:"mt-2 text-sm text-amber-600",children:"分析命卦、房間方位和風水格局"})]})}):i?(0,o.jsx)("div",{className:"flex items-center justify-center w-full min-h-screen",style:{backgroundColor:"#EFEFEF"},children:(0,o.jsx)("div",{className:"max-w-md text-center",children:(0,o.jsxs)("div",{className:"p-8 bg-white rounded-lg shadow-lg",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,o.jsx)("h2",{className:"mb-4 text-2xl font-bold text-red-600",children:"分析失敗"})]}),(0,o.jsx)("p",{className:"mb-6 leading-relaxed text-gray-600",children:i}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("button",{onClick:()=>N.push("/design"),className:"w-full px-6 py-3 text-white transition-colors rounded-lg bg-amber-600 hover:bg-amber-700",children:"前往設計頁面"}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 text-gray-700 transition-colors bg-gray-200 rounded-lg hover:bg-gray-300",children:"重新嘗試"})]}),(0,o.jsx)("p",{className:"mt-4 text-xs text-gray-400",children:"如果問題持續發生，請聯繫客服支援"})]})})}):e?(0,o.jsx)("div",{className:"w-full min-h-screen",style:{backgroundColor:"#EFEFEF"},children:(0,o.jsxs)("div",{id:"report-content",className:"w-full",children:[(0,o.jsx)(f.default,{}),(0,o.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,o.jsx)(x,{analysis:e.overallAnalysis,mingGuaInfo:e.mingGuaInfo,userProfile:e.userProfile,designSummary:e.designSummary,roomAnalyses:e.roomAnalyses,yearlyAdvice:e.yearlyAdvice,comprehensiveAdvice:e.comprehensiveAdvice})}),(0,o.jsx)(u.A,{})]})}):(0,o.jsx)("div",{className:"flex items-center justify-center w-full min-h-screen",style:{backgroundColor:"#EFEFEF"},children:(0,o.jsx)("div",{className:"max-w-md text-center",children:(0,o.jsxs)("div",{className:"p-8 bg-white rounded-lg shadow-lg",children:[(0,o.jsx)("h2",{className:"mb-4 text-2xl font-bold text-amber-800",children:"八宅風水分析"}),(0,o.jsx)("p",{className:"mb-4 text-gray-600",children:"請從設計頁面訪問此分析功能"}),(0,o.jsx)("a",{href:"/design",className:"inline-block px-6 py-2 text-white rounded bg-amber-600 hover:bg-amber-700",children:"前往設計頁面"})]})})})}},69303:(e,t,s)=>{"use strict";s.d(t,{ImageProvider:()=>a,l:()=>n});var o=s(95155),r=s(12115);let l=(0,r.createContext)();function a(e){let{children:t}=e,[s,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("savedImagePreview");e&&a(e)}catch(e){}},[]);let c=e=>{a(e);try{e?localStorage.setItem("savedImagePreview",e):localStorage.removeItem("savedImagePreview")}catch(e){}};return(0,o.jsx)(l.Provider,{value:{preview:s,setPreview:c,file:n,setFile:e=>{if(i(e),e){let t=new FileReader;t.onload=e=>{c(e.target.result)},t.readAsDataURL(e)}else c(null)},clearImages:()=>{a(null),i(null);try{localStorage.removeItem("savedImagePreview")}catch(e){}}},children:t})}function n(){let e=(0,r.useContext)(l);if(!e)throw Error("useImage must be used within an ImageProvider");return e}},76142:(e,t,s)=>{"use strict";s(95155),s(40054),s(12115),s(45493),s(48842),s(66766)}},e=>{var t=t=>e(e.s=t);e.O(0,[8057,586,4935,5033,3930,4316,6453,7215,8543,6874,6491,3519,3167,9855,5226,8441,1684,7358],()=>t(42966)),_N_E=e.O()}]);