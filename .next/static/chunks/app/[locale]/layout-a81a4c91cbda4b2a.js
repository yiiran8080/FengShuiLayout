(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{16290:e=>{e.exports={style:{fontFamily:"'Lora', 'Lora Fallback'",fontStyle:"normal"},className:"__className_bac535"}},27055:(e,t,o)=>{"use strict";o.d(t,{J:()=>i,UserProvider:()=>s});var a=o(95155),r=o(12115);let n=(0,r.createContext)();function s(e){let{children:t}=e,[o,s]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(()=>{try{console.log("UserContext: Attempting to load user data...");let e=sessionStorage.getItem("freeReportUserData");if(console.log("UserContext: Checking sessionStorage for freeReportUserData:",e),e){let t={...JSON.parse(e),userId:"free_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),isFreeUser:!0};s(t),console.log("UserContext: ✅ Loaded FRESH userData from sessionStorage:",t);return}let t=localStorage.getItem("uploadPicFormData");if(console.log("UserContext: savedFormData from localStorage:",t),t){let e=JSON.parse(t);console.log("UserContext: Parsed form data:",e);let o={gender:e.gender||"female",birthDateTime:e.year&&e.month&&e.day&&e.hour?"".concat(e.year,"-").concat(e.month.padStart(2,"0"),"-").concat(e.day.padStart(2,"0"),"T").concat(e.hour.padStart(2,"0"),":00"):new Date().toISOString(),userId:"free_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),isFreeUser:!0};s(o),console.log("UserContext: ⚠️ Loaded CACHED userData from localStorage:",o)}else console.log("UserContext: No saved data found in either storage")}catch(e){console.error("UserContext: Error loading user data:",e)}l(!0),console.log("UserContext: Initialization complete")})()},[]);let c=()=>{let e=sessionStorage.getItem("freeReportUserData");if(console.log("UserContext: forceRefresh - Checking sessionStorage:",e),e){let t={...JSON.parse(e),userId:"free_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),isFreeUser:!0};s(t),console.log("UserContext: ✅ forceRefresh - Loaded FRESH userData from sessionStorage:",t);return}let t=localStorage.getItem("uploadPicFormData");if(t){let e=JSON.parse(t),o={gender:e.gender||"female",birthDateTime:e.year&&e.month&&e.day&&e.hour?"".concat(e.year,"-").concat(e.month.padStart(2,"0"),"-").concat(e.day.padStart(2,"0"),"T").concat(e.hour.padStart(2,"0"),":00"):new Date().toISOString(),userId:"free_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),isFreeUser:!0};s(o),console.log("UserContext: ⚠️ forceRefresh - Loaded CACHED userData from localStorage:",o)}};return(0,r.useEffect)(()=>{let e=e=>{"uploadPicFormData"===e.key&&(console.log("UserContext: localStorage changed, refreshing data..."),c())};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,a.jsx)(n.Provider,{value:{userData:o,setUserData:e=>{if(console.log("UserContext: Updating userData:",e),s(e),e){localStorage.removeItem("uploadPicFormData");let t={gender:e.gender,year:new Date(e.birthDateTime).getFullYear().toString(),month:(new Date(e.birthDateTime).getMonth()+1).toString(),day:new Date(e.birthDateTime).getDate().toString(),hour:new Date(e.birthDateTime).getHours().toString()};localStorage.setItem("uploadPicFormData",JSON.stringify(t)),console.log("UserContext: Saved formData to localStorage:",t)}},isInitialized:i,forceRefresh:()=>{console.log("UserContext: Force refreshing data..."),c()}},children:t})}function i(){let e=(0,r.useContext)(n);if(!e)throw Error("useUser must be used within a UserProvider");return e}},30347:()=>{},46096:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});var a=o(46453),r=o(95155);function n(e){let{locale:t,...o}=e;if(!t)throw Error(void 0);return(0,r.jsx)(a.Dk,{locale:t,...o})}},46583:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});var a=o(95155),r=o(45493);function n(e){let{children:t}=e;return(0,a.jsx)(r.CP,{children:t})}},57641:(e,t,o)=>{"use strict";o.r(t),o.d(t,{GA_TRACKING_ID:()=>s,default:()=>c,event:()=>l,pageview:()=>i});var a=o(95155),r=o(12115),n=o(35695);let s=o(49509).env.NEXT_PUBLIC_GA_ID,i=e=>{window.gtag&&window.gtag("config",s,{page_path:e})},l=e=>{let{action:t,category:o,label:a,value:r}=e;window.gtag&&window.gtag("event",t,{event_category:o,event_label:a,value:r})};function c(){let e=(0,n.usePathname)(),t=(0,n.useSearchParams)();return((0,r.useEffect)(()=>{s&&i(e+t.toString())},[e,t]),s)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=".concat(s)}),(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '".concat(s,"', {\n              page_path: window.location.pathname,\n            });\n          ")}})]}):null}},61017:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});var a=o(12115),r=o(57641);function n(){return(0,a.useEffect)(()=>{let e=()=>{if(window.gtag){let e=window.location.pathname,t={"/zh-TW":"Home Page","/zh-TW/free":"Free Analysis Page","/zh-TW/freereport":"Free Report Page","/zh-TW/design":"Design Page","/zh-TW/report":"Report Page","/zh-TW/success":"Success Page","/zh-TW/price":"Pricing Page","/zh-CN":"Home Page (CN)","/zh-CN/free":"Free Analysis Page (CN)","/zh-CN/freereport":"Free Report Page (CN)","/zh-CN/design":"Design Page (CN)","/zh-CN/report":"Report Page (CN)","/zh-CN/success":"Success Page (CN)","/zh-CN/price":"Pricing Page (CN)"}[e]||"Page: ".concat(e);window.gtag("event","page_view",{page_title:t,page_location:window.location.href,page_path:e,custom_page_name:t,send_to:"G-FSF2H5X9S4"}),console.log('\uD83D\uDD04 Fallback page tracking: "'.concat(t,'" at ').concat(e))}},t=()=>{window.gtag?e():setTimeout(t,100)};t();let o=e=>{let t=e.target.closest('button, a, .btn, [role="button"], [data-track], input[type="submit"], input[type="button"]');if(t){var o,a,n,s,i,l,c;let e=(null===(o=t.textContent)||void 0===o?void 0:o.trim())||"",g=t.id||"",u=t.className||"",d=t.getAttribute("aria-label")||"",m=t.getAttribute("data-track")||"",h=t.getAttribute("href")||"",f="";if(!e&&!g&&!d&&!m){let e=(null===(n=t.closest("div"))||void 0===n?void 0:null===(a=n.textContent)||void 0===a?void 0:a.trim())||"",o=(null===(i=t.parentElement)||void 0===i?void 0:null===(s=i.textContent)||void 0===s?void 0:s.trim())||"",r=(null===(l=t.querySelector("img"))||void 0===l?void 0:l.alt)||"",g=(null===(c=t.querySelector('[class*="icon"]'))||void 0===c?void 0:c.className)||"";if(r.includes("trash")||g.includes("trash")||t.querySelector('[src*="trash"]'))f="delete_button";else if(t.querySelector("svg")&&e.includes("照片"))f="file_upload_area";else if(t.classList.contains("rounded-full")&&t.querySelector("img"))f="icon_button";else if(e.includes("瀏覽")||o.includes("瀏覽"))f="browse_area";else{let e=u.split(" ").find(e=>["btn","button","upload","delete","close","submit","cta"].some(t=>e.toLowerCase().includes(t)));f=e?"button_".concat(e):"unknown_button"}}let p="BUTTON"===t.tagName,v="INPUT"===t.tagName&&["submit","button"].includes(t.type),w="A"===t.tagName&&(e.includes("免費開始測算")||e.includes("立即")||e.includes("開始")||e.includes("測算")||e.includes("分析")||u.includes("btn")||u.includes("button")||u.includes("cta")||m||d);if(p||v||w){let o=m||d||g||e||f||(h?"link_".concat(h.split("/").pop()):null)||"unidentified_button",a=window.location.pathname,n=document.title;(0,r.event)({action:"button_click",category:"UI_Interaction",label:"".concat(o," | ").concat(a),value:1}),window.gtag&&window.gtag("event","button_click",{event_category:"Button_Click",event_label:o,button_text:e,button_href:h,page_path:a,page_title:n,button_type:t.tagName.toLowerCase(),button_context:f,timestamp:new Date().toISOString()}),console.log('\uD83D\uDD18 Button/Link tracked: "'.concat(o,'" (text: "').concat(e,'", context: "').concat(f,'") -> ').concat(h||"no-href"," on ").concat(a))}}};return document.addEventListener("click",o,!0),()=>{document.removeEventListener("click",o,!0)}},[]),null}},62233:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var a=o(12115),r=o(35695);let n={"/zh-TW":"Home Page","/zh-TW/free":"Free Analysis Page","/zh-TW/freereport":"Free Report Page","/zh-TW/design":"Design Page","/zh-TW/report":"Report Page","/zh-TW/success":"Success Page","/zh-TW/price":"Pricing Page","/zh-CN":"Home Page (CN)","/zh-CN/free":"Free Analysis Page (CN)","/zh-CN/freereport":"Free Report Page (CN)","/zh-CN/design":"Design Page (CN)","/zh-CN/report":"Report Page (CN)","/zh-CN/success":"Success Page (CN)","/zh-CN/price":"Pricing Page (CN)"};function s(){let e=(0,r.usePathname)();return(0,a.useEffect)(()=>{let t=()=>{if(window.gtag){let t=n[e]||"Page: ".concat(e);return window.gtag("event","page_view",{page_title:t,page_location:window.location.href,page_path:e,custom_page_name:t,send_to:"G-FSF2H5X9S4",page_referrer:document.referrer||"(direct)"}),console.log("Page tracked: ".concat(t," at ").concat(e)),!0}return!1},o=0,a=()=>{!t()&&!(o>=50)&&(o++,setTimeout(a,100))};a()},[e]),null}},69303:(e,t,o)=>{"use strict";o.d(t,{ImageProvider:()=>i,l:()=>l});var a=o(95155),r=o(12115);let n=(0,r.createContext)(),s=(e,t,o)=>{let a=e.split(","),r=a[0].match(/:(.*?);/)[1],n=atob(a[1]),s=n.length,i=new Uint8Array(s);for(;s--;)i[s]=n.charCodeAt(s);return new File([i],t,{type:r})};function i(e){let{children:t}=e,[o,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[g,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>((async()=>{if(!g){try{let e=sessionStorage.getItem("uploadPicFileData");if(e){let t=JSON.parse(e);if(!t.timestamp||Date.now()-t.timestamp<36e5){let e=s(t.base64,t.name,t.type),o=URL.createObjectURL(e);c(e),i(o),console.log("ImageContext: File restored from sessionStorage:",t.name),console.log("ImageContext: Preview URL created:",o)}else sessionStorage.removeItem("uploadPicFileData"),console.log("ImageContext: Cleared old file data from sessionStorage")}}catch(e){console.error("ImageContext: Error loading saved image data:",e),sessionStorage.removeItem("uploadPicFileData")}u(!0)}})(),()=>{o&&o.startsWith("blob:")&&URL.revokeObjectURL(o)}),[]);let d=e=>{o&&o.startsWith("blob:")&&URL.revokeObjectURL(o),i(e)};return(0,a.jsx)(n.Provider,{value:{preview:o,setPreview:d,file:l,setFile:e=>{c(e),!e&&o&&d(null)},isInitialized:g},children:t})}function l(){return(0,r.useContext)(n)}},78253:(e,t,o)=>{Promise.resolve().then(o.bind(o,46096)),Promise.resolve().then(o.t.bind(o,16290,23)),Promise.resolve().then(o.bind(o,38543)),Promise.resolve().then(o.t.bind(o,30347,23)),Promise.resolve().then(o.bind(o,46583)),Promise.resolve().then(o.bind(o,61017)),Promise.resolve().then(o.bind(o,57641)),Promise.resolve().then(o.bind(o,62233)),Promise.resolve().then(o.bind(o,69303)),Promise.resolve().then(o.bind(o,27055))}},e=>{var t=t=>e(e.s=t);e.O(0,[4063,7690,6453,5849,5493,8441,1684,7358],()=>t(78253)),_N_E=e.O()}]);