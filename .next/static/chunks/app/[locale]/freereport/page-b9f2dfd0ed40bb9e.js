(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6526],{9731:(e,l,t)=>{"use strict";t.d(l,{A:()=>r});var s=t(12115),i=t(91599),a=t(40054),o=t.n(a),n=t(60470);function r(e,l){let t=(0,s.useRef)(!0),[a,r]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null),[x,m]=(0,s.useState)({});(0,s.useEffect)(()=>{console.log("renderRef.current",t.current),(async()=>{let t=null==l?void 0:l.userId;if(t&&e){let s=l.birthDateTime;console.log("查询用户已有报告"),r(!0);let{status:a,data:o}=await (0,i.Jt)("/api/reportUserDoc/".concat(t,"/").concat("zh-CN"==e?"zh":"tw"));if(0==a&&o){if(console.log("已有报告"),"done"==l.genStatus&&(!o.mingLiData||!o.liuNianData||!o.jiajuProData)){let{status:l,data:s}=await (0,i.Jt)("/api/reportUserDoc/".concat(t,"/").concat("zh-CN"==e?"tw":"zh"));0==l&&s&&m(s)}c(o)}else{console.log("生成随机报告");let{data:l}=await (0,i.Jt)("/api/reportDoc/zh",{isCached:!0}),{data:a}=await (0,i.Jt)("/api/reportDoc/tw",{isCached:!0});if(l&&a){let{nayin:o,year:r,month:d,day:x,hour:m}=(0,n.Ay)(s),p=Math.floor(3*Math.random()),h=Math.floor(3*Math.random()),f={nianzhuData:l.nianzhuData[r][p],yuezhuData:l.yuezhuData[d][p],rizhuData:l.rizhuData[x][p],shizhuData:l.shizhuData[m][p],yunchengData:l.yunchengData[o][p],jiajuData:u(l.jiajuData,h)},g={nianzhuData:a.nianzhuData[r][p],yuezhuData:a.yuezhuData[d][p],rizhuData:a.rizhuData[x][p],shizhuData:a.shizhuData[m][p],yunchengData:a.yunchengData[o][p],jiajuData:u(a.jiajuData,h)};c("zh-CN"==e?f:g),(0,i.bE)("/api/reportUserDoc/".concat(t,"/zh"),f),(0,i.bE)("/api/reportUserDoc/".concat(t,"/tw"),g)}}r(!1)}})()},[e,l]);let u=(e,l)=>{if(e){let t=o().cloneDeep(e);for(let e in t){let s=t[e];for(let e in s)s[e]=s[e][l]}return t}};return{loading:a,reportDocData:d,assistantData:x}}},57232:(e,l,t)=>{Promise.resolve().then(t.bind(t,61370))},61370:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>j});var s=t(95155),i=t(12115),a=t(35695);t(91247);var o=t(34477);let n=(0,o.createServerReference)("00a91a8d0a98f2a0bd27a50b75d99bc1c7c7cf7655",o.callServer,void 0,o.findSourceMapURL,"getReportDocData");t(40054);var r=t(66766),d=t(17652),c=t(60388);t(25446),t(76142);var x=t(32502);x.t1.register(x.Bs,x.m_,x.s$);var m=t(69303);function u(e){let{roomType:l,direction:t,data:a}=e,o=(0,d.c3)("freeChapter3"),[n,x]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),[h,f]=(0,i.useState)("base"),[g,v]=(0,i.useState)(0),{preview:b}=(0,m.l)(),w=[{label:o("tabs.base"),key:"base"},{label:o("tabs.furniture"),key:"furniture"},{label:o("tabs.taboo"),key:"taboo"},{label:o("tabs.wuxing"),key:"wuxing"}],j=[{title:o("risks.career"),content:o("careerContent"),titleColor:"text-blue-600",contentColor:"text-blue-700",bgColor:"bg-blue-50"},{title:o("risks.relationship"),content:o("relationshipContent"),titleColor:"text-red-600",contentColor:"text-red-700",bgColor:"bg-red-50"},{title:o("risks.wealth"),content:o("wealthContent"),titleColor:"text-yellow-600",contentColor:"text-yellow-700",bgColor:"bg-yellow-50"}];return((0,i.useEffect)(()=>{if(!a)return;let e=a.zhData||a.twData;x(null==e?void 0:e.jiajuData)},[a]),(0,i.useEffect)(()=>{if(n&&n[l]&&n[l][t]){let e=Object.entries(n[l][t]);if(e.length>0){let l=Math.floor(Math.random()*e.length);p(e[l])}}},[n,l,t]),n&&n[l]&&n[l][t])?u?(0,s.jsx)("div",{className:"flex items-start justify-center w-full min-h-screen px-2 mx-auto sm:px-4 lg:px-0",style:{fontFamily:'"Noto Serif TC", serif'},children:(0,s.jsx)("div",{className:"w-full max-w-full p-2 mt-4 sm:p-4 sm:mt-6 lg:p-8 lg:mt-10 rounded-xl",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-row items-start justify-center mb-3 sm:mb-4 lg:mb-6 pt-0 px-1 sm:px-2 lg:px-3.5 text-[#25826c] pb-4 sm:pb-6 lg:pb-[40px] box-border",children:(0,s.jsx)("h1",{className:"relative h-auto m-0 text-xl font-bold leading-tight text-center sm:text-2xl lg:text-4xl",children:o("title")})}),(0,s.jsxs)("div",{className:"flex-1 rounded-2xl sm:mb-8 lg:mb-13 bg-[#f5faf7] flex flex-col items-start justify-start pt-4 sm:pt-6 lg:pt-[40px] px-3 sm:px-4 lg:px-[30px] pb-4 sm:pb-6 lg:pb-[37px] box-border gap-3 sm:gap-4 lg:gap-8 z-[1] shadow-[0_8px_32px_rgba(0,0,0,0.15)]",children:[(0,s.jsx)("div",{className:"flex flex-col items-center w-full gap-2 mx-auto",children:b&&(0,s.jsx)("img",{src:b,alt:o("uploadedImage"),className:"object-cover w-full h-auto max-w-full mb-2 rounded-lg",style:{aspectRatio:"4/3"}})}),(0,s.jsxs)("div",{className:"flex flex-row items-start justify-start h-auto gap-2 text-base sm:text-lg lg:text-xl",children:[(0,s.jsx)(r.default,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 relative overflow-hidden shrink-0 z-[2] bg-transparent",loading:"lazy",width:100,height:100,sizes:"100vw",alt:"",src:"/images/room-icon/bedroom.png"}),(0,s.jsx)("h3",{className:"m-0 relative top-0.5 leading-6 sm:leading-8 font-[400] font-[inherit] z-[2] text-sm sm:text-base lg:text-xl",children:o("roomAnalysis")})]}),(0,s.jsx)("div",{className:"flex flex-col items-start justify-start w-full max-w-full gap-2 px-0 pt-0 pb-2",children:(0,s.jsx)("div",{className:"flex flex-row items-start justify-between w-full gap-1 overflow-x-auto border-b sm:gap-2 lg:gap-5",children:w.map(e=>(0,s.jsx)("button",{className:"relative leading-4 z-[2] px-1 sm:px-2 py-1 focus:outline-none whitespace-nowrap text-xs sm:text-sm lg:text-base ".concat(h===e.key?"border-b-2 border-blue-500 font-bold text-blue-600":"text-gray-500"),onClick:()=>f(e.key),style:{minWidth:"wuxing"===e.key?"auto":"3rem"},children:e.label},e.key))})}),(0,s.jsxs)("div",{className:"w-full",children:["base"===h&&(0,s.jsx)("div",{children:u&&("object"==typeof u[1]&&null!==u[1]?Object.entries(u[1]).map(e=>{let[l,t]=e;return(0,s.jsxs)("p",{className:"flex flex-col mb-2 text-sm leading-6 sm:flex-row sm:leading-8 sm:text-base",children:[(0,s.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-0 sm:min-w-22.5 mb-1 sm:mb-0",children:[l,"："]}),(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:String(t)})]},u[0]+"-"+l)}):(0,s.jsxs)("p",{className:"flex flex-col text-sm leading-6 sm:flex-row sm:leading-8 sm:text-base",children:[(0,s.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-0 sm:min-w-22.5 mb-1 sm:mb-0",children:[u[0],"："]}),(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:String(u[1])})]},u[0]))}),["furniture","taboo","wuxing"].includes(h)&&(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsxs)("div",{className:"bg-[#e6f3fa] rounded-2xl p-4 sm:p-6 min-h-[150px] sm:min-h-[180px] overflow-hidden",children:[(0,s.jsxs)("div",{className:"space-y-2 text-sm leading-relaxed sm:text-base",children:[(0,s.jsx)("p",{children:o("enhancementFocus")}),(0,s.jsx)("p",{children:o("suggestion1")}),(0,s.jsx)("p",{children:o("suggestion2")})]}),(0,s.jsx)("div",{className:"absolute top-0 left-0 z-10 flex items-center justify-center w-full h-full rounded-2xl bg-[#f5faf7]/80 backdrop-blur-xs",children:(0,s.jsx)(c.N_,{href:"/price",children:(0,s.jsx)("button",{className:"pointer-events-auto px-4 sm:px-6 py-2 rounded-full bg-[rgba(49,129,97)] text-white font-bold text-sm sm:text-lg shadow-[0_8px_16px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_24px_rgba(0,0,0,0.3)] transition-shadow duration-300",children:o("unlockButton")})})})]})})]})]}),(0,s.jsxs)("section",{className:"self-stretch flex flex-col items-center justify-center gap-2 sm:gap-3 mb-4 sm:mb-5 text-left text-lg sm:text-2xl lg:text-[40px] text-[#25826c] font-[ABeeZee]",children:[(0,s.jsx)("div",{className:"self-stretch flex flex-row items-center justify-start pl-0.5 box-border max-w-full mt-8 sm:mt-4 lg:mt-0",children:(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center flex-1 gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-start justify-start",children:(0,s.jsx)(r.default,{className:"relative object-cover w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12",loading:"lazy",width:50,height:50,alt:"",src:"/images/image-206@2x.jpeg"})}),(0,s.jsx)("h2",{className:"m-0 justify-center font-semibold leading-6 sm:leading-8 font-[400] z-[1] text-sm sm:text-lg lg:text-[32px] lg:leading-[26px]",style:{fontFamily:'"Noto Serif TC", serif'},children:o("riskDetected")})]})}),(0,s.jsx)("div",{className:"w-full rounded-2xl mb-3 sm:mb-5 flex flex-col items-center justify-center pt-0 sm:pt-[31px] lg:pt-[41px] px-0 pb-3 sm:pb-5 box-border relative gap-2 sm:gap-4 lg:gap-[26px] max-w-full z-[2] text-xs sm:text-sm text-[#0a58a6] font-Font-Family",children:(0,s.jsx)("div",{className:"relative w-full max-w-sm sm:max-w-2xl md:max-w-4xl lg:max-w-6xl xl:max-w-7xl 2xl:max-w-full",children:(0,s.jsxs)("div",{className:"relative px-2 overflow-hidden rounded-lg",children:[(0,s.jsx)("button",{onClick:()=>{v(e=>(e-1+j.length)%j.length)},className:"absolute left-0 sm:left-0 lg:left-2 z-20 p-1.5 sm:p-2 transition-all duration-200 transform -translate-y-1/2 rounded-full shadow-[0_8px_10px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_10px_rgba(0,0,0,0.35)] top-1/2 bg-white/90 hover:bg-white hover:scale-110",disabled:0===g,children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600 sm:w-5 sm:h-5 lg:w-6 lg:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsx)("button",{onClick:()=>{v(e=>(e+1)%j.length)},className:"absolute right-0 sm:right-0 lg:right-2 z-20 p-1.5 sm:p-2 transition-all duration-200 transform -translate-y-1/2 rounded-full shadow-[0_8px_10px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_10px_rgba(0,0,0,0.35)] top-1/2 bg-white/90 hover:bg-white hover:scale-110",disabled:g===j.length-1,children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600 sm:w-5 sm:h-5 lg:w-6 lg:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,s.jsx)("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*g,"%)")},children:j.map((e,l)=>(0,s.jsx)("div",{className:"flex justify-center flex-shrink-0 w-full px-3 py-2 sm:px-6 lg:px-12 sm:py-4",children:(0,s.jsxs)("div",{className:"p-3 sm:p-4 lg:p-6 rounded-lg ".concat(e.bgColor," relative shadow-[0_6px_20px_rgba(0,0,0,0.12)] hover:shadow-[0_8px_25px_rgba(0,0,0,0.18)] transition-shadow duration-300 max-w-full sm:max-w-xl lg:max-w-2xl w-full"),style:{fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsxs)("div",{className:"mb-2 sm:mb-3 lg:mb-4 text-base sm:text-lg lg:text-xl font-bold ".concat(e.titleColor),style:{fontFamily:'"Noto Serif TC", serif'},children:[e.title,":"]}),(0,s.jsx)("div",{className:"text-sm sm:text-base lg:text-lg leading-relaxed ".concat(e.contentColor," ").concat(e.title===o("risks.relationship")||e.title===o("risks.wealth")?"blur-sm":""),style:{fontFamily:'"Noto Serif TC", serif'},children:e.content}),(e.title===o("risks.relationship")||e.title===o("risks.wealth"))&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-black/10",children:(0,s.jsx)(c.N_,{href:"/price",children:(0,s.jsx)("button",{className:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-bold text-white transition-shadow duration-300 rounded-full bg-[rgba(49,129,97)] hover:shadow-xl",style:{boxShadow:"0 4px 15px rgba(0, 0, 0, 0.3)"},children:o("unlockDetail")})})})]})},l))})]})})})]})]})})}):null:(0,s.jsx)("div",{children:o("noData")})}x.t1.register(x.Bs,x.m_,x.s$);var p=t(40003),h=t(8900),f=t(9731),g=t(45493),v=t(91599);function b(){let e=(0,d.c3)("promo");return(0,s.jsxs)("div",{className:" w-full flex flex-col md:flex-row items-center md:items-stretch justify-between rounded-[15px] sm:rounded-[20px] mx-auto max-w-[800px] lg:max-w-[1000px] bg-[#f5faf7] pt-7 pb-6 px-5 sm:pt-6 sm:pb-8 sm:px-4 md:pt-8 md:pb-10 md:px-8 lg:pt-10 lg:pb-[72px] lg:px-[84px] gap-7 md:gap-8 lg:gap-24 flex-wrap ",style:{boxShadow:"0 4px 15px rgba(0, 0, 0, 0.3)",fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)("section",{className:"flex flex-col items-start justify-center flex-1 min-w-[220px] md:min-w-[320px] max-w-full text-left text-Neutral-07-100",children:(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start w-full gap-4 sm:gap-6 md:gap-8 lg:gap-11",children:[(0,s.jsx)("div",{className:"w-full flex flex-col items-start justify-start gap-3 sm:gap-4 md:gap-5 lg:gap-[21px]",children:(0,s.jsxs)("div",{className:"w-full flex flex-col items-start justify-start gap-2 sm:gap-3 md:gap-4 lg:gap-[27px]",children:[(0,s.jsx)("p",{className:"m-0 relative tracking-[-0.2px] sm:tracking-[-0.3px] md:tracking-[-0.4px] leading-6 sm:leading-7 md:leading-8 lg:leading-[44px] font-[500] inline-block text-lg sm:text-xl md:text-2xl lg:text-[32px]",style:{fontFamily:'"Noto Serif TC", serif'},children:e("title")}),(0,s.jsx)("h3",{className:"m-0 relative text-sm sm:text-base md:text-lg lg:text-xl leading-5 sm:leading-6 md:leading-7 lg:leading-8 font-[400] inline-block",style:{fontFamily:'"Noto Serif TC", serif'},children:e("description")})]})}),(0,s.jsx)(c.N_,{href:"/price",className:"w-full max-w-[200px] sm:max-w-[220px] md:max-w-[247px]",children:(0,s.jsxs)("button",{className:"cursor-pointer border-none p-0 bg-transparent w-full h-[40px] sm:h-[44px] md:h-[48px] lg:h-[60px] flex flex-row items-start justify-start relative hover:scale-105 transition-transform duration-300",style:{filter:"drop-shadow(0 4px 15px rgba(0, 0, 0, 0.3))",fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)("div",{className:"h-[35px] sm:h-[38px] md:h-[40px] lg:h-[55px] w-full absolute right-0 bottom-[-6px] sm:bottom-[-7px] md:bottom-[-8px] left-0 filter blur-[8px] sm:blur-[9px] md:blur-[10px] rounded-[50px] bg-[rgba(49,129,97,0.4)]"}),(0,s.jsx)("div",{className:"rounded-[15px] sm:rounded-[18px] md:rounded-[20px] bg-gradient-to-r from-[#318161] to-[#318177] flex flex-row items-center justify-center py-2 sm:py-3 md:py-3 lg:py-4 px-4 sm:px-5 md:px-6 lg:px-[42px] z-[1] w-full hover:from-[#2a6e56] hover:to-[#2a6e62] transition-colors duration-300",children:(0,s.jsx)("div",{className:"relative text-sm sm:text-base md:text-lg lg:text-2xl font-[500] text-[#fff] text-center",style:{fontFamily:'"Noto Serif TC", serif'},children:e("button")})})]})})]})}),(0,s.jsx)("div",{className:"w-full max-w-[348px] flex-shrink-0 self-center md:self-auto mb-4 md:mb-0",children:(0,s.jsx)("div",{className:"relative w-full aspect-[348/177]",children:(0,s.jsx)(r.default,{className:"object-cover w-full h-full rounded-lg",fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 348px",alt:"",src:"/images/report/fengshui05-1@2x.png",priority:!1})})})]})}function w(e){var l,t,a,o,n;let{locale:x}=e,[m,u]=(0,i.useState)(null),p=(0,d.c3)("report"),[h,w]=(0,i.useState)(!0),[j,y]=(0,i.useState)([]),[N,C]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=[{title:p("title1"),children:[{title:"年柱"},{title:"月柱"},{title:"日柱"},{title:p("shizhu")}]},{title:p("title2"),children:[{title:p("title2-1"),color:"#088C6E",bgColor:"#F7FAF9"},{title:p("title2-2"),color:"#00A637",bgColor:"#F5FAF7"},{title:p("title2-3"),color:"#0A58A6",bgColor:"#F5F8FA"},{title:p("title2-4"),color:"#E52E5C",bgColor:"#FAF5F6"},{title:p("title2-5"),color:"#D9B815",bgColor:"#FCFBF5"},{title:p("title2-6"),color:"#066952",bgColor:"#F7FAF9"}]},{title:p("title3")}],l=[{id:"section-0",title:"第一章：个人命理基础分析",isMain:!0},{id:"section-0-0",title:"年柱",isMain:!1},{id:"section-0-1",title:"月柱"},{id:"section-0-2",title:"日柱"},{id:"section-0-3",title:"时柱"},{id:"section-1",title:"第二章：流年运程基础分析",isMain:!0},{id:"section-1-0",title:"整体运势"},{id:"section-1-1",title:"健康运势"},{id:"section-1-2",title:"事业运势"},{id:"section-1-3",title:"感情运势"},{id:"section-1-4",title:"财运运势"},{id:"section-1-5",title:"总结"},{id:"section-2",title:"第三章：流年运程基础分析",isMain:!0},{id:"section-3",isMain:!0}];h?(y([...e,{title:p("title4")}]),C(l)):(y([...e,{title:p("title4")},{title:p("title5")},{title:p("title6")}]),C([...l,{id:"section-4",isMain:!0},{id:"section-5",isMain:!0}]))},[h]);let{loading:k,reportDocData:z,assistantData:D}=(0,f.A)(x,m),{data:_}=(0,g.wV)();return(0,i.useEffect)(()=>{var e;let l=null==_?void 0:null===(e=_.user)||void 0===e?void 0:e.userId;l&&(async()=>{let{status:e,message:t,data:s}=await (0,v.Jt)("/api/users/".concat(l));0==e&&(u(s),w(s.isLock))})()},[null==_?void 0:null===(l=_.user)||void 0===l?void 0:l.userId]),(0,i.useEffect)(()=>{console.log("userInfo",m),console.log("locale",x)},[m,x]),(0,i.useEffect)(()=>{console.log("reportDocData",z)},[z]),(0,s.jsx)("div",{className:"flex items-start justify-center w-full min-h-screen ",children:(0,s.jsxs)("div",{className:"w-full max-w-full p-2 mx-auto bg-white lg:w-full sm:p-1 sm:mt-20 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,s.jsx)("p",{className:" text-lg px-9  text-[#25826c] flex items-center justify-center inline-block mb-5 max-w-full",children:p("pro.scrollInstruction")}),(0,s.jsx)("p",{className:"font-bold text-4xl px-9 font-boldsm:text-lg text-[#25826c] flex items-center justify-center inline-block mb-5 max-w-full",children:p("pro.advancedAnalysisTitle")})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-5",children:(0,s.jsxs)("p",{className:"text-base font-bold leading-8 tracking-normal text-justify px-9",children:[(0,s.jsx)("span",{className:"text-[#073E31] font-bold",children:p("p2-1")}),p("p2-2")]})}),(0,s.jsxs)("div",{className:"flex-1 rounded-t-none rounded-b-[20px] mb-2 flex flex-col items-start justify-start pt-5 sm:pt-[20px] px-2 sm:px-[35px] pb-5 sm:pb-[37px] box-border gap-4 max-w-full z-[1] ",children:[(0,s.jsx)("section",{className:"flex flex-col bg-[#f5faf7] rounded-[20px] p-3 sm:p-5 w-full shadow-md",children:(0,s.jsxs)("div",{className:"w-full mb-6 sm:mb-2 bg-[#f5faf7] pt-4 sm:pt-[31px] px-1 sm:px-[20px] pb-4 sm:pb-[37px] box-border rounded-t-none rounded-b-[20px] z-[1]",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4 sm:hidden",children:null==z?void 0:null===(t=z.yunchengData)||void 0===t?void 0:t.slice(0,5).map((e,l)=>{var t,i,a,o,n,d,c,x,m,u,p,h,f,g,v,b;return(0,s.jsxs)("div",{className:"flex flex-col items-center w-full mb-2",children:[(0,s.jsxs)("p",{className:"flex items-center mb-2 text-sm font-bold leading-8",style:{color:(null==j?void 0:null===(a=j[1])||void 0===a?void 0:null===(i=a.children)||void 0===i?void 0:null===(t=i[l])||void 0===t?void 0:t.color)||"#20B580"},children:[l<5&&(0,s.jsx)(r.default,{src:"/images/report/icon".concat(l,".png"),width:24,height:24,alt:"",className:"mr-1"}),(null==j?void 0:null===(d=j[1])||void 0===d?void 0:null===(n=d.children)||void 0===n?void 0:null===(o=n[l])||void 0===o?void 0:o.title)||"运势".concat(l+1)]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-16 h-16 mb-2 border-4 rounded-full",style:{borderColor:(null==j?void 0:null===(m=j[1])||void 0===m?void 0:null===(x=m.children)||void 0===x?void 0:null===(c=x[l])||void 0===c?void 0:c.color)||"#20B580",background:"#fff",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.4)"},children:[(0,s.jsx)("span",{className:"text-xl font-extrabold",style:{color:(null==j?void 0:null===(h=j[1])||void 0===h?void 0:null===(p=h.children)||void 0===p?void 0:null===(u=p[l])||void 0===u?void 0:u.color)||"#20B580"},children:null===(f=e.zhishu)||void 0===f?void 0:f.split("/")[0]}),(0,s.jsx)("span",{className:"text-xs font-bold",style:{color:(null==j?void 0:null===(b=j[1])||void 0===b?void 0:null===(v=b.children)||void 0===v?void 0:null===(g=v[l])||void 0===g?void 0:g.color)||"#20B580"},children:"/10"})]})]},l)})}),(0,s.jsxs)("div",{className:"hidden sm:block",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6 px-30",children:null==z?void 0:null===(a=z.yunchengData)||void 0===a?void 0:a.slice(0,3).map((e,l)=>{var t,i,a,o,n,d,c,x,m,u,p,h,f,g,v,b;return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("p",{className:"flex items-center mb-2 text-xl font-bold leading-8",style:{color:(null==j?void 0:null===(a=j[1])||void 0===a?void 0:null===(i=a.children)||void 0===i?void 0:null===(t=i[l])||void 0===t?void 0:t.color)||"#20B580"},children:[(0,s.jsx)(r.default,{src:"/images/report/icon".concat(l,".png"),width:24,height:24,alt:"",className:"mr-1"}),(null==j?void 0:null===(d=j[1])||void 0===d?void 0:null===(n=d.children)||void 0===n?void 0:null===(o=n[l])||void 0===o?void 0:o.title)||"运势".concat(l+1)]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-24 h-24 mb-2 border-4 rounded-full",style:{borderColor:(null==j?void 0:null===(m=j[1])||void 0===m?void 0:null===(x=m.children)||void 0===x?void 0:null===(c=x[l])||void 0===c?void 0:c.color)||"#20B580",background:"#fff",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.4)"},children:[(0,s.jsx)("span",{className:"text-4xl font-extrabold",style:{color:(null==j?void 0:null===(h=j[1])||void 0===h?void 0:null===(p=h.children)||void 0===p?void 0:null===(u=p[l])||void 0===u?void 0:u.color)||"#20B580"},children:null===(f=e.zhishu)||void 0===f?void 0:f.split("/")[0]}),(0,s.jsx)("span",{className:"text-base font-bold",style:{color:(null==j?void 0:null===(b=j[1])||void 0===b?void 0:null===(v=b.children)||void 0===v?void 0:null===(g=v[l])||void 0===g?void 0:g.color)||"#20B580"},children:"/10"})]})]},l)})}),(0,s.jsx)("div",{className:"flex items-center px-20 justify-evenly",children:null==z?void 0:null===(o=z.yunchengData)||void 0===o?void 0:o.slice(3,5).map((e,l)=>{var t,i,a,o,n,d,c,x,m,u,p,h,f,g,v,b;return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("p",{className:"flex items-center mb-2 text-xl font-bold leading-8",style:{color:(null==j?void 0:null===(a=j[1])||void 0===a?void 0:null===(i=a.children)||void 0===i?void 0:null===(t=i[l+3])||void 0===t?void 0:t.color)||"#20B580"},children:[(0,s.jsx)(r.default,{src:"/images/report/icon".concat(l+3,".png"),width:24,height:24,alt:"",className:"mr-1"}),(null==j?void 0:null===(d=j[1])||void 0===d?void 0:null===(n=d.children)||void 0===n?void 0:null===(o=n[l+3])||void 0===o?void 0:o.title)||"运势".concat(l+4)]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-24 h-24 mb-2 border-4 rounded-full",style:{borderColor:(null==j?void 0:null===(m=j[1])||void 0===m?void 0:null===(x=m.children)||void 0===x?void 0:null===(c=x[l+3])||void 0===c?void 0:c.color)||"#20B580",background:"#fff",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.4)"},children:[(0,s.jsx)("span",{className:"text-4xl font-extrabold",style:{color:(null==j?void 0:null===(h=j[1])||void 0===h?void 0:null===(p=h.children)||void 0===p?void 0:null===(u=p[l+3])||void 0===u?void 0:u.color)||"#20B580"},children:null===(f=e.zhishu)||void 0===f?void 0:f.split("/")[0]}),(0,s.jsx)("span",{className:"text-base font-bold",style:{color:(null==j?void 0:null===(b=j[1])||void 0===b?void 0:null===(v=b.children)||void 0===v?void 0:null===(g=v[l+3])||void 0===g?void 0:g.color)||"#20B580"},children:"/10"})]})]},l+3)})})]})]})}),(0,s.jsx)("div",{className:"flex flex-col w-full gap-4",children:null==z?void 0:null===(n=z.yunchengData)||void 0===n?void 0:n.slice(0,3).map((e,l)=>{var t,i,a,o,n,d,x,m,u,h,f,g,v;return(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsxs)("section",{style:{backgroundColor:(null==j?void 0:null===(a=j[1])||void 0===a?void 0:null===(i=a.children)||void 0===i?void 0:null===(t=i[l])||void 0===t?void 0:t.bgColor)||"#F7FAF9",overflow:"hidden",position:"relative"},className:"rounded-[20px] p-5 ".concat(0===l?"shadow-md":""),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"flex items-center text-xl font-bold leading-8",style:{color:(null==j?void 0:null===(d=j[1])||void 0===d?void 0:null===(n=d.children)||void 0===n?void 0:null===(o=n[l])||void 0===o?void 0:o.color)||"#20B580"},children:[l<5&&(0,s.jsx)(r.default,{src:"/images/report/icon".concat(l,".png"),width:24,height:24,alt:"",className:"mr-1"}),(null==j?void 0:null===(u=j[1])||void 0===u?void 0:null===(m=u.children)||void 0===m?void 0:null===(x=m[l])||void 0===x?void 0:x.title)||"运势".concat(l+1)]}),l<5&&(0,s.jsxs)("p",{className:"flex items-end leading-8",style:{color:(null==j?void 0:null===(g=j[1])||void 0===g?void 0:null===(f=g.children)||void 0===f?void 0:null===(h=f[l])||void 0===h?void 0:h.color)||"#20B580"},children:[(0,s.jsx)("span",{className:"text-xl font-bold",children:null===(v=e.zhishu)||void 0===v?void 0:v.split("/")[0]}),(0,s.jsx)("span",{className:"text-sm",children:"/10"})]})]}),(0,s.jsx)("p",{className:"leading-8 text-justify",children:1===l?(()=>{let l=e.content.split("。");return l.length>=2?l[0]+"。"+l[1]+"。":l[0]+"。"})():e.content}),2===l&&(0,s.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-full pointer-events-none rounded-b-[20px] bg-gradient-to-t from-white/95 via-white/70 to-transparent backdrop-blur-sm flex items-center justify-center",children:(0,s.jsx)(c.N_,{href:"/price",children:(0,s.jsx)("button",{className:"pointer-events-auto px-6 py-2 rounded-full bg-[rgba(49,129,97)] text-white font-bold text-lg shadow-lg hover:shadow-xl transition-shadow duration-300",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.4)"},children:p("pro.unlockAdvancedAnalysis")})})})]})},l)})})]}),(0,s.jsx)(b,{})]})})}function j(){let e=(0,a.useSearchParams)(),l=(0,a.usePathname)(),t=e.get("roomType"),o=e.get("direction"),r=l.split("/")[1],[d,c]=(0,i.useState)(null),[x,m]=(0,i.useState)(!1),[f,g]=(0,i.useState)(null);return(0,i.useEffect)(()=>{t&&o&&(m(!0),g(null),n().then(e=>c(e)).catch(()=>g("Failed to fetch data")).finally(()=>m(!1)))},[t,o]),(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-white",style:{fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)(h.default,{}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 w-full gap-2 px-2 py-2 mx-0 sm:gap-4 sm:px-4 sm:py-4 sm:mx-2 md:mx-5 md:flex-row lg:gap-6 lg:px-6",children:[(0,s.jsx)("div",{className:"flex items-start justify-center w-full mb-4 md:w-2/5 md:mb-0",children:t&&o&&d&&(0,s.jsx)(u,{roomType:t,direction:o,data:d})}),(0,s.jsx)("div",{className:"flex items-start justify-center w-full md:w-3/5",children:(0,s.jsx)(w,{locale:r})})]}),(0,s.jsx)(p.A,{})]})}},76142:(e,l,t)=>{"use strict";t.d(l,{A:()=>m});var s=t(95155);t(40054);var i=t(12115),a=t(45493),o=t(91599),n=t(48842),r=t(87712),d=t(84616),c=t(66766),x=t(17652);function m(e){var l;let{activeRoom:t,setActiveRoom:m,onChangeDesignData:u,onChangeRoomList:p}=e,h=(0,x.c3)("report"),[f,g]=(0,i.useState)({}),[v,b]=(0,i.useState)({width:0,height:0}),[w,j]=(0,i.useState)(100),[y,N]=(0,i.useState)(0),[C,k]=(0,i.useState)([]),[z,D]=(0,i.useState)(!1),{data:_}=(0,a.wV)();if((0,i.useEffect)(()=>{var e;let l=null==_?void 0:null===(e=_.user)||void 0===e?void 0:e.userId;l&&(async()=>{let{data:e}=await (0,o.Jt)("/api/design/".concat(l));j(e.scale),N(e.compassRotation);let t=e.localItems;if(!t||0===t.length)return;let s=t.filter(e=>"room"===e._type);k(s),m(s[0]);let i=t[0].position.x,a=t[0].position.y,n=t[0].position.x+t[0].size.width,r=t[0].position.y+t[0].size.height;t.forEach(e=>{e.position.x<i&&(i=e.position.x),e.position.y<a&&(a=e.position.y),e.position.x+e.size.width>n&&(n=e.position.x+e.size.width),e.position.y+e.size.height>r&&(r=e.position.y+e.size.height)});let d=t.map(e=>({...e,position:{x:e.position.x-i+100,y:e.position.y-a+100}})),c={...e,localItems:d};g(c),u&&u(c),p&&p(s),b({width:n-i+200,height:r-a+200})})()},[null==_?void 0:null===(l=_.user)||void 0===l?void 0:l.userId]),!f.localItems)return"";function S(e){let l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("in"===e&&w<120)l=w+t;else if("out"===e&&w>50)l=w-t;else{if("reset"!==e)return;l=100}j(l)}let F=e=>{m(e)},B=e=>{m(e)};return(0,s.jsxs)("div",{className:"relative canvasImage",children:[(0,s.jsx)("div",{className:"relative border-1 border-[#E6E6E6] rounded-t-3xl py-[2px] mt-8 overflow-scroll",children:(0,s.jsx)("div",{onClick:()=>D(!1),className:"relative flex justify-center w-full h-135",style:{minWidth:v.width},children:(0,s.jsx)("div",{id:"roomCanvas",className:"absolute cursor-not-allowed",style:{width:"".concat(v.width,"px"),height:"".concat(v.height,"px"),transform:"scale(".concat(w/100,")"),transformOrigin:"top left"},children:(0,s.jsx)("div",{className:"relative",children:f.localItems.map(e=>e._type===n.w$.ROOM?(0,s.jsx)("div",{"data-room-element":"true",className:"absolute ".concat((null==t?void 0:t.id)===e.id?"ring-2 ring-red-500":""," cursor-move z-100"),style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},onClick:l=>{l.stopPropagation(),B(e)},children:(0,s.jsx)("div",{className:"w-full h-full",style:{border:e._type===n.w$.ROOM?"8px solid":"none",borderColor:e._type===n.w$.ROOM?n.$q[e.data._type]:"transparent",borderRadius:"8px",backgroundColor:n.$q[e.data._type]+"80"},children:(0,s.jsx)("div",{className:"absolute top-2 left-2 text-[14px] text-[#888888]",style:{zIndex:1},children:e.data.label})})},e.id):e._type===n.w$.FURNITURE?(0,s.jsx)("div",{"data-room-element":"true",className:"absolute cursor-move z-200",style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},children:(0,s.jsx)(c.default,{draggable:"false",className:(null==t?void 0:t.id)===e.id?"ring-2 ring-red-500":"",style:{transform:e.rotation?"rotate(".concat(e.rotation,"deg)"):"none",transformOrigin:"center"},src:e.activeIcon,alt:"Furniture",width:e.size.width,height:e.size.height})},e.id):void 0)})})})}),(0,s.jsxs)("div",{style:{transform:"rotate(".concat(y,"deg)"),transition:"transform 0.3s ease-out"},className:"absolute flex flex-col items-center top-5 right-5",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"N"}),(0,s.jsx)(c.default,{src:"/images/compass.png",alt:"方向",width:40,height:40})]}),(0,s.jsxs)("div",{className:"absolute flex items-center gap-2 px-3 py-2 bg-white rounded-full shadow-lg top-120 right-5",children:[(0,s.jsx)("button",{className:"p-1 text-gray-600 rounded hover:bg-gray-100",onClick:e=>S("out"),disabled:w<=50,children:(0,s.jsx)(r.A,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-600 min-w-[48px] text-center",children:[w,"%"]}),(0,s.jsx)("button",{className:"p-1 text-gray-600 rounded hover:bg-gray-100",onClick:e=>S("in"),disabled:w>=120,children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{onClick:()=>D(!0),className:"absolute z-20 flex items-center justify-center w-10 h-10 text-xs rounded-full shadow-lg cursor-pointer top-120 left-5",children:[z&&(0,s.jsx)("div",{className:"absolute left-0 w-20 px-4 py-4 overflow-y-auto text-sm bg-white rounded-lg shadow-lg bottom-10 report-menu max-h-110",children:C.map((e,l)=>(0,s.jsx)("div",{className:"text-sm mb-4 cursor-pointer ".concat((null==t?void 0:t.id)===e.id?"text-[#20B580]":""),onClick:()=>F(e),children:e.data.label},l))}),(0,s.jsx)("span",{children:h("catelog")})]})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[4935,8057,586,5647,6453,8543,5493,1990,3063,2942,2115,6699,3151,6721,8441,1684,7358],()=>l(57232)),_N_E=e.O()}]);