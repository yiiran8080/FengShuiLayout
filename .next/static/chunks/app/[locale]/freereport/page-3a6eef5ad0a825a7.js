(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6526],{9731:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var s=l(12115),a=l(91599),i=l(40054),o=l.n(i),r=l(60470);function n(e,t){let l=(0,s.useRef)(!0),[i,n]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null),[x,m]=(0,s.useState)({});(0,s.useEffect)(()=>{console.log("renderRef.current",l.current),(async()=>{let l=null==t?void 0:t.userId;if(l&&e){let s=t.birthDateTime;console.log("查询用户已有报告"),n(!0);let{status:i,data:o}=await (0,a.Jt)("/api/reportUserDoc/".concat(l,"/").concat("zh-CN"==e?"zh":"tw"));if(0==i&&o){if(console.log("已有报告"),"done"==t.genStatus&&(!o.mingLiData||!o.liuNianData||!o.jiajuProData)){let{status:t,data:s}=await (0,a.Jt)("/api/reportUserDoc/".concat(l,"/").concat("zh-CN"==e?"tw":"zh"));0==t&&s&&m(s)}c(o)}else{console.log("生成随机报告");let{data:t}=await (0,a.Jt)("/api/reportDoc/zh",{isCached:!0}),{data:i}=await (0,a.Jt)("/api/reportDoc/tw",{isCached:!0});if(t&&i){let{nayin:o,year:n,month:d,day:x,hour:m}=(0,r.Ay)(s),u=Math.floor(3*Math.random()),p=Math.floor(3*Math.random()),h={nianzhuData:t.nianzhuData[n][u],yuezhuData:t.yuezhuData[d][u],rizhuData:t.rizhuData[x][u],shizhuData:t.shizhuData[m][u],yunchengData:t.yunchengData[o][u],jiajuData:f(t.jiajuData,p)},g={nianzhuData:i.nianzhuData[n][u],yuezhuData:i.yuezhuData[d][u],rizhuData:i.rizhuData[x][u],shizhuData:i.shizhuData[m][u],yunchengData:i.yunchengData[o][u],jiajuData:f(i.jiajuData,p)};c("zh-CN"==e?h:g),(0,a.bE)("/api/reportUserDoc/".concat(l,"/zh"),h),(0,a.bE)("/api/reportUserDoc/".concat(l,"/tw"),g)}}n(!1)}})()},[e,t]);let f=(e,t)=>{if(e){let l=o().cloneDeep(e);for(let e in l){let s=l[e];for(let e in s)s[e]=s[e][t]}return l}};return{loading:i,reportDocData:d,assistantData:x}}},39676:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>k});var s=l(95155),a=l(11518),i=l.n(a),o=l(12115),r=l(35695),n=l(45493);l(55028),l(91247);var d=l(34477);let c=(0,d.createServerReference)("00ef0d2c033754cb8057d429648beae7b1e1d96b51",d.callServer,void 0,d.findSourceMapURL,"getReportDocData");l(40054);var x=l(66766),m=l(17652),f=l(46453),u=l(60388);l(25446),l(76142);var p=l(32502);p.t1.register(p.Bs,p.m_,p.s$);var h=l(69303);function g(e){let{roomType:t,direction:l,data:a}=e,i=(0,m.c3)("freeChapter3"),r=(0,f.Ym)(),[n,d]=(0,o.useState)(null),[c,p]=(0,o.useState)(null),[g,b]=(0,o.useState)("base"),[w,v]=(0,o.useState)(0),[j,y]=(0,o.useState)(""),[N,C]=(0,o.useState)(""),[k,S]=(0,o.useState)(""),{preview:z,setPreview:D,file:_,setFile:F}=(0,h.l)(),E=i.raw("careerContentOptions")||[],M=i.raw("relationshipContentOptions")||[],T=i.raw("wealthContentOptions")||[];(0,o.useEffect)(()=>{if(E.length>0){let e=Math.floor(Math.random()*E.length);y(E[e])}},[E]),(0,o.useEffect)(()=>{if(M.length>0){let e=Math.floor(Math.random()*M.length);C(M[e])}},[M]),(0,o.useEffect)(()=>{if(T.length>0){let e=Math.floor(Math.random()*T.length);S(T[e])}},[T]);let I=[{label:i("tabs.base"),key:"base"},{label:i("tabs.furniture"),key:"furniture"},{label:i("tabs.taboo"),key:"taboo"},{label:i("tabs.wuxing"),key:"wuxing"}],O=[{title:i("risks.career"),content:j||i("careerContent"),titleColor:"text-blue-600",contentColor:"text-blue-700",bgColor:"bg-blue-50"},{title:i("risks.relationship"),content:N||i("relationshipContent"),titleColor:"text-red-600",contentColor:"text-red-700",bgColor:"bg-red-50"},{title:i("risks.wealth"),content:k||i("wealthContent"),titleColor:"text-yellow-600",contentColor:"text-yellow-700",bgColor:"bg-yellow-50"}];return((0,o.useEffect)(()=>{let e;a&&d(null==(e="zh-CN"===r||"zh"===r?a.zhData||a.twData:"zh-TW"===r||"tw"===r?a.twData||a.zhData:a.zhData||a.twData)?void 0:e.jiajuData)},[a,r]),(0,o.useEffect)(()=>{if(n&&n[t]&&n[t][l]){let e=Object.entries(n[t][l]);if(e.length>0){let t=Math.floor(Math.random()*e.length);p(e[t])}}},[n,t,l]),(0,o.useEffect)(()=>{let e=setTimeout(async()=>{if(!z)try{let e=sessionStorage.getItem("uploadPicFileData");if(e){let t=JSON.parse(e);if(!t.timestamp||Date.now()-t.timestamp<36e5){let e=((e,t,l)=>{let s=e.split(","),a=s[0].match(/:(.*?);/)[1],i=atob(s[1]),o=i.length,r=new Uint8Array(o);for(;o--;)r[o]=i.charCodeAt(o);return new File([r],t,{type:a})})(t.base64,t.name,t.type),l=URL.createObjectURL(e);F(e),D(l),console.log("FreeChapter3: Image restored from fallback mechanism")}else sessionStorage.removeItem("uploadPicFileData")}}catch(e){console.error("FreeChapter3: Error in fallback image restoration:",e)}},500);return()=>clearTimeout(e)},[z]),n&&n[t]&&n[t][l])?c?(0,s.jsx)("div",{className:"flex items-start justify-center w-full min-h-screen px-2 mx-auto sm:px-4 lg:px-0",style:{fontFamily:'"Noto Serif TC", serif'},children:(0,s.jsx)("div",{className:"w-full max-w-full p-2 mt-4 sm:p-4 sm:mt-6 lg:p-8 lg:mt-10 rounded-xl",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-row items-start justify-center mb-3 sm:mb-4 lg:mb-6 pt-0 px-1 sm:px-2 lg:px-3.5 text-[#25826c] pb-4 sm:pb-6 lg:pb-[40px] box-border",children:(0,s.jsx)("h1",{className:"relative h-auto m-0 text-xl font-bold leading-tight text-center sm:text-2xl lg:text-4xl",children:i("title")})}),(0,s.jsxs)("div",{className:"flex-1 rounded-2xl sm:mb-8 lg:mb-13 bg-[#f5faf7] flex flex-col items-start justify-start pt-4 sm:pt-6 lg:pt-[40px] px-3 sm:px-4 lg:px-[30px] pb-4 sm:pb-6 lg:pb-[37px] box-border gap-3 sm:gap-4 lg:gap-8 z-[1] shadow-[0_8px_32px_rgba(0,0,0,0.15)]",children:[(0,s.jsx)("div",{className:"flex flex-col items-center w-full gap-2 mx-auto",children:z&&(0,s.jsx)("img",{src:z,alt:i("uploadedImage"),className:"object-cover w-full h-auto max-w-full mb-2 rounded-lg",style:{aspectRatio:"4/3"}})}),(0,s.jsxs)("div",{className:"flex flex-row items-start justify-start h-auto gap-2 text-base sm:text-lg lg:text-xl",children:[(0,s.jsx)(x.default,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 relative overflow-hidden shrink-0 z-[2] bg-transparent",loading:"lazy",width:100,height:100,sizes:"100vw",alt:"",src:"/images/room-icon/bedroom.png"}),(0,s.jsx)("h3",{className:"m-0 relative top-0.5 leading-6 sm:leading-8 font-[400] font-[inherit] z-[2] text-sm sm:text-base lg:text-xl",children:i("roomAnalysis")})]}),(0,s.jsx)("div",{className:"flex flex-col items-start justify-start w-full max-w-full gap-2 px-0 pt-0 pb-2",children:(0,s.jsx)("div",{className:"flex flex-row items-start justify-between w-full gap-1 overflow-x-auto border-b sm:gap-2 lg:gap-5",children:I.map(e=>(0,s.jsx)("button",{className:"relative leading-4 z-[2] px-1 sm:px-2 py-1 focus:outline-none whitespace-nowrap text-xs sm:text-sm lg:text-base ".concat(g===e.key?"border-b-2 border-blue-500 font-bold text-blue-600":"text-gray-500"),onClick:()=>b(e.key),style:{minWidth:"wuxing"===e.key?"auto":"3rem"},children:e.label},e.key))})}),(0,s.jsxs)("div",{className:"w-full",children:["base"===g&&(0,s.jsx)("div",{children:c&&("object"==typeof c[1]&&null!==c[1]?Object.entries(c[1]).map(e=>{let[t,l]=e;return(0,s.jsxs)("p",{className:"flex flex-col mb-2 text-sm leading-6 sm:flex-row sm:leading-8 sm:text-base",children:[(0,s.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-0 sm:min-w-22.5 mb-1 sm:mb-0",children:[t,"："]}),(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:String(l)})]},c[0]+"-"+t)}):(0,s.jsxs)("p",{className:"flex flex-col text-sm leading-6 sm:flex-row sm:leading-8 sm:text-base",children:[(0,s.jsxs)("span",{className:"font-bold whitespace-nowrap min-w-0 sm:min-w-22.5 mb-1 sm:mb-0",children:[c[0],"："]}),(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:String(c[1])})]},c[0]))}),["furniture","taboo","wuxing"].includes(g)&&(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsxs)("div",{className:"bg-[#e6f3fa] rounded-2xl p-4 sm:p-6 min-h-[150px] sm:min-h-[180px] overflow-hidden",children:[(0,s.jsxs)("div",{className:"space-y-2 text-sm leading-relaxed sm:text-base",children:[(0,s.jsx)("p",{children:i("enhancementFocus")}),(0,s.jsx)("p",{children:i("suggestion1")}),(0,s.jsx)("p",{children:i("suggestion2")})]}),(0,s.jsx)("div",{className:"absolute top-0 left-0 z-10 flex items-center justify-center w-full h-full rounded-2xl bg-[#f5faf7]/80 backdrop-blur-xs",children:(0,s.jsx)(u.N_,{href:"/price",children:(0,s.jsx)("button",{"data-track":"unlock-tab-".concat(g,"-chapter3"),className:"pointer-events-auto px-4 sm:px-6 py-2 rounded-full bg-[rgba(49,129,97)] text-white font-bold text-sm sm:text-lg shadow-[0_8px_16px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_24px_rgba(0,0,0,0.3)] transition-shadow duration-300",children:i("unlockButton")})})})]})})]})]}),(0,s.jsxs)("section",{className:"self-stretch flex flex-col items-center justify-center gap-2 sm:gap-3 mb-4 sm:mb-5 text-left text-lg sm:text-2xl lg:text-[40px] text-[#25826c] font-[ABeeZee]",children:[(0,s.jsx)("div",{className:"self-stretch flex flex-row items-center justify-start pl-0.5 box-border max-w-full mt-8 sm:mt-4 lg:mt-0",children:(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center flex-1 gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-start justify-start",children:(0,s.jsx)(x.default,{className:"relative object-cover w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12",loading:"lazy",width:50,height:50,alt:"",src:"/images/image-206@2x.jpeg"})}),(0,s.jsx)("h2",{className:"m-0 justify-center font-semibold leading-6 sm:leading-8 font-[400] z-[1] text-sm sm:text-lg lg:text-[32px] lg:leading-[26px]",style:{fontFamily:'"Noto Serif TC", serif'},children:i("riskDetected")})]})}),(0,s.jsx)("div",{className:"w-full rounded-2xl mb-3 sm:mb-5 flex flex-col items-center justify-center pt-0 sm:pt-[31px] lg:pt-[10px] px-0 pb-3 sm:pb-5 box-border relative gap-2 sm:gap-4 lg:gap-[26px] max-w-full z-[2] text-xs sm:text-sm text-[#0a58a6] font-Font-Family",children:(0,s.jsx)("div",{className:"relative w-full max-w-sm sm:max-w-2xl md:max-w-4xl lg:max-w-6xl xl:max-w-7xl 2xl:max-w-full",children:(0,s.jsxs)("div",{className:"relative px-2 overflow-hidden rounded-lg",children:[(0,s.jsx)("button",{onClick:()=>{v(e=>(e-1+O.length)%O.length)},className:"absolute left-0 sm:left-0 lg:left-2 z-20 p-1.5 sm:p-2 transition-all duration-200 transform -translate-y-1/2 rounded-full shadow-[0_8px_10px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_10px_rgba(0,0,0,0.35)] top-1/2 bg-white/90 hover:bg-white hover:scale-110",disabled:0===w,children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600 sm:w-5 sm:h-5 lg:w-6 lg:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsx)("button",{onClick:()=>{v(e=>(e+1)%O.length)},className:"absolute right-0 sm:right-0 lg:right-2 z-20 p-1.5 sm:p-2 transition-all duration-200 transform -translate-y-1/2 rounded-full shadow-[0_8px_10px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_10px_rgba(0,0,0,0.35)] top-1/2 bg-white/90 hover:bg-white hover:scale-110",disabled:w===O.length-1,children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600 sm:w-5 sm:h-5 lg:w-6 lg:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,s.jsx)("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*w,"%)")},children:O.map((e,t)=>(0,s.jsx)("div",{className:"flex justify-center flex-shrink-0 w-full px-3 py-2 sm:px-6 lg:px-12 sm:py-4",children:(0,s.jsx)("div",{className:"p-3 sm:p-4 lg:p-6 rounded-lg bg-transparent relative   max-w-full sm:max-w-xl lg:max-w-2xl w-full",style:{fontFamily:'"Noto Serif TC", serif'},children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"text-sm sm:text-base lg:text-lg leading-relaxed font-medium p-5 sm:p-6 lg:p-7 rounded-2xl backdrop-blur-lg border-2 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] ".concat(e.titleColor.includes("blue")?"bg-gradient-to-br from-blue-100/90 to-blue-200/70 border-blue-300/60":e.titleColor.includes("red")?"bg-gradient-to-br from-red-100/90 to-red-200/70 border-red-300/60":"bg-gradient-to-br from-yellow-100/90 to-yellow-200/70 border-yellow-300/60"),style:{fontFamily:'"Noto Serif TC", serif',backdropFilter:"blur(20px)",boxShadow:"\n                0 8px 32px rgba(0,0,0,0.15), \n                inset 0 1px 1px rgba(255,255,255,0.8),\n                0 0 0 1px ".concat(e.titleColor.includes("blue")?"rgba(59, 130, 246, 0.3)":e.titleColor.includes("red")?"rgba(239, 68, 68, 0.3)":"rgba(245, 158, 11, 0.3)","\n            ")},children:[(0,s.jsxs)("div",{className:"mb-3 sm:mb-4 lg:mb-5 text-lg sm:text-xl lg:text-2xl font-extrabold ".concat(e.titleColor," relative z-20"),style:{fontFamily:'"Noto Serif TC", serif',fontWeight:"800"},children:[e.title,":"]}),(0,s.jsx)("div",{className:"relative z-10 font-semibold mb-4 sm:mb-5 ".concat(e.titleColor.includes("blue")?"text-blue-900":e.titleColor.includes("red")?"text-red-900":"text-yellow-900"),children:e.content}),(0,s.jsx)("div",{className:"text-sm sm:text-base lg:text-lg leading-relaxed mb-4 sm:mb-5 relative z-10 ".concat(e.titleColor.includes("blue")?"text-blue-800":e.titleColor.includes("red")?"text-red-800":"text-yellow-800"),children:(0,s.jsx)("p",{children:i("callToAction")})}),(0,s.jsx)("div",{className:"relative z-10 flex justify-center",children:(0,s.jsx)(u.N_,{href:"/price",children:(0,s.jsx)("button",{"data-track":"unlock-".concat(e.title.toLowerCase().replace(/\s+/g,"-"),"-chapter3"),className:"px-6 sm:px-8 py-3 sm:py-4 text-sm sm:text-base font-bold text-white transition-all duration-300 rounded-full shadow-lg hover:shadow-xl hover:scale-105 transform ".concat(e.titleColor.includes("blue")?"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800":e.titleColor.includes("red")?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800"),style:{fontFamily:'"Noto Serif TC", serif',boxShadow:"0 6px 20px rgba(0, 0, 0, 0.15)"},children:i("unlockDetailButton")})})}),(0,s.jsx)("div",{className:"absolute bottom-3 left-3 w-2 h-2 rounded-full ".concat(e.titleColor.includes("blue")?"bg-blue-300/40":e.titleColor.includes("red")?"bg-red-300/40":"bg-yellow-300/40")}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-2xl pointer-events-none ".concat(e.titleColor.includes("blue")?"bg-gradient-to-br from-blue-200/20 via-transparent to-blue-300/10":e.titleColor.includes("red")?"bg-gradient-to-br from-red-200/20 via-transparent to-red-300/10":"bg-gradient-to-br from-yellow-200/20 via-transparent to-yellow-300/10")})]})})})},t))})]})})})]})]})})}):null:(0,s.jsx)("div",{children:i("noData")})}p.t1.register(p.Bs,p.m_,p.s$);var b=l(40003),w=l(8900),v=l(9731),j=l(91599);function y(){let e=(0,m.c3)("promo");return(0,s.jsxs)("div",{className:" w-full flex flex-col lg:flex-row items-center lg:items-center justify-center lg:justify-between bg-[#f5faf7] px-4 py-6 sm:px-6 sm:py-8 md:px-8 md:py-10 lg:px-12 lg:py-12 xl:px-16 xl:py-16 2xl:px-20 2xl:py-20 gap-6 lg:gap-12 xl:gap-16 ",style:{fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)("section",{className:"flex flex-col items-center justify-center flex-1 max-w-3xl text-center lg:items-start lg:text-left",children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full gap-3 lg:items-start sm:gap-4 md:gap-5 lg:gap-6 xl:gap-7",children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-start w-full gap-2 lg:items-start sm:gap-3 md:gap-4 lg:gap-5",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-start w-full gap-1 lg:items-start sm:gap-2 md:gap-3 lg:gap-4",children:[(0,s.jsx)("h1",{className:"m-0 relative tracking-[-0.1px] sm:tracking-[-0.2px] md:tracking-[-0.3px] lg:tracking-[-0.4px] leading-tight font-[500] text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl max-w-full",style:{fontFamily:'"Noto Serif TC", serif',color:"#073E31"},children:e("title")}),(0,s.jsx)("h2",{className:"m-0 relative leading-relaxed font-[400] text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl max-w-3xl opacity-90",style:{fontFamily:'"Noto Serif TC", serif',color:"#088C6E"},children:e("description1")}),(0,s.jsx)("h2",{className:"m-0 relative leading-relaxed font-[400] text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl max-w-3xl opacity-90",style:{fontFamily:'"Noto Serif TC", serif',color:"#088C6E"},children:e("description2")})]})})})}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center flex-shrink-0 lg:items-end",children:(0,s.jsx)(u.N_,{href:"/price",className:"w-full max-w-[240px] sm:max-w-[280px] md:max-w-[320px] lg:max-w-[360px] xl:max-w-[400px]",children:(0,s.jsxs)("button",{className:" cursor-pointer border-none p-0 bg-transparent  w-full  h-[40px] sm:h-[45px] md:h-[50px] lg:h-[55px] xl:h-[60px] 2xl:h-[65px] flex flex-row items-center justify-center  relative  hover:scale-105  transition-all duration-300 ease-in-out group ",style:{filter:"drop-shadow(0 4px 15px rgba(0, 0, 0, 0.2))",fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)("div",{className:" h-[35px] sm:h-[40px] md:h-[45px] lg:h-[50px] xl:h-[55px] 2xl:h-[60px] w-full  absolute  right-0 bottom-[-6px] sm:bottom-[-7px] md:bottom-[-8px] left-0  filter blur-[8px] sm:blur-[9px] md:blur-[10px]  rounded-[20px] sm:rounded-[22px] md:rounded-[25px]  bg-[rgba(49,129,97,0.3)] group-hover:bg-[rgba(49,129,97,0.4)] transition-all duration-300 "}),(0,s.jsx)("div",{className:" rounded-[15px] sm:rounded-[18px] md:rounded-[20px]  bg-gradient-to-r from-[#318161] to-[#318177]  flex flex-row items-center justify-center  py-2 sm:py-3 md:py-3 lg:py-4 xl:py-4 2xl:py-5 px-4 sm:px-6 md:px-8 lg:px-10 xl:px-12 2xl:px-14 z-[1] w-full  hover:from-[#2a6e56] hover:to-[#2a6e62]  group-hover:shadow-xl transition-all duration-300 ",children:(0,s.jsx)("div",{className:" relative  text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl 2xl:text-3xl font-[500]  text-[#fff]  text-center tracking-wide group-hover:scale-105 transition-transform duration-300 ",style:{fontFamily:'"Noto Serif TC", serif'},children:e("button")})})]})})})]})}function N(e){var t,l,a,r,d,c,f;let{locale:p}=e,[h,g]=(0,o.useState)(null),b=(0,m.c3)("report"),[w,y]=(0,o.useState)(!0),[N,C]=(0,o.useState)([]),[k,S]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=[{title:b("title1"),children:[{title:"年柱"},{title:"月柱"},{title:"日柱"},{title:b("shizhu")}]},{title:b("title2"),children:[{title:b("title2-1"),color:"#088C6E",bgColor:"#F7FAF9"},{title:b("title2-2"),color:"#00A637",bgColor:"#F5FAF7"},{title:b("title2-3"),color:"#0A58A6",bgColor:"#F5F8FA"},{title:b("title2-4"),color:"#E52E5C",bgColor:"#FAF5F6"},{title:b("title2-5"),color:"#D9B815",bgColor:"#FCFBF5"},{title:b("title2-6"),color:"#066952",bgColor:"#F7FAF9"}]},{title:b("title3")}],t=[{id:"section-0",title:"第一章：个人命理基础分析",isMain:!0},{id:"section-0-0",title:"年柱",isMain:!1},{id:"section-0-1",title:"月柱"},{id:"section-0-2",title:"日柱"},{id:"section-0-3",title:"时柱"},{id:"section-1",title:"第二章：流年运程基础分析",isMain:!0},{id:"section-1-0",title:"整体运势"},{id:"section-1-1",title:"健康运势"},{id:"section-1-2",title:"事业运势"},{id:"section-1-3",title:"感情运势"},{id:"section-1-4",title:"财运运势"},{id:"section-1-5",title:"总结"},{id:"section-2",title:"第三章：流年运程基础分析",isMain:!0},{id:"section-3",isMain:!0}];w?(C([...e,{title:b("title4")}]),S(t)):(C([...e,{title:b("title4")},{title:b("title5")},{title:b("title6")}]),S([...t,{id:"section-4",isMain:!0},{id:"section-5",isMain:!0}]))},[w]);let{loading:z,reportDocData:D,assistantData:_}=(0,v.A)(p,h),{data:F}=(0,n.wV)();(0,o.useEffect)(()=>{var e;let t=null==F?void 0:null===(e=F.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{status:e,message:l,data:s}=await (0,j.Jt)("/api/users/".concat(t));0==e&&(g(s),y(s.isLock))})()},[null==F?void 0:null===(t=F.user)||void 0===t?void 0:t.userId]),(0,o.useEffect)(()=>{console.log("userInfo",h),console.log("locale",p)},[h,p]),(0,o.useEffect)(()=>{console.log("reportDocData",D)},[D]);let E=e=>{var t,l,a,i,o,r,n,d,c,m,f,u,p,h,g,b;let{item:w,index:v,isMobile:j=!1,containerClass:y=""}=e,C=j?16:18;return(0,s.jsxs)("div",{className:"flex flex-col items-center max-w-full",children:[(0,s.jsxs)("p",{className:"flex items-center mb-1 md:mb-2 font-bold leading-tight text-center ".concat(j?"text-xs":"text-xs md:text-sm lg:text-sm xl:text-base"),style:{color:(null==N?void 0:null===(a=N[1])||void 0===a?void 0:null===(l=a.children)||void 0===l?void 0:null===(t=l[v])||void 0===t?void 0:t.color)||"#20B580"},children:[v<5&&(0,s.jsx)(x.default,{src:"/images/report/icon".concat(v,".png"),width:C,height:C,alt:"",className:"flex-shrink-0 mr-1"}),(0,s.jsx)("span",{className:"max-w-full truncate",children:(null==N?void 0:null===(r=N[1])||void 0===r?void 0:null===(o=r.children)||void 0===o?void 0:null===(i=o[v])||void 0===i?void 0:i.title)||"运势".concat(v+1)})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 md:border-3 lg:border-4 rounded-full flex-shrink-0 ".concat(j?"w-12 h-12 sm:w-14 sm:h-14":"w-12 h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 xl:w-18 xl:h-18 ".concat(y)),style:{borderColor:(null==N?void 0:null===(c=N[1])||void 0===c?void 0:null===(d=c.children)||void 0===d?void 0:null===(n=d[v])||void 0===n?void 0:n.color)||"#20B580",background:"#fff",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08)"},children:[(0,s.jsx)("span",{className:"font-extrabold leading-none ".concat(j?"text-sm sm:text-base":"text-sm md:text-base lg:text-lg xl:text-xl"),style:{color:(null==N?void 0:null===(u=N[1])||void 0===u?void 0:null===(f=u.children)||void 0===f?void 0:null===(m=f[v])||void 0===m?void 0:m.color)||"#20B580"},children:null===(p=w.zhishu)||void 0===p?void 0:p.split("/")[0]}),(0,s.jsx)("span",{className:"font-bold leading-none ".concat(j?"text-xs":"text-xs md:text-xs lg:text-sm xl:text-sm"),style:{color:(null==N?void 0:null===(b=N[1])||void 0===b?void 0:null===(g=b.children)||void 0===g?void 0:null===(h=g[v])||void 0===h?void 0:h.color)||"#20B580"},children:"/10"})]})]})};return(0,s.jsx)("div",{className:"flex items-start justify-center w-full min-h-screen ",children:(0,s.jsxs)("div",{className:"w-full max-w-full p-2 mx-auto bg-white lg:w-full sm:p-1 sm:mt-16 rounded-xl",children:[(0,s.jsx)("div",{className:"flex flex-row justify-between md:mr-10 sm:mr-0",children:(0,s.jsxs)("div",{className:"flex flex-col items-center w-full gap-3 mb-5 sm:flex-row sm:justify-between sm:gap-0",children:[(0,s.jsx)("p",{className:"font-bold text-2xl sm:text-4xl px-4 sm:px-9 text-[#25826c] flex items-center justify-center inline-block max-w-full mb-2 sm:mb-0",children:b("pro.advancedAnalysisTitle")}),(0,s.jsx)(u.N_,{href:"/price",className:"flex justify-center w-full sm:w-auto",children:(0,s.jsx)("button",{className:"w-full sm:w-auto pointer-events-auto px-3 sm:px-3 py-2 rounded-full bg-[rgba(49,129,97)] hover:bg-green-600 text-white font-bold text-sm sm:text-lg shadow-[0_8px_16px_rgba(0,0,0,0.25)] hover:shadow-[0_12px_24px_rgba(0,0,0,0.3)] transition-all duration-300",children:b("unlockButton")})})]})}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-5",children:(0,s.jsxs)("p",{className:"text-base font-bold leading-8 tracking-normal text-justify px-9",children:[(0,s.jsx)("span",{className:"text-[#073E31] font-bold",children:b("p2-1")}),b("p2-2")]})}),(0,s.jsxs)("div",{className:"flex-1 rounded-t-none rounded-b-[20px] mb-2 flex flex-col items-start justify-start pt-5 sm:pt-[20px] px-2 sm:px-[35px] pb-5 sm:pb-[37px] box-border gap-4 max-w-full z-[1]",children:[(0,s.jsx)("section",{className:"flex flex-col bg-[#f5faf7] rounded-[20px] p-3 sm:p-5 w-full shadow-lg",children:(0,s.jsxs)("div",{className:"jsx-4b080c2ff309b342 w-full mb-6 sm:mb-2 bg-[#f5faf7] pt-4 sm:pt-[31px] px-2 sm:px-[20px] pb-8 sm:pb-[50px] box-border rounded-t-none rounded-b-[20px] z-[1] overflow-hidden",children:[(0,s.jsxs)("div",{className:"jsx-4b080c2ff309b342 block sm:hidden",children:[(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex items-center justify-between px-1 mb-4",children:null==D?void 0:null===(l=D.yunchengData)||void 0===l?void 0:l.slice(0,3).map((e,t)=>(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex-1 max-w-[30%] px-1",children:(0,s.jsx)(E,{item:e,index:t,isMobile:!0})},t))}),(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex items-center justify-center gap-8",children:null==D?void 0:null===(a=D.yunchengData)||void 0===a?void 0:a.slice(3,5).map((e,t)=>(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex-1 max-w-[40%] px-1",children:(0,s.jsx)(E,{item:e,index:t+3,isMobile:!0})},t+3))})]}),(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 hidden sm:block",children:(0,s.jsxs)("div",{className:"jsx-4b080c2ff309b342 w-full scores-container",children:[(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 single-row-layout",children:(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex items-center justify-between gap-2 px-2 py-4 md:gap-3 lg:gap-4 xl:gap-6 md:px-4 md:py-6",children:null==D?void 0:null===(r=D.yunchengData)||void 0===r?void 0:r.slice(0,5).map((e,t)=>(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex-1 min-w-0 max-w-[18%] px-1",children:(0,s.jsx)(E,{item:e,index:t,isMobile:!1,containerClass:"single-row-circle"})},t))})}),(0,s.jsxs)("div",{style:{display:"none"},className:"jsx-4b080c2ff309b342 two-rows-layout",children:[(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex items-center justify-between gap-2 px-2 mb-4 md:gap-4 md:px-4 md:mb-6",children:null==D?void 0:null===(d=D.yunchengData)||void 0===d?void 0:d.slice(0,3).map((e,t)=>(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex-1 min-w-0 max-w-[30%] px-1",children:(0,s.jsx)(E,{item:e,index:t,isMobile:!1,containerClass:"two-row-circle"})},t))}),(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex items-center justify-center gap-8 md:gap-12",children:null==D?void 0:null===(c=D.yunchengData)||void 0===c?void 0:c.slice(3,5).map((e,t)=>(0,s.jsx)("div",{className:"jsx-4b080c2ff309b342 flex-1 min-w-0 max-w-[40%] px-1",children:(0,s.jsx)(E,{item:e,index:t+3,isMobile:!1,containerClass:"two-row-circle"})},t+3))})]})]})}),(0,s.jsx)(i(),{id:"4b080c2ff309b342",children:".scores-container.jsx-4b080c2ff309b342{width:100%;max-width:100%;overflow:hidden}.single-row-layout.jsx-4b080c2ff309b342{display:block}.two-rows-layout.jsx-4b080c2ff309b342{display:none}.single-row-circle.jsx-4b080c2ff309b342{max-width:100%;max-height:100%}.two-row-circle.jsx-4b080c2ff309b342{max-width:100%;max-height:100%}@media(min-width:640px)and (max-width:1199px){.single-row-layout.jsx-4b080c2ff309b342{display:none!important}.two-rows-layout.jsx-4b080c2ff309b342{display:block!important}}@media(min-width:1200px){.single-row-layout.jsx-4b080c2ff309b342{display:block!important}.two-rows-layout.jsx-4b080c2ff309b342{display:none!important}}@media(min-width:640px)and (max-width:768px){.single-row-layout.jsx-4b080c2ff309b342 .flex.jsx-4b080c2ff309b342{gap:.25rem!important}.two-rows-layout.jsx-4b080c2ff309b342 .flex.jsx-4b080c2ff309b342{gap:.5rem!important}}@media(max-width:639px){.scores-container.jsx-4b080c2ff309b342{padding:0 .25rem}}"})]})}),(0,s.jsx)("div",{className:"flex flex-col w-full gap-4",children:null==D?void 0:null===(f=D.yunchengData)||void 0===f?void 0:f.map((e,t)=>{var l,a,i,o,r,n,d,c,m,f,u,p,h;return(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsxs)("section",{style:{backgroundColor:(null==N?void 0:null===(i=N[1])||void 0===i?void 0:null===(a=i.children)||void 0===a?void 0:null===(l=a[t])||void 0===l?void 0:l.bgColor)||"#F7FAF9",overflow:"hidden",position:"relative",...t>0&&{height:"250px"}},className:"rounded-[20px] p-5 ".concat(0===t?"shadow-lg":"shadow-md"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("p",{className:"flex items-center text-xl font-bold leading-8",style:{color:(null==N?void 0:null===(n=N[1])||void 0===n?void 0:null===(r=n.children)||void 0===r?void 0:null===(o=r[t])||void 0===o?void 0:o.color)||"#20B580"},children:[t<5&&(0,s.jsx)(x.default,{src:"/images/report/icon".concat(t,".png"),width:24,height:24,alt:"",className:"mr-1"}),(null==N?void 0:null===(m=N[1])||void 0===m?void 0:null===(c=m.children)||void 0===c?void 0:null===(d=c[t])||void 0===d?void 0:d.title)||"运势".concat(t+1)]}),t<5&&(0,s.jsxs)("p",{className:"flex items-end leading-8",style:{color:(null==N?void 0:null===(p=N[1])||void 0===p?void 0:null===(u=p.children)||void 0===u?void 0:null===(f=u[t])||void 0===f?void 0:f.color)||"#20B580"},children:[(0,s.jsx)("span",{className:"text-xl font-bold",children:null===(h=e.zhishu)||void 0===h?void 0:h.split("/")[0]}),(0,s.jsx)("span",{className:"text-sm",children:"/10"})]})]}),(0,s.jsx)("p",{className:"leading-8 text-justify",children:e.content}),t>0&&(0,s.jsx)("div",{className:"absolute left-0 bottom-0 w-full pointer-events-none rounded-b-[20px]",style:{height:"64%",background:"linear-gradient(to top, rgba(255,255,255,0.98) 0%, rgba(255,255,255,0.95) 20%, rgba(255,255,255,0.8) 40%, rgba(255,255,255,0.4) 60%, rgba(255,255,255,0.1) 80%, transparent 100%)",backdropFilter:"blur(2.6px)",WebkitBackdropFilter:"blur(2.6px)"}})]})},t)})})]})]})})}let C=e=>{let{locale:t,onClose:l}=e,[a,r]=(0,o.useState)(!1);return(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:(0,s.jsxs)("div",{style:{fontFamily:'"Noto Serif TC", serif',boxShadow:"0 -8px 32px rgba(0, 0, 0, 0.12), 0 -4px 16px rgba(0, 0, 0, 0.08)",background:"linear-gradient(135deg, #f5faf7 0%, #ffffff 50%, #f5faf7 100%)"},className:"jsx-926eb8717d5e663 w-full bg-gradient-to-r from-[#f5faf7] via-[#ffffff] to-[#f5faf7] border-t border-gray-200 shadow-2xl relative",children:[(0,s.jsx)("div",{className:"jsx-926eb8717d5e663 w-full h-1 bg-gradient-to-r from-[#318161] via-[#20B580] to-[#318177] animate-pulse"}),(0,s.jsx)("div",{className:"jsx-926eb8717d5e663 max-w-full px-2 py-3 mx-auto sm:px-4 sm:py-4 sm:max-w-7xl",children:(0,s.jsxs)("div",{className:"jsx-926eb8717d5e663 flex flex-col items-center justify-between w-full gap-3 sm:flex-row sm:items-center sm:gap-4",children:[(0,s.jsxs)("div",{className:"jsx-926eb8717d5e663 flex flex-col items-center w-full sm:items-start",children:[(0,s.jsx)("h3",{style:{fontFamily:'"Noto Serif TC", serif'},className:"jsx-926eb8717d5e663 text-base sm:text-lg md:text-xl font-bold text-[#073E31] truncate text-center sm:text-left",children:"zh-CN"===t?"全面掌握家庭风水运势?":"全面掌握家庭風水運勢?"}),(0,s.jsx)("p",{style:{fontFamily:'"Noto Serif TC", serif'},className:"jsx-926eb8717d5e663 text-xs sm:text-sm md:text-base text-[#088C6E] opacity-90 line-clamp-2 sm:line-clamp-2 w-full text-center sm:text-left sm:mt-1",children:"zh-CN"===t?"想要更加精准了解家庭风水, 改善运势状况, 增强生活幸福感? 只需要花点时间, 就可以改变您的长期运势!":"想要更加精準了解家庭風水, 改善運勢狀況, 增強生活幸福感? 只需要花點時間, 就可以改變您的長期運勢!"})]}),(0,s.jsx)("div",{className:"jsx-926eb8717d5e663 flex justify-center flex-shrink-0 w-full sm:w-auto sm:justify-end",children:(0,s.jsxs)("a",{href:"/price",style:{fontFamily:'"Noto Serif TC", serif',boxShadow:"0 8px 24px rgba(49, 129, 97, 0.3)"},className:"jsx-926eb8717d5e663 group relative inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 sm:px-6 sm:py-3 text-xs sm:text-sm md:text-base font-semibold text-white transition-all duration-300 rounded-xl bg-gradient-to-r from-[#318161] to-[#318177] hover:from-[#2a6e56] hover:to-[#2a6e62] hover:scale-105 active:scale-100 shadow-lg hover:shadow-xl",children:[(0,s.jsx)("div",{className:"jsx-926eb8717d5e663 absolute inset-0 rounded-xl bg-gradient-to-r from-[#318161] to-[#318177] opacity-0 group-hover:opacity-20 transition-opacity duration-300 blur-lg"}),(0,s.jsxs)("span",{className:"jsx-926eb8717d5e663 relative z-10 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-926eb8717d5e663",children:"zh-CN"===t?"推荐HarmoniQ":"推薦HarmoniQ"}),(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-926eb8717d5e663 w-4 h-4 transition-transform duration-300 group-hover:translate-x-1",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-926eb8717d5e663"})})]}),(0,s.jsx)("div",{className:"jsx-926eb8717d5e663 absolute w-3 h-3 bg-red-500 border-2 border-white rounded-full -top-1 -right-1 animate-pulse"})]})})]})}),(0,s.jsx)("button",{onClick:l,"aria-label":"Close",className:"jsx-926eb8717d5e663 absolute z-20 flex items-center justify-center w-8 h-8 transition rounded-full top-2 right-2 bg-white/80 hover:bg-gray-200",children:(0,s.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",className:"jsx-926eb8717d5e663 w-5 h-5 text-gray-700",children:[(0,s.jsx)("line",{x1:"5",y1:"5",x2:"15",y2:"15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"jsx-926eb8717d5e663"}),(0,s.jsx)("line",{x1:"15",y1:"5",x2:"5",y2:"15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"jsx-926eb8717d5e663"})]})}),(0,s.jsx)(i(),{id:"926eb8717d5e663",children:"@media(max-width:639px){.max-w-full.jsx-926eb8717d5e663{max-width:100vw!important}.px-2.jsx-926eb8717d5e663{padding-left:.5rem!important;padding-right:.5rem!important}.py-3.jsx-926eb8717d5e663{padding-top:.75rem!important;padding-bottom:.75rem!important}.overflow-y-auto.jsx-926eb8717d5e663{overflow-y:auto!important}}"})]})})};function k(){let e=(0,r.useSearchParams)(),t=(0,r.usePathname)(),{data:l,status:a}=(0,n.wV)(),i=e.get("roomType"),d=e.get("direction"),x=t.split("/")[1],[m,f]=(0,o.useState)(null),[u,p]=(0,o.useState)(!1),[h,v]=(0,o.useState)(null),[j,k]=(0,o.useState)(!1),[S,z]=(0,o.useState)(!1),[D,_]=(0,o.useState)(!1),[F,E]=(0,o.useState)(!1),M=(0,o.useRef)(null),T=(0,o.useRef)(null),I=(0,o.useRef)(Date.now());(0,o.useEffect)(()=>{E(!0)},[]);let O=async()=>{if(!D&&i&&d&&(null==l?void 0:l.user)&&F)try{console.log("\uD83C\uDFAF Starting to track free report generation...");let e=localStorage.getItem("uploadPicFormData"),t=sessionStorage.getItem("uploadPicFileData"),s={},a=!1,o=null;if(e){let t=JSON.parse(e);s={gender:t.gender||"female",birthDateTime:t.year&&t.month&&t.day&&t.hour?"".concat(t.year,"-").concat(t.month.padStart(2,"0"),"-").concat(t.day.padStart(2,"0"),"T").concat(t.hour.padStart(2,"0"),":00"):new Date().toISOString()}}if(t){let e=JSON.parse(t);a=!0,o=e.name}let r={roomType:i,direction:d,userInfo:s,hasUploadedImage:a,imageFileName:o,analysisResult:m,locale:x||"zh-TW",timeSpentOnPage:Math.round((Date.now()-I.current)/1e3),referrer:document.referrer,sessionId:sessionStorage.getItem("ga_session_id")||"session_".concat(Date.now())};console.log("\uD83D\uDCE4 Sending tracking data:",r);let n=await fetch("/api/track-free-report-generation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(n.ok){let e=await n.json();console.log("✅ Free report generation tracked:",e),_(!0),F&&window.gtag&&window.gtag("event","free_report_generated",{event_category:"Free_Report",event_label:"".concat(i,"_").concat(d),user_id:l.user.email||l.user.userId,custom_parameters:{room_type:i,direction:d,has_image:a,locale:x,total_generated:e.totalGenerated}})}else{let e=await n.json();console.error("❌ Failed to track:",e)}}catch(e){console.error("❌ Error tracking free report generation:",e)}};return((0,o.useEffect)(()=>{i&&d&&(p(!0),v(null),c().then(e=>{f(e)}).catch(()=>v("Failed to fetch data")).finally(()=>p(!1)))},[i,d]),(0,o.useEffect)(()=>{if(F&&(null==l?void 0:l.user)&&m&&!D){let e=setTimeout(()=>{O()},1e3);return()=>clearTimeout(e)}},[F,l,m,D]),(0,o.useEffect)(()=>{let e=()=>{if(!M.current||S)return;let e=M.current.getBoundingClientRect(),t=window.innerHeight;k(!(e.top<t&&e.bottom>0))},t=new IntersectionObserver(e=>{S||e.forEach(e=>{k(!e.isIntersecting)})},{threshold:.1,rootMargin:"0px 0px -100px 0px"});return M.current&&t.observe(M.current),window.addEventListener("scroll",e),e(),()=>{t.disconnect(),window.removeEventListener("scroll",e)}},[S]),F)?(0,s.jsxs)("div",{className:"relative flex flex-col min-h-screen bg-white",style:{fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)(w.default,{}),(0,s.jsxs)("div",{ref:T,className:"flex flex-col flex-1 w-full gap-2 px-2 py-2 mx-0 sm:gap-4 sm:px-4 sm:py-4 sm:mx-2 md:mx-5 md:flex-row lg:gap-6 lg:px-6 ".concat(j?"pb-32 sm:pb-36":"pb-4"," transition-all duration-300"),children:[(0,s.jsx)("div",{className:"flex items-start justify-center w-full mb-4 md:w-2/5 md:mb-0",children:i&&d&&m&&(0,s.jsx)(g,{roomType:i,direction:d,data:m})}),(0,s.jsx)("div",{className:"flex items-start justify-center w-full md:w-3/5",children:(0,s.jsx)(N,{locale:x})})]}),(0,s.jsx)("div",{ref:M,className:"relative",children:(0,s.jsx)(y,{})}),j&&!S&&(0,s.jsx)(C,{locale:x,onClose:()=>{k(!1),z(!0)}}),(0,s.jsx)(b.A,{})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading..."})})}},57232:(e,t,l)=>{Promise.resolve().then(l.bind(l,39676))},76142:(e,t,l)=>{"use strict";l.d(t,{A:()=>m});var s=l(95155);l(40054);var a=l(12115),i=l(45493),o=l(91599),r=l(48842),n=l(87712),d=l(84616),c=l(66766),x=l(17652);function m(e){var t;let{activeRoom:l,setActiveRoom:m,onChangeDesignData:f,onChangeRoomList:u}=e,p=(0,x.c3)("report"),[h,g]=(0,a.useState)({}),[b,w]=(0,a.useState)({width:0,height:0}),[v,j]=(0,a.useState)(100),[y,N]=(0,a.useState)(0),[C,k]=(0,a.useState)([]),[S,z]=(0,a.useState)(!1),{data:D}=(0,i.wV)();if((0,a.useEffect)(()=>{var e;let t=null==D?void 0:null===(e=D.user)||void 0===e?void 0:e.userId;t&&(async()=>{let{data:e}=await (0,o.Jt)("/api/design/".concat(t));j(e.scale),N(e.compassRotation);let l=e.localItems;if(!l||0===l.length)return;let s=l.filter(e=>"room"===e._type);k(s),m(s[0]);let a=l[0].position.x,i=l[0].position.y,r=l[0].position.x+l[0].size.width,n=l[0].position.y+l[0].size.height;l.forEach(e=>{e.position.x<a&&(a=e.position.x),e.position.y<i&&(i=e.position.y),e.position.x+e.size.width>r&&(r=e.position.x+e.size.width),e.position.y+e.size.height>n&&(n=e.position.y+e.size.height)});let d=l.map(e=>({...e,position:{x:e.position.x-a+100,y:e.position.y-i+100}})),c={...e,localItems:d};g(c),f&&f(c),u&&u(s),w({width:r-a+200,height:n-i+200})})()},[null==D?void 0:null===(t=D.user)||void 0===t?void 0:t.userId]),!h.localItems)return"";function _(e){let t,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("in"===e&&v<120)t=v+l;else if("out"===e&&v>50)t=v-l;else{if("reset"!==e)return;t=100}j(t)}let F=e=>{m(e)},E=e=>{m(e)};return(0,s.jsxs)("div",{className:"relative canvasImage",children:[(0,s.jsx)("div",{className:"relative border-1 border-[#E6E6E6] rounded-t-3xl py-[2px] mt-8 overflow-scroll",children:(0,s.jsx)("div",{onClick:()=>z(!1),className:"relative flex justify-center w-full h-135",style:{minWidth:b.width},children:(0,s.jsx)("div",{id:"roomCanvas",className:"absolute cursor-not-allowed",style:{width:"".concat(b.width,"px"),height:"".concat(b.height,"px"),transform:"scale(".concat(v/100,")"),transformOrigin:"top left"},children:(0,s.jsx)("div",{className:"relative",children:h.localItems.map(e=>e._type===r.w$.ROOM?(0,s.jsx)("div",{"data-room-element":"true",className:"absolute ".concat((null==l?void 0:l.id)===e.id?"ring-2 ring-red-500":""," cursor-move z-100"),style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},onClick:t=>{t.stopPropagation(),E(e)},children:(0,s.jsx)("div",{className:"w-full h-full",style:{border:e._type===r.w$.ROOM?"8px solid":"none",borderColor:e._type===r.w$.ROOM?r.$q[e.data._type]:"transparent",borderRadius:"8px",backgroundColor:r.$q[e.data._type]+"80"},children:(0,s.jsx)("div",{className:"absolute top-2 left-2 text-[14px] text-[#888888]",style:{zIndex:1},children:e.data.label})})},e.id):e._type===r.w$.FURNITURE?(0,s.jsx)("div",{"data-room-element":"true",className:"absolute cursor-move z-200",style:{left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height},children:(0,s.jsx)(c.default,{draggable:"false",className:(null==l?void 0:l.id)===e.id?"ring-2 ring-red-500":"",style:{transform:e.rotation?"rotate(".concat(e.rotation,"deg)"):"none",transformOrigin:"center"},src:e.activeIcon,alt:"Furniture",width:e.size.width,height:e.size.height})},e.id):void 0)})})})}),(0,s.jsxs)("div",{style:{transform:"rotate(".concat(y,"deg)"),transition:"transform 0.3s ease-out"},className:"absolute flex flex-col items-center top-5 right-5",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"N"}),(0,s.jsx)(c.default,{src:"/images/compass.png",alt:"方向",width:40,height:40})]}),(0,s.jsxs)("div",{className:"absolute flex items-center gap-2 px-3 py-2 bg-white rounded-full shadow-lg top-120 right-5",children:[(0,s.jsx)("button",{className:"p-1 text-gray-600 rounded hover:bg-gray-100",onClick:e=>_("out"),disabled:v<=50,children:(0,s.jsx)(n.A,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-600 min-w-[48px] text-center",children:[v,"%"]}),(0,s.jsx)("button",{className:"p-1 text-gray-600 rounded hover:bg-gray-100",onClick:e=>_("in"),disabled:v>=120,children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{onClick:()=>z(!0),className:"absolute z-20 flex items-center justify-center w-10 h-10 text-xs rounded-full shadow-lg cursor-pointer top-120 left-5",children:[S&&(0,s.jsx)("div",{className:"absolute left-0 w-20 px-4 py-4 overflow-y-auto text-sm bg-white rounded-lg shadow-lg bottom-10 report-menu max-h-110",children:C.map((e,t)=>(0,s.jsx)("div",{className:"text-sm mb-4 cursor-pointer ".concat((null==l?void 0:l.id)===e.id?"text-[#20B580]":""),onClick:()=>F(e),children:e.data.label},t))}),(0,s.jsx)("span",{children:p("catelog")})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4935,8057,586,5647,6453,5849,5493,534,3063,2942,3061,6699,3151,6721,8441,1684,7358],()=>t(57232)),_N_E=e.O()}]);