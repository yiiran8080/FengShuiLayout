{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/lib/mongoose.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\n// 使用本地MongoDB服务\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n    throw new Error(\r\n        'Please define the MONGODB_URI environment variable inside .env'\r\n    );\r\n}\r\n\r\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n    cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function dbConnect() {\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            // bufferCommands: false,\r\n            serverSelectionTimeoutMS: 30000,\r\n            socketTimeoutMS: 30000\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI, opts)\r\n            .then((mongoose) => {\r\n                console.log('MongoDB connected successfully');\r\n                return mongoose;\r\n            })\r\n            .catch((e) => {\r\n                console.error('MongoDB connection error:', e);\r\n                throw e;\r\n            });\r\n    }\r\n\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        console.error(\"MongoDB connection failed:\", e);\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default dbConnect; "],"names":[],"mappings":";;;AAAA;;AAEA,gBAAgB;AAChB,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IACd,MAAM,IAAI,MACN;AAER;AAEA;;;;CAIC,GACD,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACT,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAC3D;AAEA,eAAe;IACX,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,yBAAyB;YACzB,0BAA0B;YAC1B,iBAAiB;QACrB;QAEA,OAAO,OAAO,GAAG,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,aAAa,MAC1C,IAAI,CAAC,CAAC;YACH,QAAQ,GAAG,CAAC;YACZ,OAAO;QACX,GACC,KAAK,CAAC,CAAC;YACJ,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,MAAM;QACV;IACR;IAEA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/models/Design.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst designSchema = new mongoose.Schema({\r\n    userId: {\r\n        type: String,\r\n        ref: 'User',\r\n        required: true\r\n    },\r\n    canvasPosition: {\r\n        x: Number,\r\n        y: Number\r\n    },\r\n    compassRotation: Number,\r\n    scale: Number,\r\n\r\n    localItems: [{\r\n        id: String,\r\n        _type: String,\r\n        activeIcon: String,\r\n        data: {\r\n            cateType: String,\r\n            _type: String,\r\n            label: String,\r\n            icon: String,\r\n            // activeIcon: String,\r\n            parentRoom: {\r\n                type: mongoose.Schema.Types.Mixed,\r\n                default: null\r\n            },\r\n            size: {\r\n                width: Number,\r\n                height: Number\r\n            },\r\n        },\r\n        size: {\r\n            width: Number,\r\n            height: Number\r\n        },\r\n        position: {\r\n            x: Number,\r\n            y: Number\r\n        },\r\n        rotation: {\r\n            type: Number,\r\n            default: 0\r\n        },\r\n        parentId: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        offset: {\r\n            x: Number,\r\n            y: Number\r\n        }\r\n    }],\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now\r\n    },\r\n    updatedAt: {\r\n        type: Date,\r\n        default: Date.now\r\n    }\r\n});\r\n\r\n// 更新时自动更新updatedAt字段\r\ndesignSchema.pre('save', function (next) {\r\n    this.updatedAt = Date.now();\r\n    next();\r\n});\r\n\r\nconst Design = mongoose.models.Design || mongoose.model('Design', designSchema);\r\n\r\nexport default Design; "],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,eAAe,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;IACrC,QAAQ;QACJ,MAAM;QACN,KAAK;QACL,UAAU;IACd;IACA,gBAAgB;QACZ,GAAG;QACH,GAAG;IACP;IACA,iBAAiB;IACjB,OAAO;IAEP,YAAY;QAAC;YACT,IAAI;YACJ,OAAO;YACP,YAAY;YACZ,MAAM;gBACF,UAAU;gBACV,OAAO;gBACP,OAAO;gBACP,MAAM;gBACN,sBAAsB;gBACtB,YAAY;oBACR,MAAM,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK;oBACjC,SAAS;gBACb;gBACA,MAAM;oBACF,OAAO;oBACP,QAAQ;gBACZ;YACJ;YACA,MAAM;gBACF,OAAO;gBACP,QAAQ;YACZ;YACA,UAAU;gBACN,GAAG;gBACH,GAAG;YACP;YACA,UAAU;gBACN,MAAM;gBACN,SAAS;YACb;YACA,UAAU;gBACN,MAAM;gBACN,SAAS;YACb;YACA,QAAQ;gBACJ,GAAG;gBACH,GAAG;YACP;QACJ;KAAE;IACF,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;IACrB;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;IACrB;AACJ;AAEA,qBAAqB;AACrB,aAAa,GAAG,CAAC,QAAQ,SAAU,IAAI;IACnC,IAAI,CAAC,SAAS,GAAG,KAAK,GAAG;IACzB;AACJ;AAEA,MAAM,SAAS,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,MAAM,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,UAAU;uCAEnD","debugId":null}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/auth.ts"],"sourcesContent":["import NextAuth, { customFetch } from \"next-auth\";\r\n// import { authConfig } from \"./auth.config\";\r\nimport type { NextAuthConfig } from \"next-auth\";\r\nimport GoogleProvider from \"next-auth/providers/google\";\r\nimport AppleProvider from \"next-auth/providers/apple\";\r\nimport GithubProvider from \"next-auth/providers/github\";\r\nimport dbConnect from \"@/lib/mongoose\";\r\nimport User from \"@/models/User\";\r\nimport { ProxyAgent, fetch as undici } from \"undici\";\r\nconst dispatcher = new ProxyAgent({\r\n  uri: process.env.NEXTAUTH_URL_INTERNAL as string,\r\n});\r\nfunction proxy(...args: Parameters<typeof fetch>): ReturnType<typeof fetch> {\r\n  return undici(args[0], { ...(args[1] ?? {}), dispatcher });\r\n}\r\nexport const { handlers, signIn, signOut, auth } = NextAuth(\r\n  {\r\n    trustHost: true,\r\n\r\n    providers: [\r\n      GithubProvider,\r\n      GoogleProvider({\r\n        clientId: process.env.GOOGLE_CLIENT_ID as string,\r\n        clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,\r\n\r\n        //redirectProxyUrl: process.env.NEXTAUTH_URL_INTERNAL as string,\r\n        [customFetch]: proxy,\r\n      }),\r\n      AppleProvider({\r\n        clientId: process.env.APPLE_ID as string,\r\n        clientSecret: process.env.APPLE_SECRET as string,\r\n      }),\r\n    ],\r\n    secret: process.env.NEXTAUTH_SECRET as string,\r\n    // debug: true,\r\n    callbacks: {\r\n      async jwt({ token, user, account }) {\r\n        if (account && user) {\r\n          token.accessToken = account.access_token;\r\n          token.id = user.id;\r\n        }\r\n        return token;\r\n      },\r\n\r\n      // async signIn({ user, account }) {\r\n      //   //console.log(\"OAuth请求目标URL:\", user, account);\r\n      //   return true;\r\n      //   // await dbConnect();\r\n\r\n      //   // // Extract user info from provider data\r\n      //   // const { id, email, name } = user;\r\n      //   // // const provider = account?.provider;\r\n\r\n      //   // // Check if user exists\r\n      //   // let existingUser = await User.findOne({ userId: id });\r\n\r\n      //   // if (!existingUser) {\r\n      //   //     // For new users, prompt them to fill additional info on first login\r\n      //   //     // Store minimal info and redirect to complete profile\r\n      //   //     return `/auth/complete-profile?id=${id}&email=${email}&provider=${provider}`;\r\n      //   // }\r\n      // },\r\n      async session({ session, token }) {\r\n        if (token && session.user) {\r\n          // 扩展 session.user 类型以包含 id 属性\r\n          (session.user as any) = {\r\n            ...session.user,\r\n            id: token.sub,\r\n            userId: session.user.email, //用谷歌邮箱做用户唯一id\r\n          };\r\n        }\r\n        //console.log(\"session\", session);\r\n        return session;\r\n      },\r\n    },\r\n    pages: {\r\n      // error: \"/error\",\r\n      // signIn: '/auth/login',\r\n    },\r\n  } satisfies NextAuthConfig\r\n  //   (req) => {\r\n  //     //   if (req) {\r\n  //     //   console.log(req) // do something with the request\r\n  //     //    }\r\n  //     return { ...authConfig };\r\n  //   }\r\n);\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;;;;;;AACA,MAAM,aAAa,IAAI,mLAAA,CAAA,aAAU,CAAC;IAChC,KAAK,QAAQ,GAAG,CAAC,qBAAqB;AACxC;AACA,SAAS,MAAM,GAAG,IAA8B;IAC9C,OAAO,CAAA,GAAA,mLAAA,CAAA,QAAM,AAAD,EAAE,IAAI,CAAC,EAAE,EAAE;QAAE,GAAI,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QAAG;IAAW;AAC1D;AACO,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,wVAAA,CAAA,UAAQ,AAAD,EACxD;IACE,WAAW;IAEX,WAAW;QACT,iNAAA,CAAA,UAAc;QACd,CAAA,GAAA,iNAAA,CAAA,UAAc,AAAD,EAAE;YACb,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;YAE9C,gEAAgE;YAChE,CAAC,4MAAA,CAAA,cAAW,CAAC,EAAE;QACjB;QACA,CAAA,GAAA,gNAAA,CAAA,UAAa,AAAD,EAAE;YACZ,UAAU,QAAQ,GAAG,CAAC,QAAQ;YAC9B,cAAc,QAAQ,GAAG,CAAC,YAAY;QACxC;KACD;IACD,QAAQ,QAAQ,GAAG,CAAC,eAAe;IACnC,eAAe;IACf,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE;YAChC,IAAI,WAAW,MAAM;gBACnB,MAAM,WAAW,GAAG,QAAQ,YAAY;gBACxC,MAAM,EAAE,GAAG,KAAK,EAAE;YACpB;YACA,OAAO;QACT;QAEA,oCAAoC;QACpC,mDAAmD;QACnD,iBAAiB;QACjB,0BAA0B;QAE1B,+CAA+C;QAC/C,yCAAyC;QACzC,8CAA8C;QAE9C,+BAA+B;QAC/B,8DAA8D;QAE9D,4BAA4B;QAC5B,gFAAgF;QAChF,kEAAkE;QAClE,yFAAyF;QACzF,SAAS;QACT,KAAK;QACL,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACzB,8BAA8B;gBAC7B,QAAQ,IAAI,GAAW;oBACtB,GAAG,QAAQ,IAAI;oBACf,IAAI,MAAM,GAAG;oBACb,QAAQ,QAAQ,IAAI,CAAC,KAAK;gBAC5B;YACF;YACA,kCAAkC;YAClC,OAAO;QACT;IACF;IACA,OAAO;IAGP;AACF","debugId":null}},
    {"offset": {"line": 429, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/lib/session.ts"],"sourcesContent":["import \"server-only\"; // 标记只在服务端使用（客户端组件引入会报错）\r\nimport { auth } from \"@/auth\";\r\nimport { cache } from \"react\";\r\n\r\nasync function getUserInfoFn() {\r\n  const session = await auth();\r\n\r\n  if (!session?.user) {\r\n    return null;\r\n  }\r\n\r\n  return session.user; // 格式如 { id, name, email, image }\r\n}\r\n\r\nexport const getUserInfo = cache(getUserInfoFn);\r\n"],"names":[],"mappings":";;;AAAA,seAAsB,wBAAwB;AAC9C;AACA;;;;AAEA,eAAe;IACb,MAAM,UAAU,MAAM,CAAA,GAAA,2GAAA,CAAA,OAAI,AAAD;IAEzB,IAAI,CAAC,SAAS,MAAM;QAClB,OAAO;IACT;IAEA,OAAO,QAAQ,IAAI,EAAE,iCAAiC;AACxD;AAEO,MAAM,cAAc,CAAA,GAAA,oUAAA,CAAA,QAAK,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 452, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/app/%5Blocale%5D/report/action.ts"],"sourcesContent":["\"use server\";\r\nimport dbConnect from \"@/lib/mongoose\";\r\nimport Design from \"@/models/Design\";\r\nimport { getUserInfo } from \"@/lib/session\";\r\n\r\nexport async function getDesignData() {\r\n  const userInfo = await getUserInfo();\r\n  if (!userInfo || !userInfo.userId) return;\r\n\r\n  await dbConnect();\r\n  const design = await Design.findOne({ userId: userInfo.userId }).select(\r\n    \"-__v\"\r\n  );\r\n  return design;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;;;AAEO,eAAe,uCAAW,GAAX;IACpB,MAAM,WAAW,MAAM,CAAA,GAAA,qHAAA,CAAA,cAAW,AAAD;IACjC,IAAI,CAAC,YAAY,CAAC,SAAS,MAAM,EAAE;IAEnC,MAAM,CAAA,GAAA,sHAAA,CAAA,UAAS,AAAD;IACd,MAAM,SAAS,MAAM,uHAAA,CAAA,UAAM,CAAC,OAAO,CAAC;QAAE,QAAQ,SAAS,MAAM;IAAC,GAAG,MAAM,CACrE;IAEF,OAAO;AACT;;;IATsB;;AAAA,8WAAA","debugId":null}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/app/actions.ts"],"sourcesContent":["\"use server\";\r\nimport { signOut } from \"@/auth\";\r\nexport const handleSignOut = async () => {\r\n  await signOut({ redirectTo: \"/auth/login\" });\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;;;;;AACO,MAAM,uCAAW,GAAX,gBAAgB;IAC3B,MAAM,CAAA,GAAA,2GAAA,CAAA,UAAO,AAAD,EAAE;QAAE,YAAY;IAAc;AAC5C;;;IAFa;;AAAA,8WAAA","debugId":null}},
    {"offset": {"line": 512, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function getBirthDate(birthDateTime: Date) {\n  const date = new Date(birthDateTime);\n  return {\n    year: date.getFullYear().toString(),\n    month: (date.getMonth() + 1).toString().padStart(2, \"0\"),\n    day: date.getDate().toString().padStart(2, \"0\"),\n    hour: date.getHours().toString().padStart(2, \"0\"),\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,yNAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD,EAAE;AACtB;AAEO,SAAS,aAAa,aAAmB;IAC9C,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO;QACL,MAAM,KAAK,WAAW,GAAG,QAAQ;QACjC,OAAO,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;QACpD,KAAK,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;QAC3C,MAAM,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC/C;AACF","debugId":null}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/lib/calendar.js"],"sourcesContent":["/**\r\n* @1900-2100区间内的公历、农历互转\r\n* @charset  UTF-8\r\n* @Author  Ajing(JJonline@JJonline.Cn) \r\n* @Time  2014-7-21\r\n* @Version  $ID$\r\n* @公历转农历：calendar.solar2lunar(1987,11,01); //[you can ignore params of prefix 0]\r\n* @农历转公历：calendar.lunar2solar(1987,09,10); //[you can ignore params of prefix 0]\r\n*/\r\nexport var calendar = {\r\n\r\n  /**\r\n    * 农历1900-2100的润大小信息表\r\n    * @Array Of Property\r\n    * @return Hex \r\n    */\r\n  lunarInfo: [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2,//1900-1909\r\n    0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977,//1910-1919\r\n    0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970,//1920-1929\r\n    0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950,//1930-1939\r\n    0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557,//1940-1949\r\n    0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5b0, 0x14573, 0x052b0, 0x0a9a8, 0x0e950, 0x06aa0,//1950-1959\r\n    0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0,//1960-1969\r\n    0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b6a0, 0x195a6,//1970-1979\r\n    0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570,//1980-1989\r\n    0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0,//1990-1999\r\n    0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0, 0x0abb7, 0x025d0, 0x092d0, 0x0cab5,//2000-2009\r\n    0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930,//2010-2019\r\n    0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530,//2020-2029\r\n    0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45,//2030-2039\r\n    0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0,//2040-2049\r\n    /**Add By JJonline@JJonline.Cn**/\r\n    0x14b63, 0x09370, 0x049f8, 0x04970, 0x064b0, 0x168a6, 0x0ea50, 0x06b20, 0x1a6c4, 0x0aae0,//2050-2059\r\n    0x0a2e0, 0x0d2e3, 0x0c960, 0x0d557, 0x0d4a0, 0x0da50, 0x05d55, 0x056a0, 0x0a6d0, 0x055d4,//2060-2069\r\n    0x052d0, 0x0a9b8, 0x0a950, 0x0b4a0, 0x0b6a6, 0x0ad50, 0x055a0, 0x0aba4, 0x0a5b0, 0x052b0,//2070-2079\r\n    0x0b273, 0x06930, 0x07337, 0x06aa0, 0x0ad50, 0x14b55, 0x04b60, 0x0a570, 0x054e4, 0x0d160,//2080-2089\r\n    0x0e968, 0x0d520, 0x0daa0, 0x16aa6, 0x056d0, 0x04ae0, 0x0a9d4, 0x0a2d0, 0x0d150, 0x0f252,//2090-2099\r\n    0x0d520],//2100\r\n\r\n\r\n  /**\r\n    * 公历每个月份的天数普通表\r\n    * @Array Of Property\r\n    * @return Number \r\n    */\r\n  solarMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\r\n\r\n\r\n  /**\r\n    * 天干地支之天干速查表\r\n    * @Array Of Property trans[\"甲\",\"乙\",\"丙\",\"丁\",\"戊\",\"己\",\"庚\",\"辛\",\"壬\",\"癸\"]\r\n    * @return Cn string \r\n    */\r\n  Gan: [\"\\u7532\", \"\\u4e59\", \"\\u4e19\", \"\\u4e01\", \"\\u620a\", \"\\u5df1\", \"\\u5e9a\", \"\\u8f9b\", \"\\u58ec\", \"\\u7678\"],\r\n\r\n\r\n  /**\r\n    * 天干地支之地支速查表\r\n    * @Array Of Property \r\n    * @trans[\"子\",\"丑\",\"寅\",\"卯\",\"辰\",\"巳\",\"午\",\"未\",\"申\",\"酉\",\"戌\",\"亥\"]\r\n    * @return Cn string \r\n    */\r\n  Zhi: [\"\\u5b50\", \"\\u4e11\", \"\\u5bc5\", \"\\u536f\", \"\\u8fb0\", \"\\u5df3\", \"\\u5348\", \"\\u672a\", \"\\u7533\", \"\\u9149\", \"\\u620c\", \"\\u4ea5\"],\r\n\r\n\r\n  /**\r\n    * 天干地支之地支速查表<=>生肖\r\n    * @Array Of Property \r\n    * @trans[\"鼠\",\"牛\",\"虎\",\"兔\",\"龙\",\"蛇\",\"马\",\"羊\",\"猴\",\"鸡\",\"狗\",\"猪\"]\r\n    * @return Cn string \r\n    */\r\n  Animals: [\"\\u9f20\", \"\\u725b\", \"\\u864e\", \"\\u5154\", \"\\u9f99\", \"\\u86c7\", \"\\u9a6c\", \"\\u7f8a\", \"\\u7334\", \"\\u9e21\", \"\\u72d7\", \"\\u732a\"],\r\n\r\n\r\n  /**\r\n    * 24节气速查表\r\n    * @Array Of Property \r\n    * @trans[\"小寒\",\"大寒\",\"立春\",\"雨水\",\"惊蛰\",\"春分\",\"清明\",\"谷雨\",\"立夏\",\"小满\",\"芒种\",\"夏至\",\"小暑\",\"大暑\",\"立秋\",\"处暑\",\"白露\",\"秋分\",\"寒露\",\"霜降\",\"立冬\",\"小雪\",\"大雪\",\"冬至\"]\r\n    * @return Cn string \r\n    */\r\n  solarTerm: [\"\\u5c0f\\u5bd2\", \"\\u5927\\u5bd2\", \"\\u7acb\\u6625\", \"\\u96e8\\u6c34\", \"\\u60ca\\u86f0\", \"\\u6625\\u5206\", \"\\u6e05\\u660e\", \"\\u8c37\\u96e8\", \"\\u7acb\\u590f\", \"\\u5c0f\\u6ee1\", \"\\u8292\\u79cd\", \"\\u590f\\u81f3\", \"\\u5c0f\\u6691\", \"\\u5927\\u6691\", \"\\u7acb\\u79cb\", \"\\u5904\\u6691\", \"\\u767d\\u9732\", \"\\u79cb\\u5206\", \"\\u5bd2\\u9732\", \"\\u971c\\u964d\", \"\\u7acb\\u51ac\", \"\\u5c0f\\u96ea\", \"\\u5927\\u96ea\", \"\\u51ac\\u81f3\"],\r\n\r\n\r\n  /**\r\n    * 1900-2100各年的24节气日期速查表\r\n    * @Array Of Property \r\n    * @return 0x string For splice\r\n    */\r\n  sTermInfo: ['9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bcf97c3598082c95f8c965cc920f',\r\n    '97bd0b06bdb0722c965ce1cfcc920f', 'b027097bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\r\n    '97bcf97c359801ec95f8c965cc920f', '97bd0b06bdb0722c965ce1cfcc920f', 'b027097bd097c36b0b6fc9274c91aa',\r\n    '97b6b97bd19801ec9210c965cc920e', '97bcf97c359801ec95f8c965cc920f', '97bd0b06bdb0722c965ce1cfcc920f',\r\n    'b027097bd097c36b0b6fc9274c91aa', '9778397bd19801ec9210c965cc920e', '97b6b97bd19801ec95f8c965cc920f',\r\n    '97bd09801d98082c95f8e1cfcc920f', '97bd097bd097c36b0b6fc9210c8dc2', '9778397bd197c36c9210c9274c91aa',\r\n    '97b6b97bd19801ec95f8c965cc920e', '97bd09801d98082c95f8e1cfcc920f', '97bd097bd097c36b0b6fc9210c8dc2',\r\n    '9778397bd097c36c9210c9274c91aa', '97b6b97bd19801ec95f8c965cc920e', '97bcf97c3598082c95f8e1cfcc920f',\r\n    '97bd097bd097c36b0b6fc9210c8dc2', '9778397bd097c36c9210c9274c91aa', '97b6b97bd19801ec9210c965cc920e',\r\n    '97bcf97c3598082c95f8c965cc920f', '97bd097bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\r\n    '97b6b97bd19801ec9210c965cc920e', '97bcf97c3598082c95f8c965cc920f', '97bd097bd097c35b0b6fc920fb0722',\r\n    '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bcf97c359801ec95f8c965cc920f',\r\n    '97bd097bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\r\n    '97bcf97c359801ec95f8c965cc920f', '97bd097bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\r\n    '97b6b97bd19801ec9210c965cc920e', '97bcf97c359801ec95f8c965cc920f', '97bd097bd07f595b0b6fc920fb0722',\r\n    '9778397bd097c36b0b6fc9210c8dc2', '9778397bd19801ec9210c9274c920e', '97b6b97bd19801ec95f8c965cc920f',\r\n    '97bd07f5307f595b0b0bc920fb0722', '7f0e397bd097c36b0b6fc9210c8dc2', '9778397bd097c36c9210c9274c920e',\r\n    '97b6b97bd19801ec95f8c965cc920f', '97bd07f5307f595b0b0bc920fb0722', '7f0e397bd097c36b0b6fc9210c8dc2',\r\n    '9778397bd097c36c9210c9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bd07f1487f595b0b0bc920fb0722',\r\n    '7f0e397bd097c36b0b6fc9210c8dc2', '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\r\n    '97bcf7f1487f595b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\r\n    '97b6b97bd19801ec9210c965cc920e', '97bcf7f1487f595b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722',\r\n    '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bcf7f1487f531b0b0bb0b6fb0722',\r\n    '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\r\n    '97bcf7f1487f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\r\n    '97b6b97bd19801ec9210c9274c920e', '97bcf7f0e47f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722',\r\n    '9778397bd097c36b0b6fc9210c91aa', '97b6b97bd197c36c9210c9274c920e', '97bcf7f0e47f531b0b0bb0b6fb0722',\r\n    '7f0e397bd07f595b0b0bc920fb0722', '9778397bd097c36b0b6fc9210c8dc2', '9778397bd097c36c9210c9274c920e',\r\n    '97b6b7f0e47f531b0723b0b6fb0722', '7f0e37f5307f595b0b0bc920fb0722', '7f0e397bd097c36b0b6fc9210c8dc2',\r\n    '9778397bd097c36b0b70c9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721', '7f0e37f1487f595b0b0bb0b6fb0722',\r\n    '7f0e397bd097c35b0b6fc9210c8dc2', '9778397bd097c36b0b6fc9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721',\r\n    '7f0e27f1487f595b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\r\n    '97b6b7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722',\r\n    '9778397bd097c36b0b6fc9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722',\r\n    '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721',\r\n    '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\r\n    '97b6b7f0e47f531b0723b0787b0721', '7f0e27f0e47f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722',\r\n    '9778397bd097c36b0b6fc9210c91aa', '97b6b7f0e47f149b0723b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722',\r\n    '7f0e397bd07f595b0b0bc920fb0722', '9778397bd097c36b0b6fc9210c8dc2', '977837f0e37f149b0723b0787b0721',\r\n    '7f07e7f0e47f531b0723b0b6fb0722', '7f0e37f5307f595b0b0bc920fb0722', '7f0e397bd097c35b0b6fc9210c8dc2',\r\n    '977837f0e37f14998082b0787b0721', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e37f1487f595b0b0bb0b6fb0722',\r\n    '7f0e397bd097c35b0b6fc9210c8dc2', '977837f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\r\n    '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722', '977837f0e37f14998082b0787b06bd',\r\n    '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722',\r\n    '977837f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722',\r\n    '7f0e397bd07f595b0b0bc920fb0722', '977837f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\r\n    '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722', '977837f0e37f14998082b0787b06bd',\r\n    '7f07e7f0e47f149b0723b0787b0721', '7f0e27f0e47f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722',\r\n    '977837f0e37f14998082b0723b06bd', '7f07e7f0e37f149b0723b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722',\r\n    '7f0e397bd07f595b0b0bc920fb0722', '977837f0e37f14898082b0723b02d5', '7ec967f0e37f14998082b0787b0721',\r\n    '7f07e7f0e47f531b0723b0b6fb0722', '7f0e37f1487f595b0b0bb0b6fb0722', '7f0e37f0e37f14898082b0723b02d5',\r\n    '7ec967f0e37f14998082b0787b0721', '7f07e7f0e47f531b0723b0b6fb0722', '7f0e37f1487f531b0b0bb0b6fb0722',\r\n    '7f0e37f0e37f14898082b0723b02d5', '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\r\n    '7f0e37f1487f531b0b0bb0b6fb0722', '7f0e37f0e37f14898082b072297c35', '7ec967f0e37f14998082b0787b06bd',\r\n    '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e37f0e37f14898082b072297c35',\r\n    '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722',\r\n    '7f0e37f0e366aa89801eb072297c35', '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f149b0723b0787b0721',\r\n    '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e37f0e366aa89801eb072297c35', '7ec967f0e37f14998082b0723b06bd',\r\n    '7f07e7f0e47f149b0723b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722', '7f0e37f0e366aa89801eb072297c35',\r\n    '7ec967f0e37f14998082b0723b06bd', '7f07e7f0e37f14998083b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722',\r\n    '7f0e37f0e366aa89801eb072297c35', '7ec967f0e37f14898082b0723b02d5', '7f07e7f0e37f14998082b0787b0721',\r\n    '7f07e7f0e47f531b0723b0b6fb0722', '7f0e36665b66aa89801e9808297c35', '665f67f0e37f14898082b0723b02d5',\r\n    '7ec967f0e37f14998082b0787b0721', '7f07e7f0e47f531b0723b0b6fb0722', '7f0e36665b66a449801e9808297c35',\r\n    '665f67f0e37f14898082b0723b02d5', '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\r\n    '7f0e36665b66a449801e9808297c35', '665f67f0e37f14898082b072297c35', '7ec967f0e37f14998082b0787b06bd',\r\n    '7f07e7f0e47f531b0723b0b6fb0721', '7f0e26665b66a449801e9808297c35', '665f67f0e37f1489801eb072297c35',\r\n    '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722'],\r\n\r\n\r\n  /**\r\n    * 数字转中文速查表\r\n    * @Array Of Property \r\n    * @trans ['日','一','二','三','四','五','六','七','八','九','十']\r\n    * @return Cn string \r\n    */\r\n  nStr1: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\", \"\\u4e03\", \"\\u516b\", \"\\u4e5d\", \"\\u5341\"],\r\n\r\n\r\n  /**\r\n    * 日期转农历称呼速查表\r\n    * @Array Of Property \r\n    * @trans ['初','十','廿','卅']\r\n    * @return Cn string \r\n    */\r\n  nStr2: [\"\\u521d\", \"\\u5341\", \"\\u5eff\", \"\\u5345\"],\r\n\r\n\r\n  /**\r\n    * 月份转农历称呼速查表\r\n    * @Array Of Property \r\n    * @trans ['正','一','二','三','四','五','六','七','八','九','十','冬','腊']\r\n    * @return Cn string \r\n    */\r\n  nStr3: [\"\\u6b63\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\", \"\\u4e03\", \"\\u516b\", \"\\u4e5d\", \"\\u5341\", \"\\u51ac\", \"\\u814a\"],\r\n\r\n\r\n  /**\r\n    * 返回农历y年一整年的总天数\r\n    * @param lunar Year\r\n    * @return Number\r\n    * @eg:var count = calendar.lYearDays(1987) ;//count=387\r\n    */\r\n  lYearDays: function (y) {\r\n    var i, sum = 348;\r\n    for (i = 0x8000; i > 0x8; i >>= 1) { sum += (calendar.lunarInfo[y - 1900] & i) ? 1 : 0; }\r\n    return (sum + calendar.leapDays(y));\r\n  },\r\n\r\n\r\n  /**\r\n    * 返回农历y年闰月是哪个月；若y年没有闰月 则返回0\r\n    * @param lunar Year\r\n    * @return Number (0-12)\r\n    * @eg:var leapMonth = calendar.leapMonth(1987) ;//leapMonth=6\r\n    */\r\n  leapMonth: function (y) { //闰字编码 \\u95f0\r\n    return (calendar.lunarInfo[y - 1900] & 0xf);\r\n  },\r\n\r\n\r\n  /**\r\n    * 返回农历y年闰月的天数 若该年没有闰月则返回0\r\n    * @param lunar Year\r\n    * @return Number (0、29、30)\r\n    * @eg:var leapMonthDay = calendar.leapDays(1987) ;//leapMonthDay=29\r\n    */\r\n  leapDays: function (y) {\r\n    if (calendar.leapMonth(y)) {\r\n      return ((calendar.lunarInfo[y - 1900] & 0x10000) ? 30 : 29);\r\n    }\r\n    return (0);\r\n  },\r\n\r\n\r\n  /**\r\n    * 返回农历y年m月（非闰月）的总天数，计算m为闰月时的天数请使用leapDays方法\r\n    * @param lunar Year\r\n    * @return Number (-1、29、30)\r\n    * @eg:var MonthDay = calendar.monthDays(1987,9) ;//MonthDay=29\r\n    */\r\n  monthDays: function (y, m) {\r\n    if (m > 12 || m < 1) { return -1 }//月份参数从1至12，参数错误返回-1\r\n    return ((calendar.lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29);\r\n  },\r\n\r\n\r\n  /**\r\n    * 返回公历(!)y年m月的天数\r\n    * @param solar Year\r\n    * @return Number (-1、28、29、30、31)\r\n    * @eg:var solarMonthDay = calendar.leapDays(1987) ;//solarMonthDay=30\r\n    */\r\n  solarDays: function (y, m) {\r\n    if (m > 12 || m < 1) { return -1 } //若参数错误 返回-1\r\n    var ms = m - 1;\r\n    if (ms == 1) { //2月份的闰平规律测算后确认返回28或29\r\n      return (((y % 4 == 0) && (y % 100 != 0) || (y % 400 == 0)) ? 29 : 28);\r\n    } else {\r\n      return (calendar.solarMonth[ms]);\r\n    }\r\n  },\r\n\r\n\r\n  /**\r\n    * 传入offset偏移量返回干支\r\n    * @param offset 相对甲子的偏移量\r\n    * @return Cn string\r\n    */\r\n  toGanZhi: function (offset) {\r\n    return (calendar.Gan[offset % 10] + calendar.Zhi[offset % 12]);\r\n  },\r\n\r\n\r\n  /**\r\n    * 传入公历(!)y年获得该年第n个节气的公历日期\r\n    * @param y公历年(1900-2100)；n二十四节气中的第几个节气(1~24)；从n=1(小寒)算起 \r\n    * @return day Number\r\n    * @eg:var _24 = calendar.getTerm(1987,3) ;//_24=4;意即1987年2月4日立春\r\n    */\r\n  getTerm: function (y, n) {\r\n    if (y < 1900 || y > 2100) { return -1; }\r\n    if (n < 1 || n > 24) { return -1; }\r\n    var _table = calendar.sTermInfo[y - 1900];\r\n\r\n    var _info = [\r\n      parseInt('0x' + _table.substr(0, 5)).toString(),\r\n      parseInt('0x' + _table.substr(5, 5)).toString(),\r\n      parseInt('0x' + _table.substr(10, 5)).toString(),\r\n      parseInt('0x' + _table.substr(15, 5)).toString(),\r\n      parseInt('0x' + _table.substr(20, 5)).toString(),\r\n      parseInt('0x' + _table.substr(25, 5)).toString()\r\n    ];\r\n    var _calday = [\r\n      _info[0].substr(0, 1),\r\n      _info[0].substr(1, 2),\r\n      _info[0].substr(3, 1),\r\n      _info[0].substr(4, 2),\r\n\r\n      _info[1].substr(0, 1),\r\n      _info[1].substr(1, 2),\r\n      _info[1].substr(3, 1),\r\n      _info[1].substr(4, 2),\r\n\r\n      _info[2].substr(0, 1),\r\n      _info[2].substr(1, 2),\r\n      _info[2].substr(3, 1),\r\n      _info[2].substr(4, 2),\r\n\r\n      _info[3].substr(0, 1),\r\n      _info[3].substr(1, 2),\r\n      _info[3].substr(3, 1),\r\n      _info[3].substr(4, 2),\r\n\r\n      _info[4].substr(0, 1),\r\n      _info[4].substr(1, 2),\r\n      _info[4].substr(3, 1),\r\n      _info[4].substr(4, 2),\r\n\r\n      _info[5].substr(0, 1),\r\n      _info[5].substr(1, 2),\r\n      _info[5].substr(3, 1),\r\n      _info[5].substr(4, 2),\r\n    ];\r\n    return parseInt(_calday[n - 1]);\r\n  },\r\n\r\n\r\n  /**\r\n    * 传入农历数字月份返回汉语通俗表示法\r\n    * @param lunar month\r\n    * @return Cn string\r\n    * @eg:var cnMonth = calendar.toChinaMonth(12) ;//cnMonth='腊月'\r\n    */\r\n  toChinaMonth: function (m) { // 月 => \\u6708\r\n    if (m > 12 || m < 1) { return -1 } //若参数错误 返回-1\r\n    var s = calendar.nStr3[m - 1];\r\n    s += \"\\u6708\";//加上月字\r\n    return s;\r\n  },\r\n\r\n\r\n  /**\r\n    * 传入农历日期数字返回汉字表示法\r\n    * @param lunar day\r\n    * @return Cn string\r\n    * @eg:var cnDay = calendar.toChinaDay(21) ;//cnMonth='廿一'\r\n    */\r\n  toChinaDay: function (d) { //日 => \\u65e5\r\n    var s;\r\n    switch (d) {\r\n      case 10:\r\n        s = '\\u521d\\u5341'; break;\r\n      case 20:\r\n        s = '\\u4e8c\\u5341'; break;\r\n        break;\r\n      case 30:\r\n        s = '\\u4e09\\u5341'; break;\r\n        break;\r\n      default:\r\n        s = calendar.nStr2[Math.floor(d / 10)];\r\n        s += calendar.nStr1[d % 10];\r\n    }\r\n    return (s);\r\n  },\r\n\r\n\r\n  /**\r\n    * 年份转生肖[!仅能大致转换] => 精确划分生肖分界线是“立春”\r\n    * @param y year\r\n    * @return Cn string\r\n    * @eg:var animal = calendar.getAnimal(1987) ;//animal='兔'\r\n    */\r\n  getAnimal: function (y) {\r\n    return calendar.Animals[(y - 4) % 12]\r\n  },\r\n\r\n\r\n  /**\r\n    * 传入公历年月日获得详细的公历、农历object信息 <=>JSON\r\n    * @param y  solar year\r\n    * @param m solar month\r\n    * @param d  solar day\r\n    * @return JSON object\r\n    * @eg:console.log(calendar.solar2lunar(1987,11,01));\r\n    */\r\n  solar2lunar: function (y, m, d) { //参数区间1900.1.31~2100.12.31\r\n    if (y < 1900 || y > 2100) { return -1; }//年份限定、上限\r\n    if (y == 1900 && m == 1 && d < 31) { return -1; }//下限\r\n    if (!y) { //未传参  获得当天\r\n      var objDate = new Date();\r\n    } else {\r\n      var objDate = new Date(y, parseInt(m) - 1, d)\r\n    }\r\n    var i, leap = 0, temp = 0;\r\n    //修正ymd参数\r\n    var y = objDate.getFullYear(), m = objDate.getMonth() + 1, d = objDate.getDate();\r\n    var offset = (Date.UTC(objDate.getFullYear(), objDate.getMonth(), objDate.getDate()) - Date.UTC(1900, 0, 31)) / 86400000;\r\n    for (i = 1900; i < 2101 && offset > 0; i++) { temp = calendar.lYearDays(i); offset -= temp; }\r\n    if (offset < 0) { offset += temp; i--; }\r\n\r\n    //是否今天\r\n    var isTodayObj = new Date(), isToday = false;\r\n    if (isTodayObj.getFullYear() == y && isTodayObj.getMonth() + 1 == m && isTodayObj.getDate() == d) {\r\n      isToday = true;\r\n    }\r\n    //星期几\r\n    var nWeek = objDate.getDay(), cWeek = calendar.nStr1[nWeek];\r\n    if (nWeek == 0) { nWeek = 7; }//数字表示周几顺应天朝周一开始的惯例\r\n    //农历年\r\n    var year = i;\r\n\r\n    var leap = calendar.leapMonth(i); //闰哪个月\r\n    var isLeap = false;\r\n\r\n    //效验闰月\r\n    for (i = 1; i < 13 && offset > 0; i++) {\r\n      //闰月\r\n      if (leap > 0 && i == (leap + 1) && isLeap == false) {\r\n        --i;\r\n        isLeap = true; temp = calendar.leapDays(year); //计算农历闰月天数\r\n      }\r\n      else {\r\n        temp = calendar.monthDays(year, i);//计算农历普通月天数\r\n      }\r\n      //解除闰月\r\n      if (isLeap == true && i == (leap + 1)) { isLeap = false; }\r\n      offset -= temp;\r\n    }\r\n\r\n    if (offset == 0 && leap > 0 && i == leap + 1)\r\n      if (isLeap) {\r\n        isLeap = false;\r\n      } else {\r\n        isLeap = true; --i;\r\n      }\r\n    if (offset < 0) { offset += temp; --i; }\r\n    //农历月\r\n    var month = i;\r\n    //农历日\r\n    var day = offset + 1;\r\n\r\n    //天干地支处理\r\n    var sm = m - 1;\r\n    var term3 = calendar.getTerm(year, 3); //该农历年立春日期\r\n    var gzY = calendar.toGanZhi(year - 4);//普通按年份计算，下方尚需按立春节气来修正\r\n\r\n    //依据立春日进行修正gzY\r\n    if (sm < 2 && d < term3) {\r\n      gzY = calendar.toGanZhi(year - 5);\r\n    } else {\r\n      gzY = calendar.toGanZhi(year - 4);\r\n    }\r\n\r\n    //月柱 1900年1月小寒以前为 丙子月(60进制12)\r\n    var firstNode = calendar.getTerm(y, (m * 2 - 1));//返回当月「节」为几日开始\r\n    var secondNode = calendar.getTerm(y, (m * 2));//返回当月「节」为几日开始\r\n\r\n    //依据12节气修正干支月\r\n    var gzM = calendar.toGanZhi((y - 1900) * 12 + m + 11);\r\n    if (d >= firstNode) {\r\n      gzM = calendar.toGanZhi((y - 1900) * 12 + m + 12);\r\n    }\r\n\r\n    //传入的日期的节气与否\r\n    var isTerm = false;\r\n    var Term = null;\r\n    if (firstNode == d) {\r\n      isTerm = true;\r\n      Term = calendar.solarTerm[m * 2 - 2];\r\n    }\r\n    if (secondNode == d) {\r\n      isTerm = true;\r\n      Term = calendar.solarTerm[m * 2 - 1];\r\n    }\r\n    //日柱 当月一日与 1900/1/1 相差天数\r\n    var dayCyclical = Date.UTC(y, sm, 1, 0, 0, 0, 0) / 86400000 + 25567 + 10;\r\n    var gzD = calendar.toGanZhi(dayCyclical + d - 1);\r\n\r\n    return { 'lYear': year, 'lMonth': month, 'lDay': day, 'Animal': calendar.getAnimal(year), 'IMonthCn': (isLeap ? \"\\u95f0\" : '') + calendar.toChinaMonth(month), 'IDayCn': calendar.toChinaDay(day), 'cYear': y, 'cMonth': m, 'cDay': d, 'gzYear': gzY, 'gzMonth': gzM, 'gzDay': gzD, 'isToday': isToday, 'isLeap': isLeap, 'nWeek': nWeek, 'ncWeek': \"\\u661f\\u671f\" + cWeek, 'isTerm': isTerm, 'Term': Term };\r\n  },\r\n\r\n\r\n  /**\r\n    * 传入公历年月日以及传入的月份是否闰月获得详细的公历、农历object信息 <=>JSON\r\n    * @param y  lunar year\r\n    * @param m lunar month\r\n    * @param d  lunar day\r\n    * @param isLeapMonth  lunar month is leap or not.\r\n    * @return JSON object\r\n    * @eg:console.log(calendar.lunar2solar(1987,9,10));\r\n    */\r\n  lunar2solar: function (y, m, d, isLeapMonth) {\t//参数区间1900.1.31~2100.12.1\r\n    var leapOffset = 0;\r\n    var leapMonth = calendar.leapMonth(y);\r\n    var leapDay = calendar.leapDays(y);\r\n    if (isLeapMonth && (leapMonth != m)) { return -1; }//传参要求计算该闰月公历 但该年得出的闰月与传参的月份并不同\r\n    if (y == 2100 && m == 12 && d > 1 || y == 1900 && m == 1 && d < 31) { return -1; }//超出了最大极限值\r\n    var day = calendar.monthDays(y, m);\r\n    if (y < 1900 || y > 2100 || d > day) { return -1; }//参数合法性效验\r\n\r\n    //计算农历的时间差\r\n    var offset = 0;\r\n    for (var i = 1900; i < y; i++) {\r\n      offset += calendar.lYearDays(i);\r\n    }\r\n    var leap = 0, isAdd = false;\r\n    for (var i = 1; i < m; i++) {\r\n      leap = calendar.leapMonth(y);\r\n      if (!isAdd) {//处理闰月\r\n        if (leap <= i && leap > 0) {\r\n          offset += calendar.leapDays(y); isAdd = true;\r\n        }\r\n      }\r\n      offset += calendar.monthDays(y, i);\r\n    }\r\n    //转换闰月农历 需补充该年闰月的前一个月的时差\r\n    if (isLeapMonth) { offset += day; }\r\n    //1900年农历正月一日的公历时间为1900年1月30日0时0分0秒(该时间也是本农历的最开始起始点)\r\n    var stmap = Date.UTC(1900, 1, 30, 0, 0, 0);\r\n    var calObj = new Date((offset + d - 31) * 86400000 + stmap);\r\n    var cY = calObj.getUTCFullYear();\r\n    var cM = calObj.getUTCMonth() + 1;\r\n    var cD = calObj.getUTCDate();\r\n\r\n    return calendar.solar2lunar(cY, cM, cD);\r\n  }\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1522, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/lib/wuxing.js"],"sourcesContent":["export var WanNianLi = (function () {\r\n    //天干序数：1（甲），2（乙），……\r\n    var __TianGan = ['', '甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'],\r\n        //地支序数：1（寅），2（卯），……\r\n        __NianZhi = ['', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥', '子', '丑'],\r\n        //月的地支序数：寅月为正月，……\r\n        __YueZhi = ['', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥', '子', '丑'],\r\n        __WuXing = {\r\n            '甲': '木',\r\n            '乙': '木',\r\n            '丙': '火',\r\n            '丁': '火',\r\n            '戊': '土',\r\n            '己': '土',\r\n            '庚': '金',\r\n            '辛': '金',\r\n            '壬': '水',\r\n            '癸': '水',\r\n            '寅': '木',\r\n            '卯': '木',\r\n            '辰': '土',\r\n            '巳': '火',\r\n            '午': '火',\r\n            '未': '土',\r\n            '申': '金',\r\n            '酉': '金',\r\n            '戌': '土',\r\n            '亥': '水',\r\n            '子': '水',\r\n            '丑': '土'\r\n        },\r\n        __JiaZi = [undefined,\r\n            '甲子', '乙丑', '丙寅', '丁卯', '戊辰', '己巳', '庚午', '辛未', '壬申', '癸酉', '甲戌', '乙亥',\r\n            '丙子', '丁丑', '戊寅', '己卯', '庚辰', '辛巳', '壬午', '癸未', '甲申', '乙酉', '丙戌', '丁亥',\r\n            '戊子', '己丑', '庚寅', '辛卯', '壬辰', '癸巳', '甲午', '乙未', '丙申', '丁酉', '戊戌', '己亥',\r\n            '庚子', '辛丑', '壬寅', '癸卯', '甲辰', '乙巳', '丙午', '丁未', '戊申', '己酉', '庚戌', '辛亥',\r\n            '壬子', '癸丑', '甲寅', '乙卯', '丙辰', '丁巳', '戊午', '己未', '庚申', '辛酉', '壬戌', '癸亥'\r\n        ],\r\n        //时干支\r\n        __ShiGanZhi = {\r\n            '-1': '子',\r\n            '0': '丑',\r\n            '1': '寅',\r\n            '2': '卯',\r\n            '3': '辰',\r\n            '4': '巳',\r\n            '5': '午',\r\n            '6': '未',\r\n            '7': '申',\r\n            '8': '酉',\r\n            '9': '戌',\r\n            '10': '亥',\r\n            '11': '子'\r\n        };\r\n    /**\r\n     * 计算两个日期之间的天数\r\n     * @param {Object} date1\r\n     * @param {Object} date2\r\n     */\r\n    function daysBetweenDate(date1, date2) {\r\n        return parseInt((date2.getTime() - date1.getTime()) / 1000 / 60 / 60 / 24);\r\n    }\r\n\r\n    /**\r\n     * 判断是否闰年\r\n     * @param {Object} year\r\n     */\r\n    function isRunnian(year) {\r\n        year = Number(year);\r\n        if (year % 100 === 0) {\r\n            return year % 400 === 0;\r\n        } else {\r\n            return year % 4 === 0;\r\n        }\r\n    }\r\n    /**\r\n     * 获取月份基数\r\n     * | 月份\t| 1 | 2  | 3  | 4  | 5 | 6  | 7 | 8  | 9 | 10 | 11 | 12 |\r\n     * | 月基数\t| 0 | 31 | -1 | 30 | 0 | 31 | 1 | 32 | 3 | 33 | 4  | 34 |\r\n     * @param {Object} month\r\n     */\r\n    function getMonthBase(month) {\r\n        month = Number(month);\r\n        var base = [undefined, 0, 31, -1, 30, 0, 31, 1, 32, 3, 33, 4, 34];\r\n        return base[month];\r\n    }\r\n    /**\r\n     * 获取指定年份所属的世纪\r\n     * @param {Object} year\r\n     */\r\n    function getCenturyByYear(year) {\r\n        year = Number(year);\r\n        if (year % 100 === 0) {\r\n            return year / 100;\r\n        }\r\n        return parseInt(year / 100) + 1;\r\n    }\r\n    /**\r\n     * 根据世纪，计算该世纪常数。公式：X = 44*(C-17) + (C-17)/4 + 3。C：世纪，X：世纪常数\r\n     * @param {Object} century\r\n     */\r\n    function getCenturyConst(century) {\r\n        century = Number(century);\r\n        return (44 * (century - 17) + parseInt((century - 17) / 4) + 3) % 60;\r\n    }\r\n    /**\r\n     * 根据高氏日柱公式，获取指定日期的天干地支。\r\n     * 公式：r = s/4*6 + 5*(s/4*3+u)+m+d+x。\r\n     * r：日柱的母数，r除以60取余，即时日柱的干支序列数。\r\n     * s：公元年数后两位减1，s/4取整数部分。\r\n     * u：s除以4的余数\r\n     * m：月基数\r\n     * d：日期数\r\n     * x：世纪常数\r\n     * @param {Object} year\r\n     * @param {Object} month\r\n     * @param {Object} date\r\n     */\r\n    function getRiGan(year, month, date) {\r\n        year = Number(year);\r\n        var s = year % 100 - 1,\r\n            u = s % 4,\r\n            m = getMonthBase(month),\r\n            d = date,\r\n            x = getCenturyConst(getCenturyByYear(year));\r\n        // console.log('s:%s,u:%s,m:%s,d:%s,x:%s', s, u, m, d, x);\r\n        var r = parseInt(s / 4) * 6 + 5 * (parseInt(s / 4) * 3 + u) + m + d + x;\r\n        if (isRunnian(year) && month > 2) {\r\n            r += 1;\r\n        }\r\n        r %= 60;\r\n        r === 0 && (r = 60);\r\n        return r;\r\n    }\r\n    /**\r\n     * 获取年干。公式：年干=年份个位数-3。适用于任何西元年，个位数小于3时，借10\r\n     * @param {Object} year\r\n     */\r\n    function getNianGanIndex(year) {\r\n        //年干=年份个位数-3，个位数小于2，借10\r\n        var index = Number(year.toString().slice(-1, year.length));\r\n        index <= 3 && (index += 10);\r\n        index -= 3;\r\n        return index;\r\n    }\r\n    /**\r\n     * 获取年支。公式：年支=(年份+7)/12取余数。整除余0即12，为丑。\r\n     * @param {Object} year\r\n     */\r\n    function getNianZhiIndex(year) {\r\n        return (Number(year) + 7) % 12 || 12;\r\n    }\r\n    /**\r\n     * 获取月干。公式：月干=年干*2+月支\r\n     * @param {Object} nianGanIndex\r\n     * @param {Object} lMonth\r\n     */\r\n    function getYueGanIndex(nianGanIndex, lMonth) {\r\n        var index = Number(nianGanIndex) * 2 + Number(lMonth);\r\n        index %= 10;\r\n        index === 0 && (index = 10);\r\n        return index;\r\n    }\r\n    /**\r\n     * 获取月支。公式：月支=农历月份\r\n     * @param {Object} lMonth\r\n     */\r\n    function getYueZhiIndex(lMonth) {\r\n        return Number(lMonth);\r\n    }\r\n    /**\r\n     * 获取时支。公式：时支=小时/2 - 1（小时为偶数时），时支=(小时+1)/2 - 1（小时为奇数时）\r\n     * @param {Object} hour\r\n     */\r\n    function getShiZhiIndex(hour) {\r\n        hour = Number(hour);\r\n        if (hour % 2 === 0) {\r\n            return hour / 2 - 1;\r\n        } else {\r\n            return (hour + 1) / 2 - 1;\r\n        }\r\n    }\r\n    /**\r\n     * 获取时干。公式：时干=日干*2 + 时支\r\n     * @param {Object} riGanIndex\r\n     * @param {Object} shiZhiIndex\r\n     */\r\n    function getShiGanIndex(riGanIndex, shiZhiIndex) {\r\n        var index = (riGanIndex * 2 + shiZhiIndex) % 10;\r\n        index === 0 && (index = 10);\r\n        return index;\r\n    }\r\n\r\n    function getWuxingResult(wuxing) {\r\n        var temp = { '金': 0, '木': 0, '水': 0, '火': 0, '土': 0 };\r\n        [].forEach.call(Object.keys(wuxing), function (value, index) {\r\n            [].forEach.call(wuxing[value], function (v, i) {\r\n                temp[v]++;\r\n            });\r\n        });\r\n        return temp;\r\n    }\r\n    return {\r\n        getResult: function (date) {\r\n            var __bazi = {\r\n                year: '',\r\n                month: '',\r\n                date: '',\r\n                hour: ''\r\n            };\r\n            var __wuxing = {\r\n                year: '',\r\n                month: '',\r\n                date: '',\r\n                hour: ''\r\n            };\r\n            var nianGanIndex = -1;\r\n            var nianZhiIndex = -1;\r\n            var yueGanIndex = -1;\r\n            var yueZhiIndex = -1;\r\n            var riGanIndex = -1;\r\n            var shiZhiIndex = -1;\r\n            var shiGanIndex = -1;\r\n            var y1 = ''; var y2 = ''; var m1 = ''; var m2 = '';\r\n            var serial = ''; var riGan = '';\r\n\r\n            nianGanIndex = getNianGanIndex(date.cYear);\r\n            y1 = __TianGan[nianGanIndex];\r\n            __bazi.year = y1;\r\n            __wuxing.year = __WuXing[y1];\r\n\r\n            //年支=(年份+7)除以12的余数。\r\n            nianZhiIndex = getNianZhiIndex(date.cYear);\r\n            y2 = __NianZhi[nianZhiIndex];\r\n            __bazi.year += y2;\r\n            __wuxing.year += __WuXing[y2];\r\n\r\n            //月干=年干*2 + 月支，和超过10，直接取个位数\r\n            yueGanIndex = getYueGanIndex(nianGanIndex, date.lMonth);\r\n            y1 = __TianGan[yueGanIndex];\r\n            __bazi.month = y1;\r\n            __wuxing.month = __WuXing[y1];\r\n\r\n            //月支=农历月份\r\n            yueZhiIndex = getYueZhiIndex(date.lMonth);\r\n            y2 = __YueZhi[yueZhiIndex];\r\n            __bazi.month += y2;\r\n            __wuxing.month += __WuXing[y2];\r\n\r\n            //日干及日支。采用高氏日柱公式，得到日期在甲子表中的序号\r\n            serial = getRiGan(date.cYear, date.cMonth, date.cDay);\r\n            riGan = __JiaZi[serial];\r\n            riGanIndex = __TianGan.indexOf(riGan.slice(0, 1));\r\n            __bazi.date = riGan;\r\n            __wuxing.date = __WuXing[riGan.slice(0, 1)] + __WuXing[riGan.slice(1, 2)];\r\n\r\n            //时支\r\n            shiZhiIndex = getShiZhiIndex(date.hour);\r\n            __bazi.hour = __ShiGanZhi[shiZhiIndex];\r\n            __wuxing.hour = __WuXing[__bazi.hour];\r\n            //时干\r\n            shiGanIndex = getShiGanIndex(riGanIndex, shiZhiIndex);\r\n            __bazi.hour = __TianGan[shiGanIndex] + __bazi.hour;\r\n            __wuxing.hour = __WuXing[__TianGan[shiGanIndex]] + __wuxing.hour;\r\n\r\n            return {\r\n                bazi: __bazi,\r\n                wuxing: __wuxing,\r\n                wuxingResult: getWuxingResult(__wuxing)\r\n            };\r\n        }\r\n    };\r\n})();\r\n\r\n// var a = {\r\n//     cYear: 2016, //公历年份\r\n//     cMonth: 7, //公历月份\r\n//     lMonth: 6, //农历月份\r\n//     cDay: 15, //公历日期\r\n//     lDay: 12, //农历日期\r\n//     hour: 22,\r\n//     minute: 16\r\n// };\r\n\r\n// var result = WanNianLi.getResult(a);\r\n// console.log(result);"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1904, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/lib/nayin.js"],"sourcesContent":["import { takeSound } from '@lunisolar/plugin-takesound'\r\nimport lunisolar from 'lunisolar'\r\nimport moment from 'moment';\r\n\r\nlunisolar.extend(takeSound)\r\n\r\n/**\r\n  加载takeSound插件后，\r\n  SB对象（天干地支对象）会添加一个takeSound属性，\r\n */\r\nexport default function getLunisolar(birthDateTime) {\r\n  const lsr = lunisolar(moment(birthDateTime).format('YYYY-MM-DD'));\r\n  return lsr.char8.year.takeSound;\r\n}\r\n\r\n//console.log(lsr.char8.year.takeSound)  // 金箔金 （取得年干支的纳音）\r\n//lsr.char8.year.takeSoundE5.toString() // 金 （取得年干支的纳音五行）\r\n// ...\r\n//console.log(lsr.char8.day.takeSound) // 大海水 （取得日干支的纳音）\r\n//lsr.takeSound // 大海水 （取得日干支的纳音 等同于 lsr.char8.day.takeSound）\r\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEA,2MAAA,CAAA,UAAS,CAAC,MAAM,CAAC,mPAAA,CAAA,YAAS;AAMX,SAAS,aAAa,aAAa;IAChD,MAAM,MAAM,CAAA,GAAA,2MAAA,CAAA,UAAS,AAAD,EAAE,CAAA,GAAA,oLAAA,CAAA,UAAM,AAAD,EAAE,eAAe,MAAM,CAAC;IACnD,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS;AACjC,EAEA,0DAA0D;CAC1D,yDAAyD;CACzD,MAAM;CACN,wDAAwD;CACxD,6DAA6D","debugId":null}},
    {"offset": {"line": 1928, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/components/Report.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/Report.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/Report.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","debugId":null}},
    {"offset": {"line": 1942, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/components/Report.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/Report.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/Report.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyQ,GACtS,uCACA","debugId":null}},
    {"offset": {"line": 1956, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1966, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/fengshui/src/app/%5Blocale%5D/report/page.jsx"],"sourcesContent":["import { getBirthDate } from '@/lib/utils';\r\nimport { calendar } from '@/lib/calendar';\r\nimport { WanNianLi } from '@/lib/wuxing';\r\nimport getLunisolar from '@/lib/nayin';\r\nimport { getDesignData } from './action'\r\nimport Report from \"@/components/Report\"\r\nexport default async function ReportPage({ params, searchParams }) {\r\n    const { locale } = await params;\r\n    const { birthDateTime } = await searchParams;\r\n    if (!birthDateTime) return \"数据错误，请重新生成报告。\"\r\n    const { year, month, day, hour } = getBirthDate(birthDateTime);\r\n    const designData = await getDesignData();\r\n    let lunar = calendar.solar2lunar(Number(year), Number(month), Number(day));\r\n    lunar.hour = Number(hour);\r\n\r\n    let result = WanNianLi.getResult(lunar);\r\n    let nayin = getLunisolar(birthDateTime);\r\n    console.log('result', result, nayin)\r\n\r\n\r\n\r\n    // var msg = msg1 = '';\r\n    // [].forEach.call(Object.keys(result.wuxingResult), function (value, index) {\r\n    //   if (result.wuxingResult[value] === 0) {\r\n    //     msg += '<em>' + value + ': ' + result.wuxingResult[value] + '</em>' + ', ';\r\n    //     !msg1 && (msg1 = '<br/>五行缺：');\r\n    //     msg1 += value + ', ';\r\n    //   } else {\r\n    //     msg += value + ': ' + result.wuxingResult[value] + ', ';\r\n    //   }\r\n    // });\r\n    // msg = msg.slice(0, msg.length - 2);\r\n    // if (msg1.length > 2) {\r\n    //   msg1 = msg1.slice(0, msg1.length - 2);\r\n    // }\r\n    // console.log(msg, msg1)\r\n    return <Report locale={locale} result={result} nayin={nayin} designJsonData={JSON.stringify(designData)} />\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AACe,eAAe,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE;IAC7D,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM;IACzB,MAAM,EAAE,aAAa,EAAE,GAAG,MAAM;IAChC,IAAI,CAAC,eAAe,OAAO;IAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,mHAAA,CAAA,eAAY,AAAD,EAAE;IAChD,MAAM,aAAa,MAAM,CAAA,GAAA,4IAAA,CAAA,gBAAa,AAAD;IACrC,IAAI,QAAQ,sHAAA,CAAA,WAAQ,CAAC,WAAW,CAAC,OAAO,OAAO,OAAO,QAAQ,OAAO;IACrE,MAAM,IAAI,GAAG,OAAO;IAEpB,IAAI,SAAS,oHAAA,CAAA,YAAS,CAAC,SAAS,CAAC;IACjC,IAAI,QAAQ,CAAA,GAAA,mHAAA,CAAA,UAAY,AAAD,EAAE;IACzB,QAAQ,GAAG,CAAC,UAAU,QAAQ;IAI9B,uBAAuB;IACvB,8EAA8E;IAC9E,4CAA4C;IAC5C,kFAAkF;IAClF,qCAAqC;IACrC,4BAA4B;IAC5B,aAAa;IACb,+DAA+D;IAC/D,MAAM;IACN,MAAM;IACN,sCAAsC;IACtC,yBAAyB;IACzB,2CAA2C;IAC3C,IAAI;IACJ,yBAAyB;IACzB,qBAAO,6WAAC,4HAAA,CAAA,UAAM;QAAC,QAAQ;QAAQ,QAAQ;QAAQ,OAAO;QAAO,gBAAgB,KAAK,SAAS,CAAC;;;;;;AAChG","debugId":null}}]
}