"use strict";exports.id=8543,exports.ids=[8543],exports.modules={51243:(e,t,o)=>{o.d(t,{A:()=>b});var a=o(60687),s=o(43210);o(30474),o(3696);var r=o(16189),l=o(95383),i=o(77618),n=o(99208),c=o(93853),d=o(82373),m=o(29200);let x=Array.from({length:100},(e,t)=>1926+t),h=Array.from({length:12},(e,t)=>t+1),f=Array.from({length:31},(e,t)=>t+1),p=Array.from({length:24},(e,t)=>t+1),g={bedroom:"bedroom",livingRoom:"living_room",diningRoom:"dining_room",kitchen:"kitchen",bathroom:"bathroom",studyRoom:"study_room",balcony:"balcony",storageRoom:"storage_room"},u={north:"north",northEast:"northEast",east:"east",center:"center",southEast:"southEast",south:"south",southWest:"southWest",west:"west",northWest:"northWest"},y=(e,t,o)=>{let a=e.split(","),s=a[0].match(/:(.*?);/)[1],r=atob(a[1]),l=r.length,i=new Uint8Array(l);for(;l--;)i[l]=r.charCodeAt(l);return new File([i],t,{type:s})},b=()=>{let e=(0,i.c3)("upload"),t=(0,r.useParams)(),o=t?.locale||"zh-TW",[b,N]=(0,s.useState)(null),[F,j]=(0,s.useState)(null),[S,v]=(0,s.useState)(!1),[w,C]=(0,s.useState)(""),[T,k]=(0,s.useState)(""),[R,D]=(0,s.useState)(""),[I,W]=(0,s.useState)(""),[A,P]=(0,s.useState)(""),[z,E]=(0,s.useState)(""),[_,O]=(0,s.useState)(""),[U,$]=(0,s.useState)(""),[J,L]=(0,s.useState)(""),[B,G]=(0,s.useState)(!1),[H,q]=(0,s.useState)(!1),[Q,V]=(0,s.useState)(null),[Y,K]=(0,s.useState)(!1),[M,X]=(0,s.useState)(!1);(0,s.useRef)(null);let Z=(0,r.useRouter)(),{setPreview:ee,setFile:et}=(0,l.l)(),{data:eo,status:ea}=(0,n.wV)(),{userData:es,forceRefresh:er}=(0,d.J)(),el=Object.keys(g),ei=Object.keys(u),en=()=>{let t=[];if(w||t.push(e("gender")),T||t.push(e("year")),R||t.push(e("month")),I||t.push(e("day")),A||t.push(e("hour")),z||t.push(e("roomType")),_||t.push(e("direction")),t.length>0){let o=e("pleaseCompleteFields")+": "+t.join(", ");return c.oR.warning(o),!1}return!0},ec=()=>{try{localStorage.setItem("uploadPicFormData",JSON.stringify({gender:w,year:T,month:R,day:I,hour:A,roomType:z,direction:_,validationError:Q})),console.log("Form data saved to localStorage")}catch(e){console.error("Error saving form data:",e)}},ed=()=>{try{let e=localStorage.getItem("uploadPicFormData");if(e){let t=JSON.parse(e);C(t.gender||""),k(t.year||""),D(t.month||""),W(t.day||""),P(t.hour||""),E(t.roomType||""),O(t.direction||""),V(t.validationError||null),console.log("Form data loaded from localStorage")}}catch(e){console.error("Error loading form data:",e)}},em=async()=>{try{let e=sessionStorage.getItem("uploadPicFileData");if(e){let t=JSON.parse(e);if(!t.timestamp||Date.now()-t.timestamp<36e5){let e=y(t.base64,t.name,t.type),o=URL.createObjectURL(e);return N(e),j(o),et(e),ee(o),console.log("File restored from sessionStorage:",t.name),console.log("Preview URL created:",o),!0}sessionStorage.removeItem("uploadPicFileData"),console.log("Cleared old file data from sessionStorage")}}catch(e){console.error("Error loading file data:",e),sessionStorage.removeItem("uploadPicFileData")}return!1};(0,s.useEffect)(()=>((async()=>{!Y&&(console.log("Initializing component, loading saved data..."),console.log("Session status:",ea),ed(),await em()?console.log("File successfully restored from storage"):console.log("No saved file found"),K(!0))})(),()=>{F&&F.startsWith("blob:")&&URL.revokeObjectURL(F)}),[]),(0,s.useEffect)(()=>{"loading"!==ea&&Y&&(async()=>{b||F||(console.log("Session loaded, rechecking saved file data..."),await em()&&console.log("File restored after login"))})()},[ea,Y,b,F]),(0,s.useEffect)(()=>{Y&&(w||T||R||I||A||z||_)&&ec()},[w,T,R,I,A,z,_,Q,Y]);let ex=async()=>{if(!M){X(!0),G(!0);try{if(!en())return;console.log("\uD83E\uDDF9 Clearing all old saved data..."),localStorage.removeItem("uploadPicFormData"),sessionStorage.removeItem("freeReportUserData");let t=`${T}-${R.padStart(2,"0")}-${I.padStart(2,"0")}T${A.padStart(2,"0")}:00`,o={gender:w,birthDateTime:t,roomType:g[z],direction:u[_],furniture:U||""};sessionStorage.setItem("freeReportUserData",JSON.stringify(o)),console.log("\uD83D\uDCBE Saved FRESH userData to sessionStorage:",o),er&&er();let a=g[z],s=u[_],r=(0,m.Ay)(t,w);console.log("\uD83D\uDD2E Calculated wuxing data:",r);let l={roomType:a,direction:s,userInfo:o,generatedAt:new Date().toISOString(),reportType:"free_report",birthYear:T,nayin:r.nayin,wuxingJu:r.wuxingJu,bazi:{year:r.year,month:r.month,day:r.day,hour:r.hour},mingPalace:r.mingPalace,bodyPalace:r.bodyPalace,wuxingScale:r.wuxingScale};console.log("\uD83D\uDCCA Analysis result with calculated data:",l),await eh(a,s,{gender:w,birthDateTime:t},l),c.oR.success(e("reportGenerating")||"正在生成您的免費報告..."),Z.push(`/freereport?roomType=${encodeURIComponent(a)}&direction=${encodeURIComponent(s)}&generated=true`)}catch(t){console.error("Error in handleStart:",t),c.oR.error(e("errorGeneratingReport")||"生成報告時發生錯誤")}finally{G(!1),X(!1)}}},eh=async(e,t,a,s)=>{try{let r=await fetch("/api/track-free-report-generation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomType:e,direction:t,userInfo:a,hasUploadedImage:!!b,imageFileName:b?.name||null,analysisResult:s,locale:o||"zh-TW",timeSpentOnPage:0,referrer:document.referrer||"",sessionId:sessionStorage.getItem("ga_session_id")||`session_${Date.now()}`,isAnonymous:!0})});if(r.ok){let e=await r.json();console.log("✅ Free report generation tracked:",e)}else console.error("❌ Failed to track free report generation")}catch(e){console.error("❌ Error tracking free report generation:",e)}};return(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-start w-full min-h-screen px-4 py-6 mb-10 text-center sm:px-6 md:px-8 lg:px-0",style:{backgroundImage:"url('/images/report/freebg.png')",backgroundRepeat:"no-repeat",backgroundPosition:"right center",backgroundSize:"contain"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-sm sm:hidden",style:{zIndex:1}}),(0,a.jsx)("h1",{className:"relative z-10 mt-3 mb-2 mb-4 text-2xl leading-tight md:text-3xl lg:text-4xl sm:leading-normal",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#374A37"},children:e("modalTitle")}),(0,a.jsx)("div",{className:"relative z-10 w-full max-w-4xl mx-auto lg:right-[130px]",children:(0,a.jsxs)("div",{className:"p-1 rounded-xl",children:[(0,a.jsxs)("div",{className:"p-4 space-y-4 sm:p-6 sm:space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl lg:text-4xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#000000",marginBottom:"16px",textAlign:"start"},children:e("personalInfo")}),(0,a.jsx)("p",{className:"text-base md:text-lg lg:text-xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:700,color:"#777777",marginBottom:"24px",textAlign:"start"},children:e("personalInfoDescription")}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-xl text-left md:text-2xl lg:text-3xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#004F44"},children:e("gender")}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"gender",value:"male",checked:"male"===w,onChange:e=>C(e.target.value),className:"sr-only"}),(0,a.jsx)("div",{className:"w-6 h-6 mr-2 rounded-full",style:{backgroundColor:"male"===w?"#004F44":"#D9D9D9"}}),(0,a.jsx)("span",{className:"text-sm md:text-base",style:{fontFamily:'"Noto Serif TC", serif'},children:e("male")})]}),(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"gender",value:"female",checked:"female"===w,onChange:e=>C(e.target.value),className:"sr-only"}),(0,a.jsx)("div",{className:"w-6 h-6 mr-2 rounded-full",style:{backgroundColor:"female"===w?"#004F44":"#D9D9D9"}}),(0,a.jsx)("span",{className:"text-sm md:text-base",style:{fontFamily:'"Noto Serif TC", serif'},children:e("female")})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-xl text-left md:text-2xl lg:text-3xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#004F44"},children:e("birthDateTime")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 md:flex md:flex-wrap",children:[(0,a.jsxs)("select",{className:"px-3 py-3 text-sm border-0 sm:text-base focus:outline-none",style:{borderRadius:"100px",backgroundColor:"#FFFFFF",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.25)",fontFamily:'"Noto Serif TC", serif',width:"100%",maxWidth:"158px"},value:T,onChange:e=>k(e.target.value),children:[(0,a.jsx)("option",{value:"",children:e("year")}),x.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{className:"px-3 py-3 text-sm border-0 sm:text-base focus:outline-none",style:{borderRadius:"100px",backgroundColor:"#FFFFFF",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.25)",fontFamily:'"Noto Serif TC", serif',width:"100%",maxWidth:"158px"},value:R,onChange:e=>D(e.target.value),children:[(0,a.jsx)("option",{value:"",children:e("month")}),h.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{className:"px-3 py-3 text-sm border-0 sm:text-base focus:outline-none",style:{borderRadius:"100px",backgroundColor:"#FFFFFF",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.25)",fontFamily:'"Noto Serif TC", serif',width:"100%",maxWidth:"158px"},value:I,onChange:e=>W(e.target.value),children:[(0,a.jsx)("option",{value:"",children:e("day")}),f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{className:"px-3 py-3 text-sm border-0 sm:text-base focus:outline-none",style:{borderRadius:"100px",backgroundColor:"#FFFFFF",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.25)",fontFamily:'"Noto Serif TC", serif',width:"100%",maxWidth:"158px"},value:A,onChange:e=>P(e.target.value),children:[(0,a.jsx)("option",{value:"",children:e("hour")}),p.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)("h2",{className:"text-2xl md:text-3xl lg:text-4xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#000000",marginTop:"32px",marginBottom:"24px",justifyContent:"start",textAlign:"start"},children:e("roomData")}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4 sm:flex-row sm:items-start",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start space-y-2",children:[(0,a.jsx)("label",{className:"block text-lg text-left md:text-xl lg:text-2xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#004F44"},children:e("roomType")}),(0,a.jsxs)("select",{className:"px-3 py-2 text-sm border-0 focus:outline-none sm:text-base",style:{borderRadius:"100px",backgroundColor:"#FFFFFF",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.25)",fontFamily:'"Noto Serif TC", serif',width:"158px"},value:z,onChange:e=>E(e.target.value),children:[(0,a.jsx)("option",{value:"",children:e("roomTypeSelect")}),el.map(t=>(0,a.jsx)("option",{value:t,children:e(`roomTypes.${t}`)},t))]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start space-y-2",children:[(0,a.jsx)("label",{className:"block text-lg text-left md:text-xl lg:text-2xl",style:{fontFamily:'"Noto Serif TC", serif',fontWeight:900,color:"#004F44"},children:e("direction")}),(0,a.jsxs)("select",{className:"px-3 py-2 text-sm border-0 focus:outline-none sm:text-base",style:{borderRadius:"100px",backgroundColor:"#FFFFFF",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.25)",fontFamily:'"Noto Serif TC", serif',width:"158px"},value:_,onChange:e=>O(e.target.value),children:[(0,a.jsx)("option",{value:"",children:e("directionSelect")}),ei.map(t=>(0,a.jsx)("option",{value:t,children:e(`directions.${t}`)},t))]})]})]})]}),(0,a.jsx)("div",{className:"sticky bottom-0 z-10 flex flex-col items-start p-4 space-y-3 sm:p-6",children:(0,a.jsx)("button",{className:"w-full max-w-[200px] py-3 text-base font-bold text-white transition-all duration-200 rounded-lg shadow-lg sm:text-lg bg-[#004F44] hover:scale-105 hover:shadow-xl active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ex,disabled:B||"loading"===ea,children:B?e("calculating"):"loading"===ea?e("checkingAuth")||"Checking...":e("startAnalysis")})})]})}),J&&(0,a.jsx)("div",{className:"relative z-10 w-full max-w-2xl p-4 mt-6 text-sm text-gray-800 whitespace-pre-line bg-[#004F44] rounded-lg sm:text-base",children:J}),B&&(0,a.jsx)("div",{className:"relative z-10 mt-6 text-sm text-blue-500 sm:text-base",children:e("processing")})]})}},67821:(e,t,o)=>{o.d(t,{A:()=>n});var a=o(60687),s=o(25324),r=o(30474),l=o(35950),i=o(77618);function n(){let e=(0,i.c3)("home.footer"),t={contact:[{name:e("contact"),href:"/customer/contact"}],law:[{name:e("privacy"),href:"/customer/privacy"},{name:e("terms"),href:"/customer/terms"}],social:[{icon:"/images/footer/Facebook.png",href:"https://www.facebook.com/profile.php?id=61578389876952"},{icon:"/images/footer/Instagram.png",href:"https://www.instagram.com/harmoniq_fengshui/"}]};return(0,a.jsx)("footer",{className:"bg-[#004F44] text-gray-300 px-5 md:px-0",style:{fontFamily:"Noto Serif TC, serif"},children:(0,a.jsxs)("div",{className:"container px-4 mx-auto py-25",children:[(0,a.jsxs)("div",{className:"justify-center item-center text-[50px] font-bold text-white text-center mb-10",children:[(0,a.jsx)("h1",{className:"text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"46px"},children:e("title")}),(0,a.jsx)("p",{className:"mt-2 text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"24px"},children:e("subtitle")}),(0,a.jsx)(s.N_,{href:"/price",className:"inline-flex items-center justify-center mt-10 transition-colors hover:bg-gray-50",style:{width:"172px",height:"50px",borderRadius:"20px",backgroundColor:"white",border:"1px solid #ccc",color:"#25826C",textDecoration:"none",fontSize:"18px",fontFamily:"Noto Serif TC, serif"},children:e("button")})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-5",children:[(0,a.jsxs)("div",{className:"flex gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("consult")}),(0,a.jsx)("ul",{className:"space-y-2",children:t.contact.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(s.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("law")}),(0,a.jsx)("ul",{className:"space-y-2",children:t.law.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(s.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white min-w-30",style:{fontFamily:"Noto Serif TC, serif"},children:e("focus")}),(0,a.jsx)("div",{className:"flex space-x-4",children:t.social.map(e=>e.href?(0,a.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80",children:(0,a.jsx)(r.default,{src:e.icon,alt:"",width:30,height:30})},e.icon):(0,a.jsx)(r.default,{src:e.icon,alt:"",width:30,height:30},e.icon))})]})]}),(0,a.jsx)(l.Separator,{className:"mt-7.5"}),(0,a.jsx)("div",{className:"mt-5 font-semibold text-center border-t border-[#004F44] md:mt-10",style:{fontFamily:"Noto Serif TC, serif"},children:(0,a.jsxs)("p",{children:["\xa9 2025 HarmoniQ. ",e("copyright")]})})]})})}}};