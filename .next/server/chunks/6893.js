"use strict";exports.id=6893,exports.ids=[6893],exports.modules={67821:(e,t,l)=>{l.d(t,{A:()=>i});var s=l(60687),r=l(25324),o=l(30474),a=l(35950),n=l(77618);function i(){let e=(0,n.c3)("home.footer"),t={contact:[{name:e("contact"),href:"/customer/contact"}],law:[{name:e("privacy"),href:"/customer/privacy"},{name:e("terms"),href:"/customer/terms"}],social:[{icon:"/images/footer/Facebook.png",href:"https://www.facebook.com/profile.php?id=61578389876952"},{icon:"/images/footer/Instagram.png",href:"https://www.instagram.com/harmoniq_fengshui/"}]};return(0,s.jsx)("footer",{className:"bg-[#004F44] text-gray-300 px-5 md:px-0",style:{fontFamily:"Noto Serif TC, serif"},children:(0,s.jsxs)("div",{className:"container px-4 mx-auto py-25",children:[(0,s.jsxs)("div",{className:"justify-center item-center text-[50px] font-bold text-white text-center mb-10",children:[(0,s.jsx)("h1",{className:"text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"46px"},children:e("title")}),(0,s.jsx)("p",{className:"mt-2 text-white",style:{fontFamily:"Noto Serif TC, serif",fontWeight:400,fontSize:"24px"},children:e("subtitle")}),(0,s.jsx)(r.N_,{href:"/price",className:"inline-flex items-center justify-center mt-10 transition-colors hover:bg-gray-50",style:{width:"172px",height:"50px",borderRadius:"20px",backgroundColor:"white",border:"1px solid #ccc",color:"#25826C",textDecoration:"none",fontSize:"18px",fontFamily:"Noto Serif TC, serif"},children:e("button")})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-5",children:[(0,s.jsxs)("div",{className:"flex gap-12",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("consult")}),(0,s.jsx)("ul",{className:"space-y-2",children:t.contact.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(r.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e("law")}),(0,s.jsx)("ul",{className:"space-y-2",children:t.law.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(r.N_,{href:e.href,className:"text-xl transition-colors hover:text-white",style:{fontFamily:"Noto Serif TC, serif"},children:e.name})},e.name))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-4 text-xl font-semibold text-white min-w-30",style:{fontFamily:"Noto Serif TC, serif"},children:e("focus")}),(0,s.jsx)("div",{className:"flex space-x-4",children:t.social.map(e=>e.href?(0,s.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80",children:(0,s.jsx)(o.default,{src:e.icon,alt:"",width:30,height:30})},e.icon):(0,s.jsx)(o.default,{src:e.icon,alt:"",width:30,height:30},e.icon))})]})]}),(0,s.jsx)(a.Separator,{className:"mt-7.5"}),(0,s.jsx)("div",{className:"mt-5 font-semibold text-center border-t border-[#004F44] md:mt-10",style:{fontFamily:"Noto Serif TC, serif"},children:(0,s.jsxs)("p",{children:["\xa9 2025 HarmoniQ. ",e("copyright")]})})]})})}},93121:(e,t,l)=>{l.d(t,{A:()=>y});var s=l(60687),r=l(43210),o=l(30474);l(3696);var a=l(16189),n=l(95383),i=l(77618),c=l(99208),d=l(72879),m=l(93853);let x=Array.from({length:100},(e,t)=>1926+t),h=Array.from({length:12},(e,t)=>t+1),f=Array.from({length:31},(e,t)=>t+1),u=Array.from({length:24},(e,t)=>t+1),g={bedroom:"bedroom",livingRoom:"living_room",diningRoom:"dining_room",kitchen:"kitchen",bathroom:"bathroom",studyRoom:"study_room",balcony:"balcony",storageRoom:"storage_room"},p={north:"north",northEast:"northEast",east:"east",center:"center",southEast:"southEast",south:"south",southWest:"southWest",west:"west",northWest:"northWest"},b=e=>new Promise((t,l)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>l(e)});function y({onResult:e}){let t=(0,i.c3)("upload"),[l,y]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[S,M]=(0,r.useState)(""),[R,C]=(0,r.useState)(""),[D,A]=(0,r.useState)(""),[k,F]=(0,r.useState)(""),[I,T]=(0,r.useState)(""),[z,U]=(0,r.useState)(""),[E,L]=(0,r.useState)(""),[$,O]=(0,r.useState)(""),[P,_]=(0,r.useState)(""),[B,W]=(0,r.useState)(!1),[V,q]=(0,r.useState)(!1),[J,H]=(0,r.useState)(null),[Q,G]=(0,r.useState)(!1),K=(0,r.useRef)(null),X=(0,a.useRouter)(),{setPreview:Y,setFile:Z}=(0,n.l)(),{data:ee,status:et}=(0,c.wV)(),el=Object.keys(g),es=Object.keys(p),er=()=>{try{localStorage.setItem("uploadPicFormData",JSON.stringify({gender:S,year:R,month:D,day:k,hour:I,roomType:z,direction:E,validationError:J})),console.log("Form data saved to localStorage")}catch(e){console.error("Error saving form data:",e)}},eo=async e=>{try{if(e){let t={base64:await b(e),name:e.name,size:e.size,type:e.type,lastModified:e.lastModified,timestamp:Date.now()};sessionStorage.setItem("uploadPicFileData",JSON.stringify(t)),console.log("File data saved to sessionStorage:",e.name)}}catch(e){console.error("Error saving file data:",e)}},ea=()=>{localStorage.removeItem("uploadPicFormData"),sessionStorage.removeItem("uploadPicFileData"),console.log("Saved data cleared")};async function en(){let e=g[z],s=p[E];if("loading"===et){m.oR.info(t("checkingAuth")||"Checking authentication...");return}if("unauthenticated"===et||!ee?.user?.userId){er(),l&&await eo(l);let r=`/freereport?roomType=${encodeURIComponent(e)}&direction=${encodeURIComponent(s)}`,o=`/auth/login?callbackUrl=${encodeURIComponent(r)}`;m.oR.info(t("redirectingToLogin")||"Please log in to continue..."),X.push(o);return}W(!0);try{let t=`${R}-${D.padStart(2,"0")}-${k.padStart(2,"0")}T${I.padStart(2,"0")}:00`,{status:l}=await (0,d.bE)(`/api/users/${ee.user.userId}`,{gender:S,birthDateTime:t});0===l?(m.oR.success("保存成功！"),ea(),X.push(`/freereport?roomType=${encodeURIComponent(e)}&direction=${encodeURIComponent(s)}`)):m.oR.error("保存失败！")}catch(e){m.oR.error("保存失败："+e),console.error("Error saving user info:",e)}finally{W(!1)}}let ei=e=>new Promise(t=>{let l=document.createElement("img");l.onload=()=>{let e=document.createElement("canvas"),s=e.getContext("2d"),r=Math.min(512/l.width,512/l.height);e.width=l.width*r,e.height=l.height*r,s.drawImage(l,0,0,e.width,e.height);let o=ec(s.getImageData(0,0,e.width,e.height)),a=ed(o);console.log("Room Detection Analysis:",{...o,finalDecision:a?"ROOM DETECTED":"NOT A ROOM",confidence:o.overallScore}),URL.revokeObjectURL(l.src),t(a)},l.onerror=()=>{console.error("Failed to load image for room detection"),URL.revokeObjectURL(l.src),t(!1)},l.src=URL.createObjectURL(e)}),ec=e=>{let{data:t,width:l,height:s}=e;return{wallDetection:em(e),floorDetection:ex(e),ceilingDetection:eh(e),cornersDetection:ef(e),doorDetection:eg(e),windowDetection:eb(e),lightingAnalysis:ev(e),shadowAnalysis:ej(e),furnitureDetection:ew(e),textureAnalysis:eN(e),colorAnalysis:eM(e),perspectiveAnalysis:eR(e),depthAnalysis:eC(e),scaleAnalysis:eD(e),overallScore:0}},ed=e=>{let t=0,l=0;e.wallDetection.detected&&(t+=25*e.wallDetection.confidence),l+=25,e.floorDetection.detected&&(t+=20*e.floorDetection.confidence),l+=20,e.cornersDetection.detected&&(t+=15*e.cornersDetection.confidence),l+=15,e.doorDetection.detected&&(t+=15*e.doorDetection.confidence),l+=15,e.windowDetection.detected&&(t+=10*e.windowDetection.confidence),l+=10,e.lightingAnalysis.isIndoorLighting&&(t+=10*e.lightingAnalysis.confidence),l+=10,e.shadowAnalysis.hasIndoorShadows&&(t+=8*e.shadowAnalysis.confidence),l+=8,e.furnitureDetection.detected&&(t+=12*e.furnitureDetection.confidence),l+=12,e.textureAnalysis.hasIndoorTextures&&(t+=8*e.textureAnalysis.confidence),l+=8,e.colorAnalysis.hasIndoorColors&&(t+=7*e.colorAnalysis.confidence),l+=7,e.perspectiveAnalysis.hasIndoorPerspective&&(t+=5*e.perspectiveAnalysis.confidence),l+=5,e.depthAnalysis.hasIndoorDepth&&(t+=5*e.depthAnalysis.confidence),e.overallScore=t/(l+=5)*100;let s=e.overallScore>37,r=e.wallDetection.detected||e.floorDetection.detected||e.cornersDetection.detected||e.lightingAnalysis.isIndoorLighting||e.furnitureDetection.detected;return s&&r},em=e=>{let{data:t,width:l,height:s}=e,r=0,o=0;for(let e=10;e<l-10;e+=8){let a=0,n=null;for(let r=10;r<s-10;r+=8){let s=(r*l+e)*4,i=(t[s]+t[s+1]+t[s+2])/3;null!==n&&30>Math.abs(i-n)&&a++,n=i;let c=t[s];eA(c,t[s+1],t[s+2])&&o++}a>s/8*.6&&r++}let a=0;for(let e=.2*s;e<.8*s;e+=15){let s=0;for(let r=10;r<l-10;r+=10){let o=((e-5)*l+r)*4,a=((e+5)*l+r)*4;o>=0&&a<t.length&&Math.abs((t[o]+t[o+1]+t[o+2])/3-(t[a]+t[a+1]+t[a+2])/3)>25&&s++}s>l/10*.3&&a++}let n=r/(l/8)*.5+o/(l*s/64)*.3+a/10*.2;return{detected:n>.3,confidence:Math.min(n,1),verticalLines:r,wallTextures:o,horizontalBoundaries:a}},ex=e=>{let{data:t,width:l,height:s}=e,r=Math.floor(.6*s),o=0,a=0,n=0;for(let e=r;e<s-5;e+=6)for(let s=5;s<l-5;s+=8){let r=(e*l+s)*4,i=t[r],c=t[r+1],d=t[r+2];ek(i,c,d)&&o++;let m=(e*l+(s+8))*4;m<t.length&&25>Math.abs((i+c+d)/3-(t[m]+t[m+1]+t[m+2])/3)&&a++,n++}let i=o/n*.7+a/n*.3;return{detected:i>.25,confidence:Math.min(2*i,1),floorTextures:o,horizontalPatterns:a}},eh=e=>{let{data:t,width:l,height:s}=e,r=Math.floor(.4*s),o=0,a=0,n=0;for(let e=5;e<r;e+=8)for(let r=5;r<l-5;r+=8){let i=(e*l+r)*4,c=t[i],d=t[i+1],m=t[i+2];eF(c,d,m)&&o++;let x=0;for(let o=-4;o<=4;o+=4)for(let a=-4;a<=4;a+=4){let n=r+o,i=e+a;if(n>=0&&n<l&&i>=0&&i<s){let e=(i*l+n)*4;20>Math.abs((t[e]+t[e+1]+t[e+2])/3-(c+d+m)/3)&&x++}}x>=6&&a++,n++}let i=o/n*.6+a/n*.4;return{detected:i>.2,confidence:Math.min(2.5*i,1),ceilingTextures:o,uniformAreas:a}},ef=e=>{let{data:t,width:l,height:s}=e,r=0;return[{x:0,y:0,w:.3*l,h:.3*s},{x:.7*l,y:0,w:.3*l,h:.3*s},{x:0,y:.7*s,w:.3*l,h:.3*s},{x:.7*l,y:.7*s,w:.3*l,h:.3*s}].forEach(e=>{let o=0;for(let r=0;r<20;r++){let r=e.x+Math.random()*e.w,a=e.y+Math.random()*e.h;r>=5&&r<l-5&&a>=5&&a<s-5&&(o+=eu(t,l,s,Math.floor(r),Math.floor(a)))}o/20>.3&&r++}),{detected:r>=2,confidence:r/4,cornersFound:r}},eu=(e,t,l,s,r)=>{let o=(r*t+s)*4,a=(e[o]+e[o+1]+e[o+2])/3,n=0,i=[];return[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]].forEach(([o,c])=>{let d=s+3*o,m=r+3*c;if(d>=0&&d<t&&m>=0&&m<l){let l=(m*t+d)*4,s=Math.abs(a-(e[l]+e[l+1]+e[l+2])/3);i.push(s),s>30&&n++}}),n>=4?n/8:0},eg=e=>{let{data:t,width:l,height:s}=e,r=0;for(let e=.1*s;e<.9*s;e+=12)for(let o=10;o<l-40;o+=12)ep(t,l,s,o,e)>.5&&r++;return{detected:r>0,confidence:Math.min(r/3,1),doorShapes:r}},ep=(e,t,l,s,r)=>{if(s+30>=t||r+60>=l)return 0;let o=0,a=0,n=0;for(let l=r;l<r+60;l+=6)for(let i=s;i<s+30;i+=6){let c=(l*t+i)*4,d=(e[c]+e[c+1]+e[c+2])/3;d<80&&o++,(i===s||i===s+30-6||l===r||l===r+60-6)&&d>100&&a++,n++}return o/n*.7+a/(.3*n)*.3},eb=e=>{let{data:t,width:l,height:s}=e,r=0;for(let e=.1*s;e<.7*s;e+=15)for(let o=10;o<l-50;o+=15)ey(t,l,s,o,e)>.4&&r++;return{detected:r>0,confidence:Math.min(r/2,1),windowShapes:r}},ey=(e,t,l,s,r)=>{if(s+50>=t||r+40>=l)return 0;let o=0,a=0;for(let l=r+5;l<r+40-5;l+=6)for(let r=s+5;r<s+50-5;r+=6){let s=(l*t+r)*4;(e[s]+e[s+1]+e[s+2])/3>150&&o++,a++}return o/a},ev=e=>{let{data:t}=e,l=0,s=0,r=0,o=0;for(let e=0;e<t.length;e+=12){let a=(t[e]+t[e+1]+t[e+2])/3;a>180?l++:a<70?s++:r++,o++}let a=l/o,n=s/o,i=r/o,c=a>.05&&a<.4&&n>.1&&n<.5&&i>.3;return{isIndoorLighting:c,confidence:c?.8:.2,brightRatio:a,darkRatio:n,mediumRatio:i}},ej=e=>{let{data:t,width:l,height:s}=e,r=0,o=0,a=0;for(let e=10;e<s-10;e+=10)for(let s=10;s<l-10;s+=10){let n=(e*l+s)*4,i=(t[n]+t[n+1]+t[n+2])/3;if(i<60){r++;let a=(e*l+(s+10))*4;a<t.length&&(t[a]+t[a+1]+t[a+2])/3>i+40&&o++}a++}let n=r/a,i=o/a,c=n>.05&&n<.4&&i>.02;return{hasIndoorShadows:c,confidence:c?.7:.3,shadowRatio:n,transitionRatio:i}},ew=e=>{let{data:t,width:l,height:s}=e,r=0,o=0,a=0;for(let e=.3*s;e<s-20;e+=15)for(let n=20;n<l-20;n+=15){let i=(e*l+n)*4,c=t[i];eI(c,t[i+1],t[i+2])&&o++,eO(t,l,s,n,e,25,20)&&r++,a++}let n=o/a*.6+r/a*.4;return{detected:n>.15,confidence:Math.min(3*n,1),furnitureColors:o,furnitureShapes:r}},eN=e=>{let{data:t,width:l,height:s}=e,r=0,o=0,a=0;for(let e=10;e<s-10;e+=12)for(let n=10;n<l-10;n+=12){let i=eS(t,l,s,n,e);"smooth"===i?r++:"patterned"===i&&o++,a++}let n=r/a,i=o/a,c=n>.2||i>.1;return{hasIndoorTextures:c,confidence:c?.6:.4,smoothRatio:n,patternedRatio:i}},eS=(e,t,l,s,r)=>{let o=0,a=0,n=[];for(let o=-3;o<=3;o+=3)for(let i=-3;i<=3;i+=3){let c=s+i,d=r+o;if(c>=0&&c<t&&d>=0&&d<l){let l=(d*t+c)*4,s=(e[l]+e[l+1]+e[l+2])/3;n.push(s),a++}}if(a>0){let e=n.reduce((e,t)=>e+t,0)/a;o=n.reduce((t,l)=>t+Math.pow(l-e,2),0)/a}return o<200?"smooth":o>800?"rough":"patterned"},eM=e=>{let{data:t}=e,l=0,s=0,r=0,o=0;for(let e=0;e<t.length;e+=16){let a=t[e],n=t[e+1],i=t[e+2];eT(a,n,i)?l++:ez(a,n,i)?s++:eU(a,n,i)&&r++,o++}let a=l/o,n=s/o,i=r/o,c=a>.3&&i<.3;return{hasIndoorColors:c,confidence:c?.7:.3,neutralRatio:a,warmRatio:n,vibrantRatio:i}},eR=e=>{let{data:t,width:l,height:s}=e,r=0;for(let e=.3*s;e<.7*s;e+=20){let s=0;for(let r=10;r<l-10;r+=10){let o=(e*l+r)*4,a=(e*l+(r+10))*4;a<t.length&&Math.abs((t[o]+t[o+1]+t[o+2])/3-(t[a]+t[a+1]+t[a+2])/3)>25&&s++}s>l/10*.3&&r++}let o=r>=2;return{hasIndoorPerspective:o,confidence:o?.6:.4,horizontalLines:r}},eC=e=>{let{data:t,width:l,height:s}=e,r=0;Math.abs(eE(t,l,s,0,.7*s,l,s)-eE(t,l,s,0,0,l,.3*s))>20&&r++;let o=0;for(let e=.2*s;e<.8*s;e+=25)for(let r=.2*l;r<.8*l;r+=25)eL(t,l,s,r,e)&&o++;o>2&&r++;let a=r>=1;return{hasIndoorDepth:a,confidence:a?.5:.3,depthCues:r}},eD=e=>{let{data:t,width:l,height:s}=e,r=0,o=0;for(let e=20;e<s-40;e+=30)for(let a=20;a<l-40;a+=30){let n=e$(t,l,s,a,e);n>10&&n<.3*l&&r++,o++}let a=r/o,n=a>.3;return{hasAppropriateScale:n,confidence:n?.5:.3,scaleRatio:a}},eA=(e,t,l)=>{let s=(e+t+l)/3,r=Math.max(e,t,l)-Math.min(e,t,l);return s>120&&s<240&&r<40},ek=(e,t,l)=>{let s=e>80&&e<180&&t>60&&t<140&&l>30&&l<100,r=30>Math.abs(e-t)&&30>Math.abs(t-l)&&(e+t+l)/3>100,o=Math.max(e,t,l)-Math.min(e,t,l)>20&&(e+t+l)/3>60;return s||r||o},eF=(e,t,l)=>{let s=Math.max(e,t,l)-Math.min(e,t,l);return(e+t+l)/3>180&&s<30},eI=(e,t,l)=>{let s=e>60&&e<160&&t>40&&t<120&&l>20&&l<80,r=Math.max(e,t,l)-Math.min(e,t,l)>15&&(e+t+l)/3>50,o=e>80&&e<140&&t>50&&t<100&&l>30&&l<70;return s||r||o},eT=(e,t,l)=>{let s=(e+t+l)/3;return 30>Math.max(Math.abs(e-s),Math.abs(t-s),Math.abs(l-s))&&s>60&&s<200},ez=(e,t,l)=>e>t&&e>l&&e>100,eU=(e,t,l)=>Math.max(e,t,l)-Math.min(e,t,l)>60,eE=(e,t,l,s,r,o,a)=>{let n=0,i=0;for(let c=r;c<a;c+=5)for(let r=s;r<o;r+=5)if(r>=0&&r<t&&c>=0&&c<l){let l=(c*t+r)*4;n+=(e[l]+e[l+1]+e[l+2])/3,i++}return i>0?n/i:0},eL=(e,t,l,s,r)=>{let o=0;for(let a=-8;a<=8;a+=4)for(let n=-8;n<=8;n+=4){let i=s+n,c=r+a;if(i>=0&&i<t&&c>=0&&c<l){let l=(c*t+i)*4,a=(r*t+s)*4;Math.abs((e[l]+e[l+1]+e[l+2])/3-(e[a]+e[a+1]+e[a+2])/3)>30&&o++}}return o>8},e$=(e,t,l,s,r)=>{let o=new Set,a=[[s,r]],n=(r*t+s)*4,i=(e[n]+e[n+1]+e[n+2])/3,c=0;for(;a.length>0&&c<100;){let[s,r]=a.pop(),n=`${s},${r}`;if(o.has(n)||s<0||s>=t||r<0||r>=l)continue;o.add(n);let d=(r*t+s)*4;25>Math.abs((e[d]+e[d+1]+e[d+2])/3-i)&&(c++,a.push([s+1,r],[s-1,r],[s,r+1],[s,r-1]))}return c},eO=(e,t,l,s,r,o,a)=>{if(s+o>=t||r+a>=l)return!1;let n=0,i=0;for(let l=0;l<o;l+=3){let o=(r*t+(s+l))*4,c=((r+a)*t+(s+l))*4;c<e.length&&(20>Math.abs((e[o]+e[o+1]+e[o+2])/3-(e[c]+e[c+1]+e[c+2])/3)&&n++,i++)}for(let l=0;l<a;l+=3){let a=((r+l)*t+s)*4,c=((r+l)*t+(s+o))*4;c<e.length&&(20>Math.abs((e[a]+e[a+1]+e[a+2])/3-(e[c]+e[c+1]+e[c+2])/3)&&n++,i++)}return i>0&&n/i>.6},eP=async e=>{let l=e.target.files[0];if(l&&("image/jpeg"===l.type||"image/png"===l.type)&&l.size<=0xa00000){q(!0),H(null);try{let e=await ei(l),s=URL.createObjectURL(l);e?(y(l),j(s),Z(l),Y(s),m.oR.success(t("roomDetected"))):(H(t("invalidRoomImage")),y(l),j(s),Z(l),Y(s),m.oR.error(t("invalidRoomImage"))),await eo(l),console.log("File uploaded and saved:",l.name)}catch(t){console.error("Room validation error:",t);let e=URL.createObjectURL(l);y(l),j(e),Z(l),Y(e),H(null),await eo(l)}q(!1)}else m.oR.error(t("invalidFileFormat"))};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-start w-full px-4 py-6 text-center mb-30 sm:px-6 md:px-8 lg:px-0",style:{fontFamily:'"Noto Serif TC", serif'},children:[(0,s.jsx)("h1",{className:"mb-4 text-xl font-normal mt-10 mb-30 text-[#004f44] sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl leading-tight sm:leading-normal",children:t("title")}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full max-w-6xl gap-6 md:flex-row md:items-start lg:gap-8",children:[(0,s.jsxs)("div",{className:"w-full md:flex-1 md:max-w-5xl",children:[(0,s.jsxs)("div",{className:"h-48 sm:h-56 md:h-64 lg:h-80 rounded-lg bg-[#f7fffd] border-[#25826c] border-dashed border-2 box-border flex flex-col items-center justify-center p-4 sm:p-6 md:p-8",children:[V?(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-[#318161] border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-sm text-[#004f44]",children:t("validatingImage")})]}):(0,s.jsx)("label",{className:"flex items-center justify-center w-full h-full cursor-pointer",htmlFor:"file-upload",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full gap-3 sm:gap-4 md:gap-6",children:[(0,s.jsx)(o.default,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 lg:w-16 lg:h-16",loading:"lazy",width:66,height:66,alt:"",src:"/images/report/materialsymbolsupload.svg"}),(0,s.jsx)("h3",{className:"text-sm font-normal text-center sm:text-base md:text-lg lg:text-xl xl:text-2xl text-[#004f44] px-2",children:t("uploadAction")}),(0,s.jsx)("div",{className:"text-xs text-center sm:text-sm md:text-base lg:text-lg text-[#666] px-2",children:t("fileFormat")}),(0,s.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white transition-all duration-200 bg-transparent border-none rounded-lg cursor-pointer sm:px-6 sm:py-3 md:text-base lg:text-lg bg-gradient-to-r from-[#318161] to-[#318177] hover:scale-105 active:scale-95",onClick:()=>K.current?.click(),children:t("browseButton")})]})}),(0,s.jsx)("input",{className:"hidden",type:"file",id:"file-upload",accept:"image/jpeg,image/png",ref:K,onChange:eP,disabled:V})]}),(0,s.jsx)("div",{className:"mt-3 text-xs text-left sm:text-sm md:text-base text-[#004f44] px-1",children:t("disclaimer")})]}),l&&(0,s.jsxs)("div",{className:"flex flex-col items-center w-full gap-4 mt-4 md:items-end md:w-auto md:mt-0",children:[(0,s.jsxs)("div",{className:`flex items-center gap-3 p-3 border rounded-lg shadow-sm sm:gap-4 ${J?"bg-red-50 border-red-200":"bg-white border-gray-100"}`,children:[v&&(0,s.jsx)(o.default,{className:"object-cover w-12 h-12 rounded sm:w-14 sm:h-14 md:w-16 md:h-16",loading:"lazy",width:64,height:64,alt:"",src:v,onError:e=>{console.error("Image failed to load:",v),console.log("File object:",l)}}),(0,s.jsxs)("div",{className:"flex flex-col justify-center min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium truncate sm:text-base text-[#004f44] max-w-32 sm:max-w-40",children:l.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 sm:text-sm",children:[(l.size/1024/1024).toFixed(2)," MB"]}),J&&(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,s.jsx)("svg",{className:"flex-shrink-0 w-3 h-3 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs font-medium text-red-600 sm:text-sm",children:J})]})]})]}),(0,s.jsx)("button",{onClick:()=>{v&&v.startsWith("blob:")&&URL.revokeObjectURL(v),y(null),j(null),Z(null),Y(null),H(null),ea(),K.current&&(K.current.value="")},className:`flex items-center justify-center w-8 h-8 transition-colors rounded-full sm:w-10 sm:h-10 ${J?"bg-red-100 hover:bg-red-200":"bg-red-50 hover:bg-red-100"}`,children:(0,s.jsx)(o.default,{className:"w-4 h-4 sm:w-5 sm:h-5",loading:"lazy",width:20,height:20,alt:t("close"),src:"/images/linemdtrash.png"})})]})]}),l&&!J&&(0,s.jsx)("div",{className:"flex justify-center w-full mt-8 sm:mt-10",children:(0,s.jsx)("button",{type:"button",className:"w-full max-w-xs px-6 py-3 text-base font-medium text-white transition-all duration-200 rounded-lg shadow-lg sm:w-auto sm:px-8 sm:py-4 sm:text-lg bg-gradient-to-r from-[#7BB8A9] to-[#318177] hover:scale-105 hover:shadow-xl active:scale-95",onClick:()=>N(!0),children:t("nextStep")})}),l&&J&&(0,s.jsx)("div",{className:"flex justify-center w-full mt-8 sm:mt-10",children:(0,s.jsxs)("div",{className:"flex items-center max-w-md gap-3 px-4 py-3 text-sm text-red-700 border border-red-200 rounded-lg bg-red-50 sm:text-base",children:[(0,s.jsx)("svg",{className:"flex-shrink-0 w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:t("uploadDifferentImage")}),(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600",children:t("roomImageRequired")})]})]})}),w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-opacity-30 backdrop-blur-sm",onClick:()=>N(!1)}),(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"relative w-full max-w-md max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-2xl",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 bg-white border-b rounded-t-xl sm:p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-center text-[#004f44] sm:text-xl",children:t("modalTitle")}),(0,s.jsx)("button",{className:"text-2xl text-gray-400 transition-colors hover:text-gray-600",onClick:()=>N(!1),"aria-label":t("close"),children:"\xd7"})]}),(0,s.jsxs)("div",{className:"p-4 space-y-4 sm:p-6 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-left text-[#004f44] sm:text-base",children:t("gender")}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-base",value:S,onChange:e=>M(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("genderSelect")}),(0,s.jsx)("option",{value:"male",children:t("male")}),(0,s.jsx)("option",{value:"female",children:t("female")})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-left text-[#004f44] sm:text-base",children:t("birthDateTime")}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-2 sm:gap-3",children:[(0,s.jsxs)("select",{className:"px-2 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-sm",value:R,onChange:e=>C(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("year")}),x.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{className:"px-2 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-sm",value:D,onChange:e=>A(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("month")}),h.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{className:"px-2 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-sm",value:k,onChange:e=>F(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("day")}),f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{className:"px-2 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-sm",value:I,onChange:e=>T(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("hour")}),u.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-left text-[#004f44] sm:text-base",children:t("roomType")}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-base",value:z,onChange:e=>U(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("roomTypeSelect")}),el.map(e=>(0,s.jsx)("option",{value:e,children:t(`roomTypes.${e}`)},e))]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-left text-[#004f44] sm:text-base",children:t("direction")}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#318161] focus:border-transparent sm:text-base",value:E,onChange:e=>L(e.target.value),children:[(0,s.jsx)("option",{value:"",children:t("directionSelect")}),es.map(e=>(0,s.jsx)("option",{value:e,children:t(`directions.${e}`)},e))]})]})]}),(0,s.jsxs)("div",{className:"sticky bottom-0 z-10 p-4 space-y-3 bg-white border-t rounded-b-xl sm:p-6",children:[(0,s.jsx)("button",{className:"w-full py-3 text-base font-bold text-white transition-all duration-200 rounded-lg shadow-lg sm:text-lg bg-gradient-to-r from-[#7BB8A9] to-[#318177] hover:scale-105 hover:shadow-xl active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",onClick:en,disabled:B||"loading"===et,children:B?t("calculating"):"loading"===et?t("checkingAuth")||"Checking...":t("startAnalysis")}),(0,s.jsx)("button",{className:"w-full px-3 py-2 text-sm text-gray-500 transition-colors bg-transparent rounded hover:text-gray-700 hover:bg-gray-50",onClick:()=>{N(!1)},children:t("back")})]})]})})]}),P&&(0,s.jsx)("div",{className:"w-full max-w-2xl p-4 mt-6 text-sm text-gray-800 whitespace-pre-line bg-gray-100 rounded-lg sm:text-base",children:P}),B&&(0,s.jsx)("div",{className:"mt-6 text-sm text-blue-500 sm:text-base",children:t("processing")})]})}}};