(()=>{var e={};e.id=341,e.ids=[341],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16104:(e,s,r)=>{"use strict";r.d(s,{_:()=>t});let t=new(r(97877)).A(process.env.STRIPE_SECRET_KEY)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24709:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>_,routeModule:()=>x,serverHooks:()=>E,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>h});var t={};r.r(t),r.d(t,{POST:()=>l});var n=r(96559),u=r(48088),i=r(37719),o=r(32190),c=r(44999),a=r(85704),p=r(16104),d=r(38623);async function l(){let e=await (0,d.u)();if(null==e)return o.NextResponse.json((0,a.kn)());try{let s=(await (0,c.b3)()).get("origin"),r=await p._.checkout.sessions.create({line_items:[{price:process.env.PRICE_ID,quantity:1}],mode:"payment",success_url:`${s}/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${s}/report?canceled=true`,metadata:{userId:e.userId}});return console.log("session.url",r.url),o.NextResponse.json((0,a.Cs)(r))}catch(e){return o.NextResponse.json((0,a.J4)("支付错误"+e.message))}}let x=new n.AppRouteRouteModule({definition:{kind:u.RouteKind.APP_ROUTE,page:"/api/checkoutSessions/route",pathname:"/api/checkoutSessions",filename:"route",bundlePath:"app/api/checkoutSessions/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/checkoutSessions/route.js",nextConfigOutput:"",userland:t}),{workAsyncStorage:v,workUnitAsyncStorage:h,serverHooks:E}=x;function _(){return(0,i.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:h})}},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},38623:(e,s,r)=>{"use strict";r.d(s,{u:()=>u});var t=r(93573);async function n(){let e=await (0,t.j2)();return e?.user?e.user:null}let u=(0,r(61120).cache)(n)},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},85704:(e,s,r)=>{"use strict";function t(e){return{status:401,message:e||"Unauthorized"}}function n(e){let s={status:0};return e&&(s.data=e),s}function u(e){return{status:-1,message:e||"server error"}}r.d(s,{Cs:()=>n,J4:()=>u,kn:()=>t})},93573:(e,s,r)=>{"use strict";r.d(s,{Y9:()=>o,j2:()=>p});var t=r(30091),n=r(56056),u=r(18068),i=r(73560);let{handlers:o,signIn:c,signOut:a,auth:p}=(0,t.Ay)({trustHost:!0,providers:[i.A,(0,n.A)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,u.A)({clientId:process.env.APPLE_ID,clientSecret:process.env.APPLE_SECRET})],secret:process.env.NEXTAUTH_SECRET,callbacks:{jwt:async({token:e,user:s,account:r})=>(r&&s&&(e.accessToken=r.access_token,e.id=s.id),e),session:async({session:e,token:s})=>(s&&e.user&&(e.user={...e.user,id:s.sub,userId:e.user.email}),e)},pages:{}})},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[243,999,928,580,62,877],()=>r(24709));module.exports=t})();