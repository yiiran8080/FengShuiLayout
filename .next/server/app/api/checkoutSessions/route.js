(()=>{var e={};e.id=341,e.ids=[341],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},2592:(e,r,s)=>{"use strict";function t(e){return{status:401,message:e||"Unauthorized"}}function u(e){let r={status:0};return e&&(r.data=e),r}function i(e){return{status:-1,message:e||"server error"}}s.d(r,{Cs:()=>u,J4:()=>i,kn:()=>t})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24592:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>h,routeModule:()=>x,serverHooks:()=>v,workAsyncStorage:()=>q,workUnitAsyncStorage:()=>_});var t={};s.r(t),s.d(t,{POST:()=>l});var u=s(79643),i=s(57380),o=s(50747),n=s(24714),c=s(85883),p=s(2592),a=s(28896),d=s(48151);async function l(){let e=await (0,d.u)();if(null==e)return n.NextResponse.json((0,p.kn)());try{let r=(await (0,c.b3)()).get("origin"),s=await a._.checkout.sessions.create({line_items:[{price:process.env.PRICE_ID,quantity:1}],mode:"payment",success_url:`${r}/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${r}/report?canceled=true`,metadata:{userId:e.userId}});return console.log("session.url",s.url),n.NextResponse.json((0,p.Cs)(s))}catch(e){return n.NextResponse.json((0,p.J4)("支付错误"+e.message))}}let x=new u.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/checkoutSessions/route",pathname:"/api/checkoutSessions",filename:"route",bundlePath:"app/api/checkoutSessions/route"},resolvedPagePath:"D:\\code\\fengshui\\src\\app\\api\\checkoutSessions\\route.js",nextConfigOutput:"",userland:t}),{workAsyncStorage:q,workUnitAsyncStorage:_,serverHooks:v}=x;function h(){return(0,o.patchFetch)({workAsyncStorage:q,workUnitAsyncStorage:_})}},28354:e=>{"use strict";e.exports=require("util")},28896:(e,r,s)=>{"use strict";s.d(r,{_:()=>t});let t=new(s(52127)).A(process.env.STRIPE_SECRET_KEY)},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32467:e=>{"use strict";e.exports=require("node:http2")},34589:e=>{"use strict";e.exports=require("node:assert")},36439:()=>{},37067:e=>{"use strict";e.exports=require("node:http")},37540:e=>{"use strict";e.exports=require("node:console")},38522:e=>{"use strict";e.exports=require("node:zlib")},40610:e=>{"use strict";e.exports=require("node:dns")},41204:e=>{"use strict";e.exports=require("string_decoder")},41692:e=>{"use strict";e.exports=require("node:tls")},41792:e=>{"use strict";e.exports=require("node:querystring")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48151:(e,r,s)=>{"use strict";s.d(r,{u:()=>i});var t=s(59357);async function u(){let e=await (0,t.j2)();return e?.user?e.user:null}let i=(0,s(73780).cache)(u)},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},59357:(e,r,s)=>{"use strict";s.d(r,{Y9:()=>p,j2:()=>l});var t=s(79588),u=s(42308),i=s(50922),o=s(29660),n=s(91773);let c=new n.kT({uri:process.env.NEXTAUTH_URL_INTERNAL}),{handlers:p,signIn:a,signOut:d,auth:l}=(0,t.Ay)({trustHost:!0,providers:[o.A,(0,u.A)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,[t.A6]:function(...e){return(0,n.hd)(e[0],{...e[1]??{},dispatcher:c})}}),(0,i.A)({clientId:process.env.APPLE_ID,clientSecret:process.env.APPLE_SECRET})],secret:process.env.NEXTAUTH_SECRET,callbacks:{jwt:async({token:e,user:r,account:s})=>(s&&r&&(e.accessToken=s.access_token,e.id=r.id),e),session:async({session:e,token:r})=>(r&&e.user&&(e.user={...e.user,id:r.sub,userId:e.user.email}),e)},pages:{}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73136:e=>{"use strict";e.exports=require("node:url")},73429:e=>{"use strict";e.exports=require("node:util/types")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},99487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[643,883,702,622,757,127],()=>s(24592));module.exports=t})();