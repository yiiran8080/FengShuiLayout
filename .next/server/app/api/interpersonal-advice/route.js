(()=>{var e={};e.id=5389,e.ids=[5389],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8355:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{POST:()=>u});var o=r(96559),s=r(48088),i=r(37719),a=r(32190),l=r(51367);let c=process.env.DEEPSEEK_API_KEY;async function u(e){let t=Math.random().toString(36).substring(2,15),r=null,n=null,o=null;try{let s;let i=await e.text();if(!i)return console.error("Empty request body received"),a.NextResponse.json({error:"Empty request body"},{status:400});try{s=JSON.parse(i)}catch(e){return console.error("JSON parse error:",e.message,"Body:",i),a.NextResponse.json({error:"Invalid JSON in request body"},{status:400})}let{pillar:u,userInfo:p}=s;if(!u||!p)return a.NextResponse.json({error:"Missing required parameters: pillar or userInfo"},{status:400});r=(0,l.hz)("interpersonal-advice",p,{pillar:u}),console.log(`[${t}] Cache key: ${r}`);let d=(0,l.I7)(r,t);if(d)return a.NextResponse.json(d);let m=await (0,l.Xu)(r,t);if(m)return a.NextResponse.json(m);let g=(0,l.NG)(r,t);n=g.resolvePending,o=g.rejectPending;let f=`ä½ æ˜¯è³‡æ·±çš„å…«å­—å‘½ç†å¸«ï¼Œéœ€è¦æ ¹æ“šç”¨æˆ¶çš„${u}ä¿¡æ¯ï¼Œæä¾›äººéš›é—œä¿‚èª¿å’Œçš„é‡é»žå»ºè­°ã€‚

ç”¨æˆ¶ä¿¡æ¯ï¼š
- å§“åï¼š${p.name}
- æ€§åˆ¥ï¼š${"male"===p.gender?"ç”·":"å¥³"}
- å‡ºç”Ÿæ—¥æœŸï¼š${p.birthDate}
- å‡ºç”Ÿæ™‚é–“ï¼š${p.birthTime}
- å‡ºç”Ÿåœ°é»žï¼š${p.location}
- ${u}ï¼š${u}ç›¸é—œçš„å‘½ç†ä¿¡æ¯

è«‹å¾žä»¥ä¸‹è§’åº¦æä¾›äººéš›é—œä¿‚èª¿å’Œå»ºè­°ï¼š

1. **äººéš›ç‰¹è³ªåˆ†æž**
   - åˆ†æžæ­¤äººåœ¨äººéš›é—œä¿‚ä¸­çš„å¤©è³¦å„ªå‹¢
   - æŒ‡å‡ºå®¹æ˜“é‡åˆ°çš„äººéš›æŒ‘æˆ°

2. **æºé€šé¢¨æ ¼å»ºè­°**
   - å¦‚ä½•æ”¹å–„æºé€šæŠ€å·§
   - é©åˆçš„æºé€šæ–¹å¼å’Œæ³¨æ„äº‹é …

3. **é—œä¿‚ç¶­è­·è¦é»ž**
   - å¦‚ä½•å»ºç«‹è‰¯å¥½çš„äººéš›é—œä¿‚
   - ç¶­è­·é•·æœŸé—œä¿‚çš„é—œéµ

4. **åŒ–è§£è¡çªæ–¹æ³•**
   - é¢å°äººéš›è¡çªæ™‚çš„è™•ç†ç­–ç•¥
   - é é˜²é—œä¿‚æƒ¡åŒ–çš„æ–¹æ³•

è«‹ä»¥æº«æš–ã€å¯¦ç”¨çš„èªžèª¿æä¾›å»ºè­°ï¼Œæ¯å€‹è¦é»žéƒ½è¦å…·é«”ä¸”å¯åŸ·è¡Œã€‚
è¿”å›žæ ¼å¼å¿…é ˆæ˜¯ç´”JSONï¼ŒåŒ…å«ä»¥ä¸‹çµæ§‹ï¼š
{
    "personalTraits": "äººéš›ç‰¹è³ªåˆ†æž",
    "communicationStyle": "æºé€šé¢¨æ ¼å»ºè­°", 
    "relationshipMaintenance": "é—œä¿‚ç¶­è­·è¦é»ž",
    "conflictResolution": "åŒ–è§£è¡çªæ–¹æ³•"
}`;try{let e;let o=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:f}],temperature:.7,max_tokens:1e3})});if(!o.ok)throw Error(`DeepSeek API error: ${o.status}`);let s=await o.json(),i=s.choices[0]?.message?.content;if(!i)throw Error("No content received from DeepSeek API");let u=i;i.includes("```json")?u=i.replace(/```json\s*/g,"").replace(/\s*```/g,""):i.includes("```")&&(u=i.replace(/```\s*/g,"").replace(/\s*```/g,""));try{e=JSON.parse(u)}catch(e){throw console.error("Error parsing AI response:",e),console.error("Raw content:",i),console.error("Cleaned content:",u),Error("Invalid JSON response from AI")}for(let t of["personalTraits","communicationStyle","relationshipMaintenance","conflictResolution"])if(!e[t])throw Error(`Missing required field: ${t}`);let p={success:!0,analysis:e,requestId:t,aiGenerated:!0,timestamp:new Date().toISOString()};return(0,l.e0)(r,p,t),(0,l.dV)(r,p,t,n),a.NextResponse.json(p)}catch(t){console.error("AI API Error:",t);let e={å¹´æŸ±:{personalTraits:"å¹´æŸ±åæ˜ äº†æ‚¨æ—©æœŸçš„äººéš›ç‰¹è³ªï¼Œå¤©ç”Ÿå…·æœ‰è¦ªå’ŒåŠ›ï¼Œå®¹æ˜“ç²å¾—ä»–äººä¿¡ä»»ã€‚åœ¨äººéš›é—œä¿‚ä¸­å±•ç¾å‡ºç´”çœŸå’Œç†±æƒ…ï¼Œä½†æœ‰æ™‚å¯èƒ½éŽæ–¼ç›´æŽ¥ï¼Œéœ€è¦å­¸ç¿’æ›´å¤šçš„äººéš›æŠ€å·§ã€‚",communicationStyle:"å»ºè­°åœ¨æºé€šæ™‚ä¿æŒçœŸèª ï¼Œä½†è¦å­¸æœƒå¯Ÿè¨€è§€è‰²ã€‚é¿å…éŽæ–¼è¡å‹•çš„è¡¨é”ï¼Œå¤šè½å°‘èªªï¼Œçµ¦å°æ–¹å……åˆ†çš„è¡¨é”ç©ºé–“ã€‚åœ¨é‡è¦å ´åˆå‰å…ˆæ€è€ƒå†é–‹å£ã€‚",relationshipMaintenance:"é‡è¦–æƒ…æ„Ÿäº¤æµï¼Œå®šæœŸèˆ‡æœ‹å‹å®¶äººè¯ç¹«ã€‚å­¸æœƒè¨˜ä½ä»–äººçš„é‡è¦æ—¥å­ï¼Œé©æ™‚è¡¨é”é—œå¿ƒã€‚å»ºç«‹äº’ç›¸æ”¯æŒçš„å‹èª¼åœˆï¼Œä½†è¦ä¿æŒé©ç•¶çš„ç•Œé™ã€‚",conflictResolution:"é¢å°è¡çªæ™‚ï¼Œå…ˆå†·éœä¸‹ä¾†ï¼Œé¿å…æƒ…ç·’åŒ–çš„åæ‡‰ã€‚å­¸æœƒæ›ä½æ€è€ƒï¼Œç†è§£å°æ–¹çš„ç«‹å ´ã€‚ç”¨æº«å’Œä½†å …å®šçš„æ…‹åº¦è¡¨é”è‡ªå·±çš„è§€é»žï¼Œå°‹æ±‚é›™è´çš„è§£æ±ºæ–¹æ¡ˆã€‚"},æœˆæŸ±:{personalTraits:"æœˆæŸ±é¡¯ç¤ºæ‚¨åœ¨é’å¹´æ™‚æœŸçš„äººéš›ç™¼å±•ï¼Œå–„æ–¼èˆ‡åŒè¼©å»ºç«‹é—œä¿‚ï¼Œå…·æœ‰åœ˜éšŠåˆä½œç²¾ç¥žã€‚åœ¨ç¾¤é«”ä¸­èƒ½ç™¼æ®å”èª¿ä½œç”¨ï¼Œä½†æœ‰æ™‚å¯èƒ½æœƒéŽæ–¼åœ¨æ„ä»–äººçœ‹æ³•ã€‚",communicationStyle:"é©åˆæŽ¡ç”¨å¹³ç­‰ã€é–‹æ”¾çš„æºé€šæ–¹å¼ã€‚å–„æ–¼å‚¾è½å’Œå›žæ‡‰ï¼Œä½†è¦æ³¨æ„è¡¨é”è‡ªå·±çš„çœŸå¯¦æƒ³æ³•ã€‚é¿å…ç‚ºäº†è¿Žåˆä»–äººè€Œå¤±åŽ»è‡ªæˆ‘ï¼Œä¿æŒé©åº¦çš„ä¸»è¦‹ã€‚",relationshipMaintenance:"æ³¨é‡å‹æƒ…çš„æ·±åº¦ç™¼å±•ï¼Œå–œæ­¡èˆ‡å¿—åŒé“åˆçš„äººå»ºç«‹é•·æœŸé—œä¿‚ã€‚å®šæœŸçµ„ç¹”èšæœƒæˆ–æ´»å‹•ï¼Œç¶­ç¹«å‹èª¼ã€‚å­¸æœƒåœ¨çµ¦äºˆå’ŒæŽ¥å—ä¹‹é–“ä¿æŒå¹³è¡¡ã€‚",conflictResolution:"æ“…é•·èª¿è§£ä»–äººä¹‹é–“çš„çŸ›ç›¾ï¼Œä½†é¢å°è‡ªå·±çš„è¡çªæ™‚å¯èƒ½æœƒé€€ç¸®ã€‚å­¸æœƒå‹‡æ–¼é¢å°å•é¡Œï¼Œç”¨ç†æ€§å’Œæ„Ÿæ€§ä¸¦é‡çš„æ–¹å¼è™•ç†åˆ†æ­§ã€‚"},æ—¥æŸ±:{personalTraits:"æ—¥æŸ±ä»£è¡¨æ‚¨çš„æ ¸å¿ƒäººéš›ç‰¹è³ªï¼Œå±•ç¾å‡ºæˆç†Ÿç©©é‡çš„äº¤å¾€é¢¨æ ¼ã€‚èƒ½å¤ æ‰¿æ“”è²¬ä»»ï¼Œåœ¨äººéš›é—œä¿‚ä¸­æ‰®æ¼”é‡è¦è§’è‰²ï¼Œä½†æœ‰æ™‚å¯èƒ½æ‰¿å—éŽå¤šå£“åŠ›ã€‚",communicationStyle:"æºé€šé¢¨æ ¼è¼ƒç‚ºç›´æŽ¥å’Œå¯¦ç”¨ï¼Œé‡è¦–æ•ˆçŽ‡å’Œçµæžœã€‚å»ºè­°å¢žåŠ ä¸€äº›æƒ…æ„Ÿè¡¨é”ï¼Œè®“æºé€šæ›´æœ‰æº«åº¦ã€‚å­¸æœƒåœ¨æ­£å¼å’Œè¼•é¬†çš„èªžèª¿ä¹‹é–“åˆ‡æ›ã€‚",relationshipMaintenance:"é‡è¦–é•·æœŸç©©å®šçš„é—œä¿‚ï¼Œé¡˜æ„ç‚ºé‡è¦çš„äººä»˜å‡ºæ™‚é–“å’Œç²¾åŠ›ã€‚å»ºè­°å®šæœŸæª¢è¦–äººéš›é—œä¿‚å“è³ªï¼ŒåŠæ™‚ä¿®å¾©å¯èƒ½å‡ºç¾çš„è£‚ç—•ã€‚",conflictResolution:"é¢å°è¡çªæ™‚æ¯”è¼ƒç†æ€§ï¼Œèƒ½å¤ å®¢è§€åˆ†æžå•é¡Œã€‚ä½†è¦é¿å…éŽæ–¼å†·æ¼ ï¼Œé©æ™‚è¡¨é”æƒ…æ„Ÿå’Œç†è§£ã€‚å­¸æœƒåœ¨å …æŒåŽŸå‰‡çš„åŒæ™‚ä¿æŒå½ˆæ€§ã€‚"},æ™‚æŸ±:{personalTraits:"æ™‚æŸ±åæ˜ äº†æ‚¨æ™šå¹´çš„äººéš›æ™ºæ…§ï¼Œå…·æœ‰è±å¯Œçš„äººç”Ÿé–±æ­·å’ŒåŒ…å®¹å¿ƒã€‚å–„æ–¼çµ¦äºˆä»–äººæŒ‡å°Žå’Œæ”¯æŒï¼Œåœ¨äººéš›é—œä¿‚ä¸­æ‰®æ¼”é•·è€…å’Œæ™ºè€…çš„è§’è‰²ã€‚",communicationStyle:"æºé€šæ™‚å±•ç¾å‡ºæ™ºæ…§å’Œè€å¿ƒï¼Œå–„æ–¼ç”¨æ•…äº‹å’Œæ¯”å–»ä¾†å‚³é”è§€é»žã€‚å»ºè­°ä¿æŒé–‹æ”¾çš„å¿ƒæ…‹ï¼Œä¸è¦éŽæ–¼å›ºåŸ·å·±è¦‹ï¼Œå°Šé‡å¹´è¼•ä¸€ä»£çš„æƒ³æ³•ã€‚",relationshipMaintenance:"é‡è¦–å®¶åº­å’Œå‚³çµ±çš„äººéš›ç¶²çµ¡ï¼Œå–„æ–¼ç¶­ç¹«è·¨ä»£é—œä¿‚ã€‚å­¸æœƒåœ¨å‚³çµ±å’Œç¾ä»£ä¹‹é–“æ‰¾åˆ°å¹³è¡¡ï¼Œèˆ‡ä¸åŒå¹´é½¡å±¤çš„äººå»ºç«‹è‰¯å¥½é—œä¿‚ã€‚",conflictResolution:"å…·æœ‰åŒ–è§£çŸ›ç›¾çš„æ™ºæ…§ï¼Œèƒ½å¤ å¾žæ›´é«˜çš„è§’åº¦çœ‹å¾…å•é¡Œã€‚å»ºè­°ç™¼æ®èª¿è§£è€…çš„ä½œç”¨ï¼Œå¹«åŠ©ä»–äººè§£æ±ºåˆ†æ­§ï¼ŒåŒæ™‚ä¹Ÿè¦ç…§é¡§å¥½è‡ªå·±çš„æ„Ÿå—ã€‚"}};return a.NextResponse.json({success:!0,analysis:e[u]||e["æ—¥æŸ±"]})}}catch(e){return console.error("API Error:",e),(0,l.ME)(r,e,t,o),a.NextResponse.json({error:"Internal server error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/interpersonal-advice/route",pathname:"/api/interpersonal-advice",filename:"route",bundlePath:"app/api/interpersonal-advice/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/interpersonal-advice/route.js",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:m,serverHooks:g}=p;function f(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:m})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51367:(e,t,r)=>{"use strict";r.d(t,{I7:()=>l,ME:()=>m,NG:()=>u,Xu:()=>c,dV:()=>d,e0:()=>p,hz:()=>i});let n=new Map,o=new Map,s={TTL:36e5,MAX_SIZE:1e3};function i(e,t,r={}){if(!t?.birthDateTime)return null;let n=new Date(t.birthDateTime),o=`${e}_${n.getFullYear()}_${n.getMonth()}_${n.getDate()}_${n.getHours()}_${t.gender||""}`,s=Object.keys(r).sort();return o+(s.length>0?"_"+s.map(e=>`${e}:${r[e]}`).join("_"):"")}function a(e){return Date.now()-e.timestamp>s.TTL}function l(e,t){if(!e||!n.has(e))return null;let r=n.get(e);return a(r)?(n.delete(e),console.log(`[${t}] ðŸ—‘ï¸ Removed expired cache for ${e}`),null):(console.log(`[${t}] ðŸŽ¯ RETURNING CACHED RESULT for ${e}`),{...r.data,cached:!0,requestId:t,originalRequestId:r.originalRequestId,cacheAge:Date.now()-r.timestamp})}async function c(e,t){if(!e||!o.has(e))return null;console.log(`[${t}] ðŸš¨ REQUEST ALREADY PENDING for ${e}, waiting...`);try{let r=await o.get(e);return console.log(`[${t}] âœ… Got result from pending request`),{...r,waitedForResult:!0,requestId:t,originalRequestId:r.requestId}}catch(r){return console.log(`[${t}] âš ï¸ Pending request failed, proceeding with new request`),o.delete(e),null}}function u(e,t){let r,n;if(!e)return{resolvePending:null,rejectPending:null};let s=new Promise((e,t)=>{r=e,n=t});return o.set(e,s),console.log(`[${t}] ðŸ”„ Created pending request for ${e}`),{resolvePending:r,rejectPending:n}}function p(e,t,r){if(!e)return;n.size>.8*s.MAX_SIZE&&function(){for(let[e,t]of n.entries())a(t)&&n.delete(e);n.size>s.MAX_SIZE&&Array.from(n.entries()).sort((e,t)=>e[1].timestamp-t[1].timestamp).slice(0,n.size-s.MAX_SIZE).forEach(([e])=>n.delete(e))}();let o={data:t,timestamp:Date.now(),originalRequestId:t.requestId||r};n.set(e,o),console.log(`[${r}] âœ… CACHED result for ${e}`)}function d(e,t,r,n){e&&n&&(n(t),o.delete(e),console.log(`[${r}] âœ… Resolved pending promise for ${e}`))}function m(e,t,r,n){e&&n&&(n(t),o.delete(e),console.log(`[${r}] ðŸš¨ Rejected pending promise for ${e}`))}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7719,580],()=>r(8355));module.exports=n})();