(()=>{var e={};e.id=1680,e.ids=[1680],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7072:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var n=t(56037),o=t.n(n);let i=new(o()).Schema({userId:{type:String,required:!0},sessionId:{type:String,required:!0},language:{type:String,required:!0,default:"zh-CN"},isDelete:{type:Number,default:0},userProfile:{birthday:{type:Date,required:!0},gender:{type:String,enum:["male","female"]},element:String,personality:String,loveStyle:String},partnerProfile:{birthday:{type:Date,required:!0},gender:{type:String,enum:["male","female"]},element:String,personality:String,loveStyle:String},compatibilityAnalysis:{overallScore:Number,relationshipAdvice:String,developmentAdvice:String,specificAdvice:String},yearlyFortune:{currentYear:String,bestTiming:String,warnings:String},fengShuiLayout:{bedroom:String,livingRoom:String,colors:String,items:String,generalAdvice:String},reportMetadata:{concern:String,reportType:String,generatedAt:{type:Date,default:Date.now}}},{timestamps:!0,indexes:[{userId:1,isDelete:1},{sessionId:1},{createdAt:-1}]});i.methods.getFormattedReport=function(){return{title:"合婚配對分析報告",userElement:this.userProfile.element,partnerElement:this.partnerProfile.element,compatibility:this.compatibilityAnalysis.overallScore,reportDate:this.reportMetadata.generatedAt}};let s=o().models.CoupleReportDoc||o().model("CoupleReportDoc",i)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},56037:e=>{"use strict";e.exports=require("mongoose")},56364:(e,r,t)=>{"use strict";t.d(r,{A:()=>p,X:()=>a});var n=t(56037),o=t.n(n);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env");let s=global.mongoose;async function a(){if(s.conn)return s.conn;s.promise||(s.promise=o().connect(i,{serverSelectionTimeoutMS:3e4,socketTimeoutMS:3e4}).then(e=>e).catch(e=>{throw e}));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}s||(s=global.mongoose={conn:null,promise:null});let p=a},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69241:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>S,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{GET:()=>l});var o=t(96559),i=t(48088),s=t(37719),a=t(32190),p=t(56364),u=t(7072);async function l(e,{params:r}){try{await (0,p.A)();let{reportId:e}=await r,t=await u.A.findById(e);if(!t)return a.NextResponse.json({success:!1,error:"報告未找到"},{status:404});return a.NextResponse.json({success:!0,report:t})}catch(e){return console.error("獲取合婚報告錯誤:",e),a.NextResponse.json({success:!1,error:"獲取報告失敗"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/couple-reports/[reportId]/route",pathname:"/api/couple-reports/[reportId]",filename:"route",bundlePath:"app/api/couple-reports/[reportId]/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/couple-reports/[reportId]/route.js",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:g,serverHooks:m}=c;function S(){return(0,s.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:g})}},78335:()=>{},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[7719,580],()=>t(69241));module.exports=n})();