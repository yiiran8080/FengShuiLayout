(()=>{var e={};e.id=4145,e.ids=[4145],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},56037:e=>{"use strict";e.exports=require("mongoose")},56364:(e,r,t)=>{"use strict";t.d(r,{A:()=>u,X:()=>o});var s=t(56037),n=t.n(s);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env");let i=global.mongoose;async function o(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(a,{serverSelectionTimeoutMS:3e4,socketTimeoutMS:3e4}).then(e=>e).catch(e=>{throw e}));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}i||(i=global.mongoose={conn:null,promise:null});let u=o},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},89633:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>g,serverHooks:()=>h,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{DELETE:()=>y,GET:()=>d});var n=t(96559),a=t(48088),i=t(37719),o=t(32190),u=t(56364),l=t(56037),m=t.n(l);let p=new(m()).Schema({userId:{type:String,required:!0,ref:"User"},gender:{type:String,enum:["female","male"],required:!0},birthDateTime:{type:Date,required:!0},relationship:{type:String,default:"family_member"},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}});p.index({userId:1});let c=m().models.FamilyMember||m().model("FamilyMember",p);async function d(e){try{await (0,u.A)();let{searchParams:r}=new URL(e.url),t=r.get("userId");if(!t)return o.NextResponse.json({message:"User ID is required"},{status:400});let s=await c.findOne({userId:t});return o.NextResponse.json({success:!0,familyMember:s||null})}catch(e){return o.NextResponse.json({message:"Failed to fetch family member",error:e.message},{status:500})}}async function y(e){try{await (0,u.A)();let{searchParams:r}=new URL(e.url),t=r.get("userId");if(!t)return o.NextResponse.json({message:"User ID is required"},{status:400});return await c.deleteMany({userId:t}),o.NextResponse.json({success:!0,message:"Family member data deleted successfully"})}catch(e){return o.NextResponse.json({message:"Failed to delete family member",error:e.message},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/family-member/route",pathname:"/api/family-member",filename:"route",bundlePath:"app/api/family-member/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/family-member/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:x,serverHooks:h}=g;function w(){return(0,i.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:x})}},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[7719,580],()=>t(89633));module.exports=s})();