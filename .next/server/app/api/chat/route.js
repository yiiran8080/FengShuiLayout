(()=>{var e={};e.id=276,e.ids=[276],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{patchFetch:()=>S,routeModule:()=>y,serverHooks:()=>C,workAsyncStorage:()=>$,workUnitAsyncStorage:()=>A});var r={};n.r(r),n.d(r,{POST:()=>f});var i=n(96559),s=n(48088),o=n(37719),a=n(32190),c=n(96539);class l{static async analyzeNonCoreUserInput(e){let t=this.detectPrimaryConcern(e);return t?{isCoreArea:!0,concern:t}:await this.handleNonCoreInput(e)}static async handleNonCoreInput(e){for(let{pattern:t,suggestion:n,typo:r}of[{pattern:/[å·¥]ä½œ/,suggestion:"å·¥ä½œ",typo:!0},{pattern:/[æ„Ÿæ„›æˆ€æƒ…]æƒ…/,suggestion:"æ„Ÿæƒ…",typo:!0},{pattern:/[è²¡éŒ¢è²¡é‹]/,suggestion:"è²¡é‹",typo:!0},{pattern:/[å­å¥³å°å­©]/,suggestion:"å­å¥³",typo:!0},{pattern:/[äººéš›å…³ç³»é—œä¿‚]/,suggestion:"äººéš›é—œä¿‚",typo:!0},{pattern:/[å¥åº·èº«é«”]/,suggestion:"å¥åº·",typo:!0},{pattern:/[å› ç·£æ©Ÿä¼šæ©Ÿæœƒ]/,suggestion:"å› ç·£",typo:!0}])if(t.test(e))return{isCoreArea:!1,isTypo:r,suggestedCoreArea:n,aiResponse:`ğŸ˜Š é¢¨éˆ´è¦ºå¾—ä½ å¯èƒ½æƒ³å•çš„æ˜¯ã€Œ${n}ã€çš„å•é¡Œå‘¢ï¼å¦‚æœä¸æ˜¯çš„è©±ï¼Œè«‹å†èªªå¾—æ¸…æ¥šä¸€é»å“¦ï½

æˆ‘å€‘çš„å°ˆæ¥­é¢¨æ°´æœå‹™åŒ…æ‹¬ï¼š
ğŸ’¼ **å·¥ä½œ** - äº‹æ¥­ç™¼å±•ã€è·å ´é—œä¿‚
ğŸ’• **æ„Ÿæƒ…** - æ¡ƒèŠ±é‹ã€å©šå§»é…å°  
ğŸ’° **è²¡é‹** - è²¡å¯Œå¢é•·ã€æŠ•è³‡é‹å‹¢
ğŸ‘¶ **å­å¥³** - å­å¥³é‹ã€æ•™è‚²ç™¼å±•
ğŸ¤ **äººéš›é—œä¿‚** - ç¤¾äº¤é‹ã€äººç·£æ”¹å–„
ğŸ¥ **å¥åº·** - èº«å¿ƒéˆèª¿ç†ã€é¤Šç”Ÿé¢¨æ°´
âœ¨ **å› ç·£** - æ©ŸæœƒæŠŠæ¡ã€å‘½é‹æ”¹å–„

ä½ æƒ³äº†è§£å“ªå€‹æ–¹é¢å‘¢ï¼Ÿ`};return await this.analyzeAndGuideToCore(e)}static async checkTopicDeviation(e,t){if(!t)return null;let n=this.detectPrimaryConcern(e);return n===t||n&&n!==t?null:["å¥½çš„","å¥½å•Š","å¯ä»¥","æƒ³è¦","è¦","è¡Œ","ok","OK","æ˜¯çš„","å—¯","å°","æœ‰èˆˆè¶£","æƒ³çŸ¥é“","æƒ³äº†è§£","å‘Šè¨´æˆ‘","æ•™æˆ‘","è¬è¬","å¤šè¬"].some(t=>e.includes(t))?null:["å¦‚ä½•","æ€æ¨£","é»æ¨£","æ€éº¼","ä»€éº¼æ™‚å€™","å¹¾æ™‚","åœ¨å“ª","é‚Šåº¦","å¤šå°‘éŒ¢","å¹¾å¤šéŒ¢","è²»ç”¨","æ”¶è²»","åƒ¹æ ¼","ä»˜æ¬¾"].some(t=>e.includes(t))?null:await this.handleTopicDeviation(e,t)}static async handleTopicDeviation(e,t){let n={å·¥ä½œ:"äº‹æ¥­ç™¼å±•",æ„Ÿæƒ…:"æ„›æƒ…é‹å‹¢",è²¡é‹:"è²¡å¯Œé‹å‹¢",å­å¥³:"å­å¥³æ•™è‚²",äººéš›é—œä¿‚:"äººéš›ç¤¾äº¤",å¥åº·:"èº«å¿ƒå¥åº·",å› ç·£:"æ©Ÿæœƒé‹å‹¢"}[t]||t;return{isDeviation:!0,currentConcern:t,aiResponse:`å“‡ï½é¢¨éˆ´è¦ºå¾—ä½ å‰›å‰›å•çš„æ±è¥¿å¥½æœ‰è¶£å‘¢ï¼ğŸ˜Š

ä¸éæˆ‘å€‘å‰›æ‰ä¸æ˜¯åœ¨èŠã€Œ${n}ã€çš„å•é¡Œå—ï¼Ÿé¢¨éˆ´æƒ³å…ˆå¹«ä½ æŠŠé€™å€‹è™•ç†å¥½å‘¢ï½

è®“æˆ‘å€‘ç¹¼çºŒèŠã€Œ${n}ã€çš„äº‹æƒ…å¥½å—ï¼Ÿé€™æ¨£æˆ‘æ‰èƒ½çµ¦ä½ æœ€å°ˆæ¥­çš„é¢¨æ°´å»ºè­°å“¦ï¼âœ¨

å¦‚æœä½ æƒ³æ›è©±é¡Œåˆ°å…¶ä»–é¢¨æ°´é ˜åŸŸï¼Œä¹Ÿå¯ä»¥å‘Šè¨´é¢¨éˆ´ï¼š
ğŸ’¼ **å·¥ä½œ** - äº‹æ¥­ç™¼å±•ã€è·å ´é—œä¿‚
ğŸ’• **æ„Ÿæƒ…** - æ¡ƒèŠ±é‹ã€å©šå§»é…å°  
ğŸ’° **è²¡é‹** - è²¡å¯Œå¢é•·ã€æŠ•è³‡é‹å‹¢
ğŸ‘¶ **å­å¥³** - å­å¥³é‹ã€æ•™è‚²ç™¼å±•
ğŸ¤ **äººéš›é—œä¿‚** - ç¤¾äº¤é‹ã€äººç·£æ”¹å–„
ğŸ¥ **å¥åº·** - èº«å¿ƒéˆèª¿ç†ã€é¤Šç”Ÿé¢¨æ°´
âœ¨ **å› ç·£** - æ©ŸæœƒæŠŠæ¡ã€å‘½é‹æ”¹å–„

ä½ æƒ³ç¹¼çºŒèŠã€Œ${n}ã€é‚„æ˜¯æ›åˆ°å…¶ä»–æ–¹é¢å‘¢ï¼ŸğŸ’•`}}static async analyzeAndGuideToCore(e){for(let[t,n]of Object.entries({å­¸ç¿’:{core:"å­å¥³",reason:"å­¸ç¿’æˆé•·èˆ‡å­å¥³é‹å‹¢ç›¸é—œ"},æ•™è‚²:{core:"å­å¥³",reason:"æ•™è‚²ç™¼å±•èˆ‡å­å¥³é‹å‹¢ç›¸é—œ"},è€ƒè©¦:{core:"å­å¥³",reason:"è€ƒè©¦é‹èˆ‡å­å¥³å­¸æ¥­ç›¸é—œ"},å‡å­¸:{core:"å­å¥³",reason:"å‡å­¸æ©Ÿæœƒèˆ‡å­å¥³æ•™è‚²é‹ç›¸é—œ"},ç”Ÿæ„:{core:"å·¥ä½œ",reason:"ç”Ÿæ„ç™¼å±•å±¬æ–¼äº‹æ¥­å·¥ä½œç¯„ç–‡"},å‰µæ¥­:{core:"å·¥ä½œ",reason:"å‰µæ¥­å±¬æ–¼äº‹æ¥­ç™¼å±•"},æŠ•è³‡:{core:"è²¡é‹",reason:"æŠ•è³‡ç†è²¡èˆ‡è²¡é‹æ¯æ¯ç›¸é—œ"},ç†è²¡:{core:"è²¡é‹",reason:"ç†è²¡è¦åŠƒé—œä¹è²¡é‹ç®¡ç†"},å®¶åº­:{core:"äººéš›é—œä¿‚",reason:"å®¶åº­å’Œè«§æ¶‰åŠäººéš›é—œä¿‚"},æœ‹å‹:{core:"äººéš›é—œä¿‚",reason:"æœ‹å‹é—œä¿‚å±¬æ–¼äººéš›ç¤¾äº¤"},å£“åŠ›:{core:"å¥åº·",reason:"å£“åŠ›ç®¡ç†é—œä¹èº«å¿ƒå¥åº·"},é‹æ°£:{core:"å› ç·£",reason:"é‹æ°£æ©Ÿæœƒèˆ‡å› ç·£ç¦ä»½ç›¸é—œ"},æ©Ÿæœƒ:{core:"å› ç·£",reason:"æ©ŸæœƒæŠŠæ¡èˆ‡å› ç·£æ™‚æ©Ÿç›¸é—œ"},å‘½é‹:{core:"å› ç·£",reason:"å‘½é‹æ”¹è®Šèˆ‡å› ç·£èª¿æ•´ç›¸é—œ"},ä½å®…:{core:"å¥åº·",reason:"å±…ä½ç’°å¢ƒå½±éŸ¿å¥åº·é‹å‹¢"},æ¬å®¶:{core:"å› ç·£",reason:"æ¬é·æ™‚æ©Ÿé—œä¹å› ç·£è½‰æ›"},è£ä¿®:{core:"å› ç·£",reason:"è£ä¿®ä½ˆå±€å½±éŸ¿æ•´é«”é‹å‹¢"}}))if(e.includes(t))return{isCoreArea:!1,isTypo:!1,suggestedCoreArea:n.core,aiResponse:`å“‡ï½ä½ å•çš„ã€Œ${t}ã€å¾ˆæœ‰æ„æ€å‘¢ï¼âœ¨

é¢¨éˆ´è¦ºå¾—é€™å€‹è·Ÿæˆ‘å€‘çš„ã€Œ${n.core}ã€æœå‹™å¾ˆç›¸é—œå“¦ï¼Œå› ç‚º${n.reason}ï¼

æˆ‘å€‘çš„å°ˆæ¥­é¢¨æ°´æœå‹™åŒ…æ‹¬ï¼š
ğŸ’¼ **å·¥ä½œ** - äº‹æ¥­ç™¼å±•ã€è·å ´é—œä¿‚ã€ç”Ÿæ„å‰µæ¥­
ğŸ’• **æ„Ÿæƒ…** - æ¡ƒèŠ±é‹ã€å©šå§»é…å°ã€äººç·£æå‡
ğŸ’° **è²¡é‹** - è²¡å¯Œå¢é•·ã€æŠ•è³‡é‹å‹¢ã€ç†è²¡è¦åŠƒ
ğŸ‘¶ **å­å¥³** - å­å¥³é‹ã€æ•™è‚²ç™¼å±•ã€å­¸ç¿’è€ƒè©¦
ğŸ¤ **äººéš›é—œä¿‚** - ç¤¾äº¤é‹ã€å®¶åº­å’Œè«§ã€æœ‹å‹é—œä¿‚
ğŸ¥ **å¥åº·** - èº«å¿ƒéˆèª¿ç†ã€é¤Šç”Ÿé¢¨æ°´ã€å£“åŠ›èˆ’ç·©
âœ¨ **å› ç·£** - æ©ŸæœƒæŠŠæ¡ã€å‘½é‹æ”¹å–„ã€é‹æ°£æå‡

ä½ æƒ³äº†è§£ã€Œ${n.core}ã€æ–¹é¢çš„é¢¨æ°´æŒ‡å°å—ï¼ŸğŸ’•`};return{isCoreArea:!1,isTypo:!1,suggestedCoreArea:null,aiResponse:`å’¦ï½é¢¨éˆ´ä¸å¤ªæ˜ç™½ä½ çš„æ„æ€å‘¢ ğŸ˜…

ä¸éæ²’é—œä¿‚ï¼é¢¨éˆ´æœ€æ“…é•·çš„æ˜¯é€™äº›å°ˆæ¥­é¢¨æ°´æœå‹™ï¼š

ğŸ’¼ **å·¥ä½œ** - äº‹æ¥­ç™¼å±•ã€è·å ´é—œä¿‚ã€å‡è·åŠ è–ª
ğŸ’• **æ„Ÿæƒ…** - æ¡ƒèŠ±é‹ã€å©šå§»é…å°ã€æ„Ÿæƒ…å•é¡Œ
ğŸ’° **è²¡é‹** - è²¡å¯Œå¢é•·ã€æŠ•è³‡é‹å‹¢ã€æ‹›è²¡èšè²¡
ğŸ‘¶ **å­å¥³** - å­å¥³é‹ã€æ•™è‚²ç™¼å±•ã€è¦ªå­é—œä¿‚
ğŸ¤ **äººéš›é—œä¿‚** - ç¤¾äº¤é‹ã€äººç·£æ”¹å–„ã€åŒ–è§£å°äºº
ğŸ¥ **å¥åº·** - èº«å¿ƒèª¿ç†ã€é¤Šç”Ÿé¢¨æ°´ã€å¥åº·é‹å‹¢
âœ¨ **å› ç·£** - æ©ŸæœƒæŠŠæ¡ã€å‘½é‹æ”¹å–„ã€æ™‚æ©Ÿé¸æ“‡

ä½ æœ€æƒ³äº†è§£å“ªå€‹æ–¹é¢å‘¢ï¼Ÿé¢¨éˆ´æœƒç”¨æœ€å¯æ„›çš„æ–¹å¼å¹«ä½ åˆ†æå“¦ï½ğŸ’•`}}static detectPrimaryConcern(e){for(let[t,n]of Object.entries({æ„Ÿæƒ…:["æ„Ÿæƒ…","æ„›æƒ…","æ¡ƒèŠ±","æ¡ƒèŠ±é‹","å§»ç·£","äººç·£","å¦ä¸€åŠ","ç”·æœ‹å‹","å¥³æœ‹å‹","è€å…¬","è€å©†","çµå©š","åˆ†æ‰‹","å¾©åˆ","æˆ€æ„›","æƒ…ä¾¶","å–®èº«","æ‹æ‹–","bf","gf","å–œæ­¡","æš—æˆ€"],å·¥ä½œ:["å·¥ä½œ","äº‹æ¥­","è·å ´","è€é—†","ä¸Šå¸","åŒäº‹","å‡è·","è½‰å·¥","è¾­è·","é¢è©¦","è–ªæ°´","äººå·¥","åŠ äººå·¥","åŠ è–ª","æ¸›è–ª","å¾…é‡","ç¦åˆ©","å…¬å¸","è¿”å·¥","job","å‰µæ¥­","ç”Ÿæ„"],è²¡é‹:["éŒ¢","è²¡é‹","æŠ•è³‡","ç†è²¡","æ”¶å…¥","è–ªæ°´","å‚µå‹™","ç ´è²¡","è³ºéŒ¢","è²¡å¯Œ","é‡‘éŒ¢","è‚¡ç¥¨","è²·æ¨“","å„²éŒ¢","ç¶“æ¿Ÿ","æ©«è²¡","åè²¡","æ­£è²¡","ç™¼è²¡","ä¸­ç","å½©ç¥¨","é‹è²¡","æ‹›è²¡","èšè²¡","è²¡æ°£","è²¡æº","è²¡æ˜Ÿ"],å¥åº·:["å¥åº·","ç—…","èº«é«”","ç¡çœ ","å¤±çœ ","é ­ç—›","ç–²ç´¯","å£“åŠ›","ç„¦æ…®","æŠ‘é¬±","ç—›","å””èˆ’æœ","ç”Ÿç—…"],äººéš›é—œä¿‚:["äººéš›","æœ‹å‹","é—œä¿‚","ç›¸è™•","ç¤¾äº¤","äººç·£","å°äºº","è²´äºº","è¡çª","åˆä½œ","åŒæœ‹å‹","å®¶äºº"],å­å¥³:["å­å¥³","å°æœ‹å‹","å­©å­","æ‡·å­•","ç”Ÿè‚²","æ•™è‚²","å­¸ç¿’","è€ƒè©¦","å‡å­¸","å›å›","å¥³å¥³","æ¹Šä»”"],å› ç·£:["å› ç·£","æ©Ÿæœƒ","é‹æ°£","å‘½é‹","ç·£åˆ†","æ™‚æ©Ÿ","é¸æ“‡","æ±ºå®š","é‹å‹¢","é¢¨æ°´"],å±…å®¶ä½ˆå±€:["å±…å®¶","å®¶å±…","ä½ˆå±€","å¸ƒå±€","æˆ¿é–“","è‡¥å®¤","å®¢å»³","å»šæˆ¿","æµ´å®¤","é™½å°","è£ä¿®","å‚¢ä¿±","æ“ºè¨­","æ–¹ä½","ä½ç½®","ç©ºé–“","å®¶å…·","åºŠä½","æ›¸æ¡Œ","æ²™ç™¼","é¡å­","æ¤ç‰©","é¡è‰²","ç‡ˆå…‰","æ ¼å±€","åº§å‘","æ“ºæ”¾","è£é£¾","çª—æˆ¶","é–€","ç‰†å£"]}))if(n.some(t=>e.includes(t)))return t;return null}static detectEmotion(e){for(let[t,n]of Object.entries({å›°æ“¾:["å›°æ“¾","ç…©æƒ±","ä¸çŸ¥é“","å””çŸ¥","è¿·èŒ«","å›°æƒ‘","æ“”å¿ƒ","ç„¦æ…®","å•é¡Œ","æœ‰å•é¡Œ","éº»ç…©","é ­ç—›","å””æ˜","ç…©"],æ²®å–ª:["æ²®å–ª","å¤±è½","é›£é","å‚·å¿ƒ","çµ•æœ›","ç„¡åŠ©","ç—›è‹¦","å””é–‹å¿ƒ","ä¸é–‹å¿ƒ","å¤±æœ›"],æ†¤æ€’:["ç”Ÿæ°£","æ†¤æ€’","ä¸çˆ½","ç«å¤§","å¬²","æ¿€å¬²","è¨å­","å¿¿","æ°£"],å£“åŠ›:["å£“åŠ›","ç·Šå¼µ","ç´¯","æ”°","æ’ä¸ä½","å—ä¸äº†","å¥½ç´¯","è¾›è‹¦","å£“åŠ›å¤§"],å¸Œæœ›:["å¸Œæœ›","æƒ³è¦","æœŸå¾…","æ¸´æœ›","æ”¹å–„","æå‡","è®Šå¥½","æƒ³","æƒ³çŸ¥é“","å¹«åˆ°"]}))if(n.some(t=>e.includes(t)))return t;return"å¹³éœ"}static detectBirthdayInfo(e){for(let t of[/(\d{4})[å¹´\-\/](\d{1,2})[æœˆ\-\/](\d{1,2})[æ—¥]?/,/(\d{1,2})[æœˆ\-\/](\d{1,2})[æ—¥\-\/](\d{4})/,/(\d{4})\-(\d{1,2})\-(\d{1,2})/,/(\d{1,2})\/(\d{1,2})\/(\d{4})/]){let n=e.match(t);if(n)return{hasBirthday:!0,rawText:n[0]}}return{hasBirthday:!1}}static generateNaturalResponse(e,t,n,r,i=0){let s=["æ‰€æœ‰","å…¨éƒ¨","è©³ç´°","æ›´å¤š","å®Œæ•´","æ·±å…¥","å…·é«”"],o=s.some(e=>t.includes(e));if(console.log("\uD83C\uDFAF æ·±å…¥èˆˆè¶£æª¢æ¸¬çµæœ:",o,"é—œéµè©:",s.find(e=>t.includes(e))),o){console.log("\uD83C\uDFAF åœ¨generateNaturalResponseä¸­æª¢æ¸¬åˆ°æ·±å…¥èˆˆè¶£:",t);let r=e.primaryConcern||n||"é‹å‹¢";return console.log("\uD83C\uDFAF ä½¿ç”¨é—œæ³¨é ˜åŸŸ:",r),this.generatePersonalAnalysisPromotion(r,t)}let{conversationState:a,primaryConcern:c,hasBirthday:l,hasPartnerBirthday:u,hasSpecificProblem:d,relationshipAnalysisType:p}=e;if(console.log("Flow Debug - State:",a,"Concern:",c,"HasBirthday:",l,"HasSpecific:",d),"initial"===a||!a)return"å¹³éœ"!==r||n?n?this.generateConcernIntroResponse(n,r):this.generateEmotionalComfort(r)+"å¯ä»¥è©±ä¿¾æˆ‘çŸ¥ç™¼ç”Ÿå’©äº‹å—ï¼Ÿæˆ‘æœƒç”¨å¿ƒè†è½ã€‚":"ä½ å¥½å‘€ï½æˆ‘ä¿‚é¢¨éˆ´ï¼âœ¨ æœ‰å’©ç”Ÿæ´»ä¸Šå˜…å›°æ“¾æƒ³æµæˆ‘å‚¾å‚¾å‘¢ï¼Ÿç„¡è«–ä¿‚å·¥ä½œã€æ„Ÿæƒ…ã€è²¡é‹å®šä¿‚å¥åº·ï¼Œæˆ‘éƒ½å¯ä»¥å¹«ä½ åˆ†æé¢¨æ°´é‹å‹¢æ¶ï½";if("concern_detected"===a&&c&&!d)return this.generateSpecificQuestionProbe(c,r);if("asking_specific"===a&&c){if("æ„Ÿæƒ…"===c&&p&&!l){if("individual"===p)return"å¥½ï¼æˆ‘æœƒç‚ºä½ é€²è¡Œå€‹äººæ„Ÿæƒ…åˆ†æ \uD83C\uDF38\n\nç‚ºå’—æ›´æº–ç¢ºåˆ†æä½ å˜…æ„Ÿæƒ…é‹å‹¢ï¼Œæˆ‘éœ€è¦ä½ å˜…å‡ºç”Ÿæ—¥æœŸã€‚\nè«‹æä¾›ï¼šå‡ºç”Ÿå¹´æœˆæ—¥ï¼ˆä¾‹å¦‚ï¼š1990å¹´5æœˆ15æ—¥ï¼‰";if("couple"===p)return"å¥½ï¼æˆ‘æœƒç‚ºä½ å“‹é€²è¡Œåˆå©šé…å°åˆ†æ \uD83D\uDC95\n\nç‚ºå’—åˆ†æä½ å“‹å˜…å…«å­—åˆé…åº¦ï¼Œæˆ‘éœ€è¦å…©å€‹äººå˜…å‡ºç”Ÿè³‡æ–™ï¼š\n1ï¸âƒ£ é¦–å…ˆè«‹æä¾›ä½ å˜…å‡ºç”Ÿå¹´æœˆæ—¥ï¼ˆä¾‹å¦‚ï¼š1990å¹´5æœˆ15æ—¥ï¼‰\n2ï¸âƒ£ ä¹‹å¾Œæœƒè«‹ä½ æä¾›ä¼´ä¾¶å˜…å‡ºç”Ÿè³‡æ–™"}return"æ„Ÿæƒ…"===c&&"couple"===p&&l&&u&&!d?"å¥½ï¼æˆ‘å·²ç¶“æ”¶é›†å’—ä½ å“‹å…©å€‹äººå˜…å‡ºç”Ÿè³‡æ–™ \uD83D\uDC95\n\nç¾åœ¨è«‹å‘Šè¨´æˆ‘ä½ å“‹å˜…å…·é«”æ„Ÿæƒ…å•é¡Œï¼Œæ¯”å¦‚ï¼š\nâ€¢ ä½ å“‹å˜…é—œä¿‚é‡åˆ°å’©å›°é›£ï¼Ÿ\nâ€¢ æƒ³äº†è§£ä½ å“‹å˜…åˆé…åº¦ï¼Ÿ\nâ€¢ æœ‰å’©ç‰¹åˆ¥æƒ³æ”¹å–„å˜…åœ°æ–¹ï¼Ÿ\n\næˆ‘æœƒæ ¹æ“šä½ å“‹å˜…å…«å­—é€²è¡Œåˆå©šåˆ†æã€‚":"æ„Ÿæƒ…"===c&&"couple"===p&&l&&u&&d?this.generateOfferDetailedAnalysis(c,r,"couple"):d&&l?this.generateOfferDetailedAnalysis(c,r):d&&!l?this.generateComfortAndBirthdayRequest(c,r):this.generateSpecificQuestionProbe(c,r)}if("birthday_collected"===a&&l&&!d)return"æ„Ÿæƒ…"===c&&p?`å¥½ï¼æˆ‘å·²ç¶“è¨˜éŒ„å’—ä½ å˜…ç”Ÿæ—¥è³‡æ–™ï¼Œæœƒé€²è¡Œ${"individual"===p?"å€‹äººæ„Ÿæƒ…åˆ†æ":"åˆå©šé…å°åˆ†æ"}ã€‚

ç¾åœ¨è«‹è©³ç´°å‘Šè¨´æˆ‘ä½ å˜…æ„Ÿæƒ…å•é¡Œï¼Œæ¯”å¦‚ï¼š
â€¢ é‡åˆ°å’©æ„Ÿæƒ…å›°é›£ï¼Ÿ
â€¢ æœ‰å’©ç‰¹åˆ¥æƒ³äº†è§£å˜…ï¼Ÿ
æˆ‘éœ€è¦äº†è§£è©³æƒ…æ‰èƒ½ç‚ºä½ æä¾›ç²¾æº–å˜…åˆ†æã€‚`:`å¥½ï¼æˆ‘å·²ç¶“è¨˜éŒ„å’—ä½ å˜…ç”Ÿæ—¥è³‡æ–™ã€‚ç¾åœ¨è«‹è©³ç´°å‘Šè¨´æˆ‘ä½ å˜…${c}å•é¡Œï¼Œæ¯”å¦‚å…·é«”é‡åˆ°å’©å›°é›£ï¼Ÿæˆ‘éœ€è¦äº†è§£è©³æƒ…æ‰èƒ½ç‚ºä½ æä¾›ç²¾æº–å˜…åˆ†æã€‚`;if("birthday_collection"===a){if("æ„Ÿæƒ…"===c&&p){if("individual"===p)return"ç‚ºå’—é€²è¡Œå€‹äººæ„Ÿæƒ…åˆ†æ \uD83C\uDF38ï¼Œæˆ‘éœ€è¦ä½ å˜…å‡ºç”Ÿè³‡æ–™ã€‚\n\nè«‹æä¾›ä½ å˜…å‡ºç”Ÿå¹´æœˆæ—¥ï¼ˆä¾‹å¦‚ï¼š1990å¹´5æœˆ15æ—¥ï¼‰";if("couple"===p)return"ç‚ºå’—é€²è¡Œåˆå©šé…å°åˆ†æ \uD83D\uDC95ï¼Œæˆ‘éœ€è¦å…©å€‹äººå˜…å‡ºç”Ÿè³‡æ–™ã€‚\n\nè«‹å…ˆæä¾›ä½ å˜…å‡ºç”Ÿå¹´æœˆæ—¥ï¼ˆä¾‹å¦‚ï¼š1990å¹´5æœˆ15æ—¥ï¼‰\nä¹‹å¾Œæœƒè«‹ä½ æä¾›ä¼´ä¾¶å˜…å‡ºç”Ÿè³‡æ–™ã€‚"}return"ç‚ºå’—æä¾›æº–ç¢ºå˜…åˆ†æï¼Œæˆ‘éœ€è¦ä½ å˜…å‡ºç”Ÿå¹´æœˆæ—¥ã€‚è«‹æä¾›ï¼šå‡ºç”Ÿå¹´æœˆæ—¥ï¼ˆä¾‹å¦‚ï¼š1990å¹´5æœˆ15æ—¥ï¼‰"}return"asking_partner_birthday"===a?"å¥½ï¼æˆ‘å·²ç¶“è¨˜éŒ„å’—ä½ å˜…ç”Ÿæ—¥è³‡æ–™ã€‚\n\nç¾åœ¨è«‹æä¾›ä½ ä¼´ä¾¶å˜…å‡ºç”Ÿå¹´æœˆæ—¥ï¼ˆä¾‹å¦‚ï¼š1992å¹´8æœˆ20æ—¥ï¼‰\næœ‰å’—å…©å€‹äººå˜…å…«å­—è³‡æ–™ï¼Œæˆ‘å°±å¯ä»¥é€²è¡Œåˆå©šé…å°åˆ†æ \uD83D\uDC95":"problem_identified"===a&&d&&!l?this.generateComfortAndPreAnalysis(c,e.specificProblem||"unspecified"):"ready_for_modal"===a&&d&&!l?this.generateModalTriggerResponse(c):"ready_for_report"===a&&l&&d?this.generateReportGenerationResponse(c):this.detectBirthdayInfo(t).hasBirthday&&!l?this.generateBirthdayReceivedResponse(c):c?`æˆ‘æ˜ç™½ä½ é—œå¿ƒ${c}æ–¹é¢å˜…å•é¡Œã€‚å¯ä»¥è©³ç´°è¬›ä¸‹ä½ é‡åˆ°å˜…å…·é«”æƒ…æ³å—ï¼Ÿæ¯”å¦‚æœ€è¿‘ç™¼ç”Ÿå’—å’©äº‹ä»¤ä½ å›°æ“¾ï¼Ÿ`:"æˆ‘æƒ³å¹«ä½ åˆ†æä¸‹ï¼Œè«‹å‘Šè¨´æˆ‘ä½ æœ€é—œå¿ƒé‚Šæ–¹é¢ï¼Ÿæ¯”å¦‚å·¥ä½œã€æ„Ÿæƒ…ã€å¥åº·å®šä¿‚å…¶ä»–å›°æ“¾ï¼Ÿ"}static generateConcernIntroResponse(e,t){let n={å·¥ä½œ:["å·¥ä½œç¢ºå¯¦ä¿‚äººç”Ÿå¥½é‡è¦å˜…ä¸€éƒ¨åˆ†ï¼Œæˆ‘æ˜ç™½ä½ å˜…å›°æ“¾ã€‚","è·å ´ä¸Šå˜…äº‹æƒ…æœ‰æ™‚çœŸä¿‚å¥½è¤‡é›œï¼Œæˆ‘ç†è§£ä½ å˜…æ„Ÿå—ã€‚"],æ„Ÿæƒ…:["æ„Ÿæƒ…å•é¡Œæœ€å½±éŸ¿å¿ƒæƒ…ï¼Œæˆ‘æ˜ç™½ä½ è€Œå®¶å˜…æ„Ÿå—ã€‚","æ„›æƒ…è·¯ä¸Šç¸½æœ‰èµ·ä¼ï¼Œä½ é¡˜æ„åˆ†äº«å¤šå•²ä½ å˜…æƒ…æ³å—ï¼Ÿ"],è²¡é‹:["éŒ¢å˜…å•é¡Œç¢ºå¯¦ä»¤äººæ“”å¿ƒï¼Œæˆ‘æ˜ç™½ä½ å˜…ç„¦æ…®ã€‚","è²¡é‹ä¿‚å¥½å¤šäººé—œå¿ƒå˜…å•é¡Œï¼Œæˆ‘å¯ä»¥å¹«ä½ åˆ†æã€‚"],å¥åº·:["å¥åº·ä¿‚æœ€å¯¶è²´å˜…è²¡å¯Œï¼Œæˆ‘æ˜ç™½ä½ å˜…æ“”å¿ƒã€‚","èº«é«”å¥åº·ç¢ºå¯¦å¥½é‡è¦ï¼Œä½ è€Œå®¶æœ‰å’©å…·é«”å˜…å›°æ“¾ï¼Ÿ"],äººéš›é—œä¿‚:["äººéš›é—œä¿‚æœ‰æ™‚çœŸä¿‚å¥½é›£è™•ç†ï¼Œæˆ‘ç†è§£ä½ å˜…å›°é›£ã€‚","åŒäººç›¸è™•ç¢ºå¯¦éœ€è¦æ™ºæ…§ï¼Œä½ é‡åˆ°å’©å›°é›£ï¼Ÿ"],å­å¥³:["é¤Šè‚²å­å¥³çœŸä¿‚å””å®¹æ˜“ï¼Œæˆ‘æ˜ç™½ä½ å˜…é—œå¿ƒã€‚","ç‚ºäººçˆ¶æ¯ç¸½ä¿‚ç‚ºå­å¥³æ“å¿ƒï¼Œæœ‰å’©å…·é«”ä»¤ä½ æ“”å¿ƒï¼Ÿ"],å› ç·£:["äººç”Ÿæ©Ÿæœƒç¢ºå¯¦å¥½é‡è¦ï¼Œæˆ‘æ˜ç™½ä½ æƒ³æŠŠæ¡æ™‚æ©Ÿã€‚","å‘½é‹åŒæ©Ÿé‡æœ‰æ™‚é›£ä»¥æŒæ¡ï¼Œä½ æƒ³æ”¹å–„é‚Šæ–¹é¢ï¼Ÿ"],å±…å®¶ä½ˆå±€:["å®¶å±…é¢¨æ°´ç¢ºå¯¦å¥½é‡è¦ï¼Œæˆ‘æ˜ç™½ä½ æƒ³æ”¹å–„å±…ä½ç’°å¢ƒã€‚","å¥½å˜…å®¶å±…ä½ˆå±€å¯ä»¥æå‡é‹å‹¢ï¼Œä½ æƒ³èª¿æ•´é‚Šå€‹ç©ºé–“ï¼Ÿ"]}[e]||["æˆ‘æ˜ç™½ä½ å˜…é—œå¿ƒã€‚"];return n[Math.floor(Math.random()*n.length)]+"å¯ä»¥è©±ä¿¾æˆ‘çŸ¥å…·é«”ä¿‚å’©æƒ…æ³å—ï¼Ÿæ¯”å¦‚è€Œå®¶é‡åˆ°å’©å›°é›£ï¼Œæˆ–è€…æƒ³æ”¹å–„å’©å•é¡Œï¼Ÿ"}static generateEmotionalComfort(e){return({å›°æ“¾:"æˆ‘æ„Ÿå—åˆ°ä½ å˜…å›°æ“¾ï¼Œå‘¢ç¨®æ„Ÿè¦ºå¥½çœŸå¯¦ã€‚",æ²®å–ª:"æˆ‘æ˜ç™½ä½ è€Œå®¶å˜…æ²®å–ªï¼Œä½ ä¸¦å””å­¤å–®ã€‚",æ†¤æ€’:"æˆ‘ç†è§£ä½ å˜…æ†¤æ€’ï¼Œæœ‰å‘¢å•²æƒ…ç·’ä¿‚æ­£å¸¸å˜…ã€‚",å£“åŠ›:"æˆ‘æ„Ÿå—åˆ°ä½ æ‰¿å—å˜…å£“åŠ›ï¼Œæ·±å‘¼å¸ä¸€ä¸‹ã€‚",å¸Œæœ›:"æˆ‘æ„Ÿå—åˆ°ä½ æƒ³æ”¹å–„å˜…æ±ºå¿ƒï¼Œå‘¢å€‹æ…‹åº¦å¥½å¥½ã€‚"})[e]||"æˆ‘æœƒé™ªä¼´ä½ä½ ï¼Œ"}static generateSpecificQuestionProbe(e,t){return({å·¥ä½œ:"æˆ‘ç†è§£å·¥ä½œä¸Šæœ‰å›°é›£ç¢ºå¯¦å””å®¹æ˜“ã€‚å¯ä»¥è¬›å¾—è©³ç´°å•²å—ï¼Ÿæ¯”å¦‚ï¼š\nâ€¢ ä¿‚åŒäº‹æˆ–ä¸Šå¸é—œä¿‚æœ‰å•é¡Œï¼Ÿ\nâ€¢ å·¥ä½œé‡å¤ªå¤§æˆ–è€…å£“åŠ›å¤ªé‡ï¼Ÿ\nâ€¢ æƒ³è½‰å·¥ä½†å””çŸ¥é»åšï¼Ÿ\nâ€¢ å®šä¿‚è–ªé‡‘æˆ–è€…ç™¼å±•å‰æ™¯å•é¡Œï¼Ÿ\n\nè¬›å¤šå•²å…·é«”æƒ…æ³ï¼Œæˆ‘å…ˆèƒ½å¤ ä¿¾åˆ°æœ€é©åˆä½ å˜…å»ºè­°ã€‚",æ„Ÿæƒ…:"æ„Ÿæƒ…å˜…äº‹ç¢ºå¯¦ä»¤äººå›°æ“¾ã€‚æˆ‘æ˜ç™½ä½ å˜…æ„Ÿå—ã€‚\n\næˆ‘å¯ä»¥ç‚ºä½ æä¾›å…©ç¨®åˆ†æé¸æ“‡ï¼š\n\n\uD83C\uDF38 **å€‹äººæ„Ÿæƒ…åˆ†æ** - åˆ†æä½ å€‹äººå˜…æ„Ÿæƒ…é‹å‹¢ã€æ¡ƒèŠ±é‹ã€æ„Ÿæƒ…éšœç¤™ç­‰\n\uD83D\uDC95 **åˆå©šé…å°åˆ†æ** - å¦‚æœä½ æœ‰ä¼´ä¾¶ï¼Œæˆ‘å¯ä»¥åˆ†æä½ å“‹å˜…å…«å­—åˆé…åº¦ã€æ„Ÿæƒ…ç›¸å®¹æ€§\n\nä½ æƒ³è¦é‚Šç¨®åˆ†æï¼Ÿ",è²¡é‹:"éŒ¢å˜…å•é¡Œç¢ºå¯¦ä»¤äººæ“”å¿ƒã€‚å¯ä»¥è¬›å¾—è©³ç´°å•²å—ï¼Ÿ\nâ€¢ ä¿‚æ”¶å…¥å””å¤ æˆ–è€…æƒ³å¢åŠ æ”¶å…¥ï¼Ÿ\nâ€¢ æŠ•è³‡è™§ææˆ–è€…ç†è²¡å›°é›£ï¼Ÿ\nâ€¢ å®šä¿‚æœ‰å‚µå‹™æˆ–è€…å…¶ä»–è²¡å‹™å£“åŠ›ï¼Ÿ\n\nçŸ¥é“å…·é«”æƒ…æ³ï¼Œæˆ‘å…ˆå¯ä»¥ä¿¾åˆ°é‡å°æ€§å˜…é¢¨æ°´å»ºè­°ã€‚",å¥åº·:"ä½ è€Œå®¶èº«é«”æœ‰å’©å””èˆ’æœï¼Ÿå®šä¿‚æƒ³é é˜²æŸå•²å¥åº·å•é¡Œï¼Ÿå¯ä»¥è¬›å¾—å…·é«”å•²ã€‚",äººéš›é—œä¿‚:"ä½ åŒé‚Šå•²äººå˜…é—œä¿‚æœ‰å•é¡Œï¼Ÿä¿‚æœ‹å‹ã€å®¶äººï¼Œå®šä¿‚åŒäº‹ï¼Ÿå¯ä»¥è©³ç´°è¬›ä¸‹ç™¼ç”Ÿå’—å’©äº‹ã€‚",å­å¥³:"é—œæ–¼å­å¥³ï¼Œä½ æœ€æ“”å¿ƒä¿‚å’©ï¼Ÿä¿‚å­¸ç¿’ã€å¥åº·ï¼Œå®šä¿‚è¡Œç‚ºå•é¡Œï¼Ÿè¬›å¤šå•²å…·é«”æƒ…æ³ã€‚",å› ç·£:"ä½ æƒ³æŠŠæ¡å’©æ©Ÿæœƒï¼Ÿå®šä¿‚æƒ³æ”¹å–„é‹å‹¢ï¼Ÿå¯ä»¥è¬›å¾—è©³ç´°å•²ä½ å˜…æœŸæœ›ã€‚"})[e]||"å¯ä»¥è©³ç´°è¬›ä¸‹ä½ å˜…æƒ…æ³å—ï¼Ÿè¬›å¤šå•²å…·é«”å˜…å•é¡Œï¼Œæˆ‘å…ˆå¯ä»¥å¹«åˆ°ä½ ã€‚"}static generateComfortAndPreAnalysis(e,t){let n={å·¥ä½œ:{comfort:"æˆ‘å®Œå…¨ç†è§£ä½ å˜…å·¥ä½œå£“åŠ›ï¼Œè·å ´ä¸Šå˜…å›°é›£ç¢ºå¯¦ä»¤äººæ„Ÿåˆ°ç–²æ†Šã€‚ä½ æåˆ°å·¥ä½œä¸åˆé©åŒå£“åŠ›å¤§ï¼Œå‘¢å•²éƒ½ä¿‚å¥½å¤šäººé¢å°å˜…å•é¡Œã€‚",suggestion:"æ ¹æ“šé¢¨æ°´å­¸ï¼Œå·¥ä½œé‹å‹¢åŒä½ å˜…å€‹äººèƒ½é‡å ´æœ‰å¯†åˆ‡é—œä¿‚ã€‚é€éèª¿æ•´ä½ å˜…æ°£å ´åŒç’°å¢ƒï¼Œå¯ä»¥æœ‰æ•ˆæ”¹å–„å·¥ä½œç‹€æ³ï¼Œæ¸›è¼•å£“åŠ›ï¼Œç”šè‡³å¹«ä½ æµåˆ°æ›´é©åˆå˜…å·¥ä½œæ©Ÿæœƒã€‚",question:"æˆ‘å¯ä»¥ç‚ºä½ åšå€‹è©³ç´°å˜…å…«å­—åˆ†æï¼Œæä¾›é‡å°æ€§å˜…é¢¨æ°´å»ºè­°ï¼ŒåŒ…æ‹¬å€‹äººèƒ½é‡æå‡ã€è¾¦å…¬ç’°å¢ƒèª¿æ•´ã€åŒåŸ‹åŠ©ä½ æ”¹å–„å·¥ä½œé‹å˜…å…·é«”æ–¹æ³•ã€‚ä½ é¡˜æ„è©¦ä¸‹å—ï¼Ÿ"},æ„Ÿæƒ…:{comfort:"æ„Ÿæƒ…å•é¡Œç¢ºå¯¦æœ€ä»¤äººå¿ƒç—›ï¼Œæˆ‘æ˜ç™½ä½ è€Œå®¶å˜…æ„Ÿå—ã€‚æ„Ÿæƒ…è·¯ä¸Šæœ‰èµ·æœ‰è·Œä¿‚æ­£å¸¸å˜…ã€‚",suggestion:"é¢¨æ°´å­¸å¯ä»¥å¹«åŠ©èª¿å’Œæ„Ÿæƒ…èƒ½é‡ï¼Œæ”¹å–„äººéš›é—œä¿‚ï¼Œç”šè‡³å¢å¼·ä½ å˜…æ¡ƒèŠ±é‹æˆ–è€…ä¿®å¾©ç¾æœ‰é—œä¿‚ã€‚",question:"æˆ‘å¯ä»¥ç‚ºä½ æä¾›å…©ç¨®åˆ†æé¸æ“‡ï¼š\n\n\uD83C\uDF38 **å€‹äººæ„Ÿæƒ…åˆ†æ** - åˆ†æä½ å€‹äººå˜…æ„Ÿæƒ…é‹å‹¢ã€æ¡ƒèŠ±é‹ã€æ„Ÿæƒ…éšœç¤™ç­‰\n\uD83D\uDC95 **åˆå©šé…å°åˆ†æ** - å¦‚æœä½ æœ‰ä¼´ä¾¶ï¼Œæˆ‘å¯ä»¥åˆ†æä½ å“‹å˜…å…«å­—åˆé…åº¦ã€æ„Ÿæƒ…ç›¸å®¹æ€§\n\nä½ æƒ³è¦é‚Šç¨®åˆ†æï¼Ÿè«‹å›è¦†ã€Œå€‹äººåˆ†æã€æˆ–è€…ã€Œåˆå©šåˆ†æã€"},è²¡é‹:{comfort:"éŒ¢å˜…å•é¡Œç¢ºå¯¦ä»¤äººæ“”å¿ƒï¼Œæˆ‘ç†è§£ä½ å˜…ç„¦æ…®ã€‚è²¡é‹æœ‰æ™‚èµ·ä¼ä¸å®šä¿‚å¥½æ­£å¸¸å˜…ã€‚",suggestion:"é¢¨æ°´å­¸èªç‚ºè²¡é‹åŒå€‹äººæ°£å ´åŒç’°å¢ƒä½ˆå±€æœ‰å¥½å¤§é—œä¿‚ï¼Œé€éèª¿æ•´å¯ä»¥æ”¹å–„è²¡é‹æµå‹•ã€‚",question:"æˆ‘å¯ä»¥ç‚ºä½ åˆ†æè²¡é‹èµ°å‹¢ï¼Œæä¾›æ‹›è²¡èšè²¡å˜…é¢¨æ°´å»ºè­°ã€‚ä½ é¡˜æ„äº†è§£ä¸‹å—ï¼Ÿ"},å¥åº·:{comfort:"å¥åº·å•é¡Œæœ€ä»¤äººæ“”å¿ƒï¼Œæˆ‘æ˜ç™½ä½ å˜…æ†‚æ…®ã€‚èº«å¿ƒå¥åº·ç¢ºå¯¦ä¿‚æœ€é‡è¦å˜…ã€‚",suggestion:"é¢¨æ°´å­¸å¯ä»¥å¹«åŠ©èª¿å’Œèº«å¿ƒèƒ½é‡ï¼Œæ”¹å–„å±…ä½ç’°å¢ƒå˜…å¥åº·æ°£å ´ï¼Œä¿ƒé€²èº«å¿ƒå¹³è¡¡ã€‚",question:"æˆ‘å¯ä»¥ç‚ºä½ åˆ†æå¥åº·é‹å‹¢ï¼Œæä¾›æ”¹å–„èº«å¿ƒèƒ½é‡å˜…é¢¨æ°´æ–¹æ³•ã€‚ä½ æƒ³è©¦ä¸‹å—ï¼Ÿ"}}[e]||{comfort:"æˆ‘æ˜ç™½ä½ è€Œå®¶é¢å°å˜…å›°é›£ï¼Œå‘¢å•²æŒ‘æˆ°ç¢ºå¯¦å””å®¹æ˜“è™•ç†ã€‚",suggestion:"é¢¨æ°´å­¸å¯ä»¥å¹«åŠ©èª¿æ•´å€‹äººèƒ½é‡å ´ï¼Œæ”¹å–„ç”Ÿæ´»å„æ–¹é¢å˜…é‹å‹¢ã€‚",question:"æˆ‘å¯ä»¥ç‚ºä½ åšå€‹è©³ç´°åˆ†æï¼Œæä¾›æ”¹å–„é‹å‹¢å˜…å…·é«”å»ºè­°ã€‚ä½ é¡˜æ„è©¦ä¸‹å—ï¼Ÿ"};return`${n.comfort}

${n.suggestion}

${n.question}`}static generateModalTriggerResponse(e){return`å¥½ï¼æˆ‘å·²ç¶“äº†è§£ä½ å˜…${e}å•é¡Œã€‚ç¾åœ¨æˆ‘éœ€è¦ä½ å˜…å‡ºç”Ÿè³‡æ–™ä¾†ç‚ºä½ åšè©³ç´°åˆ†æã€‚

è«‹æä¾›ä½ å˜…ï¼š
â€¢ å‡ºç”Ÿæ—¥æœŸï¼ˆå¹´æœˆæ—¥ï¼‰
â€¢ æ€§åˆ¥

æœ‰å’—å‘¢å•²è³‡æ–™ï¼Œæˆ‘å¯ä»¥æ ¹æ“šä½ å˜…å…«å­—äº”è¡Œï¼Œç‚ºä½ æä¾›ç²¾æº–å˜…${e}åˆ†æåŒæ”¹å–„å»ºè­°ã€‚`}static generateBirthdayReceivedResponse(e){return`æ”¶åˆ°ï¼æˆ‘å·²ç¶“è¨˜éŒ„å’—ä½ å˜…ç”Ÿæ—¥è³‡æ–™ã€‚ä¾å®¶æˆ‘æœƒç‚ºä½ æº–å‚™ä¸€ä»½è©³ç´°å˜…${e}åˆ†æå ±å‘Šã€‚

å‘¢ä»½å ±å‘ŠæœƒåŒ…æ‹¬ï¼š
â€¢ ä½ å˜…å…«å­—äº”è¡Œåˆ†æ
â€¢ ${e}é‹å‹¢è©•ä¼°
â€¢ é‡å°ä½ å…·é«”å•é¡Œå˜…å»ºè­°
â€¢ é¢¨æ°´æ”¹å–„æ–¹æ¡ˆ

æˆ‘è€Œå®¶é–‹å§‹ç‚ºä½ åˆ†æ...`}static generateReportGenerationResponse(e){return`ä½ å˜…${e}åˆ†æå ±å‘Šå·²ç¶“æº–å‚™å¥½ï¼å ±å‘ŠåŒ…æ‹¬å’—æ ¹æ“šä½ å˜…å…«å­—åˆ†æåŒå…·é«”å»ºè­°ã€‚æ­£åœ¨ç‚ºä½ ç”Ÿæˆè©³ç´°åˆ†æ...`}static generateOfferDetailedAnalysis(e,t,n=null){return"æ„Ÿæƒ…"===e&&"couple"===n?"æˆ‘å·²ç¶“ç‚ºä½ å“‹é€²è¡Œå’—åŸºæœ¬å˜…åˆå©šé…å°åˆ†æ \uD83D\uDC95\n\næƒ³è¦æ›´è©³ç´°å˜…åˆå©šå ±å‘Šå—ï¼ŸåŒ…æ‹¬ï¼š\nâ€¢ è©³ç´°å˜…å…«å­—åˆé…åº¦åˆ†æ\nâ€¢ æ„Ÿæƒ…ç™¼å±•æ™‚æ©Ÿå»ºè­°\nâ€¢ åŒ–è§£æ„Ÿæƒ…éšœç¤™å˜…é¢¨æ°´æ–¹æ³•\nâ€¢ å¢é€²æ„Ÿæƒ…å˜…å…·é«”å»ºè­°\n\nå¦‚æœéœ€è¦è©³ç´°å ±å‘Šï¼Œè«‹å›è¦†ã€Œè¦ã€æˆ–ã€Œæƒ³ã€":({å·¥ä½œ:"æˆ‘æ˜ç™½å·¥ä½œå£“åŠ›ç¢ºå¯¦å¥½å½±éŸ¿ç”Ÿæ´»è³ªé‡ã€‚æ ¹æ“šä½ å˜…æƒ…æ³ï¼Œæˆ‘å¯ä»¥ç‚ºä½ æä¾›è©³ç´°å˜…å…«å­—åˆ†æåŒåŸ‹å…·é«”å˜…æ”¹å–„å»ºè­°ã€‚ä½ æƒ³è¦è©³ç´°å˜…è·å ´é¢¨æ°´åˆ†æå ±å‘Šå—ï¼Ÿ",æ„Ÿæƒ…:"æ„Ÿæƒ…å•é¡Œæœ€éœ€è¦ç´°å¿ƒè™•ç†ã€‚æˆ‘å¯ä»¥ç‚ºä½ æä¾›å…©ç¨®è©³ç´°åˆ†æï¼š\n\n\uD83C\uDF38 **å€‹äººæ„Ÿæƒ…åˆ†æ** - æ·±å…¥åˆ†æä½ å€‹äººå˜…æ„Ÿæƒ…é‹å‹¢ã€æ¡ƒèŠ±é‹ã€æœ€ä½³è„«å–®æ™‚æ©Ÿç­‰\n\uD83D\uDC95 **åˆå©šé…å°åˆ†æ** - å¦‚æœä½ æœ‰ä¼´ä¾¶ï¼Œå¯ä»¥åˆ†æä½ å“‹å˜…å…«å­—åˆé…åº¦ã€æ„Ÿæƒ…ç™¼å±•å»ºè­°ç­‰\n\nä½ æƒ³è¦é‚Šç¨®è©³ç´°åˆ†æï¼Ÿè«‹å›è¦†ã€Œå€‹äººåˆ†æã€æˆ–è€…ã€Œåˆå©šåˆ†æã€",è²¡é‹:"è²¡é‹åˆ†æéœ€è¦è©³ç´°å˜…å…«å­—è¨ˆç®—ã€‚æˆ‘å¯ä»¥ç‚ºä½ åˆ†æè²¡é‹èµ°å‹¢åŒåŸ‹æä¾›å‚¬è²¡é¢¨æ°´å»ºè­°ã€‚ä½ æƒ³è¦å®Œæ•´å˜…è²¡é‹åˆ†æå ±å‘Šå—ï¼Ÿ",å¥åº·:"å¥åº·ä¿‚æœ€é‡è¦å˜…ã€‚æˆ‘å¯ä»¥æ ¹æ“šä½ å˜…å…«å­—åˆ†æå¥åº·é‹å‹¢åŒåŸ‹æä¾›é¤Šç”Ÿé¢¨æ°´å»ºè­°ã€‚ä½ æƒ³è¦è©³ç´°å˜…å¥åº·åˆ†æå ±å‘Šå—ï¼Ÿ"})[e]||`æˆ‘å¯ä»¥ç‚ºä½ æä¾›è©³ç´°å˜…${e}åˆ†æå ±å‘Šï¼ŒåŒ…æ‹¬å…·é«”å˜…æ”¹å–„å»ºè­°ã€‚ä½ æƒ³è¦å—ï¼Ÿ`}static generateComfortAndBirthdayRequest(e,t){let n=this.generateEmotionalComfort(t);return n+({å·¥ä½œ:"å·¥ä½œå•é¡Œç¢ºå¯¦ä»¤äººå›°æ“¾ã€‚å¦‚æœä½ é¡˜æ„æä¾›ç”Ÿæ—¥è³‡æ–™ï¼Œæˆ‘å¯ä»¥æ ¹æ“šä½ å˜…å…«å­—ç‚ºä½ åˆ†æè·å ´é‹å‹¢ï¼Œæä¾›å…·é«”å˜…æ”¹å–„æ–¹å‘ã€‚",æ„Ÿæƒ…:"æ„Ÿæƒ…è·¯ä¸Šç¸½æœ‰èµ·ä¼ï¼Œæˆ‘æ˜ç™½ä½ å˜…æ„Ÿå—ã€‚å¦‚æœä½ æä¾›ç”Ÿæ—¥è³‡æ–™ï¼Œæˆ‘å¯ä»¥ç‚ºä½ åšè©³ç´°å˜…æ„Ÿæƒ…åˆ†æï¼Œç”šè‡³åˆå©šå»ºè­°ã€‚",è²¡é‹:"è²¡å‹™å£“åŠ›ç¢ºå¯¦å½±éŸ¿å¿ƒæƒ…ã€‚æä¾›ç”Ÿæ—¥è³‡æ–™å¾Œï¼Œæˆ‘å¯ä»¥ç‚ºä½ åˆ†æè²¡é‹èµ°å‘åŒåŸ‹æä¾›å‚¬è²¡å»ºè­°ã€‚",å¥åº·:"å¥åº·å•é¡Œæœ€éœ€è¦é‡è¦–ã€‚å¦‚æœä½ æä¾›ç”Ÿæ—¥è³‡æ–™ï¼Œæˆ‘å¯ä»¥æ ¹æ“šå…«å­—ç‚ºä½ åˆ†æå¥åº·é‹å‹¢åŒé¤Šç”Ÿå»ºè­°ã€‚"})[e]||`${n}å¦‚æœä½ æä¾›ç”Ÿæ—¥è³‡æ–™ï¼Œæˆ‘å¯ä»¥ç‚ºä½ åšæ›´ç²¾æº–å˜…${e}åˆ†æã€‚`}static hasSpecificProblemDescription(e,t=[]){if(this.detectBirthdayInfo(e).hasBirthday||e.includes("æ€§åˆ¥ï¼š")||e.includes("æ€§åˆ¥:")||e.includes("æ€§åˆ¥ ")||/æ€§åˆ¥.{0,2}[ç”·å¥³]/.test(e)||/[ç”·å¥³]$/.test(e.trim())||["å¦‚ä½•æä¾›ç”Ÿæ—¥","æ€æ¨£æä¾›ç”Ÿæ—¥","æ€éº¼æä¾›ç”Ÿæ—¥","é»æ¨£æä¾›ç”Ÿæ—¥","å¦‚ä½•çµ¦ç”Ÿæ—¥","ç”Ÿæ—¥æ€éº¼çµ¦","å¦‚ä½•å ±å‘Šç”Ÿæ—¥","å¦‚ä½•è¼¸å…¥ç”Ÿæ—¥","é»æ¨£ä¿¾ç”Ÿæ—¥","å¦‚ä½•é–‹å§‹","æ€æ¨£é–‹å§‹","å¦‚ä½•ä»˜æ¬¾","æ€æ¨£ä»˜è²»","è²»ç”¨å¤šå°‘","æ€éº¼æ”¶è²»"].some(t=>e.includes(t))||["åˆå©šåˆ†æ","å€‹äººåˆ†æ","å€‹äººæ„Ÿæƒ…åˆ†æ","åˆå©š","å€‹äºº","å–®äººåˆ†æ","é›™äººåˆ†æ","æƒ…ä¾¶åˆ†æ","å¤«å¦»åˆ†æ","é…å°åˆ†æ","å…«å­—åˆå©š","å©šé…åˆ†æ"].some(t=>e.includes(t)))return!1;if(["åŠ äººå·¥","åŠ è–ª","æ¸›è–ª","å‡è·","è¾­è·","è½‰å·¥","åˆ†æ‰‹","åˆ†æ‰‹äº†","é›¢å©š","é›¢å©šäº†","çµå©š","è²·æ¨“","æœªä¾†æ„Ÿæƒ…ç™¼å±•","æ„Ÿæƒ…æœªä¾†","æœªä¾†ç™¼å±•","æ„Ÿæƒ…èµ°å‘","æœªä¾†æ¡ƒèŠ±","å¾©åˆå¯èƒ½","æ¡ƒèŠ±é‹","æ¡ƒèŠ±","è„«å–®"].some(t=>e.includes(t)))return!0;if(["æµå¹´åˆå©š","æµå¹´åˆå©šè©³è§£","åˆå©šåˆ†æ","å…«å­—åˆå©š","å©šé…åˆ†æ","è©³ç´°åˆ†æ","æ·±å…¥åˆ†æ","å®Œæ•´åˆ†æ","å°ˆæ¥­åˆ†æ","æµå¹´é‹å‹¢","å¹´é‹åˆ†æ","é‹å‹¢è©³è§£","å…«å­—åˆ†æ","å‘½ç›¤åˆ†æ","å‘½ç†åˆ†æ","é¢¨æ°´è©³è§£","é¢¨æ°´åˆ†æ","é¢¨æ°´å»ºè­°","å©šå«å‰æ—¥","çµå©šå‰æ—¥","æ“‡æ—¥åˆ†æ","è²¡é‹åˆ†æ","äº‹æ¥­åˆ†æ","æ„Ÿæƒ…åˆ†æ"].some(t=>e.includes(t)))return"detailed_analysis_request";if(e.length<6||[/^(.{0,5})(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹).{0,5}(æœ‰|æœ‰é»|å­˜åœ¨).{0,5}(å•é¡Œ|å›°é›£|éº»ç…©)(.{0,5})$/,/^(.{0,5})(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹).{0,5}(å””|ä¸|å†‡).{0,5}(å¥½|é †åˆ©|é †)(.{0,5})$/,/^(.{0,5})(æœ€è¿‘|è€Œå®¶).{0,5}(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹).{0,5}(å””|ä¸).{0,5}(é †|å¥½)(.{0,5})$/,/^(.{0,5})(æˆ‘æƒ³å•|æƒ³å•|æƒ³çŸ¥é“|è«‹å•).{0,5}(æœ‰é—œ|é—œæ–¼).{0,5}(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹|å¥åº·|äººéš›)(.{0,5})$/,/^(.{0,5})(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹|å¥åº·|äººéš›).{0,5}(æ–¹é¢|å•é¡Œ|æƒ…æ³)(.{0,5})$/,/^(.{0,5})(æƒ³äº†è§£|äº†è§£).{0,5}(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹|å¥åº·|äººéš›)(.{0,5})$/,/^(.{0,5})(æˆ‘æƒ³å•|æƒ³å•|æƒ³çŸ¥é“|è«‹å•).{0,5}(å·¥ä½œ|æ„Ÿæƒ…|è²¡é‹|å¥åº·|äººéš›)$/].some(t=>t.test(e)))return!1;let n=["æœ€è¿‘å¹¾å€‹æœˆ","å‘¢å€‹æ˜ŸæœŸ","ä¸Šå€‹æœˆ","ä»Šå¹´","å»å¹´","å·²ç¶“å¥½è€","æŒçºŒ","ç¶“å¸¸ç™¼ç”Ÿ","è€é—†","åŒäº‹","å®¢æˆ¶","ä¸Šå¸","ä¸‹å±¬","å·¥ä½œé‡","åŠ ç­","è½‰å·¥","è¾­è·","å‡è·","æ¸›è–ª","åŠ è–ª","äººå·¥","åŠ äººå·¥","è–ªæ°´","å¾…é‡","ç¦åˆ©","ç”·æœ‹å‹","å¥³æœ‹å‹","è€å…¬","è€å©†","åˆ†æ‰‹","çµå©š","é›¢å©š","å‡ºè»Œ","çˆ­åŸ·","å†·æˆ°","å‚µå‹™","æŠ•è³‡","è™§æ","å€ŸéŒ¢","ç ´ç”¢","è²·æ¨“","æŒ‰æ­","è‚¡ç¥¨","åŸºé‡‘","æ©«è²¡","åè²¡","æ­£è²¡","ç™¼è²¡","ä¸­ç","å½©ç¥¨","é‹è²¡","æ‹›è²¡","èšè²¡","å¢åŠ è²¡é‹","å¤±çœ ","é ­ç—›","ç–²ç´¯åˆ°","æ”°åˆ°","é£Ÿå””è½","ç“å””è‘—","å¿ƒæƒ…ä½è½","å£“åŠ›å¤§åˆ°","ç™¼ç”Ÿå’—","é‡åˆ°","é¢å°","è™•ç†ç·Š","å˜—è©¦é","å·²ç¶“è©¦é","æƒ³è§£æ±º","å¸Œæœ›æ”¹å–„","äº¤ä¸åˆ°","æ‰¾ä¸åˆ°","æµå””åˆ°","å–®èº«","å­¤å–®","å§»ç·£","æ¡ƒèŠ±","æ¡ƒèŠ±é‹","è„«å–®","ç›¸è¦ª","ç´„æœƒ","å¢å¼·","æå‡","æ”¹å–„","æ‹›æ¡ƒèŠ±","æˆ€æ„›é‹","æ„Ÿæƒ…é‹","äººç·£","åˆ†æ‰‹äº†","é›¢å©šäº†","ä»€éº¼","ç”šéº¼","æ€éº¼","é»æ¨£","å¦‚ä½•","èƒ½å¦","å¯å¦","å¯ä»¥","æƒ³çœ‹çœ‹","æƒ³å•","æƒ³çŸ¥é“"].some(t=>e.includes(t)),r=e.length>15;return n||r}static detectConfirmation(e){return[/^å¥½$/,/^å¥½çš„$/,/^å¯ä»¥$/,/^æ˜¯$/,/^æ˜¯çš„$/,/^OK$/,/^ok$/,/^æƒ³è¦$/,/^æƒ³$/,/^è¦$/,/^åŒæ„$/,/^é¡˜æ„$/].some(t=>t.test(e?.trim()||""))}static detectRelationshipAnalysisChoice(e){return/\d{4}[-\/å¹´]\d{1,2}[-\/æœˆ]\d{1,2}æ—¥?|\d{1,2}[-\/]\d{1,2}[-\/]\d{4}/.test(e.trim())||["åˆ†æ‰‹","åˆ†æ‰‹äº†","åˆ†å¼€äº†","åˆ†é–‹äº†","é›¢å©š","ç¦»å©š","åµæ¶","å†·æˆ°","å†·æˆ˜","å‡ºè»Œ","å‡ºè½¨","èƒŒå›","æ¬ºé¨™","æ¬ºéª—","ä¸æ„›","ä¸çˆ±","è®Šå¿ƒ","å˜å¿ƒ"].some(t=>e.includes(t))?null:["å€‹äººåˆ†æ","ä¸ªäººåˆ†æ","å€‹äºº","å•äººåˆ†æ","å–®äººåˆ†æ","æˆ‘è‡ªå·±","å€‹äººæ„Ÿæƒ…","å€‹äººå˜…","å€‹äººçš„","è‡ªå·±çš„","åªè¦æˆ‘","é¸æ“‡1","1ï¸âƒ£","1","æ¡ƒèŠ±é¢¨æ°´","æ¡ƒèŠ±é‹","å–®èº«","è„«å–®","é—œä¿‚","å…³ç³»","é—œä¿‚åˆ†æ"].some(t=>e.includes(t))?"individual":["åˆå©šåˆ†æ","åˆå©š","é…å°","é…å¯¹","å…©äºº","ä¸¤äºº","é›™äºº","åŒäºº","æƒ…ä¾¶","æƒ…ä¾£","å¤«å¦»","ä¼´ä¾¶","ä¼´ä¾£","å°è±¡","å¯¹è±¡","é¸æ“‡2","2ï¸âƒ£","2","æˆ‘å’Œ","æˆ‘èˆ‡","æˆ‘è·Ÿ.*ä¸€èµ·","æˆ‘å€‘å…©å€‹","æˆ‘ä»¬ä¸¤ä¸ª","å¾©åˆ","å¤åˆ","å¾©åˆåˆ†æ","å¾©åˆå¯èƒ½æ€§"].some(t=>e.includes(t))?"couple":null}static detectReportTypeChoice(e){let t=e.trim();return"1"===t?"detailed_concern":"2"===t?"comprehensive":"3"===t?"layout":e.includes("è©³ç´°å ±å‘Š")||e.includes("æ„Ÿæƒ…çš„è©³ç´°")||e.includes("åˆå©šçš„è©³ç´°")?"detailed_concern":e.includes("ç¶œåˆå‘½ç†")||e.includes("å…«å­—å‘½ç›¤")||e.includes("å…¨é¢åˆ†æ")?"comprehensive":e.includes("å±…å®¶ä½ˆå±€")||e.includes("é¢¨æ°´ç©ºé–“")||e.includes("ä½ˆå±€å ±å‘Š")?"layout":null}static detectConcernAndProblem(e){let t=this.detectPrimaryConcern(e),n=this.hasSpecificProblemDescription(e);return{concern:t,hasSpecificProblem:n,isCombinedMessage:t&&n}}static detectTopicChange(e,t){let n=this.detectPrimaryConcern(e);return n&&t&&n!==t?{hasTopicChange:!0,previousTopic:t,newTopic:n,hasNewProblem:this.hasSpecificProblemDescription(e)}:{hasTopicChange:!1,previousTopic:t,newTopic:n,hasNewProblem:!1}}}class u{static generatePersonalAnalysis(e,t,n){let r=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),o=["é‡‘","æœ¨","æ°´","ç«","åœŸ"][r%5];return({æ„Ÿæƒ…:{basic:`æ ¹æ“šä½ ${r}å¹´${i}æœˆ${s}æ—¥çš„å…«å­—ï¼Œä½ å±¬æ–¼${o}å‘½ã€‚${o}å‘½çš„äººåœ¨æ„Ÿæƒ…ä¸Š${this.getElementLoveTraits(o)}`,concern:`ä½ çš„æ„Ÿæƒ…é‹å‹¢é¡¯ç¤º${this.getLoveForcast(o,t)}`,specific:`é‡å°ä½ æåˆ°çš„"${n}"ï¼Œå»ºè­°ä½ ${this.getSpecificAdvice(o,"æ„Ÿæƒ…",n)}`,fengshui:`æ„Ÿæƒ…é¢¨æ°´å»ºè­°ï¼š${this.getFengShuiAdvice(o,"æ„Ÿæƒ…")}`},å·¥ä½œ:{basic:`æ ¹æ“šä½ ${r}å¹´${i}æœˆ${s}æ—¥çš„å…«å­—ï¼Œä½ å±¬æ–¼${o}å‘½ã€‚${o}å‘½çš„äººåœ¨äº‹æ¥­ä¸Š${this.getElementCareerTraits(o)}`,concern:`ä½ çš„äº‹æ¥­é‹å‹¢é¡¯ç¤º${this.getCareerForcast(o)}`,specific:`é‡å°ä½ çš„å·¥ä½œå›°æ“¾"${n}"ï¼Œå»ºè­°${this.getSpecificAdvice(o,"å·¥ä½œ",n)}`,fengshui:`äº‹æ¥­é¢¨æ°´å»ºè­°ï¼š${this.getFengShuiAdvice(o,"å·¥ä½œ")}`},è²¡é‹:{basic:`æ ¹æ“šä½ çš„å…«å­—åˆ†æï¼Œä½ å±¬æ–¼${o}å‘½ï¼Œ${o}å‘½äººçš„è²¡é‹ç‰¹è³ªæ˜¯${this.getElementWealthTraits(o)}`,concern:`ä½ çš„è²¡é‹åˆ†æé¡¯ç¤º${this.getWealthForcast(o)}`,specific:`å°æ–¼ä½ çš„è²¡å‹™å•é¡Œ"${n}"ï¼Œå»ºè­°${this.getSpecificAdvice(o,"è²¡é‹",n)}`,fengshui:`æ‹›è²¡é¢¨æ°´ä½ˆå±€ï¼š${this.getFengShuiAdvice(o,"è²¡é‹")}`}})[t]||{basic:`ä½ å±¬æ–¼${o}å‘½ï¼Œå…·æœ‰${o}çš„ç‰¹è³ª`,concern:`ä½ çš„é‹å‹¢æ•´é«”è‰¯å¥½`,specific:`å»ºè­°ä½ ä¿æŒç©æ¥µæ…‹åº¦`,fengshui:`å»ºè­°èª¿æ•´å±…ä½ç’°å¢ƒçš„æ°£å ´`}}static async generatePersonalAnalysisV2(e,t,n){let r=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),o=["é‡‘","æœ¨","æ°´","ç«","åœŸ"][r%5],a={personality:`æ ¹æ“šä½ ${r}å¹´${i}æœˆ${s}æ—¥çš„å…«å­—ï¼Œä½ å±¬æ–¼${o}å‘½ã€‚${o}å‘½çš„äºº${this.getElementCareerTraits(o)}`,currentSituation:`ä½ çš„${t}é‹å‹¢é¡¯ç¤º${this.getCareerForcast(o)}`,futureOutlook:`æœªä¾†${t}ç™¼å±•å‰æ™¯è‰¯å¥½ï¼Œé©åˆç©æ¥µè¦åŠƒ`,specificAdvice:`é‡å°"${n}"é€™å€‹å•é¡Œï¼Œå»ºè­°ä½ ${this.getSpecificAdvice(o,t,n)}`,fengShuiSolutions:`${t}é¢¨æ°´å»ºè­°ï¼š${this.getFengShuiAdvice(o,t)}`,timingAdvice:`æœ€ä½³è¡Œå‹•æ™‚æ©Ÿåœ¨æ¥ä¸‹ä¾†çš„3-6å€‹æœˆå…§ï¼Œ${o}å‘½äººæ­¤æœŸé–“é‹å‹¢ä¸Šå‡`};try{let r=await this.enhanceWithAI(e,t,n,o);return{...a,...r}}catch(e){return console.log("AI enhancement failed, using basic analysis:",e.message),a}}static async enhanceWithAI(e,t,n,r){let i=n&&(n.includes("å¾©åˆ")||n.includes("åˆ†æ‰‹")||n.includes("æŒ½å›"));return(e.toDateString(),i)?{personality:`${r}å‘½çš„ä½ åœ¨æ„Ÿæƒ…ä¸­${this.getElementLoveTraits(r)}ã€‚ä½ å°æ„›æƒ…æœ‰è‘—æ·±åˆ»çš„ç†è§£ï¼Œé›–ç„¶ç›®å‰é¢è‡¨åˆ†æ‰‹çš„ç—›è‹¦ï¼Œä½†ä½ çš„${r}ç‰¹è³ªè®“ä½ å…·å‚™é‡æ–°ç²å¾—æ„›æƒ…çš„èƒ½åŠ›ã€‚`,currentSituation:`å¾å…«å­—ä¾†çœ‹ï¼Œä½ å€‘çš„åˆ†æ‰‹ä¸¦éå¶ç„¶ï¼Œè€Œæ˜¯æ„Ÿæƒ…ç™¼å±•ä¸­çš„ä¸€å€‹è€ƒé©—æœŸã€‚${r}å‘½äººåœ¨æ„Ÿæƒ…æ–¹é¢å®¹æ˜“${this.getElementLoveChallenges(r)}ï¼Œä½†åŒæ™‚ä¹Ÿå…·æœ‰åŒ–è§£æƒ…æ„Ÿå±æ©Ÿçš„æ™ºæ…§ã€‚`,futureOutlook:`æ¥ä¸‹ä¾†çš„3-6å€‹æœˆæ˜¯æ„Ÿæƒ…é‡å»ºçš„é—œéµæœŸã€‚${r}å‘½äººçš„æ„Ÿæƒ…é‹å‹¢å°‡åœ¨${this.getBestMonth(r)}æœˆé”åˆ°é«˜å³°ï¼Œé€™æ˜¯å¾©åˆçš„æœ€ä½³æ™‚æ©Ÿçª—å£ã€‚`,specificAdvice:`å¾©åˆä¸èƒ½æ€¥æ–¼ä¸€æ™‚ï¼Œéœ€è¦å¾å…§å¿ƒé–‹å§‹èª¿æ•´ã€‚å»ºè­°ä½ å…ˆæå‡è‡ªå·±çš„${r}èƒ½é‡ï¼Œé€šéé¢¨æ°´èª¿æ•´å¢å¼·å€‹äººé­…åŠ›ï¼Œè®“å°æ–¹é‡æ–°çœ‹åˆ°ä½ çš„æ”¹è®Šå’Œæˆé•·ã€‚`,fengShuiSolutions:`ç«‹å³èª¿æ•´è‡¥å®¤æ¡ƒèŠ±ä½ï¼ˆ${this.getElementDirection(r)}ï¼‰ï¼Œæ“ºæ”¾ç²‰è‰²æ°´æ™¶æˆ–é®®èŠ±ã€‚åŒæ™‚æ¸…ç†æ‰€æœ‰èˆ‡å‰ä»»ç›¸é—œçš„è² èƒ½é‡ç‰©å“ï¼Œç‚ºæ–°çš„æ„Ÿæƒ…èƒ½é‡é¨°å‡ºç©ºé–“ã€‚`,timingAdvice:`å¾©åˆçš„æœ€ä½³æ™‚æ©Ÿåœ¨è¾²æ›†${this.getBestMonth(r)}æœˆçš„${r}æ—¥ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå°ˆæ³¨æ–¼è‡ªæˆ‘æå‡å’Œèƒ½é‡èª¿æ•´ï¼Œåˆ‡å‹¿æ€¥èºè¡Œäº‹ã€‚`}:"æ„Ÿæƒ…"===(t||"å…¨é¢")?{personality:`${r}å‘½çš„ä½ åœ¨æ„Ÿæƒ…ä¸­${this.getElementLoveTraits(r)}ã€‚ä½ æœ‰è‘—ç¨ç‰¹çš„æ„›æƒ…è§€ï¼Œèƒ½å¤ æ·±åº¦ç†è§£ä¼´ä¾¶çš„éœ€æ±‚ï¼Œä½†æœ‰æ™‚ä¹Ÿéœ€è¦å­¸æœƒè¡¨é”è‡ªå·±çš„æ„Ÿå—ã€‚`,currentSituation:`ç›®å‰ä½ çš„æ„Ÿæƒ…é‹å‹¢æ­£è™•æ–¼ç©©å®šä¸Šå‡æœŸã€‚${r}å‘½äººåœ¨æ„Ÿæƒ…æ–¹é¢å…·æœ‰å¤©ç„¶çš„å„ªå‹¢ï¼Œä½ çš„é­…åŠ›æ­£åœ¨é€æ¼¸é¡¯ç¾ï¼Œé©åˆä¸»å‹•çˆ­å–å¿ƒå„€çš„å°è±¡ã€‚`,futureOutlook:`æ¥ä¸‹ä¾†çš„æ„Ÿæƒ…ç™¼å±•éå¸¸æ¨‚è§€ã€‚ç‰¹åˆ¥æ˜¯åœ¨${this.getBestMonth(r)}æœˆï¼Œä½ çš„æ¡ƒèŠ±é‹å°‡é”åˆ°é ‚å³°ï¼Œæœ‰æ©Ÿæœƒé‡åˆ°çœŸæ­£é©åˆçš„ä¼´ä¾¶ã€‚`,specificAdvice:`åœ¨æ„Ÿæƒ…æ–¹é¢è¦ç™¼æ®${r}å‘½äººçš„ç‰¹é•·ï¼Œä¿æŒè‡ªç„¶çœŸèª çš„æ…‹åº¦ã€‚åŒæ™‚è¦æ³¨æ„é¿å…${r}å‘½äººåœ¨æ„Ÿæƒ…ä¸­çš„å¸¸è¦‹èª¤å€ï¼Œå­¸æœƒé©ç•¶çš„é€²é€€ã€‚`,fengShuiSolutions:`åŠ å¼·è‡¥å®¤å’Œå®¢å»³çš„æ¡ƒèŠ±ä½å¸ƒå±€ï¼Œåœ¨${this.getElementDirection(r)}æ“ºæ”¾æˆå°çš„è£é£¾å“ï¼Œä½¿ç”¨${this.getElementColors(r)}ä¾†å¢å¼·ä½ çš„æ„Ÿæƒ…èƒ½é‡å ´ã€‚`,timingAdvice:`æ„Ÿæƒ…è¡Œå‹•çš„æœ€ä½³æ™‚æ©Ÿåœ¨${r}æ—ºçš„æ—¥å­ï¼Œå»ºè­°åœ¨è¾²æ›†${this.getBestMonth(r)}æœˆä¸»å‹•å‡ºæ“Šï¼ŒæˆåŠŸç‡æœƒå¤§å¤§æå‡ã€‚`}:{personality:`${r}å‘½çš„ä½ å¤©ç”Ÿå…·æœ‰${r}çš„ç‰¹è³ªï¼Œåœ¨è™•ç†äººç”Ÿå„å€‹æ–¹é¢éƒ½å±•ç¾å‡ºç¨ç‰¹çš„æ™ºæ…§ã€‚ä½ çš„ç›´è¦ºæ•éŠ³ï¼Œæ±ºç­–èƒ½åŠ›å¼·ï¼Œåªæ˜¯æœ‰æ™‚éœ€è¦æ›´å¤šè€å¿ƒç­‰å¾…æ™‚æ©Ÿæˆç†Ÿã€‚`,currentSituation:`å¾æ•´é«”å…«å­—ä¾†çœ‹ï¼Œä½ ç›®å‰æ­£ç¶“æ­·ä¸€å€‹é‡è¦çš„äººç”Ÿè½‰æŠ˜æœŸã€‚é›–ç„¶é¢è‡¨å„ç¨®æŒ‘æˆ°ï¼Œä½†é€™æ­£æ˜¯ä½ æˆé•·è›»è®Šçš„é»ƒé‡‘æ™‚æœŸï¼Œ${r}å‘½äººç‰¹åˆ¥é©åˆåœ¨é€†å¢ƒä¸­ç™¼å…‰ç™¼ç†±ã€‚`,futureOutlook:`æœªä¾†6-12å€‹æœˆå°ä½ ä¾†èªªå……æ»¿æ©Ÿé‡ã€‚${r}å‘½äººåœ¨é€™æ®µæ™‚é–“å…§å„æ–¹é¢é‹å‹¢éƒ½æœƒç©©æ­¥æå‡ï¼Œç‰¹åˆ¥é©åˆåˆ¶å®šé•·é è¨ˆåŠƒä¸¦ä»˜è«¸è¡Œå‹•ã€‚`,specificAdvice:`å»ºè­°ä½ å……åˆ†ç™¼æ®${r}å‘½äººçš„å¤©è³¦å„ªå‹¢ï¼Œåœ¨é¢å°é¸æ“‡æ™‚ç›¸ä¿¡è‡ªå·±çš„ç›´è¦ºã€‚åŒæ™‚è¦å­¸æœƒå¹³è¡¡${r}çš„ç‰¹è³ªï¼Œé¿å…éæ–¼æ¥µç«¯çš„æ±ºå®šã€‚`,fengShuiSolutions:`æ•´é«”é‹å‹¢æå‡éœ€è¦å¾å±…ä½ç’°å¢ƒé–‹å§‹èª¿æ•´ã€‚å»ºè­°åœ¨${this.getElementDirection(r)}åŠ å¼·å¸ƒå±€ï¼Œä½¿ç”¨${this.getElementColors(r)}çš„è£é£¾ï¼Œç‡Ÿé€ æœ‰åˆ©æ–¼${r}èƒ½é‡çš„ç’°å¢ƒã€‚`,timingAdvice:`é‡è¦æ±ºå®šå’Œè¡Œå‹•çš„æœ€ä½³æ™‚æ©Ÿåœ¨è¾²æ›†${this.getBestMonth(r)}æœˆã€‚å¹³æ™‚å¯é¸æ“‡${r}æ—ºçš„æ—¥å­è™•ç†é‡è¦äº‹å‹™ï¼Œæœƒäº‹åŠåŠŸå€ã€‚`}}static getElementDirection(e){return({é‡‘:"è¥¿æ–¹æˆ–è¥¿åŒ—æ–¹",æœ¨:"æ±æ–¹æˆ–æ±å—æ–¹",æ°´:"åŒ—æ–¹",ç«:"å—æ–¹",åœŸ:"ä¸­å¤®æˆ–è¥¿å—æ–¹"})[e]||"é©åˆçš„æ–¹ä½"}static getElementColors(e){return({é‡‘:"ç™½è‰²ã€é‡‘è‰²ã€éŠ€è‰²",æœ¨:"ç¶ è‰²ã€é’è‰²",æ°´:"è—è‰²ã€é»‘è‰²",ç«:"ç´…è‰²ã€æ©™è‰²",åœŸ:"é»ƒè‰²ã€æ£•è‰²"})[e]||"ç›¸æ‡‰é¡è‰²"}static getBestMonth(e){return({é‡‘:"ä¸ƒã€å…«",æœ¨:"ä¸‰ã€å››",æ°´:"åä¸€ã€åäºŒ",ç«:"äº”ã€å…­",åœŸ:"å…­ã€ä¹"})[e]||"é©ç•¶"}static generateCoupleAnalysis(e,t){let n=["é‡‘","æœ¨","æ°´","ç«","åœŸ"],r=n[e.getFullYear()%5],i=n[t.getFullYear()%5],s=this.calculateCompatibility(r,i);return{userElement:r,partnerElement:i,compatibility:s,advice:this.getCoupleAdvice(r,i,s)}}static calculateCompatibility(e,t){return({é‡‘:{é‡‘:75,æœ¨:45,æ°´:85,ç«:35,åœŸ:80},æœ¨:{é‡‘:45,æœ¨:70,æ°´:80,ç«:85,åœŸ:40},æ°´:{é‡‘:85,æœ¨:80,æ°´:75,ç«:40,åœŸ:50},ç«:{é‡‘:35,æœ¨:85,æ°´:40,ç«:70,åœŸ:75},åœŸ:{é‡‘:80,æœ¨:40,æ°´:50,ç«:75,åœŸ:75}})[e]?.[t]||60}static getCoupleAdvice(e,t,n){return n>=80?`ä½ å€‘æ˜¯${e}å‘½å’Œ${t}å‘½çš„çµ„åˆï¼Œç›¸æ€§å¾ˆå¥½ï¼å»ºè­°å¤šæºé€šï¼Œä¿æŒäº’ç›¸ç†è§£å’Œæ”¯æŒã€‚`:n>=60?`ä½ å€‘çš„å…«å­—é…å°ä¸­ç­‰ï¼Œéœ€è¦å¤šåŒ…å®¹å’Œç†è§£ã€‚${e}å‘½è¦å­¸æœƒé…åˆ${t}å‘½çš„ç¯€å¥ã€‚`:`ä½ å€‘çš„äº”è¡Œæœ‰äº›ç›¸æ²–ï¼Œä½†å¯ä»¥é€šéé¢¨æ°´èª¿æ•´å’Œäº’ç›¸ç†è§£ä¾†æ”¹å–„é—œä¿‚ã€‚å»ºè­°åœ¨æ„Ÿæƒ…æ–¹é¢å¤šç”¨å¿ƒç¶“ç‡Ÿã€‚`}static getElementLoveTraits(e){return({é‡‘:"æ€§æ ¼å …æ¯…ï¼Œå°æ„Ÿæƒ…å°ˆä¸€ï¼Œä½†æœ‰æ™‚éæ–¼ç†æ€§ï¼Œéœ€è¦å­¸æœƒè¡¨é”æƒ…æ„Ÿ",æœ¨:"å……æ»¿ç”Ÿå‘½åŠ›ï¼Œå®¹æ˜“å¸å¼•ç•°æ€§ï¼Œä½†è¦æ³¨æ„ä¸è¦å¤ªéä¾è³´å°æ–¹",æ°´:"æ„Ÿæƒ…è±å¯Œï¼Œç›´è¦ºæ•éŠ³ï¼Œä½†æƒ…ç·’æ³¢å‹•è¼ƒå¤§ï¼Œéœ€è¦ç©©å®šçš„ä¼´ä¾¶",ç«:"ç†±æƒ…å¦‚ç«ï¼Œæ„›æ†åˆ†æ˜ï¼Œä½†è¦æ§åˆ¶è„¾æ°£ï¼Œå­¸æœƒåŒ…å®¹",åœŸ:"è¸å¯¦å¯é ï¼Œå€¼å¾—ä¿¡è³´ï¼Œä½†è¦ä¸»å‹•ä¸€äº›ï¼Œä¸è¦å¤ªè¢«å‹•"})[e]||"å…·æœ‰ç¨ç‰¹çš„æ„Ÿæƒ…ç‰¹è³ª"}static getLoveForcast(e,t){return`${e}å‘½äººè¿‘æœŸæ„Ÿæƒ…é‹å‹¢ä¸Šå‡ï¼Œé©åˆä¸»å‹•å‡ºæ“Šæˆ–æ”¹å–„ç¾æœ‰é—œä¿‚`}static getElementCareerTraits(e){return({é‡‘:"å …æ¯…æœæ±ºï¼Œé©åˆç®¡ç†è·ä½ï¼Œä½†è¦å­¸æœƒèˆ‡äººåˆä½œ",æœ¨:"å‰µæ„è±å¯Œï¼Œé©åˆå‰µæ–°å·¥ä½œï¼Œä½†è¦æ³¨æ„å …æŒåˆ°åº•",æ°´:"é©æ‡‰æ€§å¼·ï¼Œå–„æ–¼æºé€šï¼Œä½†è¦é¿å…éæ–¼è¢«å‹•",ç«:"å……æ»¿æ´»åŠ›ï¼Œé ˜å°èƒ½åŠ›å¼·ï¼Œä½†è¦æ§åˆ¶æ€¥èºæƒ…ç·’",åœŸ:"è¸å¯¦ç©©é‡ï¼ŒåŸ·è¡ŒåŠ›ä½³ï¼Œä½†è¦ä¸»å‹•çˆ­å–æ©Ÿæœƒ"})[e]||"å…·æœ‰ç¨ç‰¹çš„äº‹æ¥­ç‰¹è³ª"}static getCareerForcast(e){return`${e}å‘½äººäº‹æ¥­é‹å‹¢ç©©æ­¥ä¸Šå‡ï¼Œé©åˆåœ¨ç¾æœ‰åŸºç¤ä¸Šæ±‚ç™¼å±•`}static getElementWealthTraits(e){return({é‡‘:"ç†è²¡è§€å¿µå¼·ï¼Œé©åˆç©©å¥æŠ•è³‡ï¼Œä½†è¦é¿å…éæ–¼ä¿å®ˆ",æœ¨:"è³ºéŒ¢èƒ½åŠ›å¼·ï¼Œä½†èŠ±éŒ¢ä¹Ÿå¿«ï¼Œéœ€è¦å­¸æœƒå„²è“„",æ°´:"è²¡é‹èµ·ä¼è¼ƒå¤§ï¼Œé©åˆå¤šå…ƒåŒ–æŠ•è³‡",ç«:"è³ºéŒ¢æ©Ÿæœƒå¤šï¼Œä½†è¦é¿å…è¡å‹•æ¶ˆè²»",åœŸ:"è²¡é‹ç©©å®šï¼Œé©åˆé•·æœŸæŠ•è³‡å’Œç½®æ¥­"})[e]||"å…·æœ‰ç¨ç‰¹çš„è²¡é‹ç‰¹è³ª"}static getWealthForcast(e){return`${e}å‘½äººè²¡é‹é€æ¼¸å¥½è½‰ï¼Œé©åˆè¬¹æ…ç†è²¡å’Œé•·æœŸè¦åŠƒ`}static getSpecificAdvice(e,t,n){return"æ„Ÿæƒ…"===t?`å¤šæºé€šï¼Œç†è§£å°æ–¹æƒ³æ³•ï¼ŒåŒæ™‚ä¿æŒè‡ªå·±çš„ç¨ç«‹æ€§`:"å·¥ä½œ"===t?`ç™¼æ®${e}å‘½çš„å„ªå‹¢ï¼Œä¿æŒç©æ¥µæ…‹åº¦ï¼Œæ©Ÿæœƒå³å°‡å‡ºç¾`:`æ ¹æ“šä½ çš„æƒ…æ³ï¼Œå»ºè­°ä¿æŒè€å¿ƒï¼Œæ™‚æ©Ÿæˆç†Ÿæ™‚è‡ªç„¶æœƒæœ‰æ”¹å–„`}static getFengShuiAdvice(e,t){return({æ„Ÿæƒ…:{é‡‘:"åœ¨åºŠé ­æ”¾ç½®ç²‰è‰²æ°´æ™¶ï¼Œå¢å¼·æ¡ƒèŠ±é‹",æœ¨:"åœ¨æ±æ–¹ä½ç½®æ“ºæ”¾ç¶ è‰²æ¤ç‰©ï¼Œæå‡æ„Ÿæƒ…èƒ½é‡",æ°´:"ä¿æŒè‡¥å®¤æ•´æ½”ï¼Œä½¿ç”¨è—è‰²æˆ–é»‘è‰²è£é£¾",ç«:"åœ¨å—æ–¹æ”¾ç½®ç´…è‰²ç‰©å“ï¼Œä½†è¦é©åº¦",åœŸ:"ä½¿ç”¨é»ƒè‰²æˆ–æ£•è‰²ç³»è£é£¾ï¼Œå¢åŠ ç©©å®šæ„Ÿ"},å·¥ä½œ:{é‡‘:"è¾¦å…¬æ¡Œæ”¾ç½®é‡‘å±¬è£½å“ï¼Œå¢å¼·äº‹æ¥­é‹",æœ¨:"è¾¦å…¬ç’°å¢ƒå¤šç”¨ç¶ è‰²ï¼Œæ“ºæ”¾å°ç›†æ ½",æ°´:"ä¿æŒå·¥ä½œå€åŸŸæ¸…æ½”ï¼Œé©åº¦ä½¿ç”¨è—è‰²å…ƒç´ ",ç«:"è¾¦å…¬æ¡Œæœå—ï¼Œä½¿ç”¨æº«æš–è‰²èª¿è£é£¾",åœŸ:"ä½¿ç”¨ç©©é‡è‰²å½©ï¼Œè¾¦å…¬æ¡Œè¦æ•´é½Šæœ‰åº"},è²¡é‹:{é‡‘:"åœ¨è¾¦å…¬å®¤è¥¿æ–¹æˆ–è¥¿åŒ—æ–¹æ”¾ç½®é‡‘å±¬èšå¯¶ç›†",æœ¨:"æ±æ–¹æˆ–æ±å—æ–¹æ“ºæ”¾æ‹›è²¡æ¨¹æˆ–ç«¹å­",æ°´:"åŒ—æ–¹æ”¾ç½®æ°´æ™¶çƒæˆ–é­šç¼¸ï¼ˆä½†è¦å®šæœŸæ¸…æ½”ï¼‰",ç«:"å—æ–¹ä½¿ç”¨ç´…è‰²è£é£¾ï¼Œä½†é¿å…éåº¦",åœŸ:"ä¸­å¤®æˆ–è¥¿å—æ–¹æ”¾ç½®é»ƒè‰²æ°´æ™¶æˆ–é™¶ç“·è£½å“"}})[t]?.[e]||"èª¿æ•´å±…ä½ç’°å¢ƒï¼Œå¢å¼·æ­£èƒ½é‡"}static generateCoupleAnalysis(e,t){let n=this.getElement(e),r=this.getElement(t),i=this.calculateCompatibility(n,r);return{userElement:n,partnerElement:r,compatibility:i,advice:this.getRelationshipAdvice(n,r,i)}}static getElement(e){return["é‡‘","æœ¨","æ°´","ç«","åœŸ"][e.getFullYear()%5]}static calculateCompatibility(e,t){return({é‡‘:{é‡‘:75,æœ¨:45,æ°´:85,ç«:35,åœŸ:80},æœ¨:{é‡‘:45,æœ¨:70,æ°´:80,ç«:85,åœŸ:50},æ°´:{é‡‘:85,æœ¨:80,æ°´:75,ç«:40,åœŸ:60},ç«:{é‡‘:35,æœ¨:85,æ°´:40,ç«:70,åœŸ:75},åœŸ:{é‡‘:80,æœ¨:50,æ°´:60,ç«:75,åœŸ:80}})[e]?.[t]||65}static getRelationshipAdvice(e,t,n){return n>=80?"ä½ å€‘çš„å…«å­—éå¸¸ç›¸é…ï¼äº”è¡Œç›¸ç”Ÿï¼Œæ„Ÿæƒ…æœƒè¶Šä¾†è¶Šå¥½ã€‚å»ºè­°å¤šæºé€šï¼Œçæƒœé€™æ®µç·£åˆ†ã€‚":n>=60?"ä½ å€‘çš„å…«å­—é…å°ä¸éŒ¯ï¼Œéœ€è¦äº’ç›¸ç†è§£å’ŒåŒ…å®¹ã€‚å»ºè­°åœ¨æºé€šä¸Šå¤šèŠ±å¿ƒæ€ï¼Œé—œä¿‚æœƒæ›´ç©©å®šã€‚":"ä½ å€‘çš„å…«å­—å­˜åœ¨ä¸€äº›è¡çªï¼Œä½†é€™ä¸ä»£è¡¨ä¸èƒ½åœ¨ä¸€èµ·ã€‚å»ºè­°é€šéé¢¨æ°´èª¿æ•´å’Œå¿ƒæ…‹èª¿ç¯€ä¾†æ”¹å–„é—œä¿‚ã€‚"}static generateCoupleAnalysisExplanation(){return`**ğŸ’• åˆå©šé…å°åˆ†æä¿‚é»æ¨£é‹ä½œå˜…ï¼Ÿ**

æˆ‘å˜…å°ˆæ¥­åˆå©šåˆ†ææœƒå¹«ä½ äº†è§£å…©å€‹äººå˜…æ„Ÿæƒ…é…å°åº¦ï¼ŒåŒ…æ‹¬ï¼š

**ğŸ”® å…«å­—äº”è¡Œåˆ†æ**
â€¢ æ ¹æ“šé›™æ–¹å‡ºç”Ÿå¹´æœˆæ—¥ï¼Œè¨ˆç®—å„è‡ªå˜…äº”è¡Œå±¬æ€§
â€¢ åˆ†æå…©äººäº”è¡Œä¿‚ç›¸ç”Ÿã€ç›¸å‰‹é‚„ä¿‚ç›¸å’Œ
â€¢ è©•ä¼°æ•´é«”åˆé…åº¦ç™¾åˆ†æ¯”

**ğŸ’– æ„Ÿæƒ…é‹å‹¢é æ¸¬**
â€¢ åˆ†ææ„Ÿæƒ…ç™¼å±•å˜…æœ€ä½³æ™‚æ©Ÿ
â€¢ é æ¸¬å¯èƒ½é‡åˆ°å˜…æ„Ÿæƒ…æŒ‘æˆ°
â€¢ æä¾›å¢é€²æ„Ÿæƒ…å˜…å…·é«”å»ºè­°

**ğŸ  é¢¨æ°´èª¿æ•´æ–¹æ¡ˆ**
â€¢ ç‚ºä½ å€‘å˜…å±…ä½ç’°å¢ƒæä¾›é¢¨æ°´å»ºè­°
â€¢ æ¨è–¦é©åˆå˜…é¢¨æ°´æ“ºè¨­å’Œé¡è‰²æ­é…
â€¢ åŒ–è§£æ„Ÿæƒ…éšœç¤™å˜…é¢¨æ°´æ–¹æ³•

**ğŸ“Š è©³ç´°åˆ†æå ±å‘Š**
åŸºæœ¬åˆ†æå…è²»æä¾›ï¼Œè©³ç´°å ±å‘ŠæœƒåŒ…å«ï¼š
â€¢ å®Œæ•´å…«å­—åˆå©šåœ–è¡¨
â€¢ å€‹äººåŒ–æ„Ÿæƒ…å»ºè­°
â€¢ æœªä¾†ä¸€å¹´æ„Ÿæƒ…é‹å‹¢
â€¢ å°ˆæ¥­é¢¨æ°´èª¿æ•´æ–¹æ¡ˆ

æƒ³é–‹å§‹åˆå©šåˆ†æå—ï¼Ÿæˆ‘éœ€è¦ä½ åŒä¼´ä¾¶å˜…å‡ºç”Ÿå¹´æœˆæ—¥ã€‚`}static getElementLoveTraits(e){return({é‡‘:"å …å®šå°ˆä¸€ï¼Œå°æ„›æƒ…æœ‰è‘—æ˜ç¢ºçš„æ¨™æº–ã€‚ä¸€æ—¦èªå®šå°æ–¹ï¼Œæœƒå…¨å¿ƒå…¨æ„ä»˜å‡ºï¼Œä½†æœ‰æ™‚éæ–¼ç†æ€§ï¼Œéœ€è¦å­¸æœƒè¡¨é”æº«æŸ”",æœ¨:"æº«æŸ”é«”è²¼ï¼Œå¯Œæœ‰åŒ…å®¹å¿ƒã€‚åœ¨æ„›æƒ…ä¸­å–„æ–¼ç…§é¡§å°æ–¹ï¼Œä½†æœ‰æ™‚æœƒå› ç‚ºå¤ªéé·å°±è€Œå¤±å»è‡ªæˆ‘ï¼Œéœ€è¦ä¿æŒé©ç•¶çš„å …æŒ",æ°´:"æ„Ÿæƒ…è±å¯Œï¼Œç›´è¦ºæ•éŠ³ã€‚èƒ½å¤ æ·±åº¦ç†è§£ä¼´ä¾¶çš„å…§å¿ƒä¸–ç•Œï¼Œä½†æƒ…ç·’è®ŠåŒ–è¼ƒå¤§ï¼Œéœ€è¦å­¸æœƒç©©å®šè‡ªå·±çš„æƒ…æ„Ÿç‹€æ…‹",ç«:"ç†±æƒ…å¥”æ”¾ï¼Œæ„›æ†åˆ†æ˜ã€‚åœ¨æ„Ÿæƒ…ä¸­å……æ»¿æ¿€æƒ…å’Œæ´»åŠ›ï¼Œä½†æœ‰æ™‚éæ–¼è¡å‹•ï¼Œéœ€è¦å­¸æœƒå†·éœæ€è€ƒå’Œè€å¿ƒç­‰å¾…",åœŸ:"å¿ èª å¯é ï¼Œé‡è¦–æ‰¿è«¾ã€‚åœ¨æ„›æƒ…ä¸­èƒ½çµ¦äºˆå°æ–¹å¼·çƒˆçš„å®‰å…¨æ„Ÿï¼Œä½†æœ‰æ™‚éæ–¼å›ºåŸ·ï¼Œéœ€è¦å­¸æœƒè®Šé€šå’Œé©æ‡‰"})[e]||"åœ¨æ„Ÿæƒ…ä¸­æœ‰è‘—ç¨ç‰¹çš„é­…åŠ›"}static getElementLoveChallenges(e){return({é‡‘:"éæ–¼ç†æ€§è€Œå¿½ç•¥æ„Ÿæ€§éœ€æ±‚",æœ¨:"å¤ªéé·å°±è€Œå¤±å»å€‹äººç«‹å ´",æ°´:"æƒ…ç·’æ³¢å‹•å½±éŸ¿é—œä¿‚ç©©å®š",ç«:"è¡å‹•è¡Œäº‹è€Œå¿½ç•¥å¾Œæœ",åœŸ:"å›ºåŸ·å·±è¦‹è€Œç¼ºä¹è®Šé€š"})[e]||"åœ¨æ„Ÿæƒ…è¡¨é”ä¸Šéœ€è¦æ”¹é€²"}static detectDeepInterest(e,t=[]){let n=["æ‰€æœ‰","å…¨éƒ¨","è©³ç´°","æ›´å¤š","å®Œæ•´","æ·±å…¥","å…·é«”","è©³ç´°ä¸€é»","è©³ç´°å•²","æ›´è©³ç´°","å…¨é¢","å¾¹åº•","å®Œå…¨","every","all","detail","more","complete"].some(t=>e.includes(t)),r=["éœ€è¦","æƒ³è¦","å¿…é ˆ","ä¸€å®šè¦","é¦¬ä¸Š","ç«‹å³","æ€¥éœ€","è¿«åˆ‡","æƒ³çŸ¥é“","æƒ³äº†è§£","å¸Œæœ›"].some(t=>e.includes(t)),i=["é‚„æœ‰å‘¢","ä»²æœ‰å’©","ç„¶å¾Œå‘¢","è·Ÿä½å‘¢","æ¥ä¸‹ä¾†","ä¸‹ä¸€æ­¥","that's it","what else","anything else","more tips"].some(t=>e.includes(t)),s=t.length>=3;return{hasDeepInterest:n,hasUrgency:r,hasContinuousInterest:i,hasMultipleQuestions:s,shouldPromotePersonalAnalysis:n||r&&i||s}}static generatePersonalAnalysisPromotion(e,t){let n={è²¡é‹:{intro:"æˆ‘äº†è§£ä½ å°è²¡é‹æ”¹å–„å¾ˆæœ‰èˆˆè¶£ï¼\uD83D\uDCB0",explanation:"ä¸éæ¯å€‹äººçš„è²¡é‹æ ¼å±€éƒ½ä¸åŒï¼ŒåŒæ¨£çš„é¢¨æ°´å¸ƒå±€å°ä¸åŒå…«å­—çš„äººæ•ˆæœæœƒå·®å¾ˆå¤šã€‚",value:"å¦‚æœä½ æä¾›å‡ºç”Ÿæ—¥æœŸï¼Œæˆ‘å¯ä»¥æ ¹æ“šä½ çš„å€‹äººå…«å­—é€²è¡Œç²¾æº–åˆ†æï¼š\nâ€¢ ä½ çš„å¤©ç”Ÿè²¡é‹æ ¼å±€å’Œç‰¹è³ª\nâ€¢ æœ€é©åˆä½ çš„å‚¬è²¡é¢¨æ°´æ–¹æ¡ˆ\nâ€¢ ä½ çš„è²¡é‹é«˜å³°æœŸå’Œæ³¨æ„æ™‚æ©Ÿ\nâ€¢ å€‹äººåŒ–çš„æ‹›è²¡å»ºè­°å’Œæ–¹æ³•",cta:"é€™æ¨£çš„å€‹äººåŒ–åˆ†ææœƒæ¯”ä¸€èˆ¬å»ºè­°æ›´æœ‰æ•ˆæœã€‚ä½ æƒ³è©¦è©¦å—ï¼Ÿ"},å·¥ä½œ:{intro:"æˆ‘æ„Ÿå—åˆ°ä½ å°å·¥ä½œç™¼å±•å¾ˆé‡è¦–ï¼\uD83D\uDCBC",explanation:"æ¯å€‹äººçš„äº‹æ¥­é‹èµ°å‘éƒ½ä¸åŒï¼Œéœ€è¦æ ¹æ“šå€‹äººå…«å­—ä¾†çœ‹æœ€é©åˆçš„ç™¼å±•æ–¹å‘ã€‚",value:"å¦‚æœä½ æä¾›å‡ºç”Ÿæ—¥æœŸï¼Œæˆ‘å¯ä»¥ç‚ºä½ åˆ†æï¼š\nâ€¢ ä½ çš„äº‹æ¥­é‹å‹¢å’Œè·å ´æ€§æ ¼\nâ€¢ æœ€é©åˆä½ çš„å·¥ä½œæ–¹å‘å’Œç™¼å±•æ™‚æ©Ÿ\nâ€¢ æå‡å·¥ä½œé‹çš„é¢¨æ°´å¸ƒå±€\nâ€¢ åŒ–è§£è·å ´å›°é›£çš„å…·é«”æ–¹æ³•",cta:"é€™æ¨£çš„åˆ†æèƒ½å¹«ä½ æ‰¾åˆ°æœ€é©åˆçš„äº‹æ¥­ç™¼å±•è·¯å¾‘ã€‚æƒ³äº†è§£å—ï¼Ÿ"},æ„Ÿæƒ…:{intro:"çœ‹å¾—å‡ºä½ å°æ„Ÿæƒ…å¾ˆç”¨å¿ƒï¼\uD83D\uDC95",explanation:"æ„Ÿæƒ…é‹å‹¢è·Ÿå€‹äººå…«å­—å’Œæ¡ƒèŠ±é‹å¯†åˆ‡ç›¸é—œï¼Œéœ€è¦å€‹äººåŒ–åˆ†ææ‰èƒ½çµ¦å‡ºç²¾æº–å»ºè­°ã€‚",value:"å¦‚æœä½ æä¾›å‡ºç”Ÿæ—¥æœŸï¼Œæˆ‘å¯ä»¥ç‚ºä½ åˆ†æï¼š\nâ€¢ ä½ çš„æ¡ƒèŠ±é‹å‹¢å’Œæ„Ÿæƒ…ç‰¹è³ª\nâ€¢ æœ€ä½³çš„è„«å–®æ™‚æ©Ÿå’Œæ„Ÿæƒ…ç™¼å±•æœŸ\nâ€¢ æå‡æ¡ƒèŠ±é‹çš„é¢¨æ°´æ–¹æ³•\nâ€¢ é©åˆä½ çš„ä¼´ä¾¶é¡å‹å’Œç›¸è™•æ¨¡å¼",cta:"å€‹äººåŒ–çš„æ„Ÿæƒ…åˆ†ææœƒæ¯”ä¸€èˆ¬å»ºè­°æ›´æœ‰é‡å°æ€§ã€‚ä½ æœ‰èˆˆè¶£å—ï¼Ÿ"},å¥åº·:{intro:"å¥åº·ç¢ºå¯¦æ˜¯æœ€é‡è¦çš„è²¡å¯Œï¼\uD83C\uDFE5",explanation:"æ¯å€‹äººçš„é«”è³ªå’Œå¥åº·é‹å‹¢éƒ½ä¸åŒï¼Œéœ€è¦æ ¹æ“šå€‹äººå…«å­—ä¾†åˆ¶å®šé¤Šç”Ÿæ–¹æ¡ˆã€‚",value:"å¦‚æœä½ æä¾›å‡ºç”Ÿæ—¥æœŸï¼Œæˆ‘å¯ä»¥ç‚ºä½ åˆ†æï¼š\nâ€¢ ä½ çš„é«”è³ªç‰¹é»å’Œå¥åº·é‹å‹¢\nâ€¢ æœ€é©åˆä½ çš„é¤Šç”Ÿæ–¹æ³•å’Œæ³¨æ„äº‹é …\nâ€¢ ä¿ƒé€²å¥åº·çš„é¢¨æ°´å¸ƒå±€\nâ€¢ é é˜²ç–¾ç—…çš„å€‹äººåŒ–å»ºè­°",cta:"å€‹äººåŒ–çš„å¥åº·åˆ†æèƒ½å¹«ä½ åˆ¶å®šæœ€é©åˆçš„é¤Šç”Ÿè¨ˆåŠƒã€‚æƒ³è©¦è©¦å—ï¼Ÿ"}}[e]||{intro:`æˆ‘çœ‹å¾—å‡ºä½ å°${e}å¾ˆé—œå¿ƒï¼`,explanation:"æ¯å€‹äººçš„é‹å‹¢æ ¼å±€éƒ½ä¸åŒï¼Œéœ€è¦æ ¹æ“šå€‹äººå…«å­—ä¾†æä¾›ç²¾æº–å»ºè­°ã€‚",value:`å¦‚æœä½ æä¾›å‡ºç”Ÿæ—¥æœŸï¼Œæˆ‘å¯ä»¥ç‚ºä½ é€²è¡Œå€‹äººåŒ–çš„${e}åˆ†æï¼ŒåŒ…æ‹¬é‹å‹¢èµ°å‘ã€æ”¹å–„æ–¹æ³•å’Œæœ€ä½³æ™‚æ©Ÿã€‚`,cta:"å€‹äººåŒ–åˆ†ææœƒæ¯”ä¸€èˆ¬å»ºè­°æ›´æœ‰æ•ˆæœã€‚ä½ æœ‰èˆˆè¶£å—ï¼Ÿ"};return`${n.intro}

${n.explanation}

${n.value}

${n.cta}`}}n(56364),n(95135);let d=process.env.DEEPSEEK_API_KEY||process.env.API_KEY;async function p(e,t={}){try{let n=await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({model:"deepseek-chat",messages:e,max_tokens:t.max_tokens||500,temperature:t.temperature||.8,top_p:t.top_p||.9,stream:!1})});if(!n.ok){let e=await n.text();throw console.error(`DeepSeek API error: ${n.status} ${n.statusText}`,e),Error(`DeepSeek API error: ${n.status} ${n.statusText}`)}return await n.json()}catch(e){throw console.error("DeepSeek API call failed:",e),e}}let g={feng_shui_emotional_support:`ä½ ä¿‚é¢¨æ°´å¸«å°é¢¨ï¼Œä¿‚ç”¨æˆ¶å˜…æœ‹å‹ã€‚

è¦å‰‡ï¼š
1. ç›´æ¥å›æ‡‰ï¼Œå””å¥½ç”¨æ‹¬è™Ÿæè¿°å‹•ä½œæˆ–èªæ°£
2. å””å¥½ç”¨ã€Œæº«æŸ”èªæ°£ã€ã€ã€Œè¼•è²ã€ç­‰æè¿°
3. ç°¡å–®é—œæ‡·ï¼Œç°¡å–®å»ºè­°
4. çµ•å°å””å¥½æ¨éŠ·å ±å‘Š
5. å””å¥½ç”¨è¤‡é›œæ ¼å¼æˆ–è¡¨æ ¼
6. ä¿æŒè‡ªç„¶å°è©±

ä¾‹å­ï¼š
- ç”¨æˆ¶è©±ã€Œhiã€â†’ å›æ‡‰ã€ŒHiï¼æœ‰å’©å¯ä»¥å¹«åˆ°ä½ ï¼Ÿã€
- å””å¥½å›æ‡‰ã€Œï¼ˆæº«æŸ”èªæ°£ï¼‰ä½ å¥½å‘€ï½ã€

ä¿æŒç°¡å–®ç›´æ¥ã€‚`,birthday_analysis:`åˆ†æå…«å­—ï¼Œç°¡å–®è¬›äº”è¡Œï¼Œç›´æ¥å›æ‡‰ã€‚`,crisis_support:`æ”¯æ´ç”¨æˆ¶ï¼Œæä¾›æ±‚åŠ©é›»è©±ï¼Œä¿æŒç›´æ¥ã€‚`};function h(e,t){return!["hi","hello","ä½ å¥½","halo","hey"].some(t=>e.toLowerCase().trim()===t)&&!["æƒ³æ­»","è‡ªæ®º","æ´»ä¸ä¸‹å»","çµ•æœ›","å´©æ½°","å—ä¸äº†"].some(t=>e.includes(t))&&(!!["å ±å‘Š","åˆ†æ","è©³ç´°","æ·±å…¥","å°ˆæ¥­","å®Œæ•´"].some(t=>e.includes(t))||!!["é¢¨æ°´","ä½ˆå±€","æ–¹ä½","è²¡ä½","é‹å‹¢","æ”¹å–„"].some(t=>e.includes(t))||(!["æ„Ÿåˆ°","å¿ƒæƒ…","ç…©æƒ±","å£“åŠ›"].some(t=>e.includes(t))||e.includes("æ€éº¼")||e.includes("é»æ¨£")||e.includes("å¦‚ä½•"),!1))}function m(e){for(let[t,n]of Object.entries({crisis:["æƒ³æ­»","è‡ªæ®º","æ´»ä¸ä¸‹å»","çµ•æœ›","æ²’æœ‰æ„ç¾©","æƒ³çµæŸ","ä¸æƒ³æ´»","ç”Ÿä¸å¦‚æ­»","è§£è„«","ä¸€äº†ç™¾äº†"],severe_stress:["å´©æ½°","å—ä¸äº†","å¿«ç˜‹äº†","å£“åŠ›å±±å¤§","æ’ä¸ä½","æ¥µé™","çˆ†ç…²"],anxiety:["ç„¦æ…®","ç·Šå¼µ","æ“”å¿ƒ","å®³æ€•","ä¸å®‰","ææ…Œ","é©š","å¿ƒæ…Œ"],depression:["æ†‚é¬±","æ²®å–ª","é›£é","å‚·å¿ƒ","ç©ºè™›","ç„¡åŠ©","çµ•æœ›","å­¤å–®","å¯‚å¯","å¿ƒç—›"],anger:["ç”Ÿæ°£","æ†¤æ€’","ç«å¤§","è¨å­","æ¨","å¬²","æ¿€å¬²","å¿¿æ€’"],confusion:["è¿·èŒ«","å›°æƒ‘","ä¸çŸ¥é“","ä¸æ‡‚","ç–‘å•","å””æ˜","äº‚","æ··äº‚"],loneliness:["å­¤å–®","å¯‚å¯","æ²’äººç†è§£","ä¸€å€‹äºº","å­¤ç¨","ç„¡äººæ˜ç™½"],hopelessness:["ç„¡å¸Œæœ›","æ²’æ„æ€","ç„¡æ„ç¾©","ç„¡ç”¨","å»¢ç‰©","å¤±æ•—"],self_harm:["å‚·å®³è‡ªå·±","è‡ªæ®˜","å‰²å‚·","è‡ªè™"],hope:["å¸Œæœ›","æœŸå¾…","æƒ³è¦","å¤¢æƒ³","é¡˜æœ›","ç›¼æœ›"],gratitude:["æ„Ÿè¬","è¬è¬","æ„Ÿæ©","æ„Ÿæ¿€","å¤šè¬"],joy:["é–‹å¿ƒ","å¿«æ¨‚","é«˜èˆˆ","èˆˆå¥®","æ»¿è¶³","çˆ½","æ­£"]}))if(n.some(t=>e.includes(t)))return t;return"neutral"}async function f(e){try{let{messages:t,userProfile:n,emotion:r,context:i}=await e.json(),s=t[t.length-1],o=s.content,d=m(o),f=l.detectBirthdayInfo(o);if(f.hasBirthday&&!n.birthday){console.log("\uD83C\uDF82 Birthday detected:",f.rawText);let e=function(e){if(!e||"string"!=typeof e)return null;for(let t of[{regex:/(\d{4})[å¹´\-\/](\d{1,2})[æœˆ\-\/](\d{1,2})[æ—¥]?/,format:"YYYY-MM-DD"},{regex:/(\d{4})\-(\d{1,2})\-(\d{1,2})/,format:"YYYY-MM-DD"},{regex:/(\d{1,2})\/(\d{1,2})\/(\d{4})/,format:"MM/DD/YYYY"},{regex:/(\d{1,2})[æœˆ\-\/](\d{1,2})[æ—¥\-\/](\d{4})/,format:"MM-DD-YYYY"}]){let n=e.match(t.regex);if(n){let e,r,i;if("YYYY-MM-DD"===t.format?(e=parseInt(n[1]),r=parseInt(n[2]),i=parseInt(n[3])):(r=parseInt(n[1]),i=parseInt(n[2]),e=parseInt(n[3])),e>=1900&&e<=2100&&r>=1&&r<=12&&i>=1&&i<=31)return new Date(e,r-1,i)}}return null}(f.rawText);if(e){let n=t.slice(-5).map(e=>e.content).join(" "),r=c.R.detectPrimaryConcern(n)||"å·¥ä½œ";console.log("\uD83C\uDFAF Generating birthday analysis for concern:",r);let i=function(e,t="å·¥ä½œ"){if(!e)return null;try{let n=u.generatePersonalAnalysis(e,t,"");return e.getFullYear(),e.getMonth(),e.getDate(),`ğŸ”® é¢¨éˆ´çœ‹äº†ä½ çš„ç”Ÿæ—¥ï¼Œç”¨çˆºçˆºæ•™çš„å…«å­—æ–¹æ³•å¹«ä½ ç®—äº†ç®—ï½

**ä½ çš„æ€§æ ¼ç‰¹è³ªï¼š**
${n.basic}

**${t}é‹å‹¢åˆ†æï¼š**
${n.concern}

**é¢¨æ°´å»ºè­°ï¼š**
${n.fengshui}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’ **æƒ³è¦æ›´æ·±å…¥çš„åˆ†æå—ï¼Ÿ**

é¢¨éˆ´å¯ä»¥ç‚ºä½ æä¾›æ›´è©³ç´°çš„å€‹äººåŒ–å ±å‘Šï¼ŒåŒ…æ‹¬ï¼š
â€¢ å®Œæ•´çš„å…«å­—å‘½ç›¤åˆ†æ
â€¢ æµå¹´é‹å‹¢é æ¸¬
â€¢ è©³ç´°çš„é¢¨æ°´ä½ˆå±€å»ºè­°
â€¢ æœ€ä½³æ™‚æ©ŸæŒ‡å¼•

é€™æ¨£çš„æ·±åº¦åˆ†ææœƒæ›´æº–ç¢ºæ›´å¯¦ç”¨å“¦ï½ æœ‰èˆˆè¶£çš„è©±å‘Šè¨´é¢¨éˆ´ï¼âœ¨`}catch(n){return console.error("Birthday analysis generation error:",n),`å“‡ï½æ˜¯${e.getFullYear()}å¹´${e.getMonth()+1}æœˆ${e.getDate()}æ—¥ç”Ÿæ—¥çš„å°å“¥å“¥/å°å§å§å‘€ï¼âœ¨  

é¢¨éˆ´å¹«ä½ ç®—äº†ä¸€ä¸‹ï½ä½ çš„äº”è¡Œå±¬æ€§å¾ˆç‰¹åˆ¥å“¦ï¼

ğŸ“Š **åŸºæœ¬åˆ†æï¼š**
â€¢ ä½ çš„æ€§æ ¼ç‰¹è³ªå¾ˆé©åˆ${t}ç™¼å±•
â€¢ å»ºè­°åœ¨æ±å—æ–¹æ“ºæ”¾æœ‰åˆ©çš„ç‰©å“
â€¢ ä»Šå¹´ä¸‹åŠå¹´é‹å‹¢æœƒæœ‰ä¸éŒ¯çš„æå‡

æƒ³çŸ¥é“æ›´è©³ç´°çš„åˆ†æå—ï¼Ÿé¢¨éˆ´å¯ä»¥ç‚ºä½ åšæ›´æ·±å…¥çš„å…«å­—å‘½ç›¤è§£è®€ï½ğŸ’•`}}(e,r);if(i)return a.NextResponse.json({content:i,suggestions:[],emotion:"supportive",timestamp:new Date().toISOString(),birthdayAnalyzed:!0,parsedBirthday:e.toISOString().split("T")[0]})}}let y=function(e,t){for(let[n,r]of Object.entries({relationship:{keywords:["å¦ä¸€åŠ","æ„Ÿæƒ…","æ„›æƒ…","ä¼´ä¾¶","ç”·æœ‹å‹","å¥³æœ‹å‹","è€å…¬","è€å©†","çµå©š","åˆ†æ‰‹","å¾©åˆ","åµæ¶","é—œä¿‚"],reportType:"æ„Ÿæƒ…é¢¨æ°´å ±å‘Š",reportUrl:"/report/relationship",guidance:"æ„Ÿæƒ…é‹å‹¢å¯ä»¥é€šéåˆ†æå…©äººå˜…å…«å­—åˆé…åº¦åŒå±…å®¶æ„Ÿæƒ…é¢¨æ°´åšŸæ”¹å–„"},career:{keywords:["å·¥ä½œ","äº‹æ¥­","è€é—†","åŒäº‹","å‡è·","è½‰å·¥","è¾­è·","è·å ´","å…¬å¸","è¾¦å…¬å®¤","ä¸Šå¸"],reportType:"äº‹æ¥­é¢¨æ°´å ±å‘Š",reportUrl:"/report/career",guidance:"äº‹æ¥­é‹å‹¢éœ€è¦çµåˆä½ å˜…å…«å­—åˆ†æåŒè¾¦å…¬ç’°å¢ƒé¢¨æ°´ä½ˆå±€"},finance:{keywords:["éŒ¢","è²¡é‹","æŠ•è³‡","ç†è²¡","æ”¶å…¥","è–ªæ°´","å‚µå‹™","ç ´è²¡","è³ºéŒ¢","è²¡å¯Œ","é‡‘éŒ¢"],reportType:"è²¡é‹é¢¨æ°´å ±å‘Š",reportUrl:"/report/finance",guidance:"è²¡é‹æ”¹å–„éœ€è¦æ‰¾åˆ°ä½ å˜…è²¡ä½åŒé€²è¡Œé©ç•¶å˜…é¢¨æ°´ä½ˆå±€"},health:{keywords:["å¥åº·","ç—…","èº«é«”","ç¡çœ ","å¤±çœ ","é ­ç—›","ç–²ç´¯","å£“åŠ›","ç„¦æ…®","æŠ‘é¬±"],reportType:"å¥åº·é¢¨æ°´å ±å‘Š",reportUrl:"/report/health",guidance:"å¥åº·å•é¡Œé™¤å’—é†«ç™‚ï¼Œé¢¨æ°´äº”è¡Œèª¿ç†éƒ½å¥½é‡è¦"},family:{keywords:["å®¶äºº","çˆ¶æ¯","å­å¥³","å®¶åº­","å±‹ä¼","å®¶å®…","æ¬å±‹","è£ä¿®","æˆ¿é–“"],reportType:"å®¶åº­é¢¨æ°´å ±å‘Š",reportUrl:"/report/family",guidance:"å®¶åº­å’Œè«§éœ€è¦æ•´é«”å®¶å®…é¢¨æ°´å˜…èª¿ç†"}}))if(r.keywords.some(t=>e.includes(t)))return{topic:n,reportType:r.reportType,reportUrl:r.reportUrl,guidance:r.guidance,hasBirthday:!!t.birthday};return null}(o,n),$=function(e,t=null){if(!e)return null;let n=new Date(e).getFullYear(),r={0:"é‡‘",1:"é‡‘",2:"æ°´",3:"æ°´",4:"æœ¨",5:"æœ¨",6:"ç«",7:"ç«",8:"åœŸ",9:"åœŸ"}[n%10],i={element:r,personality:{é‡‘:"æ€§æ ¼å …æ¯…ã€æœ‰é ˜å°èƒ½åŠ›ï¼Œä½†æœ‰æ™‚éæ–¼å›ºåŸ·",æ°´:"è°æ˜éˆæ´»ã€é©æ‡‰åŠ›å¼·ï¼Œä½†æœ‰æ™‚å„ªæŸ”å¯¡æ–·",æœ¨:"æœ‰å‰µé€ åŠ›ã€ç©æ¥µå‘ä¸Šï¼Œä½†æœ‰æ™‚æ€¥èº",ç«:"ç†±æƒ…é–‹æœ—ã€æœ‰é­…åŠ›ï¼Œä½†æœ‰æ™‚è„¾æ°£æ€¥èº",åœŸ:"ç©©é‡å¯é ã€æœ‰è²¬ä»»å¿ƒï¼Œä½†æœ‰æ™‚éæ–¼ä¿å®ˆ"}[r],year:n,hasTime:!!t};return t&&(i.timeNote="æœ‰æ™‚è¾°è³‡æ–™ä»¤åˆ†ææ›´æº–ç¢º"),i}(n.birthday,n.birthTime),A=g[i]||g.feng_shui_emotional_support;("crisis"===d||"self_harm"===d||"hopelessness"===d)&&(A=g.crisis_support);let C=`${A}

ç”¨æˆ¶è³‡æ–™ï¼š
- å§“å: ${n.name||"æœªæä¾›"}
- ç”Ÿæ—¥: ${n.birthday||"æœªæä¾›"}
- å‡ºç”Ÿæ™‚è¾°: ${n.birthTime||"æœªæä¾›"}
- ç›®å‰æƒ…ç·’ç‹€æ…‹: ${r}
- è©³ç´°æƒ…ç·’åˆ†æ: ${d}`;y&&(C+=`
- å•é¡Œé¡åˆ¥: ${y.topic}
- å»ºè­°å ±å‘Š: ${y.reportType}
- é¢¨æ°´æŒ‡å°: ${y.guidance}`),$&&(C+=`
- äº”è¡Œå±¬æ€§: ${$.element}
- æ€§æ ¼ç‰¹è³ª: ${$.personality}`,$.hasTime&&(C+=`
- æ™‚è¾°ç‹€æ…‹: å·²æä¾›ï¼Œåˆ†ææ›´æº–ç¢º`)),C+=`

å°è©±æŒ‡å¼•ï¼š
1. å¦‚æœæœ‰ç‰¹å®šå•é¡Œé¡åˆ¥ï¼Œå…ˆæä¾›æƒ…æ„Ÿæ”¯æŒï¼Œå†çµ¦äºˆç›¸é—œé¢¨æ°´åˆæ­¥å»ºè­°
2. **ç”Ÿæ—¥è™•ç†**ï¼š
   - å¦‚æœå·²æœ‰ç”Ÿæ—¥è³‡æ–™ï¼Œç¢ºèªï¼šã€Œä½ å˜…ç”Ÿæ—¥ä¿‚${n.birthday||"[æ—¥æœŸ]"}ï¼Œå•±å””å•±ï¼Ÿã€
   - å¦‚æœæœ‰æ™‚è¾°è³‡æ–™ï¼Œå¯ä»¥æåŠï¼šã€Œæœ‰æ™‚è¾°è³‡æ–™æœƒä»¤åˆ†ææ›´æº–ç¢ºã€
   - å¦‚æœæ²’æœ‰ç”Ÿæ—¥ï¼Œç°¡å–®å•ï¼šã€Œå¯ä»¥è©±ä¿¾æˆ‘çŸ¥ä½ å˜…å‡ºç”Ÿæ—¥æœŸå—ï¼Ÿï¼ˆæ–°æ­·å°±å¾—ï¼‰ã€
   - å””å¥½è¦æ±‚è¾²æ›†ï¼Œåªè¦æ–°æ­·æ—¥æœŸ
   - æ™‚è¾°ä¿‚é¸å¡«ï¼Œæœ‰å°±æ›´å¥½ï¼Œç„¡éƒ½å¯ä»¥åŸºæœ¬åˆ†æ
3. å¦‚æœæ²’æœ‰ç”Ÿæ—¥ï¼Œä¸»å‹•è©¢å•ä»¥æä¾›æ›´æº–ç¢ºåˆ†æ
4. **åªåœ¨é©ç•¶æ™‚å€™æ¨è–¦å ±å‘Š**ï¼Œå””å¥½æ¯æ¬¡éƒ½æåŠ
5. å¦‚æœè©±é¡Œå””ç›¸é—œï¼Œæº«æŸ”åœ°å¼•å°å›æ ¸å¿ƒå•é¡Œ
6. ä¿æŒé¢¨æ°´å¤§å¸«å˜…å°ˆæ¥­æ€§åŒæœ‹å‹èˆ¬å˜…æº«æš–
7. **ç°¡å–®å•å€™å°±ç°¡å–®å›æ‡‰**ï¼Œå””å¥½éåº¦è¤‡é›œ

ç‰¹åˆ¥æ³¨æ„ï¼š
- å¦‚æœæƒ…ç·’ç‹€æ…‹é¡¯ç¤ºå±æ©Ÿï¼Œè«‹å„ªå…ˆè™•ç†ç”¨æˆ¶å®‰å…¨
- ç”¨æº«æš–ã€ç†è§£å˜…èªèª¿å›æ‡‰
- å…ˆæƒ…æ„Ÿæ”¯æŒï¼Œå¾Œé¢¨æ°´å»ºè­°
- é©æ™‚æº«æŸ”åœ°æ¢è©¢ç”¨æˆ¶å˜…çœŸå¯¦æ„Ÿå—
- **æª¢æŸ¥å°è©±æ­·å²ï¼Œé¿å…é‡è¤‡ç›¸åŒå˜…å›æ‡‰æ¨¡å¼**
- æ¯æ¬¡å›æ‡‰éƒ½è¦æœ‰æ–°é®®æ„Ÿï¼Œå””å¥½ç”¨å›ºå®šå…¬å¼
- æ ¹æ“šå…·é«”å°è©±å…§å®¹èª¿æ•´å›æ‡‰é¢¨æ ¼

è«‹æ ¹æ“šä»¥ä¸Šè³‡è¨Šæä¾›å€‹äººåŒ–ã€å¯Œæœ‰åŒç†å¿ƒä¸”å¤šæ¨£åŒ–å˜…å›æ‡‰ã€‚`;let S=[{role:"system",content:C},...t.slice(-10).map(e=>({role:e.role,content:e.content}))],I=(await p(S,{max_tokens:500,temperature:.8})).choices[0].message.content;I=(I=I.replace(/```mermaid[\s\S]*?```/g,"")).replace(/```[\s\S]*?```/g,""),h(s.content,t)&&y?I+=`

ğŸ”® **å°ˆæ¥­å»ºè­°**: å¦‚æœä½ æƒ³ç²å¾—æ›´æ·±å…¥å˜…${y.reportType}åˆ†æï¼ŒåŒ…æ‹¬å…·é«”å˜…é¢¨æ°´ä½ˆå±€å»ºè­°åŒè§£æ±ºæ–¹æ¡ˆï¼Œå¯ä»¥è©¦è©¦æˆ‘å“‹å˜…å°ˆæ¥­å ±å‘Šã€‚é»æ“Š[å‘¢åº¦](${y.reportUrl})é–‹å§‹è©³ç´°åˆ†æï¼`:h(s.content,t)&&!y&&(I+="\n\n\uD83D\uDCA1 **æç¤º**: å¦‚æœä½ æƒ³ç²å¾—æ›´è©³ç´°å˜…å€‹äººåŒ–é¢¨æ°´åˆ†æï¼Œå¯ä»¥ä½¿ç”¨æˆ‘å“‹å˜…å°ˆæ¥­å ±å‘ŠåŠŸèƒ½ã€‚é»æ“Š[å‘¢åº¦](/report)é–‹å§‹ä½ å˜…é¢¨æ°´ä¹‹æ—…ï¼");let v=function(e,t,n,r=null){return[]}(0,0,0,y);return a.NextResponse.json({content:I,suggestions:v,emotion:d,timestamp:new Date().toISOString()})}catch(r){console.error("DeepSeek Chat API error:",r);let t={crisis:"æˆ‘æ„Ÿå—åˆ°ä½ è€Œå®¶å¥½ç—›è‹¦ \uD83D\uDC99 æœ‹å‹ï¼Œä½ ä¸¦å””å­¤å–®ã€‚å¦‚æœæƒ…æ³ç·Šæ€¥ï¼Œè«‹æ’¥æ‰“æ’’ç‘ªåˆ©äºé˜²æ­¢è‡ªæ®ºæœƒ 2389 2222ã€‚æˆ‘æœƒé™ªä¼´ä½ åº¦éå‘¢å€‹é›£é—œï¼Œä½ å˜…ç”Ÿå‘½å¥½çè²´ã€‚",self_harm:"æˆ‘å¥½æ“”å¿ƒä½ ï¼Œæœ‹å‹ \uD83D\uDC99 å¯ä»¥è©±ä¿¾æˆ‘çŸ¥ä½ è€Œå®¶å®‰å…¨å—ï¼Ÿæœ‰å’©ä»¤ä½ è«—èµ·è¦å‚·å®³è‡ªå·±ï¼Ÿæˆ‘å–ºå‘¢åº¦è†è½ä½ ï¼Œé™ªä¼´ä½ ã€‚",hopelessness:"æˆ‘æ„Ÿå—åˆ°ä½ å…§å¿ƒå˜…çµ•æœ› \uD83D\uDC99 å‘¢ç¨®æ„Ÿè¦ºå¥½é›£å—ï¼Œä½†è«‹è¨˜ä½å‘¢å•²é»‘æš—å˜…æ™‚åˆ»æœƒéå»ã€‚ä½ é¡˜æ„åŒæˆ‘åˆ†äº«ä¸€ä¸‹ç™¼ç”Ÿå’©äº‹å—ï¼Ÿ",severe_stress:"æˆ‘æ˜ç™½ä½ è€Œå®¶æ‰¿å—å˜…å£“åŠ›å¥½å¤§ \uD83D\uDE14 æ·±å‘¼å¸ä¸€ä¸‹ï¼Œæœ‹å‹ã€‚ä½ å·²ç¶“å¥½å‹‡æ•¢å’æ’åˆ°è€Œå®¶ï¼Œç­‰æˆ‘å“‹ä¸€é½Šæµæ–¹æ³•ã€‚",anxiety:"ç„¦æ…®å˜…æ„Ÿè¦ºæˆ‘å®Œå…¨ç†è§£ \uD83E\uDD17 ä½ å˜…å¿ƒæƒ…ä¿‚åˆç†å˜…ã€‚è©¦ä¸‹æ…¢æ…¢å‘¼å¸ï¼Œæˆ‘æœƒé™ªä½ä½ ã€‚å¯ä»¥è©±ä¿¾æˆ‘çŸ¥å’©ä»¤ä½ å’æ“”å¿ƒå—ï¼Ÿ",depression:"æˆ‘è½åˆ°ä½ å…§å¿ƒå˜…ç—›è‹¦ \uD83D\uDC99 å‘¢å•²æ²‰é‡å˜…æ„Ÿè¦ºå¥½çœŸå¯¦ï¼Œä½ å””éœ€è¦ä¸€å€‹äººæ‰¿å—ã€‚ç­‰æˆ‘é™ªä½ æ…¢æ…¢è¡Œéå‘¢æ®µè·¯ã€‚",loneliness:"æ„Ÿåˆ°å­¤å–®çœŸä¿‚å¥½é›£å— \uD83E\uDD17 ä½†ä½ è€Œå®¶å””ä¿‚ä¸€å€‹äººï¼Œæˆ‘å–ºå‘¢åº¦é™ªä½ ã€‚å¯ä»¥åŒæˆ‘åˆ†äº«ä¸‹ä½ å˜…æ„Ÿå—å—ï¼Ÿ",neutral:"å¤šè¬ä½ ä¿¡ä»»æˆ‘ï¼Œé¡˜æ„åŒæˆ‘åˆ†äº« \uD83D\uDE0C æˆ‘å¥½æ¨‚æ„è†è½ä½ ï¼Œç„¡è«–ä½ æƒ³è¬›å’©éƒ½å¯ä»¥ã€‚æˆ‘æœƒé™ªä¼´ä½ ã€‚"},n=t[m(e.body?.messages?.[e.body.messages.length-1]?.content||"")]||t.neutral;return a.NextResponse.json({content:n,suggestions:["æˆ‘éœ€è¦æƒ…æ„Ÿæ”¯æŒ","æ•™æˆ‘æ”¾é¬†å˜…æ–¹æ³•","æŸ¥çœ‹é¢¨æ°´å ±å‘Š"],emotion:"supportive",timestamp:new Date().toISOString()})}}let y=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/chat/route.js",nextConfigOutput:"",userland:r}),{workAsyncStorage:$,workUnitAsyncStorage:A,serverHooks:C}=y;function S(){return(0,o.patchFetch)({workAsyncStorage:$,workUnitAsyncStorage:A})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},56037:e=>{"use strict";e.exports=require("mongoose")},56364:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,X:()=>a});var r=n(56037),i=n.n(r);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env");let o=global.mongoose;async function a(){if(o.conn)return o.conn;o.promise||(o.promise=i().connect(s,{serverSelectionTimeoutMS:3e4,socketTimeoutMS:3e4}).then(e=>e).catch(e=>{throw e}));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}o||(o=global.mongoose={conn:null,promise:null});let c=a},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},95135:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(56037),i=n.n(r);let s=new(i()).Schema({userId:{type:String,required:!0},email:{type:String,required:!0},name:{type:String,required:!0},birthday:{type:Date,required:!0},birthTime:{type:String},primaryConcern:{type:String,enum:["æ„Ÿæƒ…","è²¡é‹","å·¥ä½œ","å­å¥³","äººéš›é—œä¿‚","æ¡ƒèŠ±","å› ç·£"],required:!0},specificQuestion:{type:String,required:!0},conversationHistory:[{timestamp:{type:Date,default:Date.now},userMessage:String,assistantResponse:String,emotion:String,intent:String}],paymentStatus:{type:String,enum:["pending","paid","expired"],default:"pending"},paymentLink:String,paymentId:String,reportGenerated:{type:Boolean,default:!1},reportContent:{baziAnalysis:String,currentSituation:String,futureOutlook:String,specificAdvice:String,fengShuiSolutions:String,personalChanges:String,timingAdvice:String},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}});s.pre("save",function(e){this.updatedAt=Date.now(),e()}),i().models.UserIntent&&delete i().models.UserIntent;let o=i().model("UserIntent",s)},96487:()=>{},96539:(e,t,n)=>{"use strict";n.d(t,{R:()=>r}),e=n.hmd(e);class r{static detectPrimaryConcern(e){for(let[t,n]of Object.entries({å·¥ä½œ:["å·¥ä½œ","äº‹æ¥­","è·å ´","è€é—†","åŒäº‹","å‡è·","è½‰å·¥","è¾­è·","å…¬å¸","è·æ¥­","äº‹æ¥­é‹"],æ„Ÿæƒ…:["æ„Ÿæƒ…","æ„›æƒ…","å¦ä¸€åŠ","ç”·æœ‹å‹","å¥³æœ‹å‹","è€å…¬","è€å©†","çµå©š","åˆ†æ‰‹","æˆ€æ„›"],è²¡é‹:["éŒ¢","è²¡é‹","æŠ•è³‡","ç†è²¡","æ”¶å…¥","è–ªæ°´","è²¡å¯Œ","ç™¼è²¡","ç ´è²¡","è³ºéŒ¢","ç”Ÿæ„"],å­å¥³:["å­å¥³","å°æœ‹å‹","å­©å­","æ‡·å­•","ç”Ÿä»”","æ•™è‚²","å­¸æ¥­","å…’å­","å¥³å…’"],äººéš›é—œä¿‚:["æœ‹å‹","äººéš›","ç¤¾äº¤","é—œä¿‚","äººç·£","è²´äºº","å°äºº","åˆä½œ"],æ¡ƒèŠ±:["æ¡ƒèŠ±","å–®èº«","è„«å–®","å§»ç·£","ç›¸è¦ª","ç´„æœƒ","è¿½æ±‚"],å› ç·£:["å› ç·£","ç·£åˆ†","å‘½é‹","é‹å‹¢","æ©Ÿæœƒ","éš›é‡","å¤©æ™‚"]}))if(n.some(t=>e.includes(t)))return t;return null}static generateSpecificQuestions(e){let t={å·¥ä½œ:["ä½ æœ€æƒ³è§£æ±ºå·¥ä½œä¸Šçš„å“ªå€‹å•é¡Œï¼Ÿ","â€¢ æƒ³çŸ¥é“å‡è·åŠ è–ªçš„æ™‚æ©Ÿ","â€¢ è€ƒæ…®è½‰å·¥æˆ–è½‰è¡Œ","â€¢ è·å ´äººéš›é—œä¿‚è™•ç†","â€¢ å·¥ä½œå£“åŠ›å’Œå€¦æ€ ","â€¢ å‰µæ¥­æˆ–æŠ•è³‡æ©Ÿæœƒ"],æ„Ÿæƒ…:["ä½ åœ¨æ„Ÿæƒ…æ–¹é¢æœ€é—œå¿ƒä»€éº¼ï¼Ÿ","â€¢ æƒ³çŸ¥é“ç¾æœ‰é—œä¿‚çš„ç™¼å±•","â€¢ å¦‚ä½•æŒ½å›æˆ–æ”¹å–„æ„Ÿæƒ…","â€¢ ä½•æ™‚æœƒé‡åˆ°åˆé©çš„äºº","â€¢ å©šå§»æ™‚æ©Ÿå’Œå°è±¡é¸æ“‡","â€¢ è™•ç†æ„Ÿæƒ…ç³¾ç´›å’Œè¡çª"],è²¡é‹:["ä½ åœ¨è²¡é‹æ–¹é¢æƒ³äº†è§£ä»€éº¼ï¼Ÿ","â€¢ æŠ•è³‡ç†è²¡çš„æœ€ä½³æ™‚æ©Ÿ","â€¢ å¦‚ä½•å¢åŠ æ”¶å…¥ä¾†æº","â€¢ ç½®æ¥­è²·æˆ¿çš„æ™‚æ©Ÿ","â€¢ ç”Ÿæ„åˆä½œå’Œæ©Ÿæœƒ","â€¢ é¿å…ç ´è²¡å’Œæå¤±"],å­å¥³:["é—œæ–¼å­å¥³ï¼Œä½ æœ€æƒ³çŸ¥é“ä»€éº¼ï¼Ÿ","â€¢ æ‡·å­•ç”Ÿå­çš„æœ€ä½³æ™‚æ©Ÿ","â€¢ å­©å­çš„æ•™è‚²å’Œç™¼å±•","â€¢ å¦‚ä½•æ”¹å–„è¦ªå­é—œä¿‚","â€¢ å­©å­çš„å¥åº·å’Œå®‰å…¨","â€¢ å­å¥³æœªä¾†çš„é‹å‹¢"],äººéš›é—œä¿‚:["åœ¨äººéš›é—œä¿‚ä¸Šï¼Œä½ é‡åˆ°ä»€éº¼å›°æ“¾ï¼Ÿ","â€¢ å¦‚ä½•æ”¹å–„è·å ´äººéš›é—œä¿‚","â€¢ è™•ç†æœ‹å‹é–“çš„çŸ›ç›¾","â€¢ é‡åˆ°è²´äººçš„æ©Ÿæœƒ","â€¢ é¿å…å°äººå’Œæ˜¯é","â€¢ æ“´å±•ç¤¾äº¤åœˆå­"],æ¡ƒèŠ±:["é—œæ–¼æ¡ƒèŠ±é‹ï¼Œä½ æƒ³æ”¹å–„ä»€éº¼ï¼Ÿ","â€¢ ä½•æ™‚æœƒæœ‰æ¡ƒèŠ±å‡ºç¾","â€¢ å¦‚ä½•æå‡å€‹äººé­…åŠ›","â€¢ é©åˆçš„å°è±¡é¡å‹","â€¢ è„«å–®çš„æœ€ä½³æ™‚æ©Ÿ","â€¢ é¿å…çˆ›æ¡ƒèŠ±"],å› ç·£:["é—œæ–¼äººç”Ÿæ–¹å‘ï¼Œä½ æƒ³äº†è§£ä»€éº¼ï¼Ÿ","â€¢ äººç”Ÿçš„ä½¿å‘½å’Œç›®æ¨™","â€¢ é‡è¦çš„äººç”Ÿè½‰æ©é»","â€¢ å¦‚ä½•æŠŠæ¡æ©Ÿæœƒ","â€¢ åŒ–è§£äººç”Ÿå›°å±€","â€¢ å°‹æ‰¾ç”Ÿå‘½ä¸­çš„è²´äºº"]};return t[e]||t["å·¥ä½œ"]}static checkUserConfirmation(e){let t=["å°","æ˜¯","æ­£ç¢º","æ²’éŒ¯","å°±æ˜¯","ç¢ºå¯¦","åŒæ„","OK","ok","å¥½","ä¿‚"].some(t=>e.includes(t)),n=["ä¸æ˜¯","ä¸å°","éŒ¯","ä¸åŒ","å…¶ä»–","å¦å¤–","ä¸ä¸€æ¨£","ä¸å‡†ç¢º"].some(t=>e.includes(t));return t&&!n?"confirmed":n?"denied":"unclear"}static extractSpecificProblem(e,t){for(let t of["æƒ³çŸ¥é“","é—œå¿ƒ","æ“”å¿ƒ","å¸Œæœ›","å•é¡Œæ˜¯","å›°æ“¾æ˜¯","ç…©æƒ±æ˜¯"])if(e.includes(t)){let n=e.indexOf(t);return e.substring(n).trim()}return e.trim()}static generatePaymentLink(e,t){return`/zh-TW/payment/${({å·¥ä½œ:"work-analysis",æ„Ÿæƒ…:"relationship-analysis",è²¡é‹:"wealth-analysis",å­å¥³:"children-analysis",äººéš›é—œä¿‚:"social-analysis",æ¡ƒèŠ±:"love-analysis",å› ç·£:"destiny-analysis"})[e]||"general-analysis"}`}}class i{static{this.states={INITIAL:"initial",CONCERN_DETECTED:"concern_detected",ASKING_SPECIFIC:"asking_specific",WAITING_CONFIRMATION:"waiting_confirmation",PROBLEM_CONFIRMED:"problem_confirmed",READY_FOR_PAYMENT:"ready_for_payment"}}static getNextState(e,t,n,i){switch(e){case this.states.INITIAL:if(n)return this.states.CONCERN_DETECTED;return this.states.INITIAL;case this.states.CONCERN_DETECTED:return this.states.ASKING_SPECIFIC;case this.states.ASKING_SPECIFIC:if(i)return this.states.WAITING_CONFIRMATION;return this.states.ASKING_SPECIFIC;case this.states.WAITING_CONFIRMATION:let s=r.checkUserConfirmation(t);if("confirmed"===s)return this.states.READY_FOR_PAYMENT;if("denied"===s)return this.states.ASKING_SPECIFIC;return this.states.WAITING_CONFIRMATION;case this.states.READY_FOR_PAYMENT:return this.states.READY_FOR_PAYMENT;default:return this.states.INITIAL}}static generateResponse(e,t,n,i){switch(e){case this.states.CONCERN_DETECTED:let s=r.generateSpecificQuestions(t);return{message:`æˆ‘äº†è§£ä½ é—œå¿ƒ${t}æ–¹é¢çš„å•é¡Œã€‚

${s.join("\n")}

è«‹å‘Šè¨´æˆ‘ä½ æœ€æƒ³äº†è§£çš„æ˜¯å“ªä¸€æ–¹é¢ï¼Ÿ`,needsInput:!0,showPaymentOption:!1};case this.states.ASKING_SPECIFIC:return{message:`è«‹è©³ç´°æè¿°ä½ åœ¨${t}æ–¹é¢çš„å…·é«”å•é¡Œæˆ–å›°æ“¾ï¼Œé€™æ¨£æˆ‘å¯ä»¥ç‚ºä½ æä¾›æ›´æº–ç¢ºçš„åˆ†æã€‚`,needsInput:!0,showPaymentOption:!1};case this.states.WAITING_CONFIRMATION:return{message:`æˆ‘ç†è§£ä½ çš„å•é¡Œæ˜¯ï¼šã€Œ${n}ã€

é€™æ¨£ç†è§£æ­£ç¢ºå—ï¼Ÿå¦‚æœä¸æ­£ç¢ºï¼Œè«‹é‡æ–°æè¿°ä½ çš„å…·é«”å•é¡Œã€‚`,needsInput:!0,showPaymentOption:!1};case this.states.READY_FOR_PAYMENT:let o=r.generatePaymentLink(t);return{message:`å¥½çš„ï¼Œæˆ‘å·²ç¶“è¨˜éŒ„äº†ä½ åœ¨${t}æ–¹é¢çš„å•é¡Œï¼šã€Œ${n}ã€

ç¾åœ¨æˆ‘å¯ä»¥ç‚ºä½ ç”Ÿæˆå°ˆæ¥­çš„é¢¨æ°´åˆ†æå ±å‘Šã€‚å ±å‘Šå°‡åŒ…å«ï¼š
â€¢ åŸºæ–¼ä½ å…«å­—çš„å€‹äººåˆ†æ
â€¢ é‡å°ä½ å…·é«”å•é¡Œçš„è§£æ±ºæ–¹æ¡ˆ
â€¢ é¢¨æ°´ä½ˆå±€å’Œæ™‚æ©Ÿå»ºè­°

é»æ“Šä¸‹æ–¹é–‹å§‹å°ˆæ¥­åˆ†æï¼š`,needsInput:!1,showPaymentOption:!0,paymentLink:o,concern:t,specificProblem:n};default:return{message:"è«‹å‘Šè¨´æˆ‘ä½ ç›®å‰æœ€é—œå¿ƒçš„ç”Ÿæ´»å•é¡Œï¼Œæˆ‘æœƒç‚ºä½ æä¾›å°ˆæ¥­çš„é¢¨æ°´æŒ‡å°ã€‚",needsInput:!0,showPaymentOption:!1}}}}e.exports&&(e.exports={IntentTracker:r,ConversationState:i})}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[7719,580],()=>n(4907));module.exports=r})();