(()=>{var e={};e.id=8945,e.ids=[8945],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{},97302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var n={};r.r(n),r.d(n,{GET:()=>u});var o=r(96559),i=r(48088),s=r(37719),a=r(32190);async function c(e){try{let t=await fetch(`http://ip-api.com/json/${e}`),r=await t.json();return{ip:r.query,country:r.country,countryCode:r.countryCode,region:r.regionName,city:r.city,isp:r.isp,timezone:r.timezone}}catch(e){return console.error("Error fetching location:",e),null}}async function u(e){try{let t=function(e){let t=e.headers.get("x-forwarded-for"),r=e.headers.get("x-real-ip"),n=e.headers.get("cf-connecting-ip");return t?t.split(",")[0].trim():r||n||e.ip||"unknown"}(e);if(console.log("Client IP:",t),"unknown"===t)return a.NextResponse.json({error:"Unable to detect IP address",isChina:!1,isHongKong:!1});let r=await c(t);if(!r)return a.NextResponse.json({error:"Unable to get location data",ip:t,isChina:!1,isHongKong:!1});let n="CN"===r.countryCode,o="HK"===r.countryCode,i="MO"===r.countryCode,s=n||o||i;return a.NextResponse.json({ip:t,location:r,isChina:n,isHongKong:o,isMacau:i,isChinaRegion:s,detectedAt:new Date().toISOString()})}catch(e){return console.error("Location detection error:",e),a.NextResponse.json({error:"Internal server error",isChina:!1,isHongKong:!1},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/detect-location/route",pathname:"/api/detect-location",filename:"route",bundlePath:"app/api/detect-location/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/detect-location/route.js",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:g}=p;function h(){return(0,s.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7719,580],()=>r(97302));module.exports=n})();