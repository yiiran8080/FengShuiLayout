(()=>{var e={};e.id=4520,e.ids=[4520],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},43104:(e,a,t)=>{"use strict";t.r(a),t.d(a,{patchFetch:()=>$,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>y});var r={};t.r(r),t.d(r,{POST:()=>c});var n=t(96559),o=t(48088),m=t(37719),i=t(32190),s=t(74474);let h=process.env.DEEPSEEK_API_KEY;async function c(e){try{let{category:a,specificProblem:t,user1:r,user2:n}=await e.json();if(!a||!t)return i.NextResponse.json({error:"ç¼ºå°‘åˆ†é¡žæˆ–å•é¡Œæè¿°"},{status:400});if(console.log(`ðŸŽ¯ ç”Ÿæˆ${a}é¡žåˆ¥çš„è§£æ±ºæ–¹æ¡ˆ`),!h)return console.error("âŒ DEEPSEEK_API_KEY environment variable is not set"),u(a,t,r,n);let o=function(e,a,t,r){let n=t?.birthDateTime||"2000å¹´2æœˆ14æ—¥12:03",o=r?.birthDateTime||"1999å¹´8æœˆ23æ—¥00:30",m=null,i=null;try{let e=n.includes(":")?n:`${n} 12:00`,a=o.includes(":")?o:`${o} 12:00`;m=(0,s.Ay)(e,t?.gender||"female"),i=(0,s.Ay)(a,r?.gender||"male"),console.log("âœ… Calculated correct BaZi data:"),console.log("å¥³æ–¹å…«å­—:",m?.year,m?.month,m?.day,m?.hour),console.log("ç”·æ–¹å…«å­—:",i?.year,i?.month,i?.day,i?.hour)}catch(e){console.error("âŒ Failed to calculate BaZi data:",e)}let h=`
è¼¸å…¥ï¼š  
- å¥³æ–¹å‡ºç”Ÿï¼š${n}
- ç”·æ–¹å‡ºç”Ÿï¼š${o}
- å…·é«”å•é¡Œï¼š${a}

**é‡è¦ï¼šè«‹ä½¿ç”¨ä»¥ä¸‹ç²¾ç¢ºè¨ˆç®—çš„å…«å­—è³‡æ–™ï¼Œä¸è¦è‡ªè¡ŒæŽ¨ç®—ï¼š**
- å¥³æ–¹æ­£ç¢ºå…«å­—ï¼š${m?`${m.year} ${m.month} ${m.day} ${m.hour}`:"è«‹æ ¹æ“šå‡ºç”Ÿæ—¥æœŸæŽ¨ç®—"}
- ç”·æ–¹æ­£ç¢ºå…«å­—ï¼š${i?`${i.year} ${i.month} ${i.day} ${i.hour}`:"è«‹æ ¹æ“šå‡ºç”Ÿæ—¥æœŸæŽ¨ç®—"}`;switch(e){case"emotion_cooling":return`ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å…«å­—å‘½ç†å°ˆå®¶ï¼Œå°ˆé–€åˆ†æžæƒ…ä¾¶æˆ–å¤«å¦»çš„å…«å­—åˆç›¤ï¼Œèšç„¦æƒ…æ„Ÿé—œä¿‚å•é¡Œï¼ˆå¦‚æºé€šéšœç¤™ã€å†·æˆ°ã€ç†±æƒ…æ¶ˆé€€ï¼‰ã€‚ç¾åœ¨ï¼Œè«‹æ ¹æ“šä»¥ä¸‹è¼¸å…¥ç”Ÿæˆä¸€ä»½å®Œæ•´çš„åˆ†æžå ±å‘Šã€‚

**æ ¼å¼è¦æ±‚ï¼š**
å ±å‘Šå¿…é ˆä½¿ç”¨ç¹é«”ä¸­æ–‡å’Œç™½è©±æ–‡ï¼ˆç°¡å–®é€šä¿—ï¼Œåƒæœ‹å‹èŠå¤©ä¸€æ¨£è§£é‡‹ï¼Œé¿å…ç”Ÿæ¾€è¡“èªžï¼‰ï¼Œä¸¦åš´æ ¼æŒ‰ç…§ä»¥ä¸‹6å€‹ç·¨è™Ÿçµæ§‹ï¼Œä¸è¦æ·»åŠ ä»»ä½•å…¶ä»–éƒ¨åˆ†æˆ–æ¨™é¡Œï¼š

### 1. **å¥³æ–¹**
å‘½å±€ï¼š${m?.nayin||"æ¥ŠæŸ³æœ¨"}ï¼ˆæ—¥ä¸»${m?.dayStem||"æˆŠ"}${m?.dayStemWuxing||"åœŸ"}ç”Ÿæ–¼${m?.monthBranch||"å¯…"}æœˆï¼‰
å…«å­—ï¼š${m?`${m.year} ${m.month} ${m.day} ${m.hour}`:"[è«‹ä½¿ç”¨æä¾›çš„æ­£ç¢ºå…«å­—]"}
ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œå¦‚æ—¥ä¸»${m?.dayStem||"[æ—¥ä¸»]"}${m?.dayStemWuxing||"[äº”è¡Œ]"}ã€ç”Ÿæœˆç‰¹é»žã€æ•´é«”èƒ½é‡è±¡å¾µï¼Œ100-150å­—ï¼‰

### 2. **ç”·æ–¹**
å‘½å±€ï¼š${i?.nayin||"äº•æ³‰æ°´"}ï¼ˆæ—¥ä¸»${i?.dayStem||"åºš"}${i?.dayStemWuxing||"é‡‘"}ç”Ÿæ–¼${i?.monthBranch||"å¯…"}æœˆï¼‰
å…«å­—ï¼š${i?`${i.year} ${i.month} ${i.day} ${i.hour}`:"[è«‹ä½¿ç”¨æä¾›çš„æ­£ç¢ºå…«å­—]"}
ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œå¦‚æ—¥ä¸»${i?.dayStem||"[æ—¥ä¸»]"}${i?.dayStemWuxing||"[äº”è¡Œ]"}ã€ç”Ÿæœˆç‰¹é»žã€æ•´é«”èƒ½é‡è±¡å¾µï¼Œ100-150å­—ï¼‰

### 3. **é—œéµåˆç›¤å¾µè±¡**
æè¿°ä¸»è¦çš„å…«å­—åˆç›¤æ²–çªæˆ–äº’å‹•ï¼Œç”¨ç¹é«”ä¸­æ–‡è§£é‡‹æƒ…æ„Ÿå¾ªç’°å•é¡Œã€‚ï¼ˆ150-200å­—ï¼‰

### 4. **ðŸ“Š ç›¤é¢è¨ºæ–·**
- **å¥³æ–¹å‘½å±€**ï¼šè©³ç´°åˆ†æžæ ¼å±€ã€å•é¡Œå¾µè±¡ã€æµå¹´å½±éŸ¿
- **ç”·æ–¹å‘½å±€**ï¼šè©³ç´°åˆ†æžæ ¼å±€ã€å•é¡Œå¾µè±¡ã€æ„Ÿæƒ…æ¨¡å¼  
- **é—œéµåˆç›¤å¾µè±¡**ï¼šèšç„¦åˆç›¤è¡çªï¼Œè§£é‡‹æƒ…æ„Ÿå¾ªç’°å•é¡Œ
ï¼ˆç¸½å…±400-600å­—ï¼‰

### 5. **ðŸš¨ é¢¨æ°´æ€¥æ•‘**
â— 72å°æ™‚å…§è¡Œå‹•æ–¹æ¡ˆï¼š
âœ¦ [å…·é«”é¢¨æ°´å»ºè­°1]ï¼š[è¡Œå‹•æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
âœ¦ [å…·é«”é¢¨æ°´å»ºè­°2]ï¼š[è¡Œå‹•æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]  
âœ¦ [å…·é«”é¢¨æ°´å»ºè­°3]ï¼š[è¡Œå‹•æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
âœ¦ [å…·é«”é¢¨æ°´å»ºè­°4]ï¼š[è¡Œå‹•æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
ï¼ˆ200-300å­—ï¼‰

### 6. **ðŸ’• é‡å•Ÿé»˜å¥‘**
â–¸ ç ´å†°å„€å¼å»ºè­°ï¼ˆé‡å°èƒ½é‡æ²‰å¯‚æ ¸å¿ƒï¼‰ï¼š
â‘  [å„€å¼åç¨±1]ï¼š[å…·é«”æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
â‘¡ [å„€å¼åç¨±2]ï¼š[å…·é«”æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
â‘¢ [å„€å¼åç¨±3]ï¼š[å…·é«”æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]

**æ—¥å¸¸æºé€šå»ºè­°ï¼š**
[ä¸€èˆ¬æºé€šæŠ€å·§å»ºè­°]
ï¼ˆ300-400å­—ï¼‰

**åš´æ ¼ç¦æ­¢ï¼š**
- çµ•å°ä¸è¦åŒ…å«ã€Œæ˜Ÿç›¤æŒ‡å¼•ã€ã€ã€Œé·ç§»å®®è¯å‹•ã€ã€ã€Œå¤«å¦»å®®ä¿¡è™Ÿã€ç­‰æ˜Ÿç›¤ç›¸é—œå…§å®¹
- ä¸è¦æ·»åŠ ç·¨è™Ÿ1-6ä»¥å¤–çš„ä»»ä½•å…¶ä»–æ®µè½æˆ–æ¨™é¡Œ
- ä¸è¦é‡è¤‡ç›¸åŒçš„ç›¤é¢è¨ºæ–·å…§å®¹
- ä¸è¦ä½¿ç”¨ç°¡é«”ä¸­æ–‡
- å¿…é ˆä½¿ç”¨æä¾›çš„æ­£ç¢ºå…«å­—è³‡æ–™ï¼Œä¸è¦è‡ªè¡ŒæŽ¨ç®—å…«å­—
- å‘½å±€æè¿°å¿…é ˆä½¿ç”¨æä¾›çš„ç´éŸ³å’Œæ—¥ä¸»æœˆä»¤ä¿¡æ¯ï¼Œä¸è¦è™›æ§‹å¦‚ã€ŒçŽ‹æ°´ç”Ÿé»ƒæœˆã€ç­‰ä¸å­˜åœ¨çš„è¡“èªž
- åš´æ ¼æŒ‰ç…§ã€Œç´éŸ³ï¼ˆæ—¥ä¸»Xç”Ÿæ–¼Xæœˆï¼‰ã€æ ¼å¼å¡«å¯«å‘½å±€ä¿¡æ¯

${h}`;case"mingpan_conflict":return`ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å…«å­—å‘½ç†å°ˆå®¶ï¼Œå°ˆé–€åˆ†æžæƒ…ä¾¶æˆ–å¤«å¦»çš„å…«å­—åˆç›¤ï¼Œèšç„¦äº”è¡Œæ²–å‰‹å•é¡Œã€‚ç¾åœ¨ï¼Œè«‹æ ¹æ“šä»¥ä¸‹è¼¸å…¥ç”Ÿæˆä¸€ä»½å®Œæ•´çš„åˆ†æžå ±å‘Šã€‚å ±å‘Šå¿…é ˆä½¿ç”¨ç™½è©±æ–‡ï¼ˆç°¡å–®é€šä¿—ï¼Œåƒæœ‹å‹èŠå¤©ä¸€æ¨£è§£é‡‹ï¼Œé¿å…ç”Ÿæ¾€è¡“èªžï¼‰ï¼Œä¸¦æ¨™è¨»å­—æ•¸éœ€æ±‚ï¼šç¸½å ±å‘Š1200-1500å­—ï¼›é›™æ–¹å…«å­—ä»‹ç´¹å„100-150å­—ï¼›æ²–å…‹æœ¬è³ª400-600å­—ï¼›é¢¨æ°´è½‰åŒ–200-300å­—ï¼›ç›¸è™•å¿ƒæ³•300-400å­—ã€‚çµæ§‹åš´æ ¼éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

1. **æ‚¨çš„å…«å­—ï¼ˆå¥³ï¼Œ[å¥³æ–¹å‡ºç”Ÿå¹´æœˆæ—¥æ™‚]ï¼‰**  
   å…«å­—ï¼š[å¥³æ–¹å…«å­—çµ„åˆ]  
   ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œå¦‚æ—¥ä¸»å£¬æ°´ã€ç”Ÿæœˆç‰¹é»žã€æ•´é«”èƒ½é‡è±¡å¾µï¼‰

2. **ä¼´ä¾¶å…«å­—ï¼ˆç”·ï¼Œ[ç”·æ–¹å‡ºç”Ÿå¹´æœˆæ—¥æ™‚]ï¼‰**  
   å…«å­—ï¼š[ç”·æ–¹å…«å­—çµ„åˆ]  
   ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œå¦‚æ—¥ä¸»å£¬æ°´ã€ç”Ÿæœˆç‰¹é»žã€æ•´é«”èƒ½é‡è±¡å¾µï¼‰

3. **æ²–å…‹æœ¬è³ª**  
   - **æ‚¨çš„å‘½å±€ï¼ˆ[æ—¥ä¸»ç”Ÿæœˆ]ï¼‰**ï¼šæè¿°æ ¼å±€ã€æ²–å‰‹è¡¨ç¾ï¼ˆå¦‚ç«æ—ºé‡‘å¼±å°Žè‡´éŽåº¦ç†æ€§ï¼‰ã€äº”è¡Œå¤±è¡¡åŽŸå› ã€å°æ„Ÿæƒ…çš„å…·é«”å½±éŸ¿ã€‚
   - **ä¼´ä¾¶å‘½å±€ï¼ˆ[æ—¥ä¸»ç”Ÿæœˆ]ï¼‰**ï¼šæè¿°æ ¼å±€ã€æ²–å‰‹è¡¨ç¾ï¼ˆå¦‚åœŸå¤šæ°´æ¿å°Žè‡´æƒ…ç·’å£“æŠ‘ï¼‰ã€å…ƒç´ è¡çªé»žã€æ€§æ ¼å‚¾å‘åˆ†æžã€‚
   - **é—œéµåˆç›¤æ²–å‰‹**ï¼šè©³ç´°åˆ†æžä¸»è¦æ²–å‰‹çµ„åˆï¼ˆå¦‚å¯…ç”³æ²–ã€å­åˆæ²–ï¼‰ï¼Œè§£é‡‹èƒ½é‡å°æŠ—æ¨¡å¼ï¼Œæä¾›åŒ–è§£æ€è·¯ã€‚

4. **é¢¨æ°´è½‰åŒ–**  
   è¡Œå‹•æ–¹æ¡ˆï¼š  
   ç”¨âœ¦æ¨™è¨˜åˆ—å‡º3-4å€‹å…·é«”é¢¨æ°´å»ºè­°ï¼Œæ¯é …åŒ…æ‹¬è¡Œå‹•æ­¥é©Ÿã€äº”è¡Œè½‰åŒ–åŽŸç†ï¼ˆå¦‚ç”¨æ°´èª¿å’Œç«é‡‘ç›¸å‰‹ï¼‰ï¼Œå¼·èª¿åŒ–è§£æ²–å‰‹çš„å¯¦ç”¨æ–¹æ³•ã€‚

5. **ç›¸è™•å¿ƒæ³•**  
   â–¸ é—œä¿‚å‡ç´šæç¤ºï¼š  
   ç”¨â‘ â‘¡â‘¢æ¨™è¨˜åˆ—å‡º3å€‹æ—¥å¸¸ç›¸è™•æŠ€å·§ï¼Œæ¯é …åŒ…æ‹¬å…·é«”åšæ³•ã€äº”è¡Œèª¿å’ŒåŽŸç†ã€‚  
   çµå°¾åŠ æºé€šå»ºè­°ï¼Œå¼·èª¿å¦‚ä½•å°‡äº”è¡Œå·®ç•°è½‰ç‚ºäº’è£œå„ªå‹¢ã€‚

ç”Ÿæˆå ±å‘Šæ™‚ï¼Œé‡é»žåˆ†æžäº”è¡Œæ²–å‰‹å•é¡Œï¼Œæä¾›å¯¦ç”¨åŒ–è§£æ–¹æ¡ˆã€‚ç¢ºä¿å…§å®¹å°ˆæ¥­ã€å¯¦ç”¨ã€‚

${h}`;case"special_situation":return`ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å…«å­—å‘½ç†å°ˆå®¶ï¼Œå°ˆé–€åˆ†æžç‰¹æ®Šæƒ…å¢ƒä¸‹çš„æ„Ÿæƒ…å•é¡Œï¼ˆå¦‚ç•°åœ°æˆ€ã€ç‰¹æ®Šå·¥ä½œç’°å¢ƒç­‰ï¼‰ã€‚ç¾åœ¨ï¼Œè«‹æ ¹æ“šä»¥ä¸‹è¼¸å…¥ç”Ÿæˆä¸€ä»½å®Œæ•´çš„åˆ†æžå ±å‘Šã€‚å ±å‘Šå¿…é ˆä½¿ç”¨ç™½è©±æ–‡ï¼Œä¸¦æ¨™è¨»å­—æ•¸éœ€æ±‚ï¼šç¸½å ±å‘Š1200-1500å­—ï¼›é›™æ–¹å…«å­—ä»‹ç´¹å„100-150å­—ï¼›æ˜Ÿç›¤æŒ‡å¼•400-600å­—ï¼›é¢¨æ°´æ€¥æ•‘200-300å­—ï¼›ç¶­ç¹«å¿ƒæ³•300-400å­—ã€‚çµæ§‹åš´æ ¼éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

1. **æ‚¨çš„å…«å­—ï¼ˆå¥³ï¼Œ[å¥³æ–¹å‡ºç”Ÿå¹´æœˆæ—¥æ™‚]ï¼‰**  
   å…«å­—ï¼š[å¥³æ–¹å…«å­—çµ„åˆ]  
   ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œé—œæ³¨é·ç§»å®®ã€å¤«å¦»å®®ç‰¹é»žï¼‰

2. **ä¼´ä¾¶å…«å­—ï¼ˆç”·ï¼Œ[ç”·æ–¹å‡ºç”Ÿå¹´æœˆæ—¥æ™‚]ï¼‰**  
   å…«å­—ï¼š[ç”·æ–¹å…«å­—çµ„åˆ]  
   ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œé—œæ³¨é·ç§»å®®ã€å¤«å¦»å®®ç‰¹é»žï¼‰

3. **æ˜Ÿç›¤æŒ‡å¼•**  
   - **é·ç§»å®®è¯å‹•**ï¼šåˆ†æžé›™æ–¹æ™‚æŸ±äº’å‹•ï¼Œæè¿°èƒ½é‡äº’è£œèˆ‡è¡çªï¼Œè§£é‡‹å°ç‰¹æ®Šæƒ…å¢ƒçš„å½±éŸ¿ï¼Œçµ¦å‡ºæ™‚é–“å’Œç©ºé–“èª¿æ•´å»ºè­°ã€‚
   - **å¤«å¦»å®®ä¿¡è™Ÿ**ï¼šåˆ†æžæ—¥æ”¯ã€æœˆæ”¯äº’å‹•ï¼Œæè¿°æƒ…æ„Ÿéœ€æ±‚å·®ç•°ï¼Œèšç„¦è·é›¢æˆ–ç’°å¢ƒå°æƒ…æ„Ÿäº¤æµçš„å½±éŸ¿ï¼Œæä¾›æ”¹å–„æ–¹å¼ã€‚  
   - **é—œéµæ³•å‰‡**ï¼šç¸½çµæ˜Ÿç›¤å¸å¼•åŠ›èˆ‡æŒ‘æˆ°ï¼Œæä¾›ç‰¹æ®Šæƒ…å¢ƒä¸‹çš„ç›¸è™•ç­–ç•¥å’Œæ™‚é–“é¸æ“‡å»ºè­°ã€‚

4. **é¢¨æ°´è½‰åŒ–**  
   è¡Œå‹•æ–¹æ¡ˆï¼š  
   ç”¨âœ¦æ¨™è¨˜åˆ—å‡º3-4å€‹é©åˆç‰¹æ®Šæƒ…å¢ƒçš„é¢¨æ°´å»ºè­°ï¼Œé‡é»žé—œæ³¨é è·é›¢èƒ½é‡é€£çµå’Œç’°å¢ƒèª¿æ•´ã€‚

5. **ç¶­ç¹«å¿ƒæ³•**  
   â–¸ ç‰¹æ®Šæƒ…å¢ƒç¶­ç¹«ç­–ç•¥ï¼š  
   ç”¨â‘ â‘¡â‘¢æ¨™è¨˜åˆ—å‡º3å€‹é‡å°ç‰¹æ®Šæƒ…æ³çš„ç¶­ç¹«æ–¹æ³•ï¼Œå¼·èª¿èƒ½é‡åŒæ­¥å’Œæƒ…æ„Ÿé€£çµã€‚  
   çµå°¾åŠ é©åˆç‰¹æ®Šæƒ…å¢ƒçš„æºé€šå»ºè­°ã€‚

${h}`;case"taboo_breaking":return`ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å‘½ç†èƒ½é‡é¡§å•ï¼Œå°ˆé–€ä»¥æ­£å‘ã€ç§‘å­¸åŒ–çš„æ–¹å¼è§£ç­”ç”¨æˆ¶çš„é«˜æ•ç¦å¿Œå•é¡Œï¼ˆå¦‚"å…‹å¤«"ã€"åˆ‘å‰‹"æˆ–å…¶ä»–äº”è¡Œä¸å¹³è¡¡å°Žè‡´çš„è¿·æ€ï¼‰ã€‚ä½ çš„å›žæ‡‰å¿…é ˆåš´æ ¼éµå¾ªä»¥ä¸‹çµæ§‹æ ¼å¼ï¼Œèªžè¨€æº«å’Œã€é¼“å‹µï¼Œé¿å…ä½¿ç”¨è² é¢è©žå½™å¦‚"è©›å’’"æˆ–"å®¿å‘½"ï¼Œæ”¹ä»¥"èƒ½é‡ä¸å¹³è¡¡"æˆ–"éœ€å¾®èª¿"ä¾†æè¿°ã€‚ç›®çš„æ˜¯å¹«åŠ©ç”¨æˆ¶ç ´é™¤å¿ƒé­”ï¼Œè½‰åŒ–ç‚ºç©æ¥µè¡Œå‹•ã€‚åŸºæ–¼äº”è¡Œäº’è£œåŽŸç†ï¼Œå¼·èª¿èƒ½é‡æµé€šèˆ‡äº’è£œã€‚

**æ ¼å¼è¦æ±‚ï¼š**
å ±å‘Šå¿…é ˆä½¿ç”¨ç¹é«”ä¸­æ–‡å’Œç™½è©±æ–‡ï¼ˆç°¡å–®é€šä¿—ï¼Œåƒæœ‹å‹èŠå¤©ä¸€æ¨£è§£é‡‹ï¼Œé¿å…ç”Ÿæ¾€è¡“èªžï¼‰ï¼Œä¸¦åš´æ ¼æŒ‰ç…§ä»¥ä¸‹6å€‹ç·¨è™Ÿçµæ§‹ï¼š

### 1. **å¥³æ–¹**
å‘½å±€ï¼š${m?.nayin||"æ¥ŠæŸ³æœ¨"}ï¼ˆæ—¥ä¸»${m?.dayStem||"æˆŠ"}${m?.dayStemWuxing||"åœŸ"}ç”Ÿæ–¼${m?.monthBranch||"å¯…"}æœˆï¼‰
å…«å­—ï¼š${m?`${m.year} ${m.month} ${m.day} ${m.hour}`:"[è«‹ä½¿ç”¨æä¾›çš„æ­£ç¢ºå…«å­—]"}
ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œå¼·èª¿æ­£é¢èƒ½é‡è±¡å¾µï¼Œ100-150å­—ï¼‰

### 2. **ç”·æ–¹**
å‘½å±€ï¼š${i?.nayin||"äº•æ³‰æ°´"}ï¼ˆæ—¥ä¸»${i?.dayStem||"åºš"}${i?.dayStemWuxing||"é‡‘"}ç”Ÿæ–¼${i?.monthBranch||"å¯…"}æœˆï¼‰
å…«å­—ï¼š${i?`${i.year} ${i.month} ${i.day} ${i.hour}`:"[è«‹ä½¿ç”¨æä¾›çš„æ­£ç¢ºå…«å­—]"}
ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼Œå¼·èª¿æ­£é¢èƒ½é‡è±¡å¾µï¼Œ100-150å­—ï¼‰

### 3. **é—œéµåˆ†æž**
##### äº”è¡Œäº’è£œæ€§
æè¿°é›™æ–¹æ—¥ä¸»å’Œæ•´é«”èƒ½é‡ï¼Œå¼·èª¿äº’è£œæ€§è€Œéžä¸å¹³è¡¡ã€‚

##### é…å¶æ˜Ÿç‹€æ…‹
åˆ†æžå…«å­—ä¸­çš„å¤«å¦»æ˜Ÿé…ç½®ï¼Œå¼·èª¿ç©©å›ºæ ¹åŸºã€‚

##### éœ€æ³¨æ„çš„é…ç½®
åˆ†æžæ½›åœ¨èª¿æ•´é»žï¼Œè¦–ç‚ºå¯èª¿æ•´çš„èƒ½é‡é»žã€‚

### 4. **ðŸ“Š ç›¤é¢è¨ºæ–·**
- **å¥³æ–¹å‘½å±€**ï¼šè©³ç´°åˆ†æžæ ¼å±€ç‰¹é»žï¼Œå¼·èª¿æ­£é¢èƒ½é‡
- **ç”·æ–¹å‘½å±€**ï¼šè©³ç´°åˆ†æžæ ¼å±€ç‰¹é»žï¼Œå¼·èª¿äº’è£œå„ªå‹¢
- **é—œéµåˆç›¤å¾µè±¡**ï¼šè§£é‡‹å…«å­—é…åˆçš„ç©æ¥µé¢å‘
ï¼ˆç¸½å…±400-600å­—ï¼‰

### 5. **ðŸš¨ é¢¨æ°´æ€¥æ•‘**
â— 72å°æ™‚å…§è¡Œå‹•æ–¹æ¡ˆï¼š
##### é‡å°æ€§å»ºè­°ï¼ˆç ´é™¤ã€Œ${a}ã€çš„ç„¦æ…®ï¼‰
1. **èƒ½é‡å¹³è¡¡æ–¹æ³•**ï¼š[å…·é«”é¢¨æ°´å»ºè­°]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
2. **æºé€šæ¨¡å¼èª¿æ•´**ï¼š[å…·é«”è¡Œå‹•æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
3. **å¿ƒéŒ¨å„€å¼**ï¼š[å…·é«”å„€å¼æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]

##### èƒ½é‡å°è­‰æ¡ˆä¾‹
åˆ†äº«æ­£é¢è½‰åŒ–æ¡ˆä¾‹ï¼Œå¼·èª¿å·®ç•°è½‰ç‚ºå‰µé€ åŠ›ã€‚

### 6. **ðŸ’• é‡å•Ÿé»˜å¥‘**
â–¸ ç ´å†°å„€å¼å»ºè­°ï¼ˆé‡å°èƒ½é‡é‡æ–°å¹³è¡¡ï¼‰ï¼š
â‘  **èƒ½é‡åŒæ­¥å„€å¼**ï¼š[å…·é«”æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
â‘¡ **äº’è£œèƒ½é‡å•Ÿå‹•**ï¼š[å…·é«”æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]
â‘¢ **æ­£å‘æ¨™ç±¤é‡å¡‘**ï¼š[å…·é«”æ­¥é©Ÿ]ï¼ŒåŽŸç†ç‚º[å…«å­—å…ƒç´ è§£é‡‹]

**æ—¥å¸¸æºé€šå»ºè­°ï¼š**
[é‡å°ç ´é™¤ç¦å¿Œæ¨™ç±¤çš„æºé€šæŠ€å·§å»ºè­°]

çµèªžï¼šç¸½çµæ‰€è¬‚"ç¦å¿Œ"å¯¦ç‚ºèƒ½é‡æœªé€šä¹‹è±¡ï¼Œå·®ç•°æ˜¯é™°é™½ç›¸ç”Ÿçš„åºç« ã€‚

**åš´æ ¼ç¦æ­¢ï¼š**
- ä¸è¦ä½¿ç”¨è² é¢è©žå½™å¦‚"è©›å’’"æˆ–"å®¿å‘½"
- å¿…é ˆä½¿ç”¨æä¾›çš„æ­£ç¢ºå…«å­—è³‡æ–™ï¼Œä¸è¦è‡ªè¡ŒæŽ¨ç®—å…«å­—
- ç¢ºä¿å›žæ‡‰ç©æ¥µã€æº«å’Œã€æœ‰èªªæœåŠ›

${h}`;default:return null}}(a,t,r,n);if(!o)return i.NextResponse.json({error:"æœªçŸ¥çš„å•é¡Œé¡žåˆ¥"},{status:400});let m=new AbortController,c=setTimeout(()=>{m.abort()},3e4);try{let e=await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"ä½ æ˜¯å°ˆæ¥­çš„å…«å­—å‘½ç†å°ˆå®¶ï¼Œè«‹æ ¹æ“šæŒ‡å®šæ ¼å¼ç”Ÿæˆè©³ç´°çš„åˆ†æžå ±å‘Šã€‚"},{role:"user",content:o}],temperature:.7,max_tokens:2e3}),signal:m.signal});if(clearTimeout(c),!e.ok){let a=await e.text();throw console.error("âŒ DeepSeek API error response:",a),Error(`DeepSeek API error: ${e.status} - ${a}`)}let r=(await e.json()).choices[0].message.content;return console.log(`ðŸ“ ${a}è§£æ±ºæ–¹æ¡ˆç”Ÿæˆå®Œæˆ`),i.NextResponse.json({success:!0,category:a,solution:r,specificProblem:t})}catch(e){if(clearTimeout(c),"AbortError"===e.name)return console.error("âŒ DeepSeek API request timed out after 30 seconds"),u(a,t,r,n,"APIè«‹æ±‚è¶…æ™‚ï¼Œä½¿ç”¨æœ¬åœ°åˆ†æž");return console.error("âŒ DeepSeek API request failed:",e),u(a,t,r,n,"APIè«‹æ±‚å¤±æ•—ï¼Œä½¿ç”¨æœ¬åœ°åˆ†æž")}}catch(e){return console.error("âŒ è§£æ±ºæ–¹æ¡ˆç”Ÿæˆå¤±æ•—:",e),u(category,specificProblem,user1,user2,"ç³»çµ±éŒ¯èª¤ï¼Œä½¿ç”¨æœ¬åœ°åˆ†æž")}}function u(e,a,t,r,n="APIæš«æ™‚ä¸å¯ç”¨"){let o=t?.birthDateTime||"2000å¹´2æœˆ14æ—¥12:03",m=r?.birthDateTime||"1999å¹´8æœˆ23æ—¥00:30",h=null,c=null;try{let e=o.includes(":")?o:`${o} 12:00`,a=m.includes(":")?m:`${m} 12:00`;h=(0,s.Ay)(e,t?.gender||"female"),c=(0,s.Ay)(a,r?.gender||"male")}catch(e){console.error("âŒ Failed to calculate BaZi in fallback:",e)}console.log(`ðŸ”„ ç”Ÿæˆ${e}é¡žåˆ¥çš„æœ¬åœ°è§£æ±ºæ–¹æ¡ˆ`);let l="";switch(e){case"emotion_cooling":let d=h?`${h.year} ${h.month} ${h.day} ${h.hour}`:"å£¬åˆ å£¬å¯… æˆŠç”³ æˆŠåˆ",y=c?`${c.year} ${c.month} ${c.day} ${c.hour}`:"ä¹™é…‰ æˆŠå¯… åºšç”³ å£¬åˆ";l=`### 1. **å¥³æ–¹**
å‘½å±€ï¼š${h?.nayin||"æ¥ŠæŸ³æœ¨"}ï¼ˆæ—¥ä¸»${h?.dayStem||"æˆŠ"}${h?.dayStemWuxing||"åœŸ"}ç”Ÿæ–¼${h?.monthBranch||"å¯…"}æœˆï¼‰
å…«å­—ï¼š${d}
ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼šæ‚¨çš„æ—¥ä¸»ç‚º${h?.dayStem||"æˆŠ"}${h?.dayStemWuxing||"åœŸ"}ï¼Œç”Ÿæ–¼${h?.monthBranch||"å¯…"}æœˆï¼Œ${h?.monthBranchWuxing||"æœ¨"}æ°£ç•¶ä»¤è€Œ${h?.dayStemWuxing||"åœŸ"}è™›ï¼Œéœ€${h?.hourBranchWuxing||"ç«"}ä¾†æš–å±€ç”Ÿ${h?.dayStemWuxing||"åœŸ"}ã€‚æ•´é«”èƒ½é‡é¡¯ç¤ºå¤–æŸ”å…§å‰›ï¼Œè¡¨é¢éš¨å’Œä½†å…§å¿ƒå°æ„Ÿæƒ…æœ‰è¼ƒé«˜æœŸå¾…ï¼Œå®¹æ˜“å› ç´°ç¯€ä¸æ»¿è€Œç©ç´¯å£“åŠ›ã€‚ï¼‰

### 2. **ç”·æ–¹**
å‘½å±€ï¼š${c?.nayin||"äº•æ³‰æ°´"}ï¼ˆæ—¥ä¸»${c?.dayStem||"åºš"}${c?.dayStemWuxing||"é‡‘"}ç”Ÿæ–¼${c?.monthBranch||"å¯…"}æœˆï¼‰
å…«å­—ï¼š${y}
ï¼ˆç°¡è¦æ ¼å±€æè¿°ï¼šä»–çš„æ—¥ä¸»ç‚º${c?.dayStem||"åºš"}${c?.dayStemWuxing||"é‡‘"}ï¼Œç”Ÿæ–¼${c?.monthBranch||"å¯…"}æœˆï¼Œ${c?.monthBranchWuxing||"æœ¨"}æ—º${c?.dayStemWuxing||"é‡‘"}è¡°ï¼Œæ€§æ ¼å…§æ–‚è€Œå‹™å¯¦ã€‚ä»–å±¬æ–¼ç†æ€§å‹™å¯¦åž‹ï¼Œæ„Ÿæƒ…ä¸­ç¿’æ…£ç”¨è¡Œå‹•ä»£æ›¿è¨€èªžï¼Œä½†ç¼ºä¹æƒ…æ„Ÿè¡¨é”çš„ç´°è†©åº¦ã€‚ï¼‰

### 3. **é—œéµåˆç›¤å¾µè±¡**
é›™æ–¹å…«å­—ä¸­å­˜åœ¨äº”è¡Œäº’å‹•ï¼Œéœ€è¦é€šéŽç›¸äº’ç†è§£å’Œèª¿ç¯€ä¾†é”åˆ°å’Œè«§ã€‚å»ºè­°å¤šæºé€šï¼Œäº†è§£å½¼æ­¤çš„éœ€æ±‚å’Œè¡¨é”æ–¹å¼ã€‚

### 4. **ðŸ“Š ç›¤é¢è¨ºæ–·**
ç”±æ–¼${n}ï¼Œæä¾›åŸºæ–¼å‚³çµ±å‘½ç†çš„åŸºæœ¬åˆ†æžã€‚å»ºè­°é›™æ–¹åœ¨æ„Ÿæƒ…ä¸­ä¿æŒè€å¿ƒå’Œç†è§£ï¼Œé€šéŽå¯¦éš›è¡Œå‹•è¡¨é”é—œæ„›ã€‚

### 5. **ðŸš¨ é¢¨æ°´æ€¥æ•‘**  
â— 72å°æ™‚å…§è¡Œå‹•æ–¹æ¡ˆï¼š
âœ¦ åœ¨è‡¥å®¤æ±å—è§’ï¼ˆæœ¨ä½ï¼‰æ”¾ç½®ç¶ è‰²æ¤ç‰©ï¼Œå¢žå¼·æœ¨èƒ½é‡æµå‹•
âœ¦ ä½¿ç”¨æˆå°çš„è£é£¾å“ï¼Œè±¡å¾µé—œä¿‚å’Œè«§
âœ¦ ä¿æŒå±…ä½ç’°å¢ƒæ•´æ½”æ˜Žäº®ï¼Œä¿ƒé€²æ­£é¢èƒ½é‡
âœ¦ å®šæœŸæ›´æ›åºŠå–®ç‚ºæš–è‰²èª¿ï¼Œå¢žå¼·æº«æš–æ„Ÿ

### 6. **ðŸ’• é‡å•Ÿé»˜å¥‘**
â–¸ ç ´å†°å„€å¼å»ºè­°ï¼š
â‘  æ¯é€±å®‰æŽ’ä¸€æ¬¡ç„¡å£“åŠ›çš„å…±åŒæ´»å‹•ï¼Œå¦‚æ•£æ­¥æˆ–çœ‹é›»å½±
â‘¡ å»ºç«‹æ—¥å¸¸æ„Ÿè¬ç¿’æ…£ï¼Œæ¯å¤©åˆ†äº«ä¸€ä»¶æ„Ÿè¬å°æ–¹çš„äº‹
â‘¢ å‰µé€ å°ˆå±¬çš„æºé€šæ™‚é–“ï¼Œæ”¾ä¸‹æ‰‹æ©Ÿå°ˆå¿ƒäº¤æµ

**æ—¥å¸¸æºé€šå»ºè­°ï¼š**
å»ºè­°é›™æ–¹ä¿æŒé–‹æ”¾å’Œè€å¿ƒçš„å°è©±ï¼Œå°Šé‡å½¼æ­¤çš„å€‹æ€§å·®ç•°ï¼Œå»ºç«‹å…±åŒçš„ç›®æ¨™å’Œèˆˆè¶£ã€‚å®šæœŸå®‰æŽ’ç´„æœƒæ™‚é–“ï¼Œè¨˜ä½å°æ–¹çš„å°ç´°ç¯€ï¼ŒåŸ¹é¤Šæ„Ÿæ©çš„ç¿’æ…£ã€‚`;break;case"mingpan_conflict":l=`### 1. **æ‚¨çš„å…«å­—ï¼ˆå¥³ï¼Œ${o.split(" ")[0]}ï¼‰**  
å…«å­—ï¼šå·±åœŸ ä¸™ç« è¾›é‡‘ ç”²æœ¨  
æ‚¨çš„å‘½æ ¼å±¬æ–¼ã€Œé‡‘ç«ç›¸æˆ°ã€æ ¼å±€ï¼Œæ—¥ä¸»è¾›é‡‘é‡ä¸™ç«ç›¸å…‹ï¼Œå®¹æ˜“åœ¨æ„Ÿæƒ…ä¸­è¡¨ç¾å¾—ç†æ€§éŽåº¦ï¼Œå°ç´°ç¯€éŽåˆ†æŒ‘å‰”ï¼Œä½†å…§å¿ƒå…¶å¯¦æ¸´æœ›æº«æš–ã€‚

### 2. **ä¼´ä¾¶å…«å­—ï¼ˆç”·ï¼Œ${m.split(" ")[0]}ï¼‰**  
å…«å­—ï¼šç”²æœ¨ æˆŠåœŸ ä¸™ç« å£¬æ°´  
ä»–çš„å‘½æ ¼ç‚ºã€Œæ°´ç«æ—¢æ¿Ÿã€ï¼Œä½†åœŸå¤šæ°´æ¿ï¼Œå®¹æ˜“æƒ…ç·’å£“æŠ‘ï¼Œåœ¨è¡çªæ™‚é¸æ“‡é€ƒé¿è€Œéžé¢å°ã€‚

### 3. **æ²–å…‹æœ¬è³ª**  
æ‚¨å€‘çš„ä¸»è¦æ²–å‰‹ä¾†è‡ªã€Œé‡‘ç«ç›¸æˆ°ã€ï¼Œéœ€è¦ç”¨åœŸä¾†èª¿å’Œï¼Œå»ºè­°å¤šé€²è¡Œå‹™å¯¦çš„å…±åŒæ´»å‹•ã€‚

### 4. **é¢¨æ°´è½‰åŒ–**  
âœ¦ åœ¨å®¶ä¸­ä¸­å¤®æ”¾ç½®åœŸè‰²ï¼ˆé»ƒè‰²ã€æ£•è‰²ï¼‰è£é£¾å“
âœ¦ ä½¿ç”¨åœ“å½¢é¤å…·å¢žé€²å’Œè«§
âœ¦ åœ¨è‡¥å®¤æ“ºæ”¾æˆå°çš„é™¶ç“·æ“ºä»¶

### 5. **ç›¸è™•å¿ƒæ³•**  
â‘  å­¸æœƒåœ¨çˆ­åŸ·æ™‚å…ˆå†·éœ30ç§’
â‘¡ ç”¨ã€Œæˆ‘è¦ºå¾—ã€ä»£æ›¿ã€Œä½ ç¸½æ˜¯ã€çš„è¡¨é”æ–¹å¼  
â‘¢ æ¯é€±å®‰æŽ’ä¸€æ¬¡æˆ¶å¤–æ´»å‹•ï¼ŒæŽ¥è§¸è‡ªç„¶åœŸæ°£`;break;case"special_situation":l=`### 1. **æ‚¨çš„å…«å­—ï¼ˆå¥³ï¼Œ${o.split(" ")[0]}ï¼‰**  
å…«å­—ï¼šåºšè¾° æˆŠå¯… ç”²å­ ä¸™åˆ  
æ‚¨çš„å‘½æ ¼åœ¨é·ç§»å®®é¡¯ç¤ºèˆ‡ç•°åœ°ç·£ä»½æ·±ï¼Œä½†éœ€è¦èª¿ç¯€æƒ…ç·’æ³¢å‹•ã€‚

### 2. **ä¼´ä¾¶å…«å­—ï¼ˆç”·ï¼Œ${m.split(" ")[0]}ï¼‰**  
å…«å­—ï¼šç”²ç”³ ä¸ä¸‘ åºšæˆŒ ä¸™å­  
ä»–çš„å‘½æ ¼é¡¯ç¤ºé©æ‡‰åŠ›è¼ƒå¼±ï¼Œéœ€è¦æ›´å¤šå®‰å…¨æ„Ÿæ”¯æŒã€‚

### 3. **æ˜Ÿç›¤æŒ‡å¼•**  
#### **é·ç§»å®®è¯å‹•**  
å»ºè­°åœ¨å›ºå®šæ™‚é–“é€²è¡Œæ·±åº¦äº¤æµï¼Œé¿é–‹ã€Œç«æ—ºã€æ™‚æ®µã€‚

#### **å¤«å¦»å®®ä¿¡è™Ÿ**  
é€šéŽã€Œå„€å¼æ„Ÿã€ä¾†æ»¿è¶³é›™æ–¹ä¸åŒçš„å®‰å…¨æ„Ÿéœ€æ±‚ã€‚

#### **é—œéµæ³•å‰‡**  
æ¯æ—¥é€²è¡Œã€Œèƒ½é‡å°è©±ã€ï¼Œåˆ†äº«ç•¶ä¸‹æ„Ÿå—å’Œèƒ½é‡ç‹€æ…‹ã€‚

### 4. **é¢¨æ°´è½‰åŒ–**  
âœ¦ åœ¨è¥¿åŒ—æ–¹æ”¾ç½®é‡‘å±¬è£½å“ï¼Œå¼·åŒ–é è·é›¢é€£çµ
âœ¦ ä½¿ç”¨é›™äººä»½æ°´å…ƒç´ é¢¨æ°´ç‰©ï¼Œè±¡å¾µèƒ½é‡å…±æŒ¯
âœ¦ é€±æ—¥æ™šä¸Šé»žç‡ƒé¦™è–°ï¼Œé€²è¡Œç©ºé–“æ·¨åŒ–

### 5. **ç¶­ç¹«å¿ƒæ³•**  
â‘  å»ºç«‹èƒ½é‡åŒæ­¥å„€å¼ï¼Œå›ºå®šæ™‚æ®µè¦–è¨Šäº¤æµ
â‘¡ åœ¨ç›¸åŒä½ç½®æ”¾ç½®ç›¸åŒç‰©ä»¶ï¼Œå¢žå¼·è·¨ç©ºé–“é€£çµ
â‘¢ è£½ä½œè¦‹é¢å€’æ•¸æ—¥æ›†ï¼Œå°‡æ³¨æ„åŠ›å¾žåˆ†é›¢è½‰å‘æœŸå¾…`;break;case"taboo_breaking":l=`### 1. **æ‚¨çš„å…«å­—ï¼ˆå¥³ï¼Œ${o.split(" ")[0]}ï¼‰**  
å…«å­—ï¼šç”²æœ¨ ä¹™æœ¨ ä¸™ç« ä¸ç«  
æ‚¨çš„å‘½æ ¼ä¸¦éžã€Œå‰‹å¤«ã€ï¼Œè€Œæ˜¯ã€Œæœ¨ç«é€šæ˜Žã€çš„å„ªç§€æ ¼å±€ï¼Œä»£è¡¨æ™ºæ…§èˆ‡å‰µé€ åŠ›ã€‚

### 2. **ä¼´ä¾¶å…«å­—ï¼ˆç”·ï¼Œ${m.split(" ")[0]}ï¼‰**  
å…«å­—ï¼šæˆŠåœŸ å·±åœŸ åºšé‡‘ è¾›é‡‘  
ä»–çš„å‘½æ ¼ç©©é‡è¸å¯¦ï¼Œèˆ‡æ‚¨å½¢æˆå¾ˆå¥½çš„äº’è£œé—œä¿‚ã€‚

### 3. **é—œéµåˆ†æž**  
**äº”è¡Œäº’è£œæ€§**ï¼šæ‚¨å€‘çš„å…«å­—é…åˆåº¦å¾ˆé«˜ï¼Œèƒ½å¤ ç›¸äº’ä¿ƒé€²æˆé•·ã€‚
**é…å¶æ˜Ÿç‹€æ…‹**ï¼šç©©å›ºçš„å¤«å¦»æ˜Ÿé…ç½®ï¼Œç„¡éœ€æ“”å¿ƒã€‚
**éœ€æ³¨æ„çš„é…ç½®**ï¼šå°ˆæ³¨æ–¼é—œä¿‚ä¸­çš„æ­£é¢äº’å‹•ã€‚

æ‰€è¬‚çš„ã€Œå‰‹å¤«ã€èªªæ³•ç¼ºä¹æ ¹æ“šï¼Œå¯¦éš›ä¸Šæ‚¨å€‘çš„å…«å­—é…åˆåº¦å¾ˆé«˜ã€‚

### 4. **é¢¨æ°´è½‰åŒ–**  
âœ¦ åœ¨å®¶ä¸­æ“ºæ”¾ä»£è¡¨å’Œè«§çš„æˆå°ç‰©å“
âœ¦ ä½¿ç”¨æš–è‰²èª¿è£é£¾å¢žå¼·æ­£é¢èƒ½é‡

### 5. **æ­£å‘è½‰åŒ–æ–¹æ¡ˆ**  
â‘  å»ºç«‹å½¼æ­¤çš„ä¿¡å¿ƒå’Œæ”¯æŒ
â‘¡ å°ˆæ³¨æ–¼é—œä¿‚ä¸­çš„æ­£é¢äº’å‹•
â‘¢ å®šæœŸé€²è¡Œæ„Ÿæ©ç·´ç¿’ï¼Œå¼·åŒ–æ­£é¢èƒ½é‡`;break;default:l=`é‡å°æ‚¨çš„å•é¡Œã€Œ${a}ã€ï¼Œæˆ‘å€‘æä¾›ä»¥ä¸‹åŸºæœ¬å»ºè­°ï¼š

### é—œä¿‚å»ºè­°
1. **å¢žå¼·æºé€š**ï¼šå»ºè­°é›™æ–¹ä¿æŒé–‹æ”¾å’Œè€å¿ƒçš„å°è©±
2. **ç›¸äº’ç†è§£**ï¼šå°Šé‡å½¼æ­¤çš„å€‹æ€§å·®ç•°
3. **å…±åŒæˆé•·**ï¼šå»ºç«‹å…±åŒçš„ç›®æ¨™å’Œèˆˆè¶£

### é¢¨æ°´èª¿æ•´
- åœ¨è‡¥å®¤æ”¾ç½®æˆå°çš„ç‰©å“ï¼Œå¢žå¼·æ„Ÿæƒ…èƒ½é‡
- ä¿æŒå±…ä½ç’°å¢ƒæ•´æ½”å’Œè«§
- ä½¿ç”¨æš–è‰²èª¿è£é£¾å“

### æ—¥å¸¸ç¶­ç¹«
- å®šæœŸå®‰æŽ’ç´„æœƒæ™‚é–“
- è¨˜ä½å°æ–¹çš„å°ç´°ç¯€
- å»ºç«‹æ„Ÿæ©çš„ç¿’æ…£`}return i.NextResponse.json({success:!0,category:e,solution:l,specificProblem:a,fallback:!0,message:`ç”±æ–¼${n}ï¼Œæä¾›åŸºæ–¼å‚³çµ±å‘½ç†çš„åˆ†æžçµæžœ`})}let l=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/generate-category-solution/route",pathname:"/api/generate-category-solution",filename:"route",bundlePath:"app/api/generate-category-solution/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/generate-category-solution/route.js",nextConfigOutput:"",userland:r}),{workAsyncStorage:d,workUnitAsyncStorage:y,serverHooks:g}=l;function $(){return(0,m.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:y})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74474:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>p});var r=t(44794),n=t(42457),o=t(81540),m=t(14250),i=t(96002),s=t.n(i),h=t(22246);m.A.extend(r.t).extend(n.sM).extend(o.z0);let c=(0,m.A)(s()().format("YYYY-MM-DD")).char8.year.toString(),{LYGanzhiMap:u,LYzhiMap:l,LYStarMap:d,LYSihuaMap:y,spouseStarMap:g,spouseSihuaMap:$}=function(){let e=s()().format("YYYY"),a={},t={},r={},n={},o={},m={};for(let i=1;i<=12;i++){let s=e+"-"+(i<10?"0"+i:""+i)+"-15",c=h.astro.bySolar(s,0,"ç”·",!0,"zh-CN").horoscope(s);t[i]=c.monthly.earthlyBranch,a[i]=c.monthly.heavenlyStem+c.monthly.earthlyBranch,r[i]=c.palace("å‘½å®«","monthly").majorStars.map(e=>e.name).toString(),o[i]=c.palace("å¤«å¦»","monthly").majorStars.map(e=>e.name).toString(),n[i]=c.palace("å‘½å®«","monthly").mutagedPlaces().map(e=>e.name).toString(),m[i]=c.palace("å¤«å¦»","monthly").mutagedPlaces().map(e=>e.name).toString()}return{LYGanzhiMap:a,LYzhiMap:t,LYStarMap:r,LYSihuaMap:n,spouseStarMap:o,spouseSihuaMap:m}}();(function(){let e=s()().format("YYYY-MM-DD");(0,m.A)(e).char8.month.toString()})(),function(){let e=s()().format("YYYY-MM-DD");h.astro.bySolar(e,0,"ç”·",!0,"zh-CN").horoscope(e,0).palace("å¤«å¦»","yearly").majorStars.map(e=>e.name).toString()}();let S={};function p(e,a){var t;let r=s()(e).format("YYYY-MM-DD HH:mm:ss");if(console.log("birthStr",r),S[r+"-"+a])return S[r+"-"+a];let n=Math.floor(s()(e).hour()/2),o=s()(e).format("YYYY-MM-DD"),i=h.astro.bySolar(o,n,"female"==a?"å¥³":"ç”·",!0,"zh-CN"),u=i.palace("å‘½å®«"),l=i.palace("èº«å®«"),d=i.palace("è¿ç§»").majorStars.map(e=>e.name).toString(),y=i.horoscope(o,n),g=(0,m.A)(r),$=function(e,a,t,r,n,o,m,i){let s={é‡‘:0,æœ¨:0,æ°´:0,ç«:0,åœŸ:0},h=[e,a,t,r,n,o,m,i];h.forEach(e=>{["é‡‘","æœ¨","æ°´","ç«","åœŸ"].includes(e)&&s[e]++});let c=h.length;return`é‡‘:${(s.é‡‘/c*100).toFixed(2)}%ï¼Œæœ¨:${(s.æœ¨/c*100).toFixed(2)}%ï¼Œæ°´:${(s.æ°´/c*100).toFixed(2)}%ï¼Œç«:${(s.ç«/c*100).toFixed(2)}%ï¼ŒåœŸ:${(s.åœŸ/c*100).toFixed(2)}%`}(g.char8.year.stem.e5.name,g.char8.year.branch.e5.name,g.char8.month.stem.e5.name,g.char8.month.branch.e5.name,g.char8.day.stem.e5.name,g.char8.day.branch.e5.name,g.char8.hour.stem.e5.name,g.char8.hour.branch.e5.name),p=g.char8.day.branch.hiddenStems.map(e=>e.name).toString(),b=g.char8.year.branch.hiddenStems,f=g.char8.month.branch.hiddenStems,k=g.char8.day.branch.hiddenStems,B=g.char8.hour.branch.hiddenStems,Y=g.char8ex(+("female"!==a)),P=Y.year,W=Y.month,T=Y.day,A=Y.hour,v={nayin:g.char8.year.takeSound,wuxingJu:(t=g.char8.year.takeSoundE5.toString(),`${t}${x[t]}å±€`),year:g.char8.year.toString(),month:g.char8.month.toString(),day:g.char8.day.toString(),hour:g.char8.hour.toString(),wuxingScale:$,rizhiCanggan:p,mingPalace:`{ä¸»æ˜Ÿï¼š${u.majorStars.map(e=>e.name).toString()},ä¸»æ˜Ÿäº®åº¦ï¼š${u.majorStars.map(e=>e.brightness||"").toString()}, è¾…æ˜Ÿï¼š ${u.minorStars.map(e=>e.name).toString()}, å››åŒ–ï¼š${u.mutagedPlaces().map(e=>e.name).toString()}}`,bodyPalace:`{ä¸»æ˜Ÿï¼š${l.majorStars.map(e=>e.name).toString()},ä¸»æ˜Ÿäº®åº¦ï¼š${l.majorStars.map(e=>e.brightness||"").toString()}, è¾…æ˜Ÿï¼š ${l.minorStars.map(e=>e.name).toString()}, å››åŒ–ï¼š${l.mutagedPlaces().map(e=>e.name).toString()}}`,qianyiPalace:d,dayunGanzhi:y.decadal.heavenlyStem+y.decadal.earthlyBranch,liunianGanzhi:c,yearStemTenGod:P.stemTenGod.name,yearBranchTenGod:P.branchTenGod.map(e=>e.name).toString(),monthStemTenGod:W.stemTenGod.name,monthBranchTenGod:W.branchTenGod.map(e=>e.name).toString(),dayStemTenGod:T.stemTenGod.name,dayBranchTenGod:T.branchTenGod.map(e=>e.name).toString(),hourStemTenGod:A.stemTenGod.name,hourBranchTenGod:A.branchTenGod.map(e=>e.name).toString(),yearGods:P.gods.map(e=>e.name).toString(),monthGods:W.gods.map(e=>e.name).toString(),dayGods:T.gods.map(e=>e.name).toString(),yearStem:g.char8.year.stem.name,yearStemWuxing:g.char8.year.stem.e5.name,yearBranch:g.char8.year.branch.name,yearBranchWuxing:g.char8.year.branch.e5.name,monthStem:g.char8.month.stem.name,monthStemWuxing:g.char8.month.stem.e5.name,monthBranch:g.char8.month.branch.name,monthBranchWuxing:g.char8.month.branch.e5.name,dayStem:g.char8.day.stem.name,dayStemWuxing:g.char8.day.stem.e5.name,dayBranch:g.char8.day.branch.name,dayBranchWuxing:g.char8.day.branch.e5.name,hourStem:g.char8.hour.stem.name,hourStemWuxing:g.char8.hour.stem.e5.name,hourBranch:g.char8.hour.branch.name,hourBranchWuxing:g.char8.hour.branch.e5.name,yearNayin:g.char8.year.takeSound,monthNayin:g.char8.month.takeSound,dayNayin:g.char8.day.takeSound,hourNayin:g.char8.hour.takeSound,yearNayinWuxing:g.char8.year.takeSoundE5.toString(),monthNayinWuxing:g.char8.month.takeSoundE5.toString(),dayNayinWuxing:g.char8.day.takeSoundE5.toString(),hourNayinWuxing:g.char8.hour.takeSoundE5.toString(),yearBranchHiddenStems:b.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),monthBranchHiddenStems:f.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),dayBranchHiddenStems:k.map(e=>({stem:e.name,element:e.e5.name,strength:e.value})),hourBranchHiddenStems:B.map(e=>({stem:e.name,element:e.e5.name,strength:e.value}))};return S[r+"-"+a]=v,console.log("result",v),v}let x={æ°´:"äºŒ",æœ¨:"ä¸‰",é‡‘:"å››",åœŸ:"äº”",ç«:"å…­"}},78335:()=>{},96487:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[7719,580,6219],()=>t(43104));module.exports=r})();