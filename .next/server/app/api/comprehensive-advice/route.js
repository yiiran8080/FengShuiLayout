(()=>{var e={};e.id=6875,e.ids=[6875],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},40149:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>h});var n={};t.r(n),t.d(n,{POST:()=>u});var o=t(96559),s=t(48088),i=t(37719),a=t(32190),l=t(51367);let c=process.env.DEEPSEEK_API_KEY;async function u(e){let r=Math.random().toString(36).substring(2,15),t=null,n=null,o=null;try{let s;let i=await e.text();if(!i)return console.error("Empty request body received"),a.NextResponse.json({error:"Empty request body"},{status:400});try{s=JSON.parse(i)}catch(e){return console.error("JSON parse error:",e.message,"Body:",i),a.NextResponse.json({error:"Invalid JSON in request body"},{status:400})}let{pillar:u,userInfo:p}=s;if(!u||!p)return a.NextResponse.json({error:"Missing required parameters: pillar or userInfo"},{status:400});t=(0,l.hz)("comprehensive-advice",p,{pillar:u}),console.log(`[${r}] Cache key: ${t}`);let d=(0,l.I7)(t,r);if(d)return a.NextResponse.json(d);let h=await (0,l.Xu)(t,r);if(h)return a.NextResponse.json(h);let g=(0,l.NG)(t,r);n=g.resolvePending,o=g.rejectPending;let m=`ä½ æ˜¯è³‡æ·±çš„å…«å­—å‘½ç†å¸«ï¼Œéœ€è¦æ ¹æ“šç”¨æˆ¶çš„${u}ä¿¡æ¯ï¼Œæä¾›ç¶œåˆèª¿ç†èˆ‡äººç”Ÿå»ºè­°ã€‚

ç”¨æˆ¶ä¿¡æ¯ï¼š
- å§“åï¼š${p.name}
- æ€§åˆ¥ï¼š${"male"===p.gender?"ç”·":"å¥³"}
- å‡ºç”Ÿæ—¥æœŸï¼š${p.birthDate}
- å‡ºç”Ÿæ™‚é–“ï¼š${p.birthTime}
- å‡ºç”Ÿåœ°é»žï¼š${p.location}
- ${u}ï¼š${u}ç›¸é—œçš„å‘½ç†ä¿¡æ¯

è«‹å¾žä»¥ä¸‹è§’åº¦æä¾›ç¶œåˆäººç”Ÿå»ºè­°ï¼š

1. **äº‹æ¥­ç™¼å±•å»ºè­°**
   - é©åˆçš„äº‹æ¥­æ–¹å‘å’Œç™¼å±•ç­–ç•¥
   - äº‹æ¥­ç™¼å±•çš„é—œéµæ™‚æ©Ÿå’Œæ³¨æ„äº‹é …

2. **å¥åº·é¤Šç”Ÿè¦é»ž**
   - æ ¹æ“šå‘½ç†ç‰¹è³ªçš„é¤Šç”Ÿå»ºè­°
   - é é˜²ç–¾ç—…å’Œä¿æŒå¥åº·çš„æ–¹æ³•

3. **è²¡é‹ç®¡ç†æ™ºæ…§**
   - ç†è²¡å’ŒæŠ•è³‡çš„å»ºè­°
   - å¢žå¼·è²¡é‹çš„æ–¹æ³•

4. **æ„Ÿæƒ…é—œä¿‚æŒ‡å¼•**
   - æ„Ÿæƒ…ç™¼å±•çš„å»ºè­°å’Œæ³¨æ„äº‹é …
   - ç¶­ç¹«è‰¯å¥½æ„Ÿæƒ…é—œä¿‚çš„è¦é»ž

5. **äººç”Ÿè¦åŠƒæ–¹å‘**
   - äººç”Ÿä¸åŒéšŽæ®µçš„é‡é»žè¦åŠƒ
   - å¯¦ç¾äººç”Ÿç›®æ¨™çš„ç­–ç•¥

è«‹ä»¥å°ˆæ¥­ã€é—œæ‡·çš„èªžèª¿æä¾›å»ºè­°ï¼Œæ¯å€‹è¦é»žéƒ½è¦å¯¦ç”¨ä¸”å…·æœ‰æŒ‡å°Žæ„ç¾©ã€‚
è¿”å›žæ ¼å¼å¿…é ˆæ˜¯ç´”JSONï¼ŒåŒ…å«ä»¥ä¸‹çµæ§‹ï¼š
{
    "careerDevelopment": "äº‹æ¥­ç™¼å±•å»ºè­°",
    "healthWellness": "å¥åº·é¤Šç”Ÿè¦é»ž",
    "wealthManagement": "è²¡é‹ç®¡ç†æ™ºæ…§",
    "relationshipGuidance": "æ„Ÿæƒ…é—œä¿‚æŒ‡å¼•",
    "lifeDirection": "äººç”Ÿè¦åŠƒæ–¹å‘"
}`;try{let e;let o=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:m}],temperature:.7,max_tokens:1200})});if(!o.ok)throw Error(`DeepSeek API error: ${o.status}`);let s=await o.json(),i=s.choices[0]?.message?.content;if(!i)throw Error("No content received from DeepSeek API");let u=i;i.includes("```json")?u=i.replace(/```json\s*/g,"").replace(/\s*```/g,""):i.includes("```")&&(u=i.replace(/```\s*/g,"").replace(/\s*```/g,""));try{e=JSON.parse(u)}catch(e){throw console.error("Error parsing AI response:",e),console.error("Raw content:",i),console.error("Cleaned content:",u),Error("Invalid JSON response from AI")}for(let r of["careerDevelopment","healthWellness","wealthManagement","relationshipGuidance","lifeDirection"])if(!e[r])throw Error(`Missing required field: ${r}`);let p={success:!0,analysis:e,requestId:r,aiGenerated:!0,timestamp:new Date().toISOString()};return(0,l.e0)(t,p,r),(0,l.dV)(t,p,r,n),a.NextResponse.json(p)}catch(r){console.error("AI API Error:",r);let e={å¹´æŸ±:{careerDevelopment:"å¹´æŸ±ä»£è¡¨æ—©æœŸç™¼å±•åŸºç¤Žï¼Œå»ºè­°é¸æ“‡èƒ½ç™¼æ®å‰µæ„å’Œç†±æƒ…çš„å·¥ä½œã€‚é©åˆå¾žåŸºå±¤åšèµ·ï¼Œç´®å¯¦ç´¯ç©ç¶“é©—ã€‚é‡è¦–å­¸ç¿’æ©Ÿæœƒï¼Œç‚ºæœªä¾†ç™¼å±•å¥ å®šåŸºç¤Žã€‚",healthWellness:"æ³¨æ„å¿ƒè¡€ç®¡å’Œç¥žç¶“ç³»çµ±çš„å¥åº·ã€‚ä¿æŒè¦å¾‹çš„ä½œæ¯æ™‚é–“ï¼Œå¤šåšæˆ¶å¤–é‹å‹•ã€‚å¹´è¼•æ™‚é¤Šæˆè‰¯å¥½çš„é£²é£Ÿç¿’æ…£ï¼Œé¿å…éŽåº¦ç†¬å¤œå’Œå£“åŠ›ã€‚",wealthManagement:"ç†è²¡è§€å¿µéœ€è¦å¾žå¹´è¼•æ™‚åŸ¹é¤Šï¼Œå»ºè­°æŽ¡ç”¨ç©©å¥çš„æŠ•è³‡ç­–ç•¥ã€‚é¿å…é«˜é¢¨éšªæŠ•è³‡ï¼Œé‡è¦–å„²è“„ç¿’æ…£çš„å»ºç«‹ã€‚å­¸æœƒè¨˜å¸³å’Œé ç®—ç®¡ç†ã€‚",relationshipGuidance:"æ„Ÿæƒ…æ–¹é¢è¼ƒç‚ºç´”çœŸï¼Œå®¹æ˜“å…¨å¿ƒæŠ•å…¥ã€‚å»ºè­°ä¿æŒç†æ€§ï¼Œä¸è¦éŽæ–¼æ€¥èºã€‚å­¸æœƒè§€å¯Ÿå°æ–¹çš„çœŸå¯¦æ€§æ ¼ï¼Œå»ºç«‹ç©©å›ºçš„æ„Ÿæƒ…åŸºç¤Žã€‚",lifeDirection:"äººç”Ÿè¦åŠƒæ‡‰è©²æ³¨é‡åŸºç¤Žå»ºè¨­ï¼ŒåŒ…æ‹¬æ•™è‚²ã€æŠ€èƒ½å’Œäººéš›é—œä¿‚ã€‚è¨­å®šæ¸…æ™°çš„çŸ­æœŸå’Œé•·æœŸç›®æ¨™ï¼Œä¿æŒå­¸ç¿’çš„å¿ƒæ…‹ï¼Œç‚ºæœªä¾†ç™¼å±•åšå¥½æº–å‚™ã€‚"},æœˆæŸ±:{careerDevelopment:"æœˆæŸ±å½±éŸ¿äº‹æ¥­ç™¼å±•çš„ä¸­æœŸéšŽæ®µï¼Œé©åˆåœ˜éšŠåˆä½œå’Œç®¡ç†è·ä½ã€‚å–„æ–¼æºé€šå”èª¿ï¼Œå¯ä»¥è€ƒæ…®äººåŠ›è³‡æºã€å…¬é—œæˆ–è«®è©¢é¡žå·¥ä½œã€‚",healthWellness:"æ³¨æ„æ¶ˆåŒ–ç³»çµ±å’Œå…ç–«ç³»çµ±çš„ä¿é¤Šã€‚ä¿æŒå‡è¡¡çš„é£²é£Ÿï¼Œé©åº¦é‹å‹•ã€‚æƒ…ç·’ç®¡ç†å¾ˆé‡è¦ï¼Œå­¸æœƒé‡‹æ”¾å£“åŠ›ï¼Œä¿æŒå¿ƒç†å¥åº·ã€‚",wealthManagement:"è²¡é‹è¼ƒç‚ºç©©å®šï¼Œé©åˆé•·æœŸæŠ•è³‡ã€‚å¯ä»¥è€ƒæ…®å®šæœŸå®šé¡æŠ•è³‡ï¼Œåˆ†æ•£é¢¨éšªã€‚é¿å…è·Ÿé¢¨æŠ•è³‡ï¼Œè¦æœ‰è‡ªå·±çš„åˆ¤æ–·å’Œç­–ç•¥ã€‚",relationshipGuidance:"æ„Ÿæƒ…ç™¼å±•è¼ƒç‚ºé †åˆ©ï¼Œå–„æ–¼ç¶­ç¹«é—œä¿‚ã€‚å»ºè­°åœ¨æ„Ÿæƒ…ä¸­ä¿æŒç¨ç«‹æ€§ï¼Œä¸è¦éŽåº¦ä¾è³´å°æ–¹ã€‚é‡è¦–ç²¾ç¥žå±¤é¢çš„äº¤æµã€‚",lifeDirection:"äººç”Ÿä¸­æœŸæ˜¯é—œéµç™¼å±•éšŽæ®µï¼Œè¦åœ¨äº‹æ¥­å’Œå®¶åº­ä¹‹é–“æ‰¾åˆ°å¹³è¡¡ã€‚å»ºè­°åˆ¶å®šæ˜Žç¢ºçš„ç™¼å±•è¨ˆåŠƒï¼ŒåŒæ™‚ç•™æ„å¥åº·å’Œäººéš›é—œä¿‚çš„ç¶­è­·ã€‚"},æ—¥æŸ±:{careerDevelopment:"æ—¥æŸ±ä»£è¡¨æ ¸å¿ƒèƒ½åŠ›ï¼Œé©åˆç¨ç•¶ä¸€é¢çš„å·¥ä½œã€‚å…·æœ‰é ˜å°Žæ½›è³ªï¼Œå¯ä»¥è€ƒæ…®å‰µæ¥­æˆ–é«˜éšŽä¸»ç®¡è·ä½ã€‚é‡è¦–å°ˆæ¥­èƒ½åŠ›çš„æå‡ã€‚",healthWellness:"èº«é«”ç´ è³ªè¼ƒå¥½ï¼Œä½†è¦æ³¨æ„éŽåº¦å‹žç´¯ã€‚å®šæœŸé«”æª¢ï¼Œé é˜²è·æ¥­ç—…ã€‚ä¿æŒå·¥ä½œèˆ‡ç”Ÿæ´»çš„å¹³è¡¡ï¼Œé¿å…éŽåº¦é€æ”¯å¥åº·ã€‚",wealthManagement:"å…·æœ‰è‰¯å¥½çš„ç†è²¡èƒ½åŠ›ï¼Œå¯ä»¥å˜—è©¦å¤šå…ƒåŒ–æŠ•è³‡ã€‚ä½†è¦é¿å…éŽåº¦è‡ªä¿¡ï¼Œä¿æŒè¬¹æ…Žçš„æ…‹åº¦ã€‚å»ºè­°å°‹æ±‚å°ˆæ¥­çš„è²¡å‹™è«®è©¢ã€‚",relationshipGuidance:"åœ¨æ„Ÿæƒ…ä¸­è¼ƒç‚ºä¸»å°Žï¼Œä½†è¦å­¸æœƒå‚¾è½å’ŒåŒ…å®¹ã€‚é¿å…éŽåº¦æŽ§åˆ¶ï¼Œçµ¦å°æ–¹é©ç•¶çš„ç©ºé–“ã€‚é‡è¦–æºé€šçš„å“è³ªã€‚",lifeDirection:"äººç”Ÿç›®æ¨™è¼ƒç‚ºæ˜Žç¢ºï¼ŒåŸ·è¡ŒåŠ›å¼·ã€‚å»ºè­°åœ¨è¿½æ±‚æˆåŠŸçš„åŒæ™‚ï¼Œä¹Ÿè¦é—œæ³¨å…§å¿ƒçš„å¹³è¡¡å’Œç²¾ç¥žå±¤é¢çš„æˆé•·ã€‚"},æ™‚æŸ±:{careerDevelopment:"æ™‚æŸ±ä»£è¡¨æ™šå¹´ç™¼å±•ï¼Œé©åˆå‚³æ‰¿å’ŒæŒ‡å°Žæ€§è³ªçš„å·¥ä½œã€‚å¯ä»¥è€ƒæ…®é¡§å•ã€æ•™è‚²æˆ–å…¬ç›Šäº‹æ¥­ã€‚é‡è¦–ç¶“é©—çš„å‚³æ‰¿å’Œæ™ºæ…§çš„åˆ†äº«ã€‚",healthWellness:"æ³¨æ„éª¨éª¼å’Œé—œç¯€çš„ä¿é¤Šï¼Œé©åˆä½Žå¼·åº¦çš„é‹å‹•å¦‚å¤ªæ¥µã€æ•£æ­¥ã€‚ä¿æŒè¦å¾‹çš„ç”Ÿæ´»ä½œæ¯ï¼Œé‡è¦–ç²¾ç¥žå¥åº·å’Œç¤¾äº¤æ´»å‹•ã€‚",wealthManagement:"è²¡å‹™ç®¡ç†è¶¨æ–¼ä¿å®ˆï¼Œé‡è¦–è³‡ç”¢çš„ä¿å€¼ã€‚å»ºè­°é¸æ“‡ç©©å¥çš„æŠ•è³‡å·¥å…·ï¼Œç‚ºå­å¥³å’Œæ™šå¹´ç”Ÿæ´»åšå¥½è¦åŠƒã€‚",relationshipGuidance:"æ„Ÿæƒ…è¼ƒç‚ºæˆç†Ÿç©©é‡ï¼Œé‡è¦–å®¶åº­å’Œè«§ã€‚å»ºè­°å¤šèŠ±æ™‚é–“é™ªä¼´å®¶äººï¼Œç¶“ç‡Ÿè·¨ä»£é—œä¿‚ã€‚ä¿æŒé–‹æ”¾çš„å¿ƒæ…‹æŽ¥å—æ–°è§€å¿µã€‚",lifeDirection:"äººç”Ÿæ™šæœŸé‡è¦–ç²¾ç¥žæ»¿è¶³å’Œç¤¾æœƒè²¢ç»ã€‚å»ºè­°ç™¼æ®è‡ªå·±çš„ç¶“é©—å’Œæ™ºæ…§ï¼Œå¹«åŠ©ä»–äººæˆé•·ã€‚ä¿æŒå­¸ç¿’çš„å¿ƒæ…‹ï¼Œäº«å—äººç”Ÿçš„æ¯å€‹éšŽæ®µã€‚"}};return a.NextResponse.json({success:!0,analysis:e[u]||e["æ—¥æŸ±"]})}}catch(e){return console.error("API Error:",e),(0,l.ME)(t,e,r,o),a.NextResponse.json({error:"Internal server error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/comprehensive-advice/route",pathname:"/api/comprehensive-advice",filename:"route",bundlePath:"app/api/comprehensive-advice/route"},resolvedPagePath:"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/api/comprehensive-advice/route.js",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:h,serverHooks:g}=p;function m(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:h})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51367:(e,r,t)=>{"use strict";t.d(r,{I7:()=>l,ME:()=>h,NG:()=>u,Xu:()=>c,dV:()=>d,e0:()=>p,hz:()=>i});let n=new Map,o=new Map,s={TTL:36e5,MAX_SIZE:1e3};function i(e,r,t={}){if(!r?.birthDateTime)return null;let n=new Date(r.birthDateTime),o=`${e}_${n.getFullYear()}_${n.getMonth()}_${n.getDate()}_${n.getHours()}_${r.gender||""}`,s=Object.keys(t).sort();return o+(s.length>0?"_"+s.map(e=>`${e}:${t[e]}`).join("_"):"")}function a(e){return Date.now()-e.timestamp>s.TTL}function l(e,r){if(!e||!n.has(e))return null;let t=n.get(e);return a(t)?(n.delete(e),console.log(`[${r}] ðŸ—‘ï¸ Removed expired cache for ${e}`),null):(console.log(`[${r}] ðŸŽ¯ RETURNING CACHED RESULT for ${e}`),{...t.data,cached:!0,requestId:r,originalRequestId:t.originalRequestId,cacheAge:Date.now()-t.timestamp})}async function c(e,r){if(!e||!o.has(e))return null;console.log(`[${r}] ðŸš¨ REQUEST ALREADY PENDING for ${e}, waiting...`);try{let t=await o.get(e);return console.log(`[${r}] âœ… Got result from pending request`),{...t,waitedForResult:!0,requestId:r,originalRequestId:t.requestId}}catch(t){return console.log(`[${r}] âš ï¸ Pending request failed, proceeding with new request`),o.delete(e),null}}function u(e,r){let t,n;if(!e)return{resolvePending:null,rejectPending:null};let s=new Promise((e,r)=>{t=e,n=r});return o.set(e,s),console.log(`[${r}] ðŸ”„ Created pending request for ${e}`),{resolvePending:t,rejectPending:n}}function p(e,r,t){if(!e)return;n.size>.8*s.MAX_SIZE&&function(){for(let[e,r]of n.entries())a(r)&&n.delete(e);n.size>s.MAX_SIZE&&Array.from(n.entries()).sort((e,r)=>e[1].timestamp-r[1].timestamp).slice(0,n.size-s.MAX_SIZE).forEach(([e])=>n.delete(e))}();let o={data:r,timestamp:Date.now(),originalRequestId:r.requestId||t};n.set(e,o),console.log(`[${t}] âœ… CACHED result for ${e}`)}function d(e,r,t,n){e&&n&&(n(r),o.delete(e),console.log(`[${t}] âœ… Resolved pending promise for ${e}`))}function h(e,r,t,n){e&&n&&(n(r),o.delete(e),console.log(`[${t}] ðŸš¨ Rejected pending promise for ${e}`))}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[7719,580],()=>t(40149));module.exports=n})();