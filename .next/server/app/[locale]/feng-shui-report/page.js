(()=>{var e={};e.id=5787,e.ids=[5787],e.modules={1987:(e,r,n)=>{"use strict";n.r(r),n.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=n(65239),t=n(48088),i=n(88170),l=n.n(i),a=n(30893),o={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);n.d(r,o);let c={children:["",{children:["[locale]",{children:["feng-shui-report",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,83147)),"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/[locale]/feng-shui-report/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,11434)),"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/[locale]/layout.tsx"],error:[()=>Promise.resolve().then(n.bind(n,66196)),"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/[locale]/error.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,94431)),"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.bind(n,54413)),"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/[locale]/feng-shui-report/page.jsx"],m={require:n,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/[locale]/feng-shui-report/page",pathname:"/[locale]/feng-shui-report",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13071:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>S});var s=n(60687),t=n(43210),i=n(16189),l=n(93613),a=n(84116),o=n(16438),c=n(45367),d=n(68906);n(33989);var m=n(72815),h=n(68284),u=n(52402),x=n(56475),p=n(62858),g=n(39653);function b({userInfo:e}){let[r,n]=(0,t.useState)(null),[i,l]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null);if(!e||!e.problem)return null;let c=(0,g.y_)(e);return(console.log("\uD83C\uDFA8 QuestionFocus Color Debug:",{userInfo:e,concern:e?.concern,themeColor:c,colorMapping:{財運:"#D09900",财运:"#D09900",感情:"#C74772",健康:"#389D7D",事業:"#3263C4",事业:"#3263C4"}}),i)?(0,s.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[95%] mx-auto bg-white rounded-[45px] p-6 sm:p-8 lg:p-10 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block w-8 h-8 mb-4 border-b-2 rounded-full animate-spin",style:{borderColor:c}}),(0,s.jsx)("p",{className:"text-gray-600",children:"AI正在分析您的問題..."})]})})}):a&&!r?(0,s.jsx)("section",{className:"w-full sm:w-[95%] lg:w-[95%] mx-auto bg-white rounded-[45px] p-6 sm:p-8 lg:p-10 mb-6 sm:mb-10 shadow-[0_4px_5.3px_rgba(0,0,0,0.25)]",children:(0,s.jsx)("div",{className:"py-10 text-center",children:(0,s.jsx)("p",{className:"text-red-600",children:"分析服務暫時不可用，請稍後再試"})})}):(0,s.jsxs)("section",{className:"w-full sm:w-[95%] lg:w-[95%] mx-auto p-6 sm:p-8 lg:p-10 mb-6 sm:mb-10 ",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"border-4 rounded-[30px] bg-white p-6 mb-6",style:{borderColor:c},children:[(0,s.jsx)("h2",{className:"text-center text-[32px] font-bold mb-4",style:{fontFamily:"Noto Serif TC, serif",color:c},children:"疑問重點"}),(0,s.jsx)("div",{className:"text-center text-[18px] leading-relaxed px-4",style:{fontFamily:"Noto Sans HK, sans-serif",color:"#333"},children:e.problem})]})}),(0,s.jsxs)("div",{className:"border-4 rounded-[30px] bg-white p-8",style:{borderColor:c},children:[(0,s.jsx)("h3",{className:"text-center text-[32px] font-bold mb-6",style:{fontFamily:"Noto Serif TC, serif",color:c},children:r.title}),(0,s.jsx)("div",{className:"text-[16px] leading-relaxed text-center px-4",style:{fontFamily:"Noto Sans HK, sans-serif",color:"#333",lineHeight:"1.8"},children:r.content})]})]})}let f=({savedContent:e,userInputs:r})=>{if(!e)return(0,s.jsx)("div",{children:"No saved content available"});let n=(e,r)=>r?(0,s.jsxs)("div",{className:"mb-6 p-6 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:e}),(0,s.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap",children:"string"==typeof r?r:JSON.stringify(r,null,2)})]}):null;return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"已保存的風水報告"}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h2",{className:"font-semibold text-blue-800 mb-2",children:"報告基本信息："}),(0,s.jsxs)("div",{className:"text-blue-700",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"生日："}),r?.birthday]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"性別："}),r?.gender]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"關注領域："}),r?.concern]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"具體問題："}),r?.problem]}),r?.partnerBirthday&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"伴侶生日："}),r.partnerBirthday]})]})]})]}),((e,r)=>r?(0,s.jsxs)("div",{className:"mb-6 p-6 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:e}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(r).map(([e,r])=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-800 mb-2",children:[e,":"]}),(0,s.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap ml-4",children:"string"==typeof r?r:JSON.stringify(r,null,2)})]},e))})]}):null)("基礎分析",e.basicAnalysis),n("五行分析",e.fiveElementAnalysis),n("生肖分析",e.zodiacAnalysis),n("流年關鍵詞分析",e.liuNianKeyWordAnalysis),n("命局分析",e.mingJuAnalysis),n("干支分析",e.ganZhiAnalysis),n("吉凶分析",e.jiXiongAnalysis),n("季節分析",e.seasonAnalysis),n("核心建議",e.coreSuggestionAnalysis),n("具體建議",e.specificSuggestionAnalysis),e.coupleAnalysis&&n("配對分析",e.coupleAnalysis)]})};var y=n(29200),j=n(10557),v=n(53234),N=n(67821);function S(){let[e,r]=(0,t.useState)(null),[n,S]=(0,t.useState)(!0),[w,F]=(0,t.useState)(null);(0,i.useSearchParams)();let A=(0,i.useRouter)(),D=e=>{if(!e?.birthDateTime)return null;let r=(0,y.Ay)(e.birthDateTime,e.gender||"male");if(!r)return null;let n={金:0,木:0,水:0,火:0,土:0};r.yearStemWuxing&&n[r.yearStemWuxing]++,r.yearBranchWuxing&&n[r.yearBranchWuxing]++,r.monthStemWuxing&&n[r.monthStemWuxing]++,r.monthBranchWuxing&&n[r.monthBranchWuxing]++,r.dayStemWuxing&&n[r.dayStemWuxing]++,r.dayBranchWuxing&&n[r.dayBranchWuxing]++,r.hourStemWuxing&&n[r.hourStemWuxing]++,r.hourBranchWuxing&&n[r.hourBranchWuxing]++;let s=Object.entries(n).filter(([e,r])=>0===r).map(([e,r])=>e);return{wuxingData:r,elementCounts:n,missingElements:s}},W=e=>{let r=Object.values(e).reduce((e,r)=>e+r,0),n=[],s=[];Object.entries(e).forEach(([e,t])=>{t/r*100>=25?n.push(e):0===t&&s.push(e)});let t="";if(1===n.length)t=`${n[0]}旺`;else if(2===n.length)t=`${n.join("")}兩旺`;else if(n.length>=3)t=`${n.slice(0,2).join("")}等多旺`;else{let r=Math.max(...Object.values(e)),n=Object.entries(e).find(([e,n])=>n===r)?.[0];t=n?`${n}為主`:"五行平衡"}return{strongElements:n,weakElements:s,strengthDesc:t,elementCounts:e}},_=e=>{let{strongElements:r,weakElements:n,elementCounts:s}=e,t=["木","火","土","金","水"],i="",l="",a="";if(n.length>0){if(i=n[0],n.length>1)l=n[1];else{let e=t.indexOf(i);l=t[(e-1+5)%5]}a="補缺"}else if(0===r.length){let e=Math.min(...Object.values(s));i=Object.entries(s).filter(([r,n])=>n===e).map(([e,r])=>e)[0];let r=t.indexOf(i);l=t[(r-1+5)%5],a="扶弱"}else if(r.length>=2){let e=r[0],n=(t.indexOf(e)+1)%5;i=t[n],l=t[(n+1)%5],a="抑強"}else if(1===r.length){let e=r[0],n=t.indexOf(e);i=t[(n+1)%5],l=t[(n+2)%5],a="瀉強"}return{primaryGod:i,auxiliaryGod:l,strategy:a}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 border-b-2 border-purple-600 rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-gray-600",children:"正在檢查你的專屬風水分析報告..."}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"如果報告已存在，將直接顯示"})]})}):w?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(l.A,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),(0,s.jsx)("p",{className:"mb-4 text-red-600",children:w}),(0,s.jsx)("button",{onClick:()=>A.back(),className:"px-6 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700",children:"返回"})]})}):e?.isHistoricalReport?(0,s.jsxs)("div",{className:"min-h-screen bg-[#EFEFEF]",children:[(0,s.jsx)(v.default,{from:"report"}),(0,s.jsxs)("div",{className:"container w-full px-4 py-8 mx-auto",style:{paddingTop:"80px"},children:[(0,s.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-yellow-800",children:[(0,s.jsx)("strong",{children:"注意："}),"您正在查看已保存的歷史報告內容。",(0,s.jsx)("a",{href:`${window.location.pathname}${window.location.search.replace("showHistorical=true","").replace("&showHistorical=true","").replace("?showHistorical=true&","?")}`,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"點擊這裡生成新的報告"})]})}),(0,s.jsx)(f,{savedContent:e.savedReportContent,userInputs:{birthday:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem,partnerBirthday:e.partnerBirthday}})]}),(0,s.jsx)(N.A,{})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-[#EFEFEF]",children:[(0,s.jsx)(v.default,{from:"report"}),(0,s.jsx)(j.oo,{children:(0,s.jsxs)("div",{className:"container w-full px-4 py-8 mx-auto",style:{paddingTop:"80px"},children:[(0,s.jsx)("div",{className:"mb-8",style:{marginLeft:"5%"},children:(0,s.jsx)("h1",{className:"mb-2 font-extrabold",style:{fontFamily:"Noto Serif TC, Serif",fontWeight:800,fontSize:"60px",color:(0,g.y_)({concern:e?.concern})},children:"命主基礎分析"})}),e&&(0,s.jsx)("div",{className:"mb-6",style:{width:"100%"},children:(0,s.jsx)(a.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender},calculateWuxingAnalysis:D,analyzeWuxingStrength:W,determineUsefulGods:_})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(o.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},calculateWuxingAnalysis:D,analyzeWuxingStrength:W,determineUsefulGods:_})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(b,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem}})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(c.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},currentYear:new Date().getFullYear()})}),(0,s.jsx)("div",{className:"mb-8",style:{marginLeft:"5%"},children:(0,s.jsx)("h1",{className:"mb-2 font-extrabold",style:{fontFamily:"Noto Serif TC, Serif",fontWeight:800,fontSize:"60px",color:(0,g.y_)({concern:e?.concern})},children:"命局核心解析詳解"})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(d.V,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},currentYear:new Date().getFullYear()})}),(0,s.jsx)("div",{className:"mb-8",style:{marginLeft:"5%"},children:(0,s.jsx)("h1",{className:"mb-2 font-extrabold",style:{fontFamily:"Noto Serif TC, Serif",fontWeight:800,fontSize:"60px",color:(0,g.y_)({concern:e?.concern})},children:"2025乙巳流年詳解"})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(m.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},currentYear:new Date().getFullYear()})}),(0,s.jsx)("div",{className:"mb-8",style:{marginLeft:"5%"},children:(0,s.jsx)("h1",{className:"mb-2 font-extrabold",style:{fontFamily:"Noto Serif TC, Serif",fontWeight:800,fontSize:"60px",color:(0,g.y_)({concern:e?.concern})},children:{財運:"流年財運總結",财运:"流年財運總結",感情:"流年感情總結",健康:"流年健康總結",事業:"流年事業總結",事业:"流年事業總結"}[e?.concern]||"流年運勢總結"})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(h.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},calculateWuxingAnalysis:D,analyzeWuxingStrength:W,determineUsefulGods:_})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(u.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},currentYear:new Date().getFullYear()})}),(0,s.jsx)("div",{className:"mb-8",style:{marginLeft:"5%"},children:(0,s.jsx)("h1",{className:"mb-2 font-extrabold",style:{fontFamily:"Noto Serif TC, Serif",fontWeight:800,fontSize:"60px",color:(0,g.y_)({concern:e?.concern})},children:"開運建議"})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(x.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},currentYear:new Date().getFullYear()})}),e&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(p.A,{userInfo:{birthDateTime:e.birthday,gender:e.gender,concern:e.concern,problem:e.problem},currentYear:new Date().getFullYear()})})]})}),(0,s.jsx)(N.A,{})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},58341:(e,r,n)=>{Promise.resolve().then(n.bind(n,13071))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64421:(e,r,n)=>{Promise.resolve().then(n.bind(n,83147))},79551:e=>{"use strict";e.exports=require("url")},83147:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>s});let s=(0,n(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/[locale]/feng-shui-report/page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/michaelng/Desktop/HarmoniqFengShui/FengShuiLayout/src/app/[locale]/feng-shui-report/page.jsx","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var n=e=>r(r.s=e),s=r.X(0,[7719,7380,9916,7076,5127,6157,4909,8491,6433,3234,5139],()=>n(1987));module.exports=s})();