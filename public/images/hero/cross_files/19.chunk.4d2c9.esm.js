(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+GUh":function(e,t){"use strict";t.a={defaultFontStack:"'Inter', sans-serif",locofyBlue:"#457eff",header:"header__WiO9t",headerLightTheme:"headerLightTheme__zDp1B",headerDarkTheme:"headerDarkTheme__Qlp-l",heading:"heading__Kz6v4",headingLightTheme:"headingLightTheme__5BIDy",headingDarkTheme:"headingDarkTheme__LXLal",subheading:"subheading__H0cD5",subHeadingLightTheme:"subHeadingLightTheme__vRQdm",subHeadingDarkTheme:"subHeadingDarkTheme__QgVLe",body:"body__63oHs",fileExplorerWrapper:"fileExplorerWrapper__klIbH",fileExplorerWrapperLightTheme:"fileExplorerWrapperLightTheme__xIK4x",repoInfoText:"repoInfoText__r-wME",repoInfoTextLightTheme:"repoInfoTextLightTheme__5zxDq",repoInfoTextDarkTheme:"repoInfoTextDarkTheme__GDXXd",repoInfoSpanText:"repoInfoSpanText__cuwNy",repoInfoSpanTextLightTheme:"repoInfoSpanTextLightTheme__MFWcR",repoInfoSpanTextDarkTheme:"repoInfoSpanTextDarkTheme__FdCQ1",editText:"editText__xpRL4",closeButton:"closeButton__Mb4DB",closeButtonLightTheme:"closeButtonLightTheme__CMJWi",closeButtonDarkTheme:"closeButtonDarkTheme__IevLg",unresolvedWarning:"unresolvedWarning__D9Aux",unresolvedWarningLightTheme:"unresolvedWarningLightTheme__u7wWI",unresolvedWarningInner:"unresolvedWarningInner__EZssZ",unresolvedWarningInnerLightTheme:"unresolvedWarningInnerLightTheme__1ueec",unresolvedWarningImage:"unresolvedWarningImage__qFPLM",unresolvedWarningText:"unresolvedWarningText__XT94L",unresolvedWarningHeading:"unresolvedWarningHeading__h8KiV",cancelWarning:"cancelWarning__NBxug",cancelWarningLightTheme:"cancelWarningLightTheme__w1nro",yesWarning:"yesWarning__LipNl",closeWarning:"closeWarning__S8sMj",checkingOverlay:"checkingOverlay__h8gCe",checkingOverlayLightTheme:"checkingOverlayLightTheme__U7hEp",checkingGithubConnection:"checkingGithubConnection__N6u-S"}},"+v3W":function(e,t){"use strict";t.a={errorColor:"#f4596c",locofyBlue:"#457eff",locofyGreen:"#4fc786",locofyGreyLight:"#b0b0b0",defaultFontStack:"'Inter', sans-serif",exportModalHeader:"exportModalHeader__sSyUs",exportModalHeaderLightTheme:"exportModalHeaderLightTheme__iYZT6",exportModalHeaderDarkTheme:"exportModalHeaderDarkTheme__ueSBF",headerLeft:"headerLeft__dDl-N",headerRight:"headerRight__v1csm",closeExport:"closeExport__qmh+R",closeExportLightTheme:"closeExportLightTheme__B72IO",closeExportDarkTheme:"closeExportDarkTheme__p1i6K",repoInfoText:"repoInfoText__nklWb",repoInfoTextLightTheme:"repoInfoTextLightTheme__Fz+1g",repoInfoTextDarkTheme:"repoInfoTextDarkTheme__tmLLG",repoInfoSpanText:"repoInfoSpanText__wdNrm",repoInfoSpanTextLightTheme:"repoInfoSpanTextLightTheme__5gH5i",repoInfoSpanTextDarkTheme:"repoInfoSpanTextDarkTheme__WpcMZ",headerTag:"headerTag__xlliW",headerTabLightTheme:"headerTabLightTheme__5aaGh",editText:"editText__pWwmX",headerTitle:"headerTitle__EqEVS",headerTitleLightTheme:"headerTitleLightTheme__srVPR",title:"title__KBdrn",titleLightTheme:"titleLightTheme__WYQbo",titleDarkTheme:"titleDarkTheme__Mg3Gs",githubContainer:"githubContainer__r4QCU",windowBody:"windowBody__+X4T+",loadingContainer:"loadingContainer__jvomO",loadingContainerLightTheme:"loadingContainerLightTheme__8KLWb",loadingContainerDarkTheme:"loadingContainerDarkTheme__XHY6e",windowFooter:"windowFooter__rG9Oj",windowFooterLightTheme:"windowFooterLightTheme__Ilhly",bold:"bold__ZIc4N",changes:"changes__mmiTI",circleChanges:"circleChanges__QCh0E",legendText:"legendText__YSe6L",update:"update__rzYJN",modified:"modified__O7Wi+",delete:"delete__3sTHw",conflict:"conflict__zmepx",window:"window__4gaSi",windowLightTheme:"windowLightTheme__0LjB4",emptyMessage:"emptyMessage__DWRC-",header:"header__zEoFC",headerLightTheme:"headerLightTheme__IT5-6",btn:"btn__-PiuV",deployBtn:"deployBtn__9TpwB",subText:"subText__lcRmZ",disabled:"disabled__LlHnD",conflictBtn:"conflictBtn__EyiHb",whiteLoading:"whiteLoading__f-glh",inputGithub:"inputGithub__CXE5U",inputGithubLightTheme:"inputGithubLightTheme__9wL1D",inputGithubDarkTheme:"inputGithubDarkTheme__IDSEy",prCheckMain:"prCheckMain__xdfx-",prCheckMainLightTheme:"prCheckMainLightTheme__rJdgr",prChecked:"prChecked__FdVil",prCheck:"prCheck__Zzp6g",footer:"footer__RyXYI",footerSub:"footerSub__ODryq",dropdownPlaceholder:"dropdownPlaceholder__0jf03",seletedItem:"seletedItem__fXQMP",dropdownContainer:"dropdownContainer__Xrf97",dropdownInput:"dropdownInput__eHtgW",dropdownInputLightTheme:"dropdownInputLightTheme__CDkEw",errorTextContainer:"errorTextContainer__12Wjn",errorText:"errorText__CupKp",commitHistoryText:"commitHistoryText__8qVx1",legendsTooltip:"legendsTooltip__Zma75",legendRow:"legendRow__z8wQY",legendCircle:"legendCircle__fisvj",untracked:"untracked__sn9iC",deleted:"deleted__NUDxC",mixed:"mixed__UFrN3",syncComponentsContainer:"syncComponentsContainer__5yeEE",syncComponentsContainerLightTheme:"syncComponentsContainerLightTheme__kukjL",syncComponentsContainerDarkTheme:"syncComponentsContainerDarkTheme__t5BcR",selectComponents:"selectComponents__3mg-D",selectHeader:"selectHeader__aKchL",selectHeaderLightTheme:"selectHeaderLightTheme__mauet",selectHeaderDarkTheme:"selectHeaderDarkTheme__2yQ7B",selectHeading:"selectHeading__rodtJ",selectDeselect:"selectDeselect__a54ZW",selectBody:"selectBody__8ytCd",componentPill:"componentPill__vjsRK",componentPillLightTheme:"componentPillLightTheme__f0CZa",componentPillDarkTheme:"componentPillDarkTheme__vF2rr",selected:"selected__c4zHl",emptyComponents:"emptyComponents__9VbKf",emptyComponentsInner:"emptyComponentsInner__8jAO1",emptyComponentsInnerLightTheme:"emptyComponentsInnerLightTheme__7kTcN",syncComponentsFileExplorer:"syncComponentsFileExplorer__b4IyA",syncComponentsFileExplorerLightTheme:"syncComponentsFileExplorerLightTheme__kQ0tP",syncComponentsFileExplorerDarkTheme:"syncComponentsFileExplorerDarkTheme__z0Sqq",syncComponentsHeader:"syncComponentsHeader__XS4Pg",syncComponentsHeaderLightTheme:"syncComponentsHeaderLightTheme__t1shu",syncComponentsHeaderDarkTheme:"syncComponentsHeaderDarkTheme__OjCjv",syncComponentsBody:"syncComponentsBody__Z4w5Z",noComponentsMsg:"noComponentsMsg__RKRlq",syncComponentsLoading:"syncComponentsLoading__TlJMK",syncComponentsLoadingLightTheme:"syncComponentsLoadingLightTheme__-EtwR",filesHeading:"filesHeading__3y5Bl",filesIcon:"filesIcon__WRABO",fileIconLightTheme:"fileIconLightTheme__hUp2R",fileIconDarkTheme:"fileIconDarkTheme__g5LhK",toastCont:"toastCont__jlNXk",toast:"toast__llK+7",slide:"slide__grugx",checkingOverlay:"checkingOverlay__tiMmg",checkingGithubConnection:"checkingGithubConnection__XXpBO",checkingGithubConnectionLightTheme:"checkingGithubConnectionLightTheme__gOocV",checkingGithubConnectionDarkTheme:"checkingGithubConnectionDarkTheme__mBDq4",dropdownContainerLightTheme:"dropdownContainerLightTheme__otdvQ",dropdownPlaceholderLightTheme:"dropdownPlaceholderLightTheme__3VCSs"}},CRdf:function(e,t,o){"use strict";(function(e){var n=o("8Jek"),a=o.n(n),i=o("CmOr"),c=o("NGVL"),r=o("rfoC"),s=o("2tLp"),l=o("l8WD"),d=o("g4HH"),h=o("aZW+"),u=o("6v9m"),g=o("nw/Z");t.a=({fileId:t,fileName:o,type:n,activeFileItem:b,resultCodeEditorRef:m,totalConflictsInFile:f,onPrevClick:p,onNextClick:C,updateUI:_,isLocobook:T})=>{const[v,O]=Object(h.c)(u.Cc,[]),[j,L]=Object(h.c)(u.I,[]),[k]=Object(h.c)(u.Eb,[]),[x,y]=Object(h.c)(u.Ad,[]),w=v.find((e=>(null==e?void 0:e[i.xl])===t)),S=null==w?void 0:w.is_conflict,I=Object(l.useCallback)((()=>{if(m.current){const e=v&&[...v.filter((e=>!(null!=k&&k.some((t=>(null==t?void 0:t[i.xl])===(null==e?void 0:e[i.xl]))))))],o=e&&e.findIndex((e=>(null==e?void 0:e[i.xl])===t));if(o>-1&&e[o].is_conflict){const n=m.current.getValue();e[o].is_conflict=!1,e[o].clean_content=n,e[o].clean_content_hash=Object(s.a)(n),O(e),_(o),Object(c.X)(!0);const a=j.filter((e=>(null==e?void 0:e[i.xl])!==t)).filter(Boolean)||[];L(a);const r=[...x];r.push(b),y(r)}}}),[b,j,t,v,x,m,L,O,y,k,_]);return e(r.a,{bg:T?"#fff":"#151B2B",h:!0,jsb:!0,vc:!0,height:"38px"},e(r.a,{width:"fit-content",bg:T?"#fff":"#0C0F17",ph:12,h:!0,vc:!0,height:38},"result"!==n&&e(r.a,{h:!0,vc:!0,bg:T?"#F4F7FC":"#192030",pv:4,ph:6,br:4,mr:6},e(r.c,{src:"github"===n?"/assets/studio/deploy/icon_github.svg":"/assets/images/locofy-icon.svg",size:14,mr:4}),e("div",{className:g.a.sourceText},"github"===n?"Github":"Locofy")),e(r.c,{src:`/assets/icons/${d.e.ts}`,mr:4}),e("div",{className:a()(g.a.fileName,{[g.a.modify]:!S})},o),S&&e("div",{className:g.a.changed},"C"),e("div",{className:g.a.sourceName},"- ","github"===n?"Remote":"local"===n?"Current":"Result")),"result"===n&&S&&e(r.a,{h:!0,mr:22,vc:!0},e("div",{className:g.a.totalConflicts},f>1?`${f} conflicts remaining`:1===f?"1 conflict remaining":"0 conflicts remaining! You can now mark this as resolved."),e("button",{className:a()(g.a.navigationButtons,g.a.prevButton),onClick:p},e(r.c,{src:"/assets/icons/left-chevron-blue.svg",width:6,mr:6,mb:2}),"Prev"),e("button",{className:g.a.navigationButtons,onClick:C},"Next",e(r.c,{src:"/assets/icons/right-chevron-blue.svg",width:6,ml:6,mb:2})),e("div",{className:g.a.seperator}),e("button",{className:a()(g.a.button,{[g.a.disabledButton]:f>0&&!T,[g.a.disabledButtonLightTheme]:T&&f>0}),onClick:I},e(r.c,f>0?{src:T?"/assets/locobook/disableTick.svg":"/assets/icons/check_mark_grey.svg",height:12,mr:4}:{src:"/assets/icons/check_mark.svg",height:12,mr:4}),"Mark Resolved")))}}).call(this,o("hosL").h)},LGi0:function(e,t,o){"use strict";(function(e){function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e,t){return e.getTopForLineNumber(t)}function r(e,t,o,n,a,i){let r=e.getVisibleRanges()[0][B];o<c(e,r)&&r--;let s=-1,l=-1,d=-1,h=-18;const u=Object(T.Ae)(n),g=[];for(let e=0;e<u;e++){const t=n[e].originalState;if(!t)continue;let o=t[a],c=t[i];a===F&&(o=o.range),i===F&&(c=c.range);const h=o[B],u=o[M],b=c[B],m=c[M];if(r<h){s=h,l=b;break}if(r<u+1){d=b,s=u+1,l=m+1;break}g.push([h,u+1,b,m+1])}const b=g.pop();-1===s&&(s=e.getModel().getLineCount()+1,l=t.getModel().getLineCount()+1,h=0);let m=0,f=0;b&&(m=c(e,b[1]),f=c(t,b[3]));const p=(o-m)/(c(e,s)-m),C=c(t,l)+h*(1-p)-f,_=d<0?0:c(t,d)+h,v=Math.max(_,f+C*p);t.setScrollTop(v)}function s(...e){const t=document.createElement("div");return e.forEach((e=>e&&t.classList.add(e))),t}function l(...e){const t=document.createElement("button");return e.forEach((e=>e&&t.classList.add(e))),t}function d(e,t,o="github"){return e[t][o][B]}function h(e,t,o="github"){return e[t][o][B]}function u(e,t,o){const n=e.current||e;if(t&&n){n.revealLinesNearTop(t[B],t[M],o)}}function g(e){return e?Object(T.Ae)(G(e)):1}function b(e,t){return t>=e[B]&&t<=e[M]}function m(e){e.current=!0,setTimeout((()=>e.current=!1),100)}var f=o("H+Bb"),p=o("8Jek"),C=o.n(p),_=o("CmOr"),T=o("S3S6"),v=o("uXW1"),O=o("NGVL"),j=o("rfoC"),L=o("bMTy"),k=o("Vp0P"),x=o("l8WD"),y=o("MPO6"),w=o("CRdf"),S=o("mihe"),I=o("i4pj");const N={scrollbar:{vertical:"visible",verticalSliderSize:15}},B="startLineNumber",M="endLineNumber",D="scrollType",E="range",H="locofy",R="github",F="result",A="zoneHeight",P="acceptedFrom",W=[-1,-1,-1],Z=["\r\n","\n"],G=e=>e.split(/\r?\n/),V=e=>G(e.getValue());t.a=({mergePathFileId:t,activeFileItem:o,totalConflicts:n,codeBlocks:i,onCompleteMerge:p,updateUI:z,isLocobook:X,isMerge:K})=>{const{editor:U}=Object(f.b)();const[Y,J]=Object(x.useState)(0),[Q,q]=Object(x.useState)(!1),[$,ee]=Object(x.useState)(0),[te,oe]=Object(x.useState)([]),[ne,ae]=Object(x.useState)(""),[ie,ce]=Object(x.useState)(""),[re,se]=Object(x.useState)(""),le=Object(x.useRef)(null),de=Object(x.useRef)(null),he=Object(x.useRef)(null),ue=Object(x.useRef)(null),ge=Object(x.useRef)(null),be=Object(x.useRef)(null),me=Object(x.useRef)(null),fe=Object(x.useRef)(null),pe=Object(x.useRef)(!1),Ce=o&&o[_.pk],_e="css"===Ce||"module.css"===Ce||"scss"===Ce?"css":"html"===Ce?"html":"dart"===Ce?"dart":"typescript";Object(x.useEffect)((()=>()=>{W[0]=-1,W[1]=-1,W[2]=-1}),[]);const Te=Object(x.useCallback)((()=>{const e=le.current,t=de.current,o=he.current;if(e&&t&&o){const n="getScrollTop";W[0]=e[n](),W[1]=t[n](),W[2]=o[n]()}}),[]),ve=Object(x.useCallback)((()=>{const e=le.current,t=de.current,o=he.current;if(e&&t&&o){const n="setScrollTop",a=W.slice();return a[0]>=0&&e[n](a[0]),a[1]>=0&&t[n](a[1]),a[2]>=0&&o[n](a[2]),W[0]=-1,W[1]=-1,W[2]=-1,a}return[-1,-1,-1]}),[]),Oe=Object(x.useCallback)((e=>{m(pe),Te(),se(`${e} `),setTimeout((()=>{Te(),se(e)}),10)}),[Te]),je=Object(x.useCallback)((()=>{0!==$&&ee((e=>e-1))}),[$]),Le=Object(x.useCallback)(((e,t,o,n)=>{const a=o.deltaDecorations([],[{[E]:{startLineNumber:e,endLineNumber:t},options:{isWholeLine:!0,className:X?I.a.backgroundColorLightTheme:I.a.backgroundColor,stickiness:0}}]);n.push(a[0])}),[]),ke=Object(x.useCallback)(((e,t,o,n)=>{for(let a=e;a<=t;a++){const e=o.deltaDecorations([],[{[E]:{startLineNumber:a,endLineNumber:a},options:{isWholeLine:!0,className:`${I.a.borderLeft} ${I.a.borderRight}`,stickiness:0}}]);n.push(e[0])}}),[]),xe=Object(x.useCallback)(((e,t,o)=>{const n=t.deltaDecorations([],[{[E]:{startLineNumber:e,endLineNumber:e},options:{isWholeLine:!0,className:I.a.borderBottom,stickiness:0}}]);o.push(n[0])}),[]),ye=Object(x.useCallback)(((e,t,o)=>{let n="";return e.current&&e.current.changeViewZones((e=>{const a=e.addZone({afterLineNumber:t,heightInLines:o,domNode:s(I.a.emptyLine)});n=a})),n}),[]),we=Object(x.useCallback)(((e,t,o,n,a=!0)=>{let i="";return e.current&&e.current.changeViewZones((e=>{const c=s(I.a.emptyLine,I.a.borderLeft,I.a.borderRight,!a&&I.a.borderBottom),r=e.addZone({afterLineNumber:t,heightInLines:o,domNode:c,onComputedHeight:n});i=r})),i}),[]),Se=Object(x.useCallback)(((e,t)=>{q(!0);const o=he.current;if(!o)return;const n=e[t].originalState,{[B]:a,[M]:i}=n.github,{[B]:c,[M]:r}=n.locofy,s=n.result.range,l=Math.abs(a-i),d=Math.abs(c-r),h=Math.abs(s[B]-s[M])-d,u=V(o),g=u.slice(0,s[B]-1),b=u.slice(s[B]+l),m=g.concat(b).join("\n");n.result.range[M]-=h,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=h,t[M]-=h}})),n.acceptedFrom="locofy",be.current=t,Oe(m)}),[Oe]),Ie=Object(x.useCallback)(((e,t)=>{q(!0);const o=he.current;if(!o)return;const n=e[t].originalState,a=n.result.range,i=Math.abs(n.github[B]-n.github[M]),c=Math.abs(a[B]-a[M])-i,r=V(o),s=r.slice(0,a[B]+i),l=r.slice(a[M]),d=s.concat(l).join("\n");a[M]-=c,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=c,t[M]-=c}})),n.acceptedFrom="github",be.current=t,Oe(d)}),[Oe]),Ne=Object(x.useCallback)(((e,t)=>{const o=s(X?I.a.noChangesAcceptedTextLightTheme:I.a.noChangesAcceptedText);o.textContent="Github + Locofy";const n=s(I.a.divider);n.textContent="|";const a=s(X?I.a.changesButtonLightTheme:I.a.changesButton);a.textContent="Remove Github",a.onclick=()=>Se(e,t);const i=s(I.a.divider);i.textContent="|";const c=s(X?I.a.changesButtonLightTheme:I.a.changesButton);c.textContent="Remove Locofy",c.onclick=()=>Ie(e,t);const r=s(I.a.buttonsContainer);r.appendChild(o),r.appendChild(n),r.appendChild(a),r.appendChild(i),r.appendChild(c);const l=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return l.appendChild(r),l}),[X,Se,Ie]),Be=Object(x.useCallback)(((e,t)=>{q(!0);const o=he.current;if(!o)return;const n=e[t].originalState,{[B]:a,[M]:i}=n.github,{[B]:c,[M]:r}=n.locofy,s=n.result.range,l=Math.abs(a-i),d=Math.abs(c-r),h=Math.abs(s[B]-s[M])-l,u=V(o),g=u.slice(0,s[B]-1),b=u.slice(s[B]+d),m=g.concat(b).join("\n");s[M]-=h,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=h,t[M]-=h}})),n.acceptedFrom="github",be.current=t,Oe(m)}),[Oe]),Me=Object(x.useCallback)(((e,t)=>{q(!0);const o=he.current;if(!o)return;const n=e[t].originalState,a=n.result.range,i=Math.abs(n.locofy[B]-n.locofy[M]),c=Math.abs(a[B]-a[M])-i,r=V(o),s=r.slice(0,a[B]+i),l=r.slice(a[M]),d=s.concat(l).join("\n");n.result.range[M]-=c,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=c,t[M]-=c}})),n.acceptedFrom="locofy",be.current=t,Oe(d)}),[Oe]),De=Object(x.useCallback)(((e,t)=>{const o=s(X?I.a.noChangesAcceptedTextLightTheme:I.a.noChangesAcceptedText);o.textContent="Locofy + Github";const n=s(I.a.divider);n.textContent="|";const a=s(X?I.a.changesButtonLightTheme:I.a.changesButton);a.textContent="Remove Locofy",a.onclick=()=>Be(e,t);const i=s(I.a.divider);i.textContent="|";const c=s(X?I.a.changesButtonLightTheme:I.a.changesButton);c.textContent="Remove Github",c.onclick=()=>Me(e,t);const r=s(I.a.buttonsContainer);r.appendChild(o),r.appendChild(n),r.appendChild(a),r.appendChild(i),r.appendChild(c);const l=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return l.appendChild(r),l}),[X,Me,Be]),Ee=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range,i=[];let r="";const s=o.getModel();ke(a[B],a[M],s,i),xe(a[M],s,i);const l=c(o,a[B]);let d=c(o,a[M])-l;d+=U.EditorOption.lineHeight,n.zoneHeight+=d,o.changeViewZones((o=>{const i=De(e,t),c=o.addZone({afterLineNumber:a[B]-1,heightInLines:1,domNode:i,onComputedHeight:e=>n.zoneHeight+=e});r=c})),n.buttonsId=r,n.decorationIds=i}),[xe,ke,U.EditorOption.lineHeight,De]),He=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range,i=[];let r="";const s=o.getModel();ke(a[B],a[M],s,i),xe(a[M],s,i);const l=c(o,a[B]);let d=c(o,a[M])-l;d+=U.EditorOption.lineHeight,n.zoneHeight+=d,o.changeViewZones((o=>{const i=Ne(e,t),c=o.addZone({afterLineNumber:a[B]-1,heightInLines:1,domNode:i,onComputedHeight:e=>n.zoneHeight+=e});r=c})),n.buttonsId=r,n.decorationIds=i}),[xe,ke,U.EditorOption.lineHeight,Ne]),Re=Object(x.useCallback)(((e,t)=>{q(!0);const o=he.current;if(!o)return;const n=e[t].originalState,a=n.result,i=a.range,c=Math.abs(i[B]-i[M]),r=V(o),s=r.slice(0,i[B]-1),l=r.slice(i[M]),d=s.concat([""]).concat(l).join("\n");a.range[M]-=c,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=c,t[M]-=c}})),n.acceptedFrom=_.ge,ee((e=>e+1)),be.current=t,Oe(d)}),[Oe]),Fe=Object(x.useCallback)(((e,t)=>{const o=s(X?I.a.noChangesAcceptedTextLightTheme:I.a.noChangesAcceptedText);o.textContent="Github";const n=s(I.a.divider);n.textContent="|";const a=l(I.a.changesButton);a.textContent="Remove Github",a.onclick=()=>Re(e,t);const i=s(I.a.buttonsContainer);i.appendChild(o),i.appendChild(n),i.appendChild(a);const c=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return c.appendChild(i),c}),[Re]),Ae=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range,i=[];let r="";const s=o.getModel();ke(a[B],a[M],s,i),xe(a[M],s,i);const l=c(o,a[B]);let d=c(o,a[M])-l;d+=U.EditorOption.lineHeight,n.zoneHeight+=d,o.changeViewZones((o=>{const i=Fe(e,t),c=o.addZone({afterLineNumber:a[B]-1,heightInLines:1,domNode:i,onComputedHeight:e=>n.zoneHeight+=e});r=c})),n.buttonsId=r,n.decorationIds=i}),[xe,ke,U.EditorOption.lineHeight,Fe]),Pe=Object(x.useCallback)(((e,t)=>{q(!0);const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range,i=Math.abs(a[B]-a[M]),c=V(o),r=c.slice(0,a[B]-1),s=c.slice(a[M]),l=r.concat([""]).concat(s).join("\n");n.range[M]-=i,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=i,t[M]-=i}})),e[t].originalState.acceptedFrom=_.ge,ee((e=>e+1)),be.current=t,Oe(l)}),[Oe]),We=Object(x.useCallback)(((e,t)=>{const o=s(X?I.a.noChangesAcceptedTextLightTheme:I.a.noChangesAcceptedText);o.textContent="Locofy";const n=s(I.a.divider);n.textContent="|";const a=l(X?I.a.changesButtonLightTheme:I.a.changesButton);a.textContent="Remove Locofy",a.onclick=()=>Pe(e,t);const i=s(I.a.buttonsContainer);i.appendChild(o),i.appendChild(n),i.appendChild(a);const c=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return c.appendChild(i),c}),[X,Pe]),Ze=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range,i=[];let r="";const s=o.getModel();ke(a[B],a[M],s,i),xe(a[M],s,i);const l=c(o,a[B]);let d=c(o,a[M])-l;d+=U.EditorOption.lineHeight,n.zoneHeight+=d,o.changeViewZones((o=>{const i=We(e,t),c=o.addZone({afterLineNumber:a[B]-1,heightInLines:1,domNode:i,onComputedHeight:e=>n.zoneHeight+=e});r=c})),n.buttonsId=r,n.decorationIds=i}),[xe,ke,U.EditorOption.lineHeight,We]),Ge=Object(x.useCallback)(((e,t)=>{const o=de.current;if(!o)return;const n=e[t].originalState.locofy,{hasDifference:a,differenceStartLineNumber:i,differenceHeight:r,isDifferenceAbove:l}=n,d=n[B],h=n[M];o.changeViewZones((e=>{let t="",u="";const g=[],b=o.getModel();ke(d,h,b,g);const m=c(o,d);let f=c(o,h)-m;f+=U.EditorOption.lineHeight,n.zoneHeight+=f;const p=s(I.a.borderTop,I.a.borderLeft,I.a.borderRight),C=e.addZone({afterLineNumber:d-1,heightInLines:1,domNode:p,onComputedHeight:e=>n.zoneHeight+=e});t=C,a?u=we(de,i,r,(e=>{n.zoneHeight+=e}),null!=l&&l):xe(h,b,g),n.buttonsId=t,n.decorationIds=g,n.diffId=u}))}),[xe,ke,we,U.EditorOption.lineHeight]),Ve=Object(x.useCallback)(((e,t)=>{const o=le.current;if(!o)return;const n=e[t].originalState.github,{hasDifference:a,differenceStartLineNumber:i,differenceHeight:r,isDifferenceAbove:l}=n,d=n[B],h=n[M];o.changeViewZones((e=>{let t="",u="";const g=[],b=o.getModel();ke(d,h,b,g);const m=c(o,d);let f=c(o,h)-m;f+=U.EditorOption.lineHeight,n.zoneHeight+=f;const p=s(I.a.borderTop,I.a.borderLeft,I.a.borderRight),C=e.addZone({afterLineNumber:d-1,heightInLines:1,domNode:p,onComputedHeight:e=>n.zoneHeight+=e});t=C,a?u=we(le,i,r,(e=>{n.zoneHeight+=e}),null!=l&&l):xe(h,b,g),n.buttonsId=t,n.decorationIds=g,n.diffId=u}))}),[xe,ke,we,U.EditorOption.lineHeight]),ze=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=V(o);q(!0);const a=e[t].originalState,i=a.github[B],c=a.github[M],r=a.result.range,s=Math.abs(i-c),l=G(ne).slice(i-1,c),d=n.slice(0,r[B]-1),h=n.slice(r[M]),u=d.concat(l).concat(h).join("\n");a.result.range[M]+=s,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]+=s,t[M]+=s}})),a.acceptedFrom="github",je(),be.current=t,Te(),m(pe),se(u),Object(O.V)("github")}),[je,ne,Te]),Xe=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=V(o);q(!0);const a=e[t].originalState,{[B]:i,[M]:c}=a.github,{[B]:r,[M]:s}=a.locofy,l=a.result.range,d=Math.abs(i-c)+Math.abs(r-s)+1,h=n.slice(0,l[B]-1),u=G(ne).slice(i-1,c),g=G(ie).slice(r-1,s),b=n.slice(l[M]),f=h.concat(u).concat(g).concat(b).join("\n");l[M]+=d,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]+=d,t[M]+=d}})),a.acceptedFrom="github + locofy",je(),be.current=t,Te(),m(pe),se(f),Object(O.V)("both")}),[je,ne,ie,Te]),Ke=Object(x.useCallback)(((e,t)=>{const o=l(X?I.a.changesButtonLightTheme:I.a.changesButton);o.textContent="Accept Github Change",o.onclick=()=>ze(e,t);const n=s(I.a.divider);n.textContent="|";const a=l(X?I.a.changesButtonLightTheme:I.a.changesButton);a.textContent="Accept Both Changes",a.onclick=()=>Xe(e,t);const i=s(I.a.buttonsContainer);i.appendChild(o),i.appendChild(n),i.appendChild(a);const c=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return c.appendChild(i),c}),[Xe,ze,X]),Ue=Object(x.useCallback)(((e,t,o,n)=>{let a="";return le.current&&le.current.changeViewZones((i=>{const c=Ke(t,o),r=i.addZone({afterLineNumber:e,heightInLines:1,domNode:c,onComputedHeight:n});a=r})),a}),[Ke]),Ye=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;q(!0);const n=V(o),a=e[t].originalState,i=a.locofy[B],c=a.locofy[M],r=a.result.range,s=Math.abs(i-c),l=G(ie).slice(i-1,c),d=n.slice(0,r[B]-1),h=n.slice(r[M]),u=d.concat(l).concat(h).join("\n");r[M]+=s,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]+=s,t[M]+=s}})),a.acceptedFrom="locofy",je(),be.current=t,Te(),m(pe),se(u),Object(O.V)("locofy")}),[je,ie,Te]),Je=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;q(!0);const n=V(o),a=e[t].originalState,{[B]:i,[M]:c}=a.github,{[B]:r,[M]:s}=a.locofy,l=a.result.range,d=Math.abs(i-c)+Math.abs(r-s)+1,h=n.slice(0,l[B]-1),u=G(ne).slice(i-1,c),g=G(ie).slice(r-1,s),b=n.slice(l[M]),f=h.concat(g).concat(u).concat(b).join("\n");l[M]+=d,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]+=d,t[M]+=d}})),a.acceptedFrom="locofy + github",je(),be.current=t,Te(),m(pe),se(f),Object(O.V)("both")}),[je,ne,ie,Te]),Qe=Object(x.useCallback)(((e,t)=>{const o=l(X?I.a.changesButtonLightTheme:I.a.changesButton);o.textContent="Accept Locofy Change",o.onclick=()=>Ye(e,t);const n=s(I.a.divider);n.textContent="|";const a=l(X?I.a.changesButtonLightTheme:I.a.changesButton);a.textContent="Accept Both Changes",a.onclick=()=>Je(e,t);const i=s(I.a.buttonsContainer);i.appendChild(o),i.appendChild(n),i.appendChild(a);const c=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return c.appendChild(i),c}),[Je,Ye,X]),qe=Object(x.useCallback)(((e,t,o,n)=>{let a="";return de.current&&de.current.changeViewZones((i=>{const c=Qe(t,o),r=i.addZone({afterLineNumber:e,heightInLines:1,domNode:c,onComputedHeight:n});a=r})),a}),[Qe]),$e=Object(x.useCallback)(((e,t)=>{let o="";return he.current&&he.current.changeViewZones((n=>{const a=s(X?I.a.noChangesAcceptedTextLightTheme:I.a.noChangesAcceptedText,I.a.borderTop,I.a.borderLeft,I.a.borderRight);a.textContent="No Changes Accepted";const i=n.addZone({afterLineNumber:e,heightInLines:1,domNode:a,onComputedHeight:t});o=i})),o}),[]),et=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;q(!0);const n=e[t].originalState,a=n.result.range,i=Math.abs(a[B]-a[M]),c=V(o),r=c.slice(0,a[B]-1),s=c.slice(a[M]),l=r.concat([""]).concat(s).join("\n");n.result.range[M]-=i,e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=i,t[M]-=i}})),n.acceptedFrom=_.ge,ee((e=>e+1)),be.current=t,Oe(l)}),[Oe]),tt=Object(x.useCallback)(((e,t)=>{const o=s(X?I.a.noChangesAcceptedTextLightTheme:I.a.noChangesAcceptedText);o.textContent="Manual Resolution";const n=s(I.a.divider);n.textContent="|";const a=l(I.a.changesButton);a.textContent="Reset to base",a.onclick=()=>et(e,t);const i=s(I.a.buttonsContainer);i.appendChild(o),i.appendChild(n),i.appendChild(a);const c=s(I.a.borderLeft,I.a.borderRight,I.a.borderTop);return c.appendChild(i),c}),[et]),ot=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range,i=[];let r="";const s=o.getModel();ke(a[B],a[M],s,i),xe(a[M],s,i);const l=c(o,a[B]);let d=c(o,a[M])-l;d+=U.EditorOption.lineHeight,n.zoneHeight+=d,o.changeViewZones((o=>{const i=tt(e,t),c=o.addZone({afterLineNumber:a[B]-1,heightInLines:1,domNode:i,onComputedHeight:e=>n.zoneHeight+=e});r=c})),n.buttonsId=r,n.decorationIds=i}),[xe,ke,U.EditorOption.lineHeight,tt]),nt=Object(x.useCallback)(((e,t)=>{const o=le.current;if(!o)return;const n=e[t];if(n.originalState){const{buttonsId:e,diffId:t,decorationIds:a}=n.originalState.github;if(n.originalState.github.zoneHeight=0,a){o.getModel().deltaDecorations(a,[]),n.originalState.github.decorationIds=[]}o.changeViewZones((o=>{e&&o.removeZone(e),t&&o.removeZone(t)}))}n.githubDiff&&o.changeViewZones((e=>{n.githubDiff.diffId&&e.removeZone(n.githubDiff.diffId)}))}),[]),at=Object(x.useCallback)(((e,t)=>{const o=de.current;if(!o)return;const n=e[t];if(n.originalState){const{buttonsId:e,diffId:t,decorationIds:a}=n.originalState.locofy;if(n.originalState.locofy.zoneHeight=0,a){o.getModel().deltaDecorations(a,[]),n.originalState.locofy.decorationIds=[]}o.changeViewZones((o=>{e&&o.removeZone(e),t&&o.removeZone(t)}))}n.locofyDiff&&o.changeViewZones((e=>{n.locofyDiff.diffId&&e.removeZone(n.locofyDiff.diffId)}))}),[]),it=Object(x.useCallback)(((e,t)=>{const o=e[t],n=he.current;if(!o.originalState||!n)return;const a=o.originalState.result,{buttonsId:i,decorationIds:c}=a;if(a.zoneHeight=0,c){n.getModel().deltaDecorations(c,[]),a.decorationIds=[]}n.changeViewZones((e=>{i&&e.removeZone(i)}))}),[]),ct=Object(x.useCallback)(((e,t)=>{if(le.current){const o=e[t].githubDiff,n=o[B],a=Math.abs(n-o[M])+1,i=ye(le,n-1,a);o.diffId=i}}),[ye]),rt=Object(x.useCallback)(((e,t)=>{if(de.current){const{startLineNumber:o,endLineNumber:n}=e[t].locofyDiff,a=Math.abs(o-n)+1;let i="";i=ye(de,o-1,a),e[t].locofyDiff.diffId=i}}),[ye]),st=Object(x.useCallback)(((e,t)=>{const o=le.current;if(!o)return;const n=e[t].originalState.github,{startLineNumber:a,endLineNumber:i,hasDifference:r,differenceStartLineNumber:s,differenceHeight:l,isDifferenceAbove:d}=n;let h="",u="";const g=[],b=o.getModel();Le(a,i,b,g),ke(a,i,b,g);const m=c(o,a);let f=c(o,i)-m;f+=U.EditorOption.lineHeight,n.zoneHeight+=f,r?(u=we(le,s,l,(e=>{n.zoneHeight+=e}),null!=d&&d),h=Ue(a-1,e,t,(e=>{n.zoneHeight+=e}))):(xe(i,b,g),h=Ue(a-1,e,t,(e=>{n.zoneHeight+=e}))),n.buttonsId=h,n.diffId=u,n.decorationIds=g}),[Le,xe,Ue,ke,we,U.EditorOption.lineHeight]),lt=Object(x.useCallback)(((e,t)=>{const o=de.current;if(!o)return;const n=e[t].originalState.locofy,{startLineNumber:a,endLineNumber:i,hasDifference:r,differenceStartLineNumber:s,differenceHeight:l,isDifferenceAbove:d}=n;let h="",u="";const g=[],b=o.getModel();Le(a,i,b,g),ke(a,i,b,g);const m=c(o,a);let f=c(o,i)-m;f+=U.EditorOption.lineHeight,n.zoneHeight+=f,r?(u=we(de,s,l,(e=>{n.zoneHeight+=e}),null!=d&&d),h=qe(a-1,e,t,(e=>{n.zoneHeight+=e}))):(xe(i,b,g),h=qe(a-1,e,t,(e=>{n.zoneHeight+=e}))),n.buttonsId=h,n.diffId=u,n.decorationIds=g}),[Le,xe,ke,qe,we,U.EditorOption.lineHeight]),dt=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState.result,a=n.range;let i="";const r=[],s=o.getModel();ke(a[B],a[M],s,r);const l=c(o,a[B]);let d=c(o,a[B])-l;d+=U.EditorOption.lineHeight,n.zoneHeight+=d,xe(a[M],s,r),i=$e(a[B]-1,(e=>{n.zoneHeight+=e})),n.buttonsId=i,n.decorationIds=r}),[xe,ke,$e,U.EditorOption.lineHeight]),ht=Object(x.useCallback)((()=>{if(Q)return;if(!le.current||!de.current||!he.current)return;const e=[...te];if(e.length>0){e[0].isSelected=!0;const t=e[0];u(le,t.github),u(de,t.locofy),u(he,t.result)}oe(e)}),[te,Q]),ut=Object(x.useCallback)((e=>{e.forEach(((t,o)=>{nt(e,o),at(e,o),it(e,o)}))}),[nt,at,it]),gt=Object(x.useCallback)((()=>{const e=be.current,t=le.current,o=de.current,n=he.current;if(t&&o&&n&&null!==e&&e>-1){const a=i[e];if(a.originalState){const e=a.originalState.github,i=a.originalState.locofy,c=a.originalState.result,[r,s,l]=ve();r<0&&u(t,e),s<0&&u(o,i),l<0&&u(n,c.range)}}}),[i,ve]),bt=Object(x.useCallback)(((e,t)=>{const o=e[t];if(o.originalState){const n=o.originalState.acceptedFrom;"manual"===n?(Ve(e,t),Ge(e,t),ot(e,t)):"github"===n?(Ve(e,t),Ge(e,t),Ae(e,t)):"locofy"===n?(Ve(e,t),Ge(e,t),Ze(e,t)):"github + locofy"===n?(Ve(e,t),Ge(e,t),He(e,t)):"locofy + github"===n?(Ve(e,t),Ge(e,t),Ee(e,t)):(st(e,t),lt(e,t),dt(e,t))}else o.githubDiff?ct(e,t):o.locofyDiff&&rt(e,t)}),[Ae,He,Ze,Ee,ot,st,ct,lt,rt,dt,Ve,Ge]),mt=Object(x.useCallback)((()=>{Object(T.Ae)(ne)&&Object(T.Ae)(ie)&&Object(T.Ae)(re)&&(ut(i),i.forEach(((e,t)=>{bt(i,t)})))}),[ut,i,ne,ie,re,bt]);Object(x.useEffect)((()=>{const e=setTimeout((()=>{he.current&&he.current.getModel()._commandManager._undoRedoService._editStacks.clear()}),500);return()=>clearTimeout(e)}),[]),Object(x.useEffect)((()=>{K||(mt(),ht(),gt())}),[re,mt]);const ft=Object(x.useCallback)((()=>{if(Q)return;let e=0,t=0,o=0,n="",a="",c="",r=0;const s=[];let l=!1;const d=Object(T.Ae)(i),h=e=>l?e:`${e||""}\n`;for(let u=0;u<d;u++){const b=i[u];l=u===d-1;const m=b[_.rj],f=b.remoteContent,p=b.locoContent,C=g(m),T=g(f),v=g(p),O=b.prev,j=b.latest;let L=!0;if(b.isConflict){r++;const l=e+1;e+=T;const d=e;n+=h(f);const g=t+1;t+=v;const b=t;a+=h(p);const m=o+1;o++,c+="\n";const C={[R]:{[B]:l,[M]:d,[A]:0},[H]:{[B]:g,[M]:b,[A]:0},[F]:{[E]:{[B]:m,[M]:m},[A]:0},[P]:_.ge},O={[R]:{[B]:l,[M]:b},[H]:{[B]:g,[M]:b},[F]:{[B]:m,[M]:m},isSelected:!1},j=T-v;if(j>0){const e=C.locofy;e.hasDifference=!0,e.isDifferenceAbove=!1,e.differenceStartLineNumber=b,e.differenceEndLineNumber=b+j,e.differenceHeight=j}else if(j<0){const e=C.github;e.hasDifference=!0,e.isDifferenceAbove=!1,e.differenceStartLineNumber=d,e.differenceEndLineNumber=d+-1*j,e.differenceHeight=-1*j}i[u].originalState=C,s.push(O)}else{if(b.isRemoteContent&&b.isLocoContent)e+=C,n+=h(m),t+=C,a+=h(m);else if(b.isRemoteContent)e+=C,n+=h(m);else if(b.isLocoContent)t+=C,a+=h(m);else if(O&&j){const o=g(O),i=g(j);e+=o,n+=h(O),t+=i,a+=h(j),L=!1}else O&&!j?(e+=C,n+=h(m),L=!1):j&&!O?(t+=C,a+=h(m),L=!1):(e+=C,n+=h(m),t+=C,a+=h(m));L&&(o+=C,c+=h(m))}}ae(n),ce(a),m(pe),se(c),ge.current=c,ee(r),oe(s),K&&ce(c)}),[i,Q,K]),pt=Object(x.useCallback)((()=>{he.current.updateOptions({renderValidationDecorations:"off"})}),[]),Ct=Object(x.useCallback)((()=>{const e=he.current;e.onKeyDown((t=>{const o=t.code,n=t.metaKey,a=t.ctrlKey,c=t.altKey;ue.current=o;const r=[];i.forEach((e=>{e.originalState&&r.push(e.originalState.result.range[B])}));const{lineNumber:s}=e.getPosition(),l=e.getModel().getLineContent(s),d=e.getSelection(),h=Math.abs(d[B]-d[M]),u=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","ShiftLeft","ShiftRight","MetaLeft","MetaRight","AltLeft","AltRight"];if(c&&"ArrowUp"===o||c&&"ArrowDown"===o||!h&&d.endColumn===d.startColumn&&(n||a)&&"KeyX"===o)Object(k.j)(t);else if(h>0){if(!u.includes(o)||(n||a)&&["KeyV","KeyX"].includes(o))for(let e=0;e<i.length;e++){const o=i[e];if(o.originalState){const e=o.originalState.result.range;if(d[B]>=e[B]&&d[M]<=e[M])e[M]-=h;else if(d[M]<e[B])e[B]-=h,e[M]-=h;else if(d[B]<e[B]&&d[M]<e[M]||d[B]<=e[M]&&d[M]>e[M]){Object(k.j)(t);break}}}}else"Backspace"===o?""===l&&(r.includes(s)?Object(k.j)(t):i.forEach((e=>{if(e.originalState){const t=e.originalState.result.range;b(t,s)?t[M]-=1:s<t[B]&&(t[B]-=1,t[M]-=1)}}))):"Enter"===o&&i.forEach((e=>{if(e.originalState){const t=e.originalState.result.range;b(t,s)?t[M]+=1:s<t[B]&&(t[B]+=1,t[M]+=1)}}))}))}),[i]),_t=Object(x.useCallback)((()=>{he.current&&he.current.onDidChangeModelContent((e=>{const t=e.isRedoing,o=e.changes[0],n=o.text,a=o.range[B],c=o.range[M],r=i.length;if(e.isUndoing)for(let e=0;e<r;e++){const t=i[e].originalState;if(!t)continue;const o=t.result.range;if(""===n){1===Math.abs(a-c)&&(a>=o[B]&&c<=o[M]?o[M]-=1:c<o[B]&&(o[B]-=1,o[M]-=1))}else if(n===Z[0]||n===Z[1])a>=o[B]&&c<=o[M]?o[M]+=1:c<o[B]&&(o[B]+=1,o[M]+=1);else{const e=G(n).length-1;a>=o[B]&&c<=o[M]?o[M]+=e:c<o[B]&&(o[B]+=e,o[M]+=e)}}else if(t)for(let e=0;e<r;e++){const t=i[e].originalState;if(!t)continue;const o=t.result.range;if(""===n){const e=Math.abs(a-c);1===e&&(a>=o[B]&&c<=o[M]?o[M]-=e:c<o[B]&&(o[B]-=e,o[M]-=e))}else if(n===Z[0]||n===Z[1])a>=o[B]&&c<=o[M]?o[M]+=1:c<o[B]&&(o[B]+=1,o[M]+=1);else if(n.includes("\n")){const e=G(n).length-1;a>=o[B]&&c<=o[M]?o[M]+=e:c<o[B]&&(o[B]+=e,o[M]+=e)}}}))}),[i]);Object(x.useEffect)((()=>{le.current&&de.current&&he.current&&(K||(ft(),pt(),Ct(),_t()))}),[Y]),Object(x.useEffect)((()=>{K&&le.current&&de.current&&he.current&&(ft(),setTimeout((()=>{Object(S.a)(le,de,ne,ie)}),100))}),[Y,ne,ie]);const Tt=Object(x.useCallback)(((e,t)=>{const o=he.current;if(!o)return;const n=e[t].originalState,a=n.github,i=n.result.range,c=a[B],r=a[M],s=o.getValue();G(ne).slice(c-1,r).join("\n")===G(s).slice(i[B]-1,i[M]).join("\n")&&(n.acceptedFrom="github")}),[ne]),vt=Object(x.useCallback)(((e,t)=>{const{locofy:o}=e[t].originalState,{range:n}=e[t].originalState.result,{startLineNumber:a,endLineNumber:i}=o,c=he.current.getValue();G(ie).slice(a-1,i).join("\n")===G(c).slice(n[B]-1,n[M]).join("\n")&&(e[t].originalState.acceptedFrom="locofy")}),[ie]),Ot=Object(x.useCallback)(((e,t)=>{const o=e[t].originalState,n=o.github,a=o.locofy,i=o.result.range,{[B]:c,[M]:r}=n,{[B]:s,[M]:l}=a,d=he.current.getValue(),h=G(ne).slice(c-1,r),u=G(ie).slice(s-1,l);h.concat(u).join("\n")===G(d).slice(i[B]-1,i[M]).join("\n")&&(o.acceptedFrom="github + locofy")}),[ne,ie]),jt=Object(x.useCallback)(((e,t)=>{const o=e[t].originalState,n=o.github,a=o.locofy,i=o.result.range,{[B]:c,[M]:r}=n,{[B]:s,[M]:l}=a,d=he.current.getValue(),h=G(ne).slice(c-1,r);G(ie).slice(s-1,l).concat(h).join("\n")===G(d).slice(i[B]-1,i[M]).join("\n")&&(o.acceptedFrom="locofy + github")}),[ne,ie]),Lt=Object(x.useCallback)(((e,t,o,n)=>{if(he.current&&n!==Z[0]&&n!==Z[1]&&G(n).length>1){const a=G(n).length-1,i=he.current.getSelection(),c=Math.abs(i[B]-i[M]),r=e[t].originalState.result.range;if(o<r[B])if(c>0){if(c<a){const e=Math.abs(c-a);e>0&&(r[B]+=e,r[M]+=e)}else if(c>a){const e=Math.abs(c-a);e>0&&(r[B]-=e,r[M]-=e)}}else r[B]+=a,r[M]+=a}}),[]),kt=Object(x.useCallback)(((e,t,o)=>{if(he.current&&o!==Z[0]&&o!==Z[1]&&G(o).length>1){const n=G(o).length-1,a=he.current.getSelection(),i=Math.abs(a[B]-a[M]),c=e[t].originalState.result.range;if(i>0){if(i===n)e.forEach(((e,o)=>{if(e.isConflict&&o>t){const t=e.originalState.result.range;t[B]-=i,t[M]-=i}}));else if(i<n){const o=Math.abs(i-n);o>0&&(c[M]+=o,e.forEach(((e,a)=>{if(e.isConflict&&a>t){const t=e.originalState.result.range;t[B]-=n,t[M]-=n,t[B]+=o,t[M]+=o}})))}else if(i>n){const o=Math.abs(i-n);o>0&&(c[M]-=o,e.forEach(((a,i)=>{if(a.isConflict&&i>t){const t=e[i].originalState.result.range;t[B]-=n,t[M]-=n,t[B]-=o,t[M]-=o}})))}}else c[M]+=n}}),[]);Object(x.useEffect)((()=>{const e=le.current,t=de.current,o=he.current;if(!e||!t||!o||Object(T.Ld)(i))return;let n,a,c,s=0,l=!0,d=0;const h="mouseenter";let u,g,b;const m=()=>{if(d++,n=e.getDomNode(),a=t.getDomNode(),c=o.getDomNode(),l&&!(d>3)){if(n&&a&&c)return n[L.a](h,u=()=>s=1),a[L.a](h,g=()=>s=1),c[L.a](h,b=()=>s=2),e.onDidScrollChange((n=>{const a=n.scrollTop;t.setScrollTop(a),n._oldScrollTop!==a&&1===s&&r(e,o,a,i,R,F)})),t.onDidScrollChange((t=>{t._oldScrollTop!==t.scrollTop&&e.setScrollTop(t.scrollTop)})),o.onDidScrollChange((t=>{const n=t.scrollTop;t._oldScrollTop!==n&&2===s&&r(o,e,n,i,F,R)})),!0;setTimeout((()=>m()),1e3)}};return m(),()=>{l=!1,n&&u&&n[L.X](h,u),a&&g&&a[L.X](h,g),c&&b&&c[L.X](h,b)}}),[Y,i]);const xt=Object(x.useCallback)(((e,t,o)=>{e.forEach(((n,a)=>{const i=n.originalState;if(!n.isConflict||!i)return;if(b(i.result.range,t)){const t=i.acceptedFrom;t===_.ge&&je(),"manual"!==t&&(i.acceptedFrom="manual"),kt(e,a,o),Tt(e,a),vt(e,a),Ot(e,a),jt(e,a)}else Lt(e,a,t,o)}))}),[je,kt,Lt,Tt,Ot,vt,jt]),yt=Object(x.useCallback)(((e,t)=>{if(pe.current)return;const o=t.changes[0],n=(o.range||{})[B];q(!0);t.isUndoing||t.isRedoing||xt(i,n,o.text),ge.current=e,Te(),mt(),ve()}),[i,xt,mt,Te,ve]),wt=Object(x.useCallback)((()=>{if(le.current&&de.current&&he.current){const e=[...te],t=e.findIndex((e=>e.isSelected));let o=t;t<=0?o=0:t>0&&(e[t].isSelected=!1,o=t-1),e[o].isSelected=!0;const n={[B]:d(e,o,R),[M]:h(e,o,R),[D]:0},a={[B]:d(e,o,H),[M]:h(e,o,H),[D]:0},i={[B]:d(e,o,F),[M]:h(e,o,F),[D]:0};u(le,n,n.scrollType),u(de,a,a.scrollType),u(he,i,i.scrollType),oe(e)}}),[te]),St=Object(x.useCallback)((()=>{if(le.current&&de.current&&he.current){const e=[...te],t=e.findIndex((e=>e.isSelected));let o=t;t<0?o=0:t<e.length-1&&(e[t].isSelected=!1,o=t+1),e[o].isSelected=!0;const n={[B]:d(e,o,R),[M]:h(e,o,R),[D]:0},a={[B]:d(e,o,H),[M]:h(e,o,H),[D]:0},i={[B]:d(e,o,F),[M]:h(e,o,F),[D]:0};u(le,n,n.scrollType),u(de,a,a.scrollType),u(he,i,i.scrollType),oe(e)}}),[te]),It=Object(x.useCallback)((e=>{const t=window.innerHeight;e&&e>=185&&t-e>=135&&(fe.current.style.flexBasis=t-e-10+"px")}),[]);Object(x.useEffect)((()=>{const e=me.current;if(!e)return;let t=0;const o=L.f.body.style,n=e=>{t=e.clientY,It(t)},a=()=>{o.pointerEvents="auto",o.userSelect="auto",L.f[L.X]("mousemove",n)},i=e=>{t=e.clientY,o.pointerEvents="none",o.userSelect="none",L.f[L.a]("mousemove",n),L.f[L.a]("mouseup",a)};return e[L.a]("mousedown",i),()=>{e[L.X]("mousedown",i)}}),[It]);return e(j.a,{className:I.a.codeEditorContainer},e(j.a,{h:!0,class:I.a.codeTop,style:{}},e(j.a,{w100:!0,bg:X?"#fff":"#0C0F17",class:C()(I.a.left,{[I.a.leftLightTheme]:X})},e(w.a,{fileId:t,fileName:o?o.name:"",activeFileItem:o,type:"github",isLocobook:X}),e(j.a,{class:C()(`${I.a.codeLeft} codeview-en`,{[I.a.codeLeftLightTheme]:X})},e(y.a,{key:_e,editorRef:le,type:_e,code:ne,options:N,onUpdateRef:J}))),e(j.a,{w100:!0,bg:X?"#fff":"#0C0F17",class:I.a.right},e(w.a,{fileId:t,fileName:o?o.name:"",activeFileItem:o,type:K?"result":"local",isLocobook:X}),e(j.a,{class:`${C()(I.a.codeRight,{[I.a.codeLeftLightTheme]:X})} codeview-en`},e(y.a,{editorRef:de,type:_e,code:ie,options:N,onUpdateRef:J})))),e(j.a,{bg:X?"#fff":"#0C0F17",className:C()(I.a.topBorder,{[I.a.topBorderLightTheme]:X}),style:{display:K?"none":"flex",flex:"0 0 50%"},vref:fe},e("button",{ref:me,class:C()(I.a.draggableBar,{[I.a.draggableBarLightTheme]:X,[I.a.draggableBarDarkTheme]:!X})}),e(w.a,{fileId:t,fileName:o?o.name:"",type:"result",activeFileItem:o,resultCodeEditorRef:he,totalConflictsInFile:$,onPrevClick:wt,onNextClick:St,updateUI:z,isLocobook:X}),e(j.a,{relative:!0,class:`${C()(I.a.codeBottom,{[I.a.codeLeftLightTheme]:X})} codeview-en`},e(y.a,{editorRef:he,type:_e,code:re,onChange:yt,options:a(a({},N),{},{readOnly:!1,autoIndent:"none",formatOnPaste:!1,formatOnType:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnCommitCharacter:!1,acceptSuggestionOnEnter:"off",autoClosingBrackets:"never",autoClosingDelete:"never",autoClosingOvertype:"never",autoClosingQuotes:"never",lightbulb:{enabled:!1},quickSuggestions:{comments:!1,other:!1,strings:!1}}),onUpdateRef:J}))),n>0?e(v.a,{noBg:X,enableArrow:!0,content:"Resolve conflicts for all files first before pushing",placement:"top"},e("button",{className:C()(I.a.completeMergeButton,I.a.disabledCompleteMergeButton,{[I.a.disabledCompleteMergeButtonLightTheme]:X})},e(j.c,{src:X?"/assets/locobook/merge.svg":"/assets/studio/icon/icon_complete_merge.svg",mr:6,style:{opacity:.4}}),e("div",{className:C()(I.a.completeMergeButtonText,I.a.disabledCompleteMergeButtonText,{[I.a.disabledCompleteMergeButtonTextLightTheme]:X})},"Complete Merge & Push"))):e("button",{className:C()(I.a.completeMergeButton),onClick:p},e(j.c,{src:"/assets/studio/icon/icon_complete_merge.svg",mr:6}),e("div",{className:C()(I.a.completeMergeButtonText)},"Complete Merge & Push")),!K&&0===n&&e("div",{className:I.a.conflictsResolvedNotification},e(j.c,{src:"/assets/images/icons/tick.svg",height:16,mr:10}),e("div",{className:I.a.conflictsResolvedText},"Conflicts have been resolved")))}}).call(this,o("hosL").h)},PjCc:function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"GithubFlow",(function(){return p}));var n=o("8Jek"),a=o.n(n),i=o("CmOr"),c=o("folm"),r=o("rfoC"),s=o("2tLp"),l=o("QRet"),d=o("QiP5"),h=o("aZW+"),u=o("6v9m"),g=o("9aU8"),b=o("ZzYk"),m=o("wEHB"),f=o("A5J+");const p=({onCodeRegen:t,exportStart:o,showExpiryModal:n,isLocobook:p,showcase:C,onLoadSettings:_})=>{const[T,v]=Object(h.c)(u.wb,!1),[O,j]=Object(h.c)(u.Zb,!1),[L,k]=Object(h.c)(u.bc,!1),[x,y]=Object(h.c)(u.Hb,!1),[,w]=Object(h.c)(u.yb,!1),[S]=Object(h.c)(u.sc,!0),[I]=Object(h.c)(u.pc),N=Object(l.a)((()=>{v(!T)}),[T,v]),B=Object(l.a)((e=>{e?(j(!0),w(!0)):(j(!1),w(!1)),k(!I),y(!x)}),[x,I,y,k,j,w]),M=Object(l.a)(((e,t,n,a=i.ge)=>{setTimeout((async()=>{const r=a||Object(c.N)(i.ok),l=await Object(s.b)(null==r?void 0:r[i.Li]);o(e,t,n,l)}),100)}),[o]);return e(r.a,null,e(d.a,{open:T,modalClass:a()(f.a.commitHistoryModal,{[f.a.commitHistoryModalLightTheme]:p,[f.a.commitHistoryModalDarkTheme]:!p}),modalContentClass:a()(f.a.commitHistoryModal,{[f.a.commitHistoryModalLightTheme]:p,[f.a.commitHistoryModalDarkTheme]:!p}),customOverlayClass:a()(f.a.commitHistoryModalOverlay,{[f.a.commitHistoryModalOverlayLightTheme]:p}),bodyClass:f.a.commitHistoryBody},e(g.a,{isLocobook:p,toggleModal:N})),e(d.a,{open:L,customOverlayClass:a()(f.a.githubModalOverlay,{[f.a.githubModalTransparentOverlay]:O,[f.a.githubModalOverlayLightTheme]:p}),modalContentClass:a()(f.a.exportModal,f.a.githubModal,{[f.a.hideModalStyle]:I&&S,[f.a.exportModalLightTheme]:p,[f.a.exportModalDarkTheme]:!p}),onClose:()=>{j(!1),k(!1),w(!1)},size:"full"},e(m.a,{showExpiryModal:e=>n(e),onCodeRegen:t,exportStart:(e,t,o,n)=>M(e,t,o,n),isLocobook:p,showcase:C,onLoadSettings:_})),e(d.a,{open:x,modalClass:f.a.githubConflictResolutionModal,modalContentClass:a()(f.a.githubConflictResolutionContent,{[f.a.githubConflictResolutionContentLightTheme]:p,[f.a.githubConflictResolutionContentDarkTheme]:!p}),bodyClass:f.a.githubConflictResolutionBody,customOverlayClass:a()(f.a.githubModalOverlay,{[f.a.githubModalTransparentOverlay]:O,[f.a.githubModalOverlayLightTheme]:p})},e(b.a,{showExpiryModal:e=>n(e),exportStart:(e,t,o)=>M(e,t,o),toggleModal:e=>B(e),isLocobook:p})))}}.call(this,o("hosL").h)},TLRm:function(e,t,o){"use strict";(function(e,n){var a=o("8Jek"),i=o.n(a),c=o("CmOr"),r=o("S3S6"),s=o("ijgB"),l=o("kpBu"),d=o("uXW1"),h=o("rfoC"),u=o("l8WD"),g=o("LXLg"),b=o("g4HH"),m=o("aZW+"),f=o("6v9m"),p=o("MPO6"),C=o("krxD");t.a=({cleanCode:t,activeFileItem:o,totalConflicts:a,openConflictedFile:_,onCompleteMerge:T,hadConflicts:v,isLocobook:O})=>{const[j]=Object(m.c)(f.Yb,!0),[L]=Object(m.c)(f.Cc),[k]=Object(m.c)(f.Ad,[]),[x,y]=Object(u.useState)(""),[w,S]=Object(u.useState)(""),I=o&&o[c.pk],N=o&&o[c.Bq],B=g.b.includes(I),M=g.c.includes(I),D=g.c.includes(I)&&"svgImage"===N,E=!B&&!M,H=Object(s.r)(I)?"css":"html"===I?"html":"dart"===I?"dart":"typescript",[R]=Object(m.c)(f.J),[F,A]=Object(u.useState)(!0),P=Object(u.useRef)(0);Object(u.useEffect)((()=>(0===a&&F&&v&&(clearTimeout(P.current),P.current=setTimeout((()=>A(!1)),3e3)),()=>{clearTimeout(P.current)})),[v,F,a]),Object(u.useEffect)((()=>{var e;if(j)return;if(!o)return;let t=(null==o||null===(e=o[c.nk])||void 0===e?void 0:e[c.rj])||(null==o?void 0:o[c.tj]);var n,a;(Object(s.r)(I)&&(t=o[c.nk][c.Aj]||o[c.Aj]),(B||D)&&t)?S("css"===o[c.pk]||"module.css"===o[c.pk]||"scss"===o[c.pk]?Object(r.Db)((null==o||null===(n=o[c.nk])||void 0===n?void 0:n[c.Aj])||(null==o?void 0:o[c.Aj]),I,!1):Object(r.Db)((null==o||null===(a=o[c.nk])||void 0===a?void 0:a[c.rj])||(null==o?void 0:o[c.tj]),I,!1)):M&&null!=o&&o[c.tj]&&o[c.tj][l.Fi]?S(o[c.tj][l.Fi]):E||o[c.tj]||o[c.Xo]||!o[c.Xk]||(async()=>{const e=await o[c.Xk](o);if("string"==typeof e)S(Object(r.Db)(e,I,!1));else{const t=URL.createObjectURL(e);S(t)}})().catch((e=>console.log(e)))}),[o,I,E,j,M,D,B]),Object(u.useEffect)((()=>{if(!o)return;const e=(L||[]).find((e=>(null==e?void 0:e[c.xl])===(null==o?void 0:o[c.xl])));y(e&&e.is_conflict?"conflict":e&&e.untracked?"untracked":e&&!e.locofy_file_v2?"deleted":e&&e.merge?"modified":"")}),[o,L]);const W=null==k?void 0:k.some((e=>(null==e?void 0:e[c.xl])===(null==o?void 0:o[c.xl])));return e(h.a,{className:C.a.center},o&&e(h.a,{className:i()(C.a.codeContainer,{[C.a.codeContainerLightTheme]:O})},e(h.a,{className:i()(C.a.filenameContainer,{[C.a.filenameContainerLightTheme]:O,[C.a.filenameContainerDarkTheme]:!O})},e(h.a,{class:i()(C.a.filename,{[C.a[x]]:x,[C.a.filenameLightTheme]:O,[C.a.filenameDarkTheme]:!O})},e(h.c,{src:Object(b.j)(o[c.Kn],o[c.pk]),width:16,mr:6}),o[c.Kn],x&&e(h.a,{className:C.a.fileStatusText},x.split("")[0].toUpperCase())),o&&a>0&&!W&&e(h.a,{h:!0,vc:!0},e("button",{className:C.a.resolveConflictedFiles,onClick:_},e("div",{className:C.a.resolveConflictedFilesText},"Resolve conflicted files"),e(h.c,{src:"/assets/icons/right-chevron-blue.svg",width:"6px",ml:"6px"}))),o&&a>0&&W&&e(h.a,{h:!0,vc:!0},e(h.a,{class:C.a.resolvedFilesText,mr:12},"This file has been marked as resolved!"),e("button",{className:i()(C.a.resolveConflictedFiles,C.a.bordered),onClick:_},e("div",{className:C.a.resolveConflictedFilesText},"Resolve next file"),e(h.c,{src:"/assets/icons/right-right-blue.svg",ml:"6px"}))),o&&!a&&v&&e(h.a,{h:!0,vc:!0,mr:"22px"},e("div",{className:C.a.resolvedFilesText},"Conflicts on all files have been resolved!"),e("button",{className:C.a.resolvedFilesButton,onClick:T},e("div",{className:C.a.resolvedFilesButtonText},"Complete Merge & Push"),e(h.c,{src:"/assets/icons/right-right-green.svg"})))),!j&&B&&!o[c.Xo]&&e(p.a,{key:H,code:t||w,type:H,loading:e(h.a,{class:i()(C.a.loading,C.a.inEditor)},[...Array(50)].map(((t,o)=>e(h.a,{class:C.a.loadingRow,key:o,width:`${Math.floor(380*Math.random()+120)}px`}))))}),M&&D&&!o[c.Xo]&&e(n,null,e("div",{class:i()(C.a.imageContainer,{[C.a.imageContainerLightTheme]:O}),dangerouslySetInnerHTML:{__html:w}})),M&&!D&&!o[c.Xo]&&e(h.a,{bg:O&&"#fff",class:C.a.imageContainer},e(h.c,{src:w})),(E||o[c.Xo])&&e(h.a,{bg:O&&"#fff",class:C.a.imageContainer},e(h.a,{class:C.a.noPreview},e(h.a,{class:C.a.noPreviewImage},e(h.c,{src:"/assets/not-available-eye.svg",size:22})),e(h.e,{color:O?"#40495E":"#fff",fs:14,b:!O,m:O,lineHeight:"18px",mb:6},"No preview available"),e(h.e,{color:"#96A2BE",fs:12,lineHeight:"18px"},"This file is not displayed because it is either binary or uses unsupported text coding.")))),o&&(a>0?e(d.a,{noBg:O,enableArrow:!0,content:"Resolve conflicts for all files first before pushing",placement:"top"},e("button",{className:i()(C.a.completeMergeButton,C.a.disabledCompleteMergeButton,{[C.a.disabledCompleteMergeButtonLightTheme]:O})},e(h.c,{src:R?O?"/assets/locobook/merge.svg":"/assets/studio/icon/icon_complete_merge.svg":"/assets/studio/icon/icon_github.svg",mr:"6px",style:{opacity:.4}}),e("div",{className:i()(C.a.completeMergeButtonText,C.a.disabledCompleteMergeButtonText,{[C.a.disabledCompleteMergeButtonTextLightTheme]:O})},R?"Complete Merge & Push":"Push to Github"))):e("button",{className:i()(C.a.completeMergeButton),onClick:T},e(h.c,{src:R?"/assets/studio/icon/icon_complete_merge.svg":"/assets/studio/icon/icon_github.svg",mr:"6px"}),e("div",{className:i()(C.a.completeMergeButtonText)},R?"Complete Merge & Push":"Push to Github"))),0===a&&v&&F&&e("div",{className:C.a.conflictsResolvedNotification},e(h.c,{src:"/assets/images/icons/tick.svg",height:"16px",mr:"10px"}),e("div",{className:C.a.conflictsResolvedText},"Conflicts have been resolved")))}}).call(this,o("hosL").h,o("hosL").Fragment)},ZzYk:function(e,t,o){"use strict";(function(e,n){function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a.apply(this,arguments)}o.d(t,"b",(function(){return x}));var i=o("8Jek"),c=o.n(i),r=o("CmOr"),s=o("S3S6"),l=o("C9kS"),d=o("uRM7"),h=o("NGVL"),u=o("rfoC"),g=o("ElAP"),b=o("Vp0P"),m=o("kru1"),f=o("l8WD"),p=o("2Twe"),C=o("+vna"),_=o("aZW+"),T=o("6v9m"),v=o("iJbY"),O=o("TLRm"),j=o("wEHB"),L=o("LGi0"),k=o("+GUh");t.a=({toggleModal:t,exportStart:o,isLocobook:a})=>{const[i,j]=Object(f.useState)(!0),[y,w]=Object(f.useState)(!1),[S,I]=Object(f.useState)(!1),[N,B]=Object(f.useState)([]),[M,D]=Object(f.useState)(""),[E,H]=Object(f.useState)(""),[R,F]=Object(f.useState)(null),[A]=Object(_.c)(T.rd),[P,W]=Object(f.useState)(""),[Z,G]=Object(f.useState)(""),[V]=Object(_.c)(T.Kc),[z]=Object(_.c)(T.xd),[X]=Object(_.c)(T.Qd),[K]=Object(_.c)(T.vb),[U]=Object(_.c)(T.Ld),[Y]=Object(_.c)(T.Bb,""),[J]=Object(_.c)(T.Jc),[Q]=Object(_.c)(T.cb,{}),[q]=Object(_.c)(T.Eb,[]),[$]=Object(_.c)(T.I,[]),ee=Object(f.useMemo)((()=>(null==$?void 0:$.filter((e=>!(null!=q&&q.some((t=>(null==t?void 0:t[r.xl])===(null==e?void 0:e[r.xl])))))))||[]),[$,q]),te=e=>q.some((t=>(null==t?void 0:t[r.xl])===e)),[oe]=Object(f.useState)(!!ee.length),ne=Object(m.a)(d.g),ae={children:x((null==ne?void 0:ne.children)||[],q)},[ie]=Object(_.c)(T.Cc,[]),[,ce]=Object(_.c)(T.bc),[,re]=Object(_.c)(T.Zb),[,se]=Object(_.c)(T.xb),[,le]=Object(_.c)(T.yb,!1),[de]=Object(_.c)(T.Pd,"screen_component"),[he]=Object(_.c)(T.J),[ue,ge]=Object(f.useState)(!1),[be,me]=Object(f.useState)(null),[fe,pe]=Object(f.useState)(null),[Ce]=Object(_.c)(T.sc,!1),_e=Object(f.useRef)(!1);Object(f.useEffect)((()=>{if(!ie)return;const e=ie.filter((e=>e.is_conflict&&ee.some((t=>(null==t?void 0:t[r.xl])===(null==e?void 0:e[r.xl])))))||[];let t=0;for(const o of e)for(const e of o[r.nj])e.isConflict&&t++;_e.current||(Object(h.U)(null==e?void 0:e.length,t),_e.current=!0)}),[ee,ie]),Object(f.useEffect)((()=>{var e,t;const o=(null===(e=z[X])||void 0===e?void 0:e.title)||V,n=(null===(t=K[U])||void 0===t?void 0:t.value)||J||"main";W(o),G(n)}),[K,J,V,z,U,X]);const Te=Object(f.useCallback)((e=>{const t={project_id:A,repo_name:V};Object(g.Xb)(t).then((t=>{e(null==t?void 0:t.data)})).catch((()=>{ce(!1),se({[v.d]:1}),re(!0)}))}),[V,A,se,re,ce]),ve=Object(f.useCallback)((()=>{le(!1);let e=Q.pages;e=Object(s.Yf)(e);V?Te((t=>{o(e,de,null==t?void 0:t.name)})):o(e,de,P)}),[Te,Q.pages,o,V,de,le,P]),Oe=Object(f.useCallback)(((e,t,o)=>{null==e||e.every((e=>{var n;return(null==e?void 0:e[r.xl])===t.id?(H(t.id),F(e),setTimeout((()=>{j(t.is_conflict||t.modified)}),10),w(t.is_conflict),I(t.modified),B(t.conflicts),!1):((null===(n=e[r.Li])||void 0===n?void 0:n.length)>0&&Oe(e[r.Li],t,o),!0)}))}),[]),je=Object(f.useCallback)((e=>{null==e||e.every((e=>{var t;const o=q.find((t=>(null==t?void 0:t[r.xl])!==(null==e?void 0:e[r.xl])));return e[r.xr]===r.uk&&!e[r.Xo]&&o?(H(""),F(e),j(!1),w(!1),B([]),!1):((null===(t=e[r.Li])||void 0===t?void 0:t.length)>0&&je(e[r.Li]),!0)}))}),[q]);Object(f.useEffect)((()=>{const e=ie.find((e=>e.is_conflict&&ee.some((t=>(null==t?void 0:t[r.xl])===(null==e?void 0:e[r.xl]))))),t=ie.find((e=>e.modified&&!te(e.id))),o=ie.find((e=>!te(e.id))),n=e||t||o;n?Oe(ae.children,n,!0):R||je(ae.children)}),[ee,$,je,Oe,ie,q]);const Le=Object(f.useCallback)((e=>{if((null==e?void 0:e[r.xr])===r.uk){const t=null==e?void 0:e[r.xl],o=ie.find((e=>(null==e?void 0:e[r.xl])===t));if(!o)return w(!1),void j(!1);o.is_conflict||o.modified?(j(!1),setTimeout((()=>{j(!0)}),10),w(o.is_conflict),I(o.modified),H(o[r.xl]),B(o.conflicts)):(w(!1),I(!1),j(!1),D(o.clean_content))}}),[ie]),ke=Object(f.useCallback)((()=>{const e=ie.find((e=>e.is_conflict));e&&Oe(ae.children,e,!0)}),[ae.children,Oe,ie]),xe=Object(f.useCallback)((e=>{j(!1),w(!1),D(ie[e].clean_content)}),[ie]),ye=Object(f.useCallback)((()=>{t(!0),ce(!1)}),[ce,t]),we=Object(f.useCallback)((e=>{ge(!0),me(e)}),[]),Se=Object(f.useCallback)((()=>{ge(!1),me(null),pe(null)}),[]),Ie=Object(f.useCallback)((e=>{e&&(Le(e),F(e),pe(e),ge(!1),me(null))}),[Le]);return e(n,null,Ce&&e(u.a,{class:c()(k.a.checkingOverlay,{[k.a.checkingOverlayLightTheme]:a})},e(u.a,{class:k.a.checkingGithubConnection},e(l.c,{style:"width: 40px; height: 40px;"}),e(u.e,{mt:16},"Fetching Code from Github"))),e(u.a,{className:c()(k.a.header,{[k.a.headerLightTheme]:a,[k.a.headerDarkTheme]:!a})},e(u.a,{h:!0},e(u.c,{src:a?"/assets/locobook/locofy-to-github-logo.svg":"/assets/studio/icon/icons_locofy_to_github.svg",mr:"16px"}),e(u.a,{bc:a?"#ECF0F6":"#232B3B"}),e(u.a,{v:!0,ml:"16px"},e("div",{className:c()(k.a.heading,{[k.a.headingLightTheme]:a,[k.a.headingDarkTheme]:!a})},he?"Resolve Code Conflicts":"Review your files"),e("div",{className:c()(k.a.subheading,{[k.a.subHeadingLightTheme]:a,[k.a.subHeadingDarkTheme]:!a})},he?"There are some conflicts found in your files. Please resolve these before pushing to Github.":"Review all your files before pushing to Github"))),e(u.a,{h:!0,vc:!0},e("div",{className:c()(k.a.repoInfoText,{[k.a.repoInfoTextLightTheme]:a,[k.a.repoInfoTextDarkTheme]:!a})},"Repository"," ",e("span",{className:c()(k.a.repoInfoSpanText,{[k.a.repoInfoSpanTextLightTheme]:a,[k.a.repoInfoSpanTextDarkTheme]:!a})},P)," ","/ Branch"," ",e("span",{className:c()(k.a.repoInfoSpanText,{[k.a.repoInfoSpanTextLightTheme]:a,[k.a.repoInfoSpanTextDarkTheme]:!a})},Z)," ",Y&&e(n,null,"/ Path"," ",e("span",{className:c()(k.a.repoInfoSpanText,{[k.a.repoInfoSpanTextLightTheme]:a,[k.a.repoInfoSpanTextDarkTheme]:!a})},Y))),e("div",{className:k.a.editText,onClick:ye},"Edit"),e("button",{class:c()(k.a.closeButton,{[k.a.closeButtonLightTheme]:a,[k.a.closeButtonDarkTheme]:!a}),onClick:()=>{t()}},e(u.c,{src:"/assets/studio/close-modal-blue.svg"})))),e(u.a,{h:!0,class:k.a.body},e(u.a,{class:c()(k.a.fileExplorerWrapper,{[k.a.fileExplorerWrapperLightTheme]:a})},e(p.a,{mergeCompare:!0,heading:"Explorer",data:ae,children:null==ae?void 0:ae[r.Li],onItemClick:Le,activeFileItem:R,setActiveFileItem:F,uncheckedItems:q,isFileConflicted:y&&!S,handleItemClickWithWarning:we,itemSelectedFromConflict:fe,isLocobook:a,locobookGithubFlow:a}),e(u.a,{p:10,pt:4},e(C.a,{darkMode:!a,source:a?"locobook":"builder"}))),(y||S)&&i?e(L.a,{mergePathFileId:E,activeFileItem:R,totalConflicts:Object(s.Ae)(ee),codeBlocks:N,updateUI:xe,onCompleteMerge:ve,isLocobook:a,isMerge:S}):e(O.a,{cleanCode:M,totalConflicts:Object(s.Ae)(ee),activeFileItem:R,openConflictedFile:ke,onCompleteMerge:ve,hadConflicts:oe,isLocobook:a})),ue&&e(u.a,{class:c()(k.a.unresolvedWarning,{[k.a.unresolvedWarningLightTheme]:a}),onClick:Se},e(u.a,{class:c()(k.a.unresolvedWarningInner,{[k.a.unresolvedWarningInnerLightTheme]:a}),onClick:e=>Object(b.A)(e)},e(u.c,{class:k.a.unresolvedWarningImage,src:a?"/assets/locobook/not-resolved.png":"/assets/builder-not-resolved.png",width:95,mb:18}),e(u.a,{class:k.a.unresolvedWarningText},e(u.e,{fs:14,color:a?"#40495E":"#ffffff",mb:4,class:k.a.unresolvedWarningHeading},"You have not resolved this file"),e(u.e,{fs:12,color:"#96A2BE",mb:24,lineHeight:"18px"},"Are you sure you want to leave this file without marking as resolved?")),e(u.a,{class:k.a.unresolvedWarningBtns},e("button",{class:c()(k.a.cancelWarning,{[k.a.cancelWarningLightTheme]:a}),onClick:Se},"Cancel"),e("button",{class:k.a.yesWarning,onClick:()=>Ie(be)},"Yes")),e("button",{class:k.a.closeWarning,onClick:Se},e(u.c,{src:"/assets/studio/icon/icon_close.svg"})))))};const x=(e,t)=>e.reduce(((e,o)=>{const n=o[r.xr]===r.ck,i=o[r.Li];if(!n&&t.some((e=>(null==e?void 0:e[r.xl])===(null==o?void 0:o[r.xl]))))return e;if(n&&(Object(b.v)(i)||!Object(j.b)(i,t)))return e;const c=Array.isArray(i)?a({},o,{[r.Li]:x(i,t)}):o;return e.push(c),e}),[])}).call(this,o("hosL").h,o("hosL").Fragment)},i4pj:function(e,t){"use strict";t.a={defaultFontStack:"'Inter', sans-serif",monoFontStack:"'Source Code Pro', monospace",locofyGreen:"#4fc786",codeEditorContainer:"codeEditorContainer__jiKPi",codeTop:"codeTop__HRivh",left:"left__Pr1zm",leftLightTheme:"leftLightTheme__VLh5X",right:"right__0xzIb",codeLeft:"codeLeft__BgCzO",codeRight:"codeRight__zXNMl",codeBottom:"codeBottom__9PiTW",codeLeftLightTheme:"codeLeftLightTheme__ol91U",codeRightLightTheme:"codeRightLightTheme__arvO0",codeBottomLightTheme:"codeBottomLightTheme__HBXVR",topBorder:"topBorder__b2lKK",topBorderLightTheme:"topBorderLightTheme__pv7UF",draggableBar:"draggableBar__kbixL",draggableBarLightTheme:"draggableBarLightTheme__x4hAT",draggableBarDarkTheme:"draggableBarDarkTheme__hB7r7",backgroundColor:"backgroundColor__OCSDC",backgroundColorLightTheme:"backgroundColorLightTheme__xXZj8",borderTop:"borderTop__TM3WY",borderBottom:"borderBottom__VcRK9",borderLeft:"borderLeft__cK5Vg",borderRight:"borderRight__SHeWf",emptyLine:"emptyLine__AMDNO",buttonsContainer:"buttonsContainer__KXDpK",changesButton:"changesButton__qTVv5",changesButtonLightTheme:"changesButtonLightTheme__TVv9B",noChangesAcceptedText:"noChangesAcceptedText__XlRE1",noChangesAcceptedTextLightTheme:"noChangesAcceptedTextLightTheme__ECdcq",divider:"divider__-qOwP",completeMergeButton:"completeMergeButton__Xr4m8",disabledCompleteMergeButton:"disabledCompleteMergeButton__RiyEe",disabledCompleteMergeButtonLightTheme:"disabledCompleteMergeButtonLightTheme__iRFdg",completeMergeButtonText:"completeMergeButtonText__yD2Xa",disabledCompleteMergeButtonText:"disabledCompleteMergeButtonText__ZyYdx",disabledCompleteMergeButtonTextLightTheme:"disabledCompleteMergeButtonTextLightTheme__FPlWA",conflictsResolvedNotification:"conflictsResolvedNotification__IwilS",conflictsResolvedText:"conflictsResolvedText__ppiDt",hidden:"hidden__kJ1eV",gitAddedLines:"gitAddedLines__uPVr3",gitDeletedLines:"gitDeletedLines__86g6u"}},krxD:function(e,t){"use strict";t.a={locofyGreen:"#4fc786",errorColor:"#f4596c",locofyBlue:"#457eff",defaultFontStack:"'Inter', sans-serif",center:"center__Nfxw1",codeContainer:"codeContainer__7YRHN",codeContainerLightTheme:"codeContainerLightTheme__mKWGp",filenameContainer:"filenameContainer__xLUFu",filenameContainerLightTheme:"filenameContainerLightTheme__XiZJa",filenameContainerDarkTheme:"filenameContainerDarkTheme__mwp5r",filename:"filename__WQ-Pw",filenameLightTheme:"filenameLightTheme__iQ4ti",filenameDarkTheme:"filenameDarkTheme__M0IcZ",nameInner:"nameInner__O+gEC",untracked:"untracked__fgJ1V",deleted:"deleted__CE8Df",modified:"modified__DD8nV",conflict:"conflict__5aWLA",mixed:"mixed__NUe10",fileStatusText:"fileStatusText__ZY7pv",resolveConflictedFiles:"resolveConflictedFiles__2zRBn",bordered:"bordered__xXsis",resolveConflictedFilesText:"resolveConflictedFilesText__7khXY",resolvedFilesText:"resolvedFilesText__ldy8s",resolvedFilesButton:"resolvedFilesButton__bJ+VL",resolvedFilesButtonText:"resolvedFilesButtonText__IEZDh",imageContainer:"imageContainer__CeF1v",imageContainerLightTheme:"imageContainerLightTheme__-VXSu",noPreview:"noPreview__C+pmB",noPreviewImage:"noPreviewImage__CLaMv",completeMergeButton:"completeMergeButton__PEvWk",disabledCompleteMergeButton:"disabledCompleteMergeButton__ZiwQ7",disabledCompleteMergeButtonLightTheme:"disabledCompleteMergeButtonLightTheme__ryg0I",completeMergeButtonText:"completeMergeButtonText__Nvs5z",disabledCompleteMergeButtonText:"disabledCompleteMergeButtonText__tdU3A",disabledCompleteMergeButtonTextLightTheme:"disabledCompleteMergeButtonTextLightTheme__pmOqi",conflictsResolvedNotification:"conflictsResolvedNotification__ntHC5",showresolvednotif:"showresolvednotif__DbyDO",conflictsResolvedText:"conflictsResolvedText__dr8Ef",loading:"loading__+OazH",inEditor:"inEditor__sdkAp",loadingRow:"loadingRow__leQ53",reviewpreviewloading:"reviewpreviewloading__Ftwyi"}},mihe:function(e,t,o){"use strict";function n(...e){const t=document.createElement("div");return e.forEach((e=>e&&t.classList.add(e))),t}function a(e,t,o){const{type:a,start:i,size:c}=o;("old"===a?e:t).changeViewZones((e=>{e.addZone({afterLineNumber:i,heightInLines:c,domNode:n(s.a.emptyLine)})}))}function i(e,t,o){o.old.length>0&&e.getModel().deltaDecorations([],[{range:{startLineNumber:o.old.start+1,endLineNumber:o.old.start+o.old.length},options:{isWholeLine:!0,className:s.a.gitDeletedLines,stickyness:0}}]),o.new.length>0&&t.getModel().deltaDecorations([],[{range:{startLineNumber:o.new.start+1,endLineNumber:o.new.start+o.new.length},options:{isWholeLine:!0,className:s.a.gitAddedLines,stickyness:0}}])}function c(e,t,o,n){if(!o&&!n)return;const{diffBlocks:c,emptyZones:s}=function(e,t){const o=Object(r.a)(e,t),n=function(e){const t=[];for(const o of e){const{old:e,new:n}=o,a=e.length,i=n.length;a!==i&&t.push(a<i?{type:"old",start:e.start+a,size:i-a}:{type:"new",start:n.start+i,size:a-i})}return t}(o);return{diffBlocks:o,emptyZones:n}}(o,n),l=e.current,d=t.current;for(const e of s)a(l,d,e);for(const e of c)i(l,d,e)}o.d(t,"a",(function(){return c}));var r=o("PKZ/"),s=o("i4pj")},"nw/Z":function(e,t){"use strict";t.a={defaultFontStack:"'Inter', sans-serif",locofyBlue:"#457eff",sourceText:"sourceText__GMLlx",fileName:"fileName__S7y+6",modify:"modify__l1qfC",changed:"changed__14t1h",sourceName:"sourceName__8Dupi",totalConflicts:"totalConflicts__VjFr3",seperator:"seperator__gqgvO",navigationButtons:"navigationButtons__GsBdO",prevButton:"prevButton__oK1ou",button:"button__fVP0N",disabledButton:"disabledButton__nAuQ6",disabledButtonLightTheme:"disabledButtonLightTheme__aTnsh"}},wEHB:function(e,t,o){"use strict";(function(e,n){function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){for(const o of e){if(o[u.xr]===u.uk&&!t.some((e=>e[u.xl]===o[u.xl])))return!0;if(o[u.Li]&&Object(g.Ae)(o[u.Li])){const e=r(o[u.Li],t);if(e)return e}}}function s(){return e(j.a,{class:R.a.selectDeselect},e(j.a,{h:!0,vc:!0,onClick:D.r},e(j.c,{src:"/assets/icons/check_mark.svg",width:8,mr:4})," Select all"),e(j.a,{h:!0,vc:!0,ml:12,onClick:D.d},e(j.c,{src:"/assets/icons/cross.svg",width:8,mr:4})," Deselect all"))}function l(){if(Object(x.a)(M.o))return e("div",{className:"flex flex-row pb-[8px] items-center border-solid border border-l-0 border-t-0 border-r-0 border-[#232B3B] border-opacity-[0.7] mb-[12px] mt-[-4px] gap-[8px]"},e(I.a,{message:"Show",version:"other"}),e(s,null))}o.d(t,"a",(function(){return F})),o.d(t,"b",(function(){return r}));var d=o("8Jek"),h=o.n(d),u=o("CmOr"),g=o("S3S6"),b=o("6Xce"),m=o("folm"),f=o("tANj"),p=o("fSJr"),C=o("nzdp"),_=o("uXW1"),T=o("C9kS"),v=o("pWmx"),O=o("NGVL"),j=o("rfoC"),L=o("ElAP"),k=o("2tLp"),x=o("kru1"),y=o("QRet"),w=o("2Twe"),S=o("+vna"),I=o("JZMu"),N=o("aZW+"),B=o("6v9m"),M=o("flZm"),D=o("uRM7"),E=o("ZzYk"),H=o("iJbY"),R=o("+v3W");const F=({exportStart:t,onCodeRegen:o,isLocobook:a=!1,showcase:c,onLoadSettings:d})=>{var I,F,A,P,W,Z;const[G,V]=Object(N.c)(B.wd,!1),[z,X]=Object(N.c)(B.xb),[,K]=Object(N.c)(B.yb,!1),[U]=Object(N.c)(B.Jc),[Y,J]=Object(y.k)(!0),[Q]=Object(N.c)(B.Qd),[q]=Object(N.c)(B.Ld),[$]=Object(N.c)(B.Bb,""),[ee,te]=Object(y.k)([]),[oe]=Object(N.c)(B.xd,[]),[ne]=Object(N.c)(B.vb,[]),[,ae]=Object(N.c)(B.bc),[ie]=Object(N.c)(B.oe,"project"),[ce]=Object(N.c)(B.rd,""),[re]=Object(N.c)(B.sd,""),[se]=Object(N.c)(B.td),[le,de]=Object(y.k)(),[he,ue]=Object(y.k)({}),[ge,be]=Object(y.k)(!1),[me,fe]=Object(N.c)(B.Cc,[]),[,pe]=Object(N.c)(B.Dc,null),[Ce,_e]=Object(y.k)(""),[Te,ve]=Object(y.k)(0),[Oe,je]=Object(y.k)(0),[Le,ke]=Object(y.k)(0),[xe,ye]=Object(y.k)(0),[we,Se]=Object(y.k)(!1),[Ie]=Object(N.c)(B.Kc),[Ne,Be]=Object(N.c)(B.Pd,"screen_component"),[,Me]=Object(N.c)(B.fb,u.F),[,De]=Object(N.c)(B.ec,!1),[,Ee]=Object(N.c)(B.Zb,!1),[,He]=Object(N.c)(B.Hb),[Re]=Object(N.c)(B.nc,!1),[Fe,Ae]=Object(N.c)(B.pc),[Pe,We]=Object(N.c)(B.kc,!1),[Ze,Ge]=Object(N.c)(B.H),[,Ve]=Object(N.c)(B.xd),[ze]=Object(N.c)(B.qd),[Xe,Ke]=Object(y.k)(null),[Ue,Ye]=Object(y.k)(null),[Je,Qe]=Object(y.k)(!1),[qe,$e]=Object(N.c)(B.Eb,[]),[et,tt]=Object(N.c)(B.id,""),[ot,nt]=Object(y.k)(-1),[at,it]=Object(y.k)(!1),[ct,rt]=Object(N.c)(B.wb,!1),st=Ie||(null===(I=oe[Q])||void 0===I?void 0:I.value),lt=Ie||(null===(F=oe[Q])||void 0===F?void 0:F.title),dt=U||(null===(A=ne[q])||void 0===A?void 0:A.value)||"main",[ht,ut]=Object(y.k)(!1),[gt,bt]=Object(y.k)(!1),[,mt]=Object(N.c)(B.G,[]),[,ft]=Object(N.c)(B.I,[]),[,pt]=Object(N.c)(B.tb),[Ct,_t]=Object(N.c)(B.sc,!0),[,Tt]=Object(N.c)(B.J),vt=Object(x.a)(D.g),Ot=Object(x.a)(D.n),[jt]=Object(N.c)(B.Td),[,,Lt]=Object(v.a)(c,d,a),kt=Object(y.a)((e=>{d&&Lt("github_sync",e)}),[Lt,d]);Object(y.d)((()=>{(async()=>{try{Se(!0);const e=await Object(L.U)({projectId:ce});ue(e.exportData),Se(!1)}catch(e)})()}),[ce]),Object(y.d)((()=>{!se||null!=se&&se[u.Ad]||!jt||kt(jt)}),[se,jt]);const xt={children:Object(E.b)((null==vt?void 0:vt.children)||[],qe)},yt=Object(y.j)(0),wt=Object(y.j)(!1),St=Object(x.a)(D.t),It=Object(x.a)(D.f),Nt=Object(x.a)(D.s);Object(y.d)((()=>{if(Re||Fe){const e=Object(g.Ae)(Object(k.d)(St))?St:[],t=Object(k.e)((null==vt?void 0:vt.children)||[],e||[],he,Fe);$e([...t]),Fe&&(Object(m.cc)(u.ok,vt),Zt("reviewFiles"))}else _t(!1)}),[Re,vt,null==vt?void 0:vt.children,Fe,Nt,Ae,he]),Object(y.d)((()=>{if(ne&&ne.length){const e=[];ne.forEach(((t,o)=>{(o!==q||U)&&e.push(t)})),te([...e])}}),[ne,U,q]),Object(y.d)((()=>{const e=r((null==vt?void 0:vt.children)||[],qe);be(e)}),[vt,qe]),Object(y.d)((()=>{let e=0,t=qe.filter((e=>e[u.xr]===u.uk)).map((e=>[e[u.xl],!0]));t.length&&(t=Object.fromEntries(t)),me.forEach((o=>{var n;null!==(n=t)&&void 0!==n&&n[null==o?void 0:o[u.xl]]||null==o||!o.is_conflict||(e+=1)})),ye(e)}),[me,qe,Ct]),Object(y.d)((()=>{Be(Re?u.aj:"screen_component"),Me(u.F),De(!1),V(!1),We(!1),$e([]),_t(!0)}),[Me,Be,De,We,V,$e,Re,_t]),Object(y.d)((()=>()=>{fe([]),pe(null)}),[fe,pe]),Object(y.d)((()=>{const e=Ot&&Ot.children;(Oe||Le||Te)&&e&&e.length?_e(u.ae[1]):e&&e.length&&_e(u.ae[0])}),[Te,Ot,Oe,Le]);const Bt=se.isExpo,Mt=(null==se?void 0:se.appName)||(null==se?void 0:se.projectName)||"",Dt=(null==se?void 0:se.packageName)||"",Et=null==se?void 0:se[u.wd],Ht=null==se?void 0:se.appIcon;Object(y.d)((()=>{(async()=>{const e=U?et:dt;await D.e(st,e,ce,$,ut),await D.c(J,he,Et,le,Bt,Mt,Dt,Ht,de,bt,yt),await D.b(st,e,ce,$,ke,ve,ye,je,ft,mt,pe,fe,bt,J,_t,$e)})()}),[he]),Object(y.d)((()=>{var e;ht&&gt&&!wt.current&&(Object(O.Y)(null!=Ot&&null!==(e=Ot.children)&&void 0!==e&&e.length?"exist":"empty",Le,Te,xe,Oe,ie),wt.current=!0)}),[ht,gt,null==Ot||null===(P=Ot.children)||void 0===P?void 0:P.length,Le,Te,xe,Oe,ie]);const Rt=Object(y.a)((async e=>{const t={};Object(b.b)(e,t,"/");const n=i({},se),a=i(i({},se),{},{fileStructure:t}),c={[u.Np]:JSON.stringify(a)};Se(!0),await Object(L.Gc)(ce,c).catch((e=>));const r=D.i(),s=Object(m.u)().map((e=>e));Object(m.g)(),Object(m.Wb)(s.filter((e=>!r.includes(e.nodeIds[0]))));const l=await Object(L.U)({projectId:ce});Se(!1);const d=l.exportData;a[u.qd]===u.S&&Object(L.Lc)(ze.project_id,Object(m.kb)().map((e=>({class_name:e.className,node_id:e.nodeID,screen_id:e.screenID})))),Object(m.Wb)(s),await D.c(J,d,Et,le,Bt,Mt,Dt,Ht,de,bt,yt);const h={[u.Np]:JSON.stringify(n)};await Object(L.Gc)(ce,h).catch((e=>)),o();const g=U?et:dt;await D.q(D.g(),st,g,ce,$,ke,ve,ye,je,ft,mt,pe,fe,bt,J,_t,$e)}),[Ht,Mt,et,dt,le,$,Bt,U,o,Dt,Et,se,ze,ce,st,mt,ft,_t,pe,fe,$e]),Ft=Object(y.a)((async()=>{if(!["new"].includes(z[H.h]))try{const e=await Object(L.ac)({project_id:ce});if(!e.data.repos)return;const t=e.data.repos.map((e=>{const t=e.permissions||{};return t.pull&&t.push&&{[u.lr]:e.short_name,[u.Cr]:e[u.Kn]}})).filter((e=>e));Ve((e=>{const o=[...e||[]];for(const e of t){o.some((t=>(null==t?void 0:t.value)===(null==e?void 0:e.value)))||o.push(e)}return o}))}catch(e){}}),[z,ce,Ve]),At=Object(y.a)((()=>{Ee(!0),ae(!1),K(!0),Ft()}),[Ft,ae,Ee,K]),Pt=Object(y.a)((()=>{Ee(!1),ae(!1)}),[ae,Ee]),Wt=Object(y.a)((e=>{const t={project_id:ce,repo_name:Ie};Object(L.Xb)(t).then((t=>{e(null==t?void 0:t.data)})).catch((()=>{ae(!1),X({[H.d]:1}),Ee(!0)}))}),[Ie,ce,X,ae,Ee]),Zt=Object(y.a)((e=>{var t;Pe&&-1===ot?it(!0):(He(!0),Tt("reviewFiles"!==e),Object(O.Z)(null!=Ot&&null!==(t=Ot.children)&&void 0!==t&&t.length?"exist":"empty",Le,Te,xe,Oe,ie,Object(g.Ae)(St)))}),[Pe,ot,He,null==Ot||null===(W=Ot.children)||void 0===W?void 0:W.length,Le,Te,xe,Oe,ie,St,Tt]),Gt=Object(y.a)((()=>{var e;if(!(Oe||Le||Te||xe))return;if(Pe&&-1===ot||Re&&!Object(g.Ae)(St))return void it(!0);let o=he.pages;o=Re?Object(g.Yf)(St):Object(g.Yf)(o);const n=Ie;V(!0),K(!1),o.forEach((e=>Object(g.Fb)(e,se))),Object(m.cc)(u.ok,vt),n?Wt((e=>{t(o,Ne,null==e?void 0:e.name,vt)})):t(o,Ne,st,vt),Object(O.Z)(null!=Ot&&null!==(e=Ot.children)&&void 0!==e&&e.length?"exist":"empty",Le,Te,xe,Oe,ie,Object(g.Ae)(St)),Ee(!1)}),[Pe,ot,he,Ie,V,K,null==Ot||null===(Z=Ot.children)||void 0===Z?void 0:Z.length,Le,Te,xe,Oe,ie,Ee,Wt,t,Ne,st,vt,se,Re,St]),Vt=Object(y.a)(((e,t)=>{nt(t),tt(e),it(!1)}),[tt]),zt=Object(y.a)((()=>{rt(!ct),pt(!0)}),[pt,ct,rt]);Object(y.d)((()=>{D.v()}),[]);const Xt=!!(Oe||Le||Te||xe),Kt=Ot&&Ot[u.Li]&&Ot[u.Li].length>0&&Xt;return e(n,null,Fe?e(j.a,{class:R.a.checkingOverlay},e(j.a,{class:h()(R.a.checkingGithubConnection,{[R.a.checkingGithubConnectionLightTheme]:a,[R.a.checkingGithubConnectionDarkTheme]:!a})},e(T.c,{style:"width: 40px; height: 40px;"}),e(j.e,{mt:16},"Fetching Code from Github"))):e(n,null,e("div",{class:h()(R.a.exportModalHeader,{[R.a.exportModalHeaderLightTheme]:a,[R.a.exportModalHeaderDarkTheme]:!a})},e("div",{class:R.a.headerLeft},e(j.c,{src:a?"/assets/locobook/locofy-to-github-logo.svg":"/assets/studio/loco-to-github.svg"}),e("div",{class:h()(R.a.headerTitle,{[R.a.headerTitleLightTheme]:a})},e("p",{class:h()(R.a.title,{[R.a.titleLightTheme]:a,[R.a.titleDarkTheme]:!a})},"Review your file structure"),e("p",{class:h()({[R.a.subText]:a})},"Edit your Locofy structure to match the Github structure"))),e("div",{class:R.a.headerRight},e(j.a,{h:!0,vc:!0},e("div",{className:h()(R.a.repoInfoText,{[R.a.repoInfoTextLightTheme]:a,[R.a.repoInfoTextDarkTheme]:!a})},"Repository"," ",e("span",{className:h()(R.a.repoInfoSpanText,{[R.a.repoInfoSpanTextLightTheme]:a,[R.a.repoInfoSpanTextDarkTheme]:!a})},lt)," ","/ Branch"," ",e("span",{className:h()(R.a.repoInfoSpanText,{[R.a.repoInfoSpanTextLightTheme]:a,[R.a.repoInfoSpanTextDarkTheme]:!a})},dt)," ",$&&e(n,null,"/ Path"," ",e("span",{className:h()(R.a.repoInfoSpanText,{[R.a.repoInfoSpanTextLightTheme]:a,[R.a.repoInfoSpanTextDarkTheme]:!a})},$))),e("div",{onClick:At,className:R.a.editText},"Edit")),e("button",{class:h()(R.a.closeExport,{[R.a.closeExportLightTheme]:a,[R.a.closeExportDarkTheme]:!a}),onClick:Pt},e(j.c,{src:"/assets/studio/close-modal-blue.svg"})))),e("div",{className:R.a.githubContainer},!Re&&e(n,null,e("div",{className:h()(R.a.window,{[R.a.windowLightTheme]:a})},e("div",{className:h()(R.a.header,{[R.a.headerLightTheme]:a})},e(j.a,{inlineFlex:!0,vc:!0},e(j.c,{src:a?"/assets/locobook/locobook-github.svg":"/assets/studio/github.svg"}),"Github / ",e("span",null,lt)," - Remote"),e(j.a,{className:h()(R.a.headerTag,{[R.a.headerTabLightTheme]:a})},e(j.e,null,"Read-only"))),e("div",{className:R.a.windowBody},Y&&e(j.a,{class:R.a.loadingContainer},e(T.c,{style:"width: 32px; height: 32px;"}),e(j.e,{color:"#96A2BE",fs:12,mt:8},yt.current>1?"Refactoring code...":"Loading...")),!Y&&e(n,null,Ot&&Ot.children&&Ot.children.length?e(w.a,{heading:"Explorer",data:Ot,children:Ot.children,defaultExpand:!0,isLocobook:a,locobookGithubFlow:a}):e("p",{className:R.a.emptyMessage},$&&e(n,null,"No files to show for now :) ",e("br",null)," You are pushing to this Github path for the first time."),!$&&e(n,null,"No files to show for now :) ",e("br",null)," You are pushing to Github for the first time."))))),e("div",{class:h()(R.a.window,{[R.a.windowLightTheme]:a})},e("div",{class:h()(R.a.header,{[R.a.headerLightTheme]:a})},e(j.a,{inlineFlex:!0,vc:!0},e(j.a,null,e(j.c,{src:a?"/assets/locobook/locobook-locofy.svg":"/assets/studio/locofy.svg"})),"Locofy / ",e("span",{className:"truncate max-w-[180px]"},re)," - Current"),e(j.a,{h:!0},e(j.e,{class:R.a.commitHistoryText,onClick:zt},"View commit history"))),e("div",{class:h()(R.a.windowBody,{[R.a.bottomBar]:Ot&&Ot.children&&Ot.children.length&&!0})},Y&&!we&&e(j.a,{class:R.a.loadingContainer},e(T.c,{style:"width: 32px; height: 32px;"}),e(j.e,{color:"#96A2BE",fs:12,mt:8},yt.current>1?"Refactoring code...":"Loading...")),e(w.a,{heading:"Explorer",data:vt,children:null==vt?void 0:vt[u.Li],currentDirectory:Xe,setCurrentDirectory:Ke,editingFileItem:Ue,setEditingFileItem:Ye,addFolderMode:Je,setAddFolderMode:Qe,uncheckedItems:qe,setUncheckedItems:$e,isCheckable:!0,defaultExpand:!0,locobookGithubFlow:a,onCodeRegen:()=>{o()},mergeCompare:Kt,isLocobook:a,onReCalculateGithubChanges:Rt,showLoader:we}),Ot&&Ot[u.Li]&&Ot[u.Li].length&&e("div",{className:h()(R.a.windowFooter,{[R.a.windowFooterLightTheme]:a})},e(_.a,{noBg:a,enableArrow:!0,placement:"top",content:e(n,null,e(j.a,{class:R.a.legendRow},e(j.a,{class:h()(R.a.legendCircle,R.a.untracked)}),e(j.a,{fs:12,lineHeight:"13px"},"- Untracked files")),e(j.a,{class:R.a.legendRow},e(j.a,{class:h()(R.a.legendCircle,R.a.modified)}),e(j.a,{fs:12,lineHeight:"13px"},"- Modified files")),e(j.a,{class:R.a.legendRow},e(j.a,{class:h()(R.a.legendCircle,R.a.deleted)}),e(j.a,{fs:12,lineHeight:"13px"},"- Deleted files")),e(j.a,{class:R.a.legendRow},e(j.a,{class:h()(R.a.legendCircle,R.a.conflict)}),e(j.a,{fs:12,lineHeight:"13px"},"- Conflict in files")),e(j.a,{class:R.a.legendRow},e(j.a,{class:h()(R.a.legendCircle,R.a.mixed)}),e(j.a,{fs:12,lineHeight:"13px"},"- Multiple changes in files"))),className:R.a.legendsTooltip},e(j.a,{h:!0,vc:!0,class:R.a.changes},e("div",{class:R.a.circleChanges})," - With Changes"))," ",e("span",{className:h()({[R.a.update]:!0,[R.a.bold]:!0})},"U"),e("span",{className:h()(R.a.legendText,{[R.a.update]:Le})}," ","- Untracked (",Le,")"," "),e("span",{className:h()({[R.a.modified]:!0,[R.a.bold]:!0})},"M")," ",e("span",{className:h()(R.a.legendText,{[R.a.modified]:Oe})}," ","- Modified (",Oe,")"," "),e("span",{className:h()({[R.a.delete]:!0,[R.a.bold]:!0})},"D"),e("span",{className:h()(R.a.legendText,{[R.a.delete]:Te})}," ","- Deleted (",Te,")"," "),e("span",{className:h()({[R.a.conflict]:!0,[R.a.bold]:!0})},"C"),e("span",{className:h()(R.a.legendText,{[R.a.conflict]:xe})}," ","- Conflict (",xe,")"))))),Re&&e(j.a,{class:h()(R.a.syncComponentsContainer,{[R.a.syncComponentsContainerLightTheme]:a,[R.a.syncComponentsContainerDarkTheme]:!a})},e(j.a,{class:R.a.selectComponents},e(j.a,{class:R.a.selectHeader},e(j.a,{class:R.a.selectHeading},"Select Components",e(_.a,{noBg:a,enableArrow:!0,placement:"bottom",content:e("div",null,"Selecting a component will automatically select all dependencies.",e("br",null),"De-selecting a component will automatically de-select all dependents.")},e(j.c,a?{src:"/assets/studio/info.svg",width:12,height:12,ml:6}:{src:"/assets/studio/info.svg",ml:6})),!M.o()&&e(s,null))),e(l,null),e(j.a,{class:R.a.selectBody},Object(g.Ae)(It)>0&&e(n,null,It.map(((t,o)=>{const n=t.compName,i=D.p(t.id);return e(j.a,{class:h()(R.a.componentPill,{[R.a.selected]:i,[R.a.componentPillLightTheme]:a,[R.a.componentPillDarkTheme]:!a}),onClick:()=>D.w(t.id),key:`${t}--${o}`},e(j.c,{src:"/assets/studio/icon/icon_export_component_blue.svg",width:15,mr:4}),n)}))),Object(g.Ae)(It)<1&&e(j.a,{class:R.a.emptyComponents},e(j.a,{class:h()(R.a.emptyComponentsInner,{[R.a.emptyComponentsInnerLightTheme]:a})},e(j.c,{src:"/assets/components-review-muted.svg"}),e(j.e,{fs:12,mt:10},"You have no components"))))),e(j.a,{class:h()(R.a.syncComponentsFileExplorer,{[R.a.syncComponentsFileExplorerLightTheme]:a,[R.a.syncComponentsFileExplorerDarkTheme]:!a})},e(j.a,{class:h()(R.a.syncComponentsHeader,{[R.a.syncComponentsHeaderLightTheme]:a,[R.a.syncComponentsHeaderDarkTheme]:!a})},e(j.a,{class:R.a.filesHeading},e(j.a,{class:h()(R.a.filesIcon,{[R.a.fileIconLightTheme]:a,[R.a.fileIconDarkTheme]:!a})},e(j.c,{src:"/assets/icons/icon_directory_folder.svg"})),e(j.a,{color:a&&"#5E6A86"},"Files"))),e(j.a,{class:R.a.syncComponentsBody},Object(g.Ae)(Object(k.d)(St))<1?e(j.a,{class:R.a.noComponentsMsg},"No files to show for now :)",e("br",null),"Please select the components to push."):e(n,null,Y&&e(j.a,{class:h()(R.a.loadingContainer,R.a.syncComponentsLoading,{[R.a.loadingContainerLightTheme]:a,[R.a.loadingContainerDarkTheme]:!a,[R.a.syncComponentsLoadingLightTheme]:a})},e(T.c,{style:"width: 32px; height: 32px;"}),e(j.e,{color:"#96A2BE",fs:12,mt:8},yt.current>1?"Refactoring code...":"Loading...")),e(w.a,{mergeCompare:!0,conflictResolve:!0,heading:"Explorer",data:xt,children:null==xt?void 0:xt[u.Li],uncheckedItems:qe,isLocobook:a,locobookGithubFlow:a})))))),e(j.a,{className:R.a.footer},e(j.a,{inlineFlex:!0,vc:!0,mb:20},null!=z&&z.hasBranches&&ee.length?e(j.a,{inlineFlex:!0,vc:!0,className:h()({[R.a.prCheckMain]:!0,[R.a.prChecked]:!Pe,[R.a.prCheckMainLightTheme]:a})},e(j.a,{minW:145},e(f.a,{className:R.a.prCheck,checked:Pe,label:"Create a pull request",onChange:()=>{tt(""),nt(-1),We(!Pe)},dark:!0})),Pe&&e(j.a,{relative:!0},e(p.a,{placeholderItem:{value:"Choose base branch"},placeholderClass:h()(R.a.dropdownPlaceholder,{[R.a.seletedItem]:ot>=0,[R.a.dropdownPlaceholderLightTheme]:a}),items:ee,onItemSelect:(e,t)=>Vt(e,t,!1),selectedIndex:ot,className:a?R.a.dropdownContainerLightTheme:R.a.dropdownContainer,selectClass:h()(R.a.dropdownInput,{[R.a.dropdownInputLightTheme]:a}),popupMaxH:120,autoComplete:!0,noSelectionOnType:!0,isLocobook:a}),at&&e(j.a,{absB:-22,className:R.a.errorTextContainer},e(j.c,{src:"/assets/studio/icon/icon_info_red.svg",mr:"5px",mt:"1px"}),e("div",{className:R.a.errorText},"Please choose a base branch")))):null,e(C.a,{placeholder:"Enter your commit message (Optional)",value:Ze,onChange:e=>{Ge(e.target.value)},className:h()(R.a.inputGithub,{[R.a.inputGithubLightTheme]:a,[R.a.inputGithubDarkTheme]:!a})})),e(j.a,{className:R.a.footerSub},e(j.a,{h:!0,vc:!0},e(j.a,{width:130,mr:10},!a&&e(S.a,null)),!Y&&Ce&&!Re&&!a&&e("p",null,e(j.c,{src:"/assets/studio/icon/protip.svg"}),e("b",null,"Pro tip"),": ",Ce)),e("div",null,xe?e("button",{className:h()(R.a.btn,R.a.conflictBtn),onClick:()=>{Object(m.cc)(u.ok,vt),Zt("resolveConflicts")}},e(j.c,{src:"/assets/studio/resolve-conflicts.svg"}),"Resolve Conflicts"):e(j.a,{inlineFlex:!0},(!Re||Re&&Object(g.Ae)(St)>0)&&e(j.a,{mr:10},e("button",{disabled:Y||!ge||!Xt,className:h()(R.a.btn,R.a.conflictBtn,{[R.a.disabled]:Y||!ge||!Xt}),onClick:()=>{Object(m.cc)(u.ok,vt),Zt("reviewFiles")}},e(j.c,{src:"/assets/studio/resolve-conflicts.svg"}),"Review files")),e("button",{disabled:Y||!ge||Re&&Object(g.Ae)(St)<1,className:h()(R.a.btn,R.a.deployBtn,{[R.a.disabled]:Y||!ge||!Xt||Re&&Object(g.Ae)(St)<1}),onClick:Gt},G?e("div",{className:R.a.whiteLoading},e(T.c,{style:"width: 20px; height: 20px;"})):e(n,null,e(j.c,{src:"/assets/studio/github-push.svg"}),"Push to Github"))))))))}}).call(this,o("hosL").h,o("hosL").Fragment)}}]);
//# sourceMappingURL=19.chunk.4d2c9.esm.js.map